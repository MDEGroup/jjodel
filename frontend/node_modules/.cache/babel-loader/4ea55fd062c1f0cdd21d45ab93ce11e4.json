{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\forEndUser\\\\Try.tsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { compressToBase64, decompressFromBase64 } from \"async-lz-string\";\nimport { DV, Log, store, U } from '../../joiner';\nimport './style.scss';\n/*\r\n*   What's uncatched:\r\n*   - reducer\r\n*   - mapstatetoprops, if reducer doesn't do his job\r\n*\r\n*\r\n*\r\n*\r\n*\r\n* */\n\n// todo: after we have a server, instead of this, make an automatic error report with POST requests to the server without having the uri char limit\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass TryComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: undefined,\n      info: undefined,\n      stateUpdateTime: 0,\n      canUseClipboard: true\n    };\n  }\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      error,\n      info: undefined\n    }; // this first set an error and stops error propagation\n  }\n\n  postGitIssue(content) {\n    let owner = 'MDEGroup';\n    let repo = 'jjodel';\n    let obj = {\n      owner,\n      repo,\n      title: 'Automatic bug report',\n      body: content,\n      labels: ['bug', 'auto-bug'],\n      headers: {\n        'X-GitHub-Api-Version': '2022-11-28'\n      }\n    };\n    this.postBugReport(`https://api.github.com/repos/${owner}/${repo}/issues`, JSON.stringify(obj));\n  }\n  postBugReport(url, content) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url, true);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.send(content);\n  }\n  componentDidCatch(error, info) {\n    console.error(\"uncatched error didcatch:\", {\n      info\n    });\n    // this is called after error propagation and a full render cycle is complete, i use it to trigger a rerender with more accurate infos.\n    this.setState({\n      error,\n      info,\n      stateUpdateTime: this.props.stateUpdateTime\n    });\n  }\n  render() {\n    /*\r\n    if (this.props.stateUpdateTime !== this.state.stateUpdateTime) {\r\n        // after a redux state update try checking if error is gone\r\n        return this.props.children;\r\n    }*/\n    if (this.state.error) {\n      // You can render any custom fallback UI\n      return this.catch(this.state.error, this.state.info);\n    }\n    if (Array.isArray(this.props.children)) {\n      console.error(\"<Try /> can have only 1 subcomponent\", this.props.children, this);\n      return this.catch({\n        message: \"<Try /> can have only 1 subcomponent\"\n      }, undefined);\n    }\n    if (! /*#__PURE__*/React.isValidElement(this.props.children)) {\n      // You can render any custom fallback UI\n      console.error(\"Children is not a valid React Element\", this.props.children, this);\n      return this.catch({\n        message: \"Children is not a valid React Element\"\n      }, undefined);\n    }\n    return this.props.children;\n  }\n  reset() {\n    this.setState({\n      error: undefined,\n      info: undefined,\n      lz: undefined\n    });\n  }\n  catch(error, info) {\n    var _state$version;\n    console.error(\"uncatched error:\", {\n      state: {\n        ...this.state\n      }\n    });\n    let debug = false;\n    if (debug) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 26\n    }, this);\n    if (this.props.catch) {\n      try {\n        if (typeof this.props.catch === \"function\") return this.props.catch(error, info);\n        if ( /*#__PURE__*/React.isValidElement(this.props.catch)) return this.props.catch;\n      } catch (e) {\n        console.error(\"uncatched error WITH INVALID CATCHING FUNC\", {\n          catcherFuncError: e\n        });\n      }\n    }\n    let state = store.getState();\n    let title = \"Jodel assisted error report V\" + (state === null || state === void 0 ? void 0 : (_state$version = state.version) === null || _state$version === void 0 ? void 0 : _state$version.n);\n    window.tryerror = error;\n    let reportstr = this.state.lz || this.stringreport(Log.getByError(error));\n    const msgbody_notencoded = \"This mail is auto-generated, it might contain data of your views or model.\\n\" + \"If your project have sensitive personal information please do a manual report instead.\" +\n    // check the report below to omit them.\\n\\n\" +\n    \"\" + (error === null || error === void 0 ? void 0 : error.message) + \"\\n\\n\" + (reportstr ? 'logger report' + (this.state.lz ? ' (lz-base64)' : '') + ':\\n' + encodeURIComponent(reportstr) + '\\n\\n' : '') + \"_stack:\\n\" + U.cropStr(error.stack || '', 30, 0, 35, 15) + '\\n\\n' + \"_component_stack:\\n\" + (info ? U.cropStr(info.componentStack, 10, 0, 35, 5) : '');\n    let {\n      mailto,\n      gitissue\n    } = U.mailerror(TryComponent.mailRecipients, title, msgbody_notencoded, this.state.canUseClipboard, undefined, () => {\n      this.setState({\n        canUseClipboard: false\n      });\n    });\n    let shortErrorBody = ((error === null || error === void 0 ? void 0 : error.message) || \"\\n\").split(\"\\n\")[0];\n    let visibleMessage = /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => this.reset(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: info ? \"has info\" : \"###########\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"ut:\", this.state.stateUpdateTime, \", \", shortErrorBody]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"What you can try:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"- Undo the last change\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"- \", mailto && [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: mailto,\n            children: \"Mail the developers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 35\n          }, this), \" or\"], \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: gitissue,\n            target: \"_blank\",\n            children: \"open an issue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 85\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }, this), state.debug ? this.decompress() : undefined]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 41\n    }, this);\n    return DV.error_raw(visibleMessage, \"unhandled\");\n  }\n  decompress() {\n    function dec(e) {\n      e.stopPropagation();\n      let s = undefined,\n        s1 = undefined,\n        s2 = undefined,\n        o = undefined;\n      try {\n        s = e.target.value;\n      } catch (e) {\n        console.error(\"crashed decompress\", e);\n      }\n      try {\n        s1 = decodeURIComponent(s);\n      } catch (e) {\n        console.error(\"crashed decompress uri\", e);\n      }\n      try {\n        s2 = decompressFromBase64(s1);\n      } catch (e) {\n        console.error(\"crashed decompress lz\", e);\n      }\n      if (s2) {\n        s2.then(v => {\n          try {\n            o = JSON.parse(s2 = v);\n          } catch (e) {\n            console.error(\"crashed decompress p\", e, v);\n          }\n        }).finally(() => {\n          let out = {\n            s,\n            uri: s1,\n            lz: s2,\n            o\n          };\n          console.log('decompress final', out);\n          $('#decompress')[0].innerText = JSON.stringify(o || out, null, 4);\n        });\n      } else {\n        let out = {\n          s,\n          uri: s1,\n          lz: s2,\n          o\n        };\n        console.log('decompress else', out);\n        $('#decompress')[0].innerText = JSON.stringify(o || out, null, 4);\n      }\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Debug mode: paste error report to decompress it.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"w-100\",\n        onChange: dec\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 80\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        id: \"decompress\",\n        className: \"w-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 136\n      }, this)]\n    }, void 0, true);\n  }\n  stringreport(loggerReport0) {\n    if (!loggerReport0) return undefined;\n    let loggerReport = {\n      ...loggerReport0\n    };\n    window.loggerReport = loggerReport;\n    delete loggerReport.exception;\n    loggerReport = U.cropDeepObject(loggerReport);\n    loggerReport.time = loggerReport0.time; // do not \"crop\" timestamp\n    delete loggerReport.short_string;\n    let s = JSON.stringify(U.cropDeepObject(loggerReport));\n    /*(window as any).compressToUTF16 = compressToUTF16;\r\n    (window as any).decompressFromUTF16 = decompressFromUTF16;\r\n    (window as any).compressToBase64 = compressToBase64;\r\n    (window as any).decompressFromBase64 = decompressFromBase64;\r\n    (window as any).ss = s;*/\n    // or: LZString.compressToBase64()\n    if (s.length > 100) compressToBase64(s).then(v => this.setState({\n      lz: v\n    }));\n    return s;\n  }\n}\nTryComponent.cname = \"TryComponent\";\nTryComponent.mailRecipients = [\"damiano.divincenzo@student.univaq.it\", \"giordano.tinella@student.univaq.it\"];\nlet rendercount = 0;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.stateUpdateTime = rendercount++; // new Date().getTime();\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nconst TryConnected = connect(mapStateToProps, mapDispatchToProps)(TryComponent);\nexport function Try(props) {\n  return /*#__PURE__*/_jsxDEV(TryConnected, {\n    ...props,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 12\n  }, this);\n}\n_c = Try;\nTryComponent.cname = 'TryComponent';\nTryConnected.cname = 'TryConnected';\nTry.cname = 'Try';\nvar _c;\n$RefreshReg$(_c, \"Try\");","map":{"version":3,"names":["React","connect","compressToBase64","decompressFromBase64","DV","Log","store","U","jsxDEV","_jsxDEV","Fragment","_Fragment","TryComponent","Component","constructor","props","state","error","undefined","info","stateUpdateTime","canUseClipboard","getDerivedStateFromError","postGitIssue","content","owner","repo","obj","title","body","labels","headers","postBugReport","JSON","stringify","url","xhr","XMLHttpRequest","open","setRequestHeader","send","componentDidCatch","console","setState","render","catch","Array","isArray","children","message","isValidElement","reset","lz","_state$version","debug","fileName","_jsxFileName","lineNumber","columnNumber","e","catcherFuncError","getState","version","n","window","tryerror","reportstr","stringreport","getByError","msgbody_notencoded","encodeURIComponent","cropStr","stack","componentStack","mailto","gitissue","mailerror","mailRecipients","shortErrorBody","split","visibleMessage","onClick","href","target","decompress","error_raw","dec","stopPropagation","s","s1","s2","o","value","decodeURIComponent","then","v","parse","finally","out","uri","log","$","innerText","className","onChange","id","loggerReport0","loggerReport","exception","cropDeepObject","time","short_string","length","cname","rendercount","mapStateToProps","ownProps","ret","mapDispatchToProps","dispatch","TryConnected","Try","_c","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/forEndUser/Try.tsx"],"sourcesContent":["import React, {Dispatch, ErrorInfo, KeyboardEvent, ReactElement, ReactNode} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DState} from '../../redux/store';\r\nimport {compressToBase64, compressToUTF16, decompressFromBase64, decompressFromUTF16} from \"async-lz-string\";\r\nimport {\r\n    Defaults,\r\n    DPointerTargetable,\r\n    DV,\r\n    GObject,\r\n    Keystrokes,\r\n    Log,\r\n    LPointerTargetable,\r\n    Overlap,\r\n    Pointer, store,\r\n    U, LoggerCategoryState\r\n} from '../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport './style.scss';\r\n/*\r\n*   What's uncatched:\r\n*   - reducer\r\n*   - mapstatetoprops, if reducer doesn't do his job\r\n*\r\n*\r\n*\r\n*\r\n*\r\n* */\r\n\r\n// todo: after we have a server, instead of this, make an automatic error report with POST requests to the server without having the uri char limit\r\nclass TryComponent extends React.Component<AllProps, State> {\r\n    static cname: string = \"TryComponent\";\r\n    static mailRecipients = [\"damiano.divincenzo@student.univaq.it\", \"giordano.tinella@student.univaq.it\"];\r\n\r\n    constructor(props: AllProps) {\r\n        super(props);\r\n        this.state = { error: undefined, info: undefined, stateUpdateTime: 0, canUseClipboard: true};\r\n    }\r\n\r\n    static getDerivedStateFromError(error: Error) {\r\n        // Update state so the next render will show the fallback UI.\r\n        return { error, info: undefined }; // this first set an error and stops error propagation\r\n    }\r\n\r\n    private postGitIssue(content: string){\r\n        let owner = 'MDEGroup';\r\n        let repo = 'jjodel';\r\n        let obj = {\r\n            owner,\r\n            repo,\r\n            title: 'Automatic bug report',\r\n            body: content,\r\n            labels: [\r\n                'bug', 'auto-bug'\r\n            ],\r\n            headers: {\r\n                'X-GitHub-Api-Version': '2022-11-28'\r\n            }\r\n        }\r\n        this.postBugReport(`https://api.github.com/repos/${owner}/${repo}/issues`, JSON.stringify(obj));\r\n\r\n    }\r\n    private postBugReport(url: string, content: string){\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", url, true);\r\n        xhr.setRequestHeader('Content-Type', 'application/json');\r\n        xhr.send(content);\r\n    }\r\n\r\n    componentDidCatch(error: Error, info: React.ErrorInfo): void {\r\n        console.error(\"uncatched error didcatch:\", {info});\r\n        // this is called after error propagation and a full render cycle is complete, i use it to trigger a rerender with more accurate infos.\r\n        this.setState({error, info, stateUpdateTime: this.props.stateUpdateTime});\r\n    }\r\n\r\n    render() {\r\n        /*\r\n        if (this.props.stateUpdateTime !== this.state.stateUpdateTime) {\r\n            // after a redux state update try checking if error is gone\r\n            return this.props.children;\r\n        }*/\r\n        if (this.state.error) {\r\n            // You can render any custom fallback UI\r\n            return this.catch(this.state.error, this.state.info);\r\n        }\r\n        if (Array.isArray(this.props.children)) {\r\n            console.error(\"<Try /> can have only 1 subcomponent\", this.props.children, this);\r\n            return this.catch({message: \"<Try /> can have only 1 subcomponent\"} as any, undefined);\r\n\r\n        }\r\n        if (!React.isValidElement(this.props.children)) {\r\n            // You can render any custom fallback UI\r\n            console.error(\"Children is not a valid React Element\", this.props.children, this);\r\n            return this.catch({message: \"Children is not a valid React Element\"} as any, undefined);\r\n        }\r\n        return this.props.children;\r\n    }\r\n    reset(){\r\n        this.setState({error:undefined, info: undefined, lz: undefined});\r\n    }\r\n\r\n    catch(error: Error, info?: React.ErrorInfo): ReactNode{\r\n        console.error(\"uncatched error:\", {state:{...this.state}});\r\n        let debug = false;\r\n        if (debug) return<div>error</div>;\r\n        if (this.props.catch) {\r\n            try {\r\n                if (typeof this.props.catch === \"function\") return this.props.catch(error, info);\r\n                if (React.isValidElement(this.props.catch)) return this.props.catch;\r\n            }\r\n            catch (e) {\r\n                console.error(\"uncatched error WITH INVALID CATCHING FUNC\", {catcherFuncError:e});\r\n            }\r\n        }\r\n\r\n\r\n        let state: DState = store.getState();\r\n        let title = \"Jodel assisted error report V\"+state?.version?.n;\r\n        (window as any).tryerror = error;\r\n        let reportstr = this.state.lz || this.stringreport(Log.getByError(error));\r\n\r\n        const msgbody_notencoded: string = \"This mail is auto-generated, it might contain data of your views or model.\\n\" +\r\n            \"If your project have sensitive personal information please do a manual report instead.\"+// check the report below to omit them.\\n\\n\" +\r\n            \"\" + error?.message + \"\\n\\n\" +\r\n            (reportstr ? 'logger report'+(this.state.lz ? ' (lz-base64)' : '')+':\\n' + encodeURIComponent(reportstr) +'\\n\\n' : '') +\r\n            \"_stack:\\n\" + U.cropStr(error.stack || '', 30, 0, 35, 15) + '\\n\\n'+\r\n            \"_component_stack:\\n\" + (info ? U.cropStr(info.componentStack, 10, 0, 35, 5) : '');\r\n\r\n        let {mailto, gitissue} = U.mailerror(TryComponent.mailRecipients, title, msgbody_notencoded, this.state.canUseClipboard,\r\n            undefined, ()=>{this.setState({canUseClipboard: false})});\r\n\r\n        let shortErrorBody = (error?.message || \"\\n\").split(\"\\n\")[0];\r\n        let visibleMessage: ReactNode = <div onClick={()=> this.reset()}>\r\n            <div>{info ? \"has info\": \"###########\"}</div>\r\n            <div>ut:{this.state.stateUpdateTime}, { shortErrorBody }</div>\r\n            <div>What you can try:</div>\r\n            <ul>\r\n                <li>- Undo the last change</li>\r\n                <li>- {mailto && [<a href={mailto}>Mail the developers</a>, \" or\"]} <a href={gitissue} target=\"_blank\">open an issue</a></li>\r\n            </ul>\r\n            {state.debug ? this.decompress() : undefined}\r\n        </div>\r\n        return DV.error_raw(visibleMessage, \"unhandled\");\r\n    }\r\n\r\n    decompress(){\r\n        function dec(e:any){\r\n            e.stopPropagation();\r\n            let s: any=undefined, s1: any=undefined, s2:Promise<string>=undefined as any, o: any=undefined;\r\n            try { s = e.target.value; } catch (e) {\r\n                console.error(\"crashed decompress\", e);\r\n            }\r\n            try { s1 = decodeURIComponent(s); } catch (e) {\r\n                console.error(\"crashed decompress uri\", e);\r\n            }\r\n            try { s2 = decompressFromBase64(s1); } catch (e) {\r\n                console.error(\"crashed decompress lz\", e);\r\n            }\r\n            if (s2) {s2.then(v=> {\r\n                try { o = JSON.parse(s2=v as any) } catch (e) { console.error(\"crashed decompress p\", e, v); }\r\n            }).finally(()=>{\r\n                let out = {s, uri:s1, lz:s2, o};\r\n                console.log('decompress final', out);\r\n                $('#decompress')[0].innerText = JSON.stringify(o ||  out, null, 4);\r\n\r\n            })} else {\r\n                let out = {s, uri:s1, lz:s2, o};\r\n                console.log('decompress else', out);\r\n                $('#decompress')[0].innerText = JSON.stringify(o ||  out, null, 4);\r\n            }\r\n        }\r\n        return (<><span>Debug mode: paste error report to decompress it.</span><textarea className={\"w-100\"} onChange={dec}></textarea><textarea id={\"decompress\"} className={\"w-100\"} /></>);\r\n    }\r\n\r\n\r\n    private stringreport(loggerReport0?: GObject): string | undefined{\r\n        if (!loggerReport0) return undefined;\r\n        let loggerReport = {...loggerReport0};\r\n        (window as any).loggerReport = loggerReport;\r\n        delete loggerReport.exception;\r\n        loggerReport = U.cropDeepObject(loggerReport);\r\n        loggerReport.time = loggerReport0.time; // do not \"crop\" timestamp\r\n        delete loggerReport.short_string\r\n        let s = JSON.stringify(U.cropDeepObject(loggerReport));\r\n        /*(window as any).compressToUTF16 = compressToUTF16;\r\n        (window as any).decompressFromUTF16 = decompressFromUTF16;\r\n        (window as any).compressToBase64 = compressToBase64;\r\n        (window as any).decompressFromBase64 = decompressFromBase64;\r\n        (window as any).ss = s;*/\r\n        // or: LZString.compressToBase64()\r\n        if (s.length > 100) compressToBase64(s).then((v)=> this.setState({lz:v}));\r\n        return s;\r\n    }\r\n}\r\ninterface State{\r\n    error?: Error;\r\n    info?: React.ErrorInfo;\r\n    stateUpdateTime: number;\r\n    canUseClipboard: boolean;\r\n    lz?: string;\r\n}\r\ninterface OwnProps {\r\n    key?: React.Key | null;\r\n    catch?: ReactNode | ((error: Error, info?: React.ErrorInfo) => ReactNode);\r\n    children: ReactNode;\r\n}\r\ninterface StateProps {\r\n    stateUpdateTime: number;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = Overlap<OwnProps, Overlap<StateProps, DispatchProps>>;\r\n\r\nlet rendercount: number = 0;\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    ret.stateUpdateTime = rendercount++; // new Date().getTime();\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nconst TryConnected =\r\n    connect<StateProps, DispatchProps, OwnProps, DState>(mapStateToProps, mapDispatchToProps)(TryComponent);\r\n\r\n\r\nexport function Try(props: OwnProps): ReactElement {\r\n    return <TryConnected {...{...props}}>{props.children}</TryConnected>;\r\n}\r\n\r\nTryComponent.cname = 'TryComponent';\r\nTryConnected.cname = 'TryConnected';\r\nTry.cname = 'Try';\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}