{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport './App.scss';\nimport './styles/view.scss';\nimport './styles/style.scss';\nimport { DUser, LUser, SetRootFieldAction, statehistory, stateInitializer } from \"./joiner\";\nimport { connect } from \"react-redux\";\nimport Loader from \"./components/loader/Loader\";\nimport Dashboard from \"./pages/Dashboard\";\nimport EditorPage from \"./pages/Editor\";\nimport AuthPage from \"./pages/Auth\";\nimport { useEffectOnce } from \"usehooks-ts\";\nimport { HashRouter, Route, Routes } from 'react-router-dom';\nimport PathChecker from \"./components/pathChecker/PathChecker\";\nimport { AuthApi } from \"./api/persistance\";\nimport AllProjectsPage from \"./pages/AllProjects\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet userHasInteracted = false;\nfunction endPendingActions() {\n  if (!userHasInteracted) firstInteraction();\n}\nfunction firstInteraction() {\n  statehistory.globalcanundostate = true;\n}\nfunction App(props) {\n  _s();\n  const debug = props.debug;\n  const isLoading = props.isLoading;\n  const tooltip = props.tooltip;\n  let user = props.user;\n  useEffectOnce(() => {\n    SetRootFieldAction.new('isLoading', true);\n    stateInitializer().then(() => SetRootFieldAction.new('isLoading', false));\n    /* Offline by default */\n    if (!DUser.current) AuthApi.offline();\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(HashRouter, {\n      children: [/*#__PURE__*/_jsxDEV(PathChecker, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [DUser.current && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: 'project',\n            element: /*#__PURE__*/_jsxDEV(EditorPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 54\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: 'allProjects',\n            element: /*#__PURE__*/_jsxDEV(AllProjectsPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: '*',\n            element: /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(Route, {\n          path: '*',\n          element: /*#__PURE__*/_jsxDEV(AuthPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n\n  /*\r\n  if (user) {\r\n      return(<div className={'d-flex flex-column h-100 p-1 REACT-ROOT' + (props.debug ? ' debug' : '')}\r\n                  onClick={e => statehistory.globalcanundostate = true}>\r\n          {isLoading && <Loader />}\r\n          {tooltip && <ToolTip />}\r\n          <Navbar />\r\n          <Helper />\r\n          {(project) ? (project.type === 'collaborative' && !DUser.offlineMode) ? <CollaborativeAttacher project={project} /> : <Editor /> : <Dashboard />}\r\n      </div>);\r\n  } else {\r\n      return(<>\r\n          {isLoading && <Loader />}\r\n          <Auth />\r\n      </>);\r\n  }\r\n  */\n}\n_s(App, \"CDxPF1ymP5P7fskLwxmw8nmIJ1w=\", false, function () {\n  return [useEffectOnce];\n});\n_c = App;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.debug = state.debug;\n  ret.isLoading = state.isLoading;\n  ret.user = LUser.fromPointer(DUser.current);\n  // needed here as props, because apparently functional components are memoized by default.\n  ret.offlineMode = DUser.offlineMode;\n  ret.tooltip = state.tooltip;\n  console.log(\"app re mapstate\", {\n    u: DUser.current,\n    o: DUser.offlineMode\n  });\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const AppConnected = connect(mapStateToProps, mapDispatchToProps)(App);\nexport default AppConnected;\n\n/* SPLASH SCREEN\r\nreturn(<div className={'w-100 h-100 text-center bg-smoke'}>\r\n    <img style={{height: '60%', width: '80%'}} className={'mt-3 rounded shadow'} src={SplashImage}></img>\r\n    <Oval height={80} width={80} wrapperStyle={{justifyContent: 'center'}} wrapperClass={'mt-3'}\r\n          color={'#475e6c'} secondaryColor={'#ff8811'} />\r\n</div>);\r\n*/\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","DUser","LUser","SetRootFieldAction","statehistory","stateInitializer","connect","Loader","Dashboard","EditorPage","AuthPage","useEffectOnce","HashRouter","Route","Routes","PathChecker","AuthApi","AllProjectsPage","jsxDEV","_jsxDEV","Fragment","_Fragment","userHasInteracted","endPendingActions","firstInteraction","globalcanundostate","App","props","_s","debug","isLoading","tooltip","user","new","then","current","offline","children","fileName","_jsxFileName","lineNumber","columnNumber","path","element","_c","mapStateToProps","state","ownProps","ret","fromPointer","offlineMode","console","log","u","o","mapDispatchToProps","dispatch","AppConnected","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/App.tsx"],"sourcesContent":["import React, {Dispatch, useState} from 'react';\r\nimport './App.scss';\r\nimport './styles/view.scss';\r\nimport './styles/style.scss';\r\nimport {DState, DUser, LUser, SetRootFieldAction, statehistory, stateInitializer, U} from \"./joiner\";\r\nimport {connect} from \"react-redux\";\r\nimport Loader from \"./components/loader/Loader\";\r\nimport {FakeStateProps} from \"./joiner/types\";\r\nimport Dashboard from \"./pages/Dashboard\";\r\nimport EditorPage from \"./pages/Editor\";\r\nimport AuthPage from \"./pages/Auth\";\r\nimport {useEffectOnce} from \"usehooks-ts\";\r\nimport {HashRouter, Route, Routes} from 'react-router-dom';\r\nimport PathChecker from \"./components/pathChecker/PathChecker\";\r\nimport {AuthApi} from \"./api/persistance\";\r\nimport AllProjectsPage from \"./pages/AllProjects\";\r\n\r\nlet userHasInteracted = false;\r\nfunction endPendingActions() {\r\n    if (!userHasInteracted) firstInteraction();\r\n}\r\nfunction firstInteraction(){\r\n    statehistory.globalcanundostate = true;\r\n}\r\n\r\nfunction App(props: AllProps): JSX.Element {\r\n    const debug = props.debug;\r\n    const isLoading = props.isLoading;\r\n    const tooltip = props.tooltip;\r\n    let user: LUser = props.user;\r\n\r\n    useEffectOnce(() => {\r\n        SetRootFieldAction.new('isLoading', true);\r\n        stateInitializer().then(() => SetRootFieldAction.new('isLoading', false));\r\n        /* Offline by default */\r\n        if(!DUser.current) AuthApi.offline();\r\n    });\r\n\r\n    return(<>\r\n        {isLoading && <Loader />}\r\n        <HashRouter>\r\n            <PathChecker />\r\n            <Routes>\r\n                {DUser.current && <>\r\n                    <Route path={'project'} element={<EditorPage />} />\r\n                    <Route path={'allProjects'} element={<AllProjectsPage />} />\r\n                    <Route path={'*'} element={<Dashboard />} />\r\n                </>}\r\n                <Route path={'*'} element={<AuthPage />} />\r\n                {/*<Route path={'*'} element={<Loader />} />*/}\r\n            </Routes>\r\n        </HashRouter>\r\n    </>);\r\n\r\n    /*\r\n    if (user) {\r\n        return(<div className={'d-flex flex-column h-100 p-1 REACT-ROOT' + (props.debug ? ' debug' : '')}\r\n                    onClick={e => statehistory.globalcanundostate = true}>\r\n            {isLoading && <Loader />}\r\n            {tooltip && <ToolTip />}\r\n            <Navbar />\r\n            <Helper />\r\n            {(project) ? (project.type === 'collaborative' && !DUser.offlineMode) ? <CollaborativeAttacher project={project} /> : <Editor /> : <Dashboard />}\r\n        </div>);\r\n    } else {\r\n        return(<>\r\n            {isLoading && <Loader />}\r\n            <Auth />\r\n        </>);\r\n    }\r\n    */\r\n}\r\n\r\ninterface OwnProps {room?: string}\r\ninterface StateProps {\r\n    offlineMode: boolean,\r\n    debug: boolean,\r\n    isLoading: boolean\r\n    tooltip: string,\r\n    user: LUser\r\n}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.debug = state.debug;\r\n    ret.isLoading = state.isLoading;\r\n    ret.user = LUser.fromPointer(DUser.current);\r\n    // needed here as props, because apparently functional components are memoized by default.\r\n    ret.offlineMode = DUser.offlineMode;\r\n    ret.tooltip = state.tooltip;\r\n    console.log(\"app re mapstate\", {u:DUser.current, o:DUser.offlineMode});\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nexport const AppConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(App);\r\n\r\nexport default AppConnected;\r\n\r\n\r\n/* SPLASH SCREEN\r\nreturn(<div className={'w-100 h-100 text-center bg-smoke'}>\r\n    <img style={{height: '60%', width: '80%'}} className={'mt-3 rounded shadow'} src={SplashImage}></img>\r\n    <Oval height={80} width={80} wrapperStyle={{justifyContent: 'center'}} wrapperClass={'mt-3'}\r\n          color={'#475e6c'} secondaryColor={'#ff8811'} />\r\n</div>);\r\n*/\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}