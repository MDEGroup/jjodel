{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\rightbar\\\\oclEditor\\\\OclEditor.tsx\",\n  _s = $RefreshSig$(),\n  _this = this;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Editor from '@monaco-editor/react';\nimport { LViewElement, Defaults } from '../../../joiner';\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OclEditorComponent(props) {\n  _s();\n  const view = props.view;\n  const [ocl, setOcl] = useStateIfMounted(view.oclCondition);\n  const [show, setShow] = useStateIfMounted(true);\n  const [expand, setExpand] = useStateIfMounted(false);\n  if (!view) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  const readOnly = props.readonly !== undefined ? props.readonly : Defaults.check(view.id);\n  const change = value => {\n    // save in local state for frequent changes.\n    if (value !== undefined) setOcl(value);\n  };\n  const blur = () => {\n    view.oclCondition = ocl;\n  }; // confirm in redux state for final state\n\n  const lines = Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length * 1.8) < 5 ? 10 : Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length * 1.8);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...(props.style || {})\n      },\n      className: 'cursor-pointer d-flex',\n      onClick: e => setShow(!show),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: 'chevron-holder',\n        tabIndex: -1,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: 'bi bi-chevron-' + (show ? 'down' : 'right')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'editor-label',\n        children: \"OCL Editor \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }, this), show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"monaco-editor-wrapper\",\n      style: {\n        padding: '5px',\n        minHeight: '20px',\n        height: `${expand ? lines + 'lvh' : '5lvh'}`,\n        transition: 'height 0.3s',\n        resize: 'vertical',\n        overflow: 'hidden'\n      },\n      tabIndex: -1,\n      onFocus: () => setExpand(true),\n      onBlur: () => {\n        setExpand(false);\n        blur();\n      },\n      children: /*#__PURE__*/_jsxDEV(Editor, {\n        className: 'mx-1',\n        onChange: change,\n        options: {\n          fontSize: 12,\n          scrollbar: {\n            vertical: 'hidden',\n            horizontalScrollbarSize: 5\n          },\n          minimap: {\n            enabled: false\n          },\n          readOnly: readOnly\n        },\n        defaultLanguage: 'js',\n        value: view.oclCondition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true);\n}\n_s(OclEditorComponent, \"zYxtcs47mXcsCy7BJw0p3S9sCZ4=\", false, function () {\n  return [useStateIfMounted, useStateIfMounted, useStateIfMounted];\n});\n_c = OclEditorComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.view = LViewElement.fromPointer(ownProps.viewID);\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const OclEditorConnected = connect(mapStateToProps, mapDispatchToProps)(OclEditorComponent);\nexport const OclEditor = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(OclEditorConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = OclEditor;\nOclEditorComponent.cname = 'OclEditorComponent';\nOclEditorConnected.cname = 'OclEditorConnected';\nOclEditor.cname = 'OclEditor';\nexport default OclEditor;\nvar _c, _c2;\n$RefreshReg$(_c, \"OclEditorComponent\");\n$RefreshReg$(_c2, \"OclEditor\");","map":{"version":3,"names":["React","connect","Editor","LViewElement","Defaults","useStateIfMounted","Fragment","_Fragment","jsxDEV","_jsxDEV","OclEditorComponent","props","_s","view","ocl","setOcl","oclCondition","show","setShow","expand","setExpand","readOnly","readonly","undefined","check","id","change","value","blur","lines","Math","round","split","length","children","style","className","onClick","e","tabIndex","fileName","_jsxFileName","lineNumber","columnNumber","padding","minHeight","height","transition","resize","overflow","onFocus","onBlur","onChange","options","fontSize","scrollbar","vertical","horizontalScrollbarSize","minimap","enabled","defaultLanguage","_c","mapStateToProps","state","ownProps","ret","fromPointer","viewID","mapDispatchToProps","dispatch","OclEditorConnected","OclEditor","arguments","_this","_c2","cname","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/oclEditor/OclEditor.tsx"],"sourcesContent":["import React, {CSSProperties, Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Editor from '@monaco-editor/react';\r\nimport {DState, DViewElement, LViewElement, Pointer, Defaults} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\nimport { Btn, CommandBar } from '../../commandbar/CommandBar';\r\n\r\nfunction OclEditorComponent(props: AllProps) {\r\n    const view = props.view;\r\n    const [ocl, setOcl] = useStateIfMounted(view.oclCondition);\r\n    const [show, setShow] = useStateIfMounted(true);\r\n\r\n    const [expand, setExpand] = useStateIfMounted(false);\r\n\r\n    if(!view) return(<></>);\r\n    const readOnly = props.readonly !== undefined ? props.readonly : Defaults.check(view.id);\r\n    const change = (value: string|undefined) => { // save in local state for frequent changes.\r\n        if(value !== undefined) setOcl(value);\r\n    }\r\n    const blur = () => { view.oclCondition = ocl } // confirm in redux state for final state\r\n\r\n    const lines = (Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length*1.8) < 5 ? 10 : Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length*1.8));\r\n\r\n    return(<>\r\n        <div style={{...(props.style || {})}} className={'cursor-pointer d-flex'} onClick={e => setShow(!show)}>\r\n            <span className={'chevron-holder'} tabIndex={-1} >\r\n                <i className={'bi bi-chevron-' + (show ? 'down' : 'right')} />\r\n                {/*show ? <i className={'bi bi-eye-fill'} /> : <i className={'bi bi-eye-slash-fill'} /> */}\r\n            </span>\r\n            <label className={'editor-label'}>\r\n                OCL Editor {/*(OCL engine by Stephan KÃ¶ninger,\r\n                <a className={'ms-1'} target={'_blank'} href={'https://ocl.stekoe.de/#examples'}>Supported instructions</a>)*/}\r\n            </label>\r\n            {/* show && <CommandBar style={{paddingTop: '10px'}}>\r\n                {expand ? \r\n                    <Btn icon={'shrink'} action={(e) => {setExpand(false); setShow(true)}} tip={'Minimize editor'}/>\r\n                    :\r\n                    <Btn icon={'expand'} action={(e) => {setExpand(true); setShow(true)}} tip={'Enlarge editor'}/>\r\n                }\r\n            </CommandBar>*/}\r\n        </div>\r\n\r\n        {show && <div className={\"monaco-editor-wrapper\"}\r\n                style={{padding: '5px', minHeight: '20px', height:`${expand ? lines+'lvh' : '5lvh'}`, transition: 'height 0.3s', resize: 'vertical', overflow:'hidden'}}\r\n                      tabIndex={-1} \r\n                      onFocus={() => setExpand(true)}\r\n                    onBlur={() => {setExpand(false);blur()}}>\r\n            <Editor className={'mx-1'} onChange={change}\r\n                    options={{fontSize: 12, scrollbar: {vertical: 'hidden', horizontalScrollbarSize: 5}, minimap: {enabled: false}, readOnly: readOnly}}\r\n                    defaultLanguage={'js'} value={view.oclCondition} />\r\n        </div>}\r\n    </>);\r\n}\r\ninterface OwnProps {\r\n    readonly?: boolean;\r\n    viewID: Pointer<DViewElement, 1, 1, LViewElement>;\r\n    style?: CSSProperties;\r\n}\r\ninterface StateProps { view: LViewElement }\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.view = LViewElement.fromPointer(ownProps.viewID);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const OclEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(OclEditorComponent);\r\n\r\nexport const OclEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <OclEditorConnected {...{...props, children}} />;\r\n}\r\n\r\nOclEditorComponent.cname = 'OclEditorComponent';\r\nOclEditorConnected.cname = 'OclEditorConnected';\r\nOclEditor.cname = 'OclEditor';\r\nexport default OclEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}