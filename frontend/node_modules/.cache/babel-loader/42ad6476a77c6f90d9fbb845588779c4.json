{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PropertyContextExpression = void 0;\nvar InitExpression_1 = require(\"../InitExpression\");\nvar DeriveExpression_1 = require(\"../DeriveExpression\");\nvar Utils_1 = require(\"../../Utils\");\nvar ContextExpression_1 = require(\"./ContextExpression\");\n/**\n * A PropertyContextDefinition allows to initialize or derive a value for the targeted property.\n *\n * @oclExpression context Person::age (init|derive)\n */\nvar PropertyContextExpression = /** @class */function (_super) {\n  __extends(PropertyContextExpression, _super);\n  function PropertyContextExpression(targetType, rules) {\n    var _this = _super.call(this) || this;\n    var split = targetType.split('::');\n    _this.targetType = split[0];\n    _this.propertyName = split[1];\n    if (!(rules instanceof Array)) {\n      rules = [rules];\n    }\n    _this.inits = rules.filter(function (i) {\n      return i instanceof InitExpression_1.InitExpression;\n    });\n    _this.derived = rules.filter(function (i) {\n      return i instanceof DeriveExpression_1.DeriveExpression;\n    });\n    return _this;\n  }\n  PropertyContextExpression.prototype.getInits = function () {\n    return this.inits;\n  };\n  PropertyContextExpression.prototype.getDerived = function () {\n    return this.derived;\n  };\n  PropertyContextExpression.prototype.getPropertyName = function () {\n    return this.propertyName;\n  };\n  PropertyContextExpression.prototype.accept = function (visitor) {\n    return Utils_1.Utils.getClassName(visitor.getObjectToEvaluate()) === this.targetType;\n  };\n  PropertyContextExpression.prototype.evaluate = function (visitor) {\n    var _this = this;\n    _super.prototype.evaluate.call(this, visitor);\n    this.getInits().forEach(function (init) {\n      visitor.getObjectToEvaluate()[_this.getPropertyName()] = init.evaluate(visitor);\n    });\n    this.getDerived().forEach(function (derive) {\n      visitor.getObjectToEvaluate()[_this.getPropertyName()] = derive.evaluate(visitor);\n    });\n    return true;\n  };\n  return PropertyContextExpression;\n}(ContextExpression_1.ContextExpression);\nexports.PropertyContextExpression = PropertyContextExpression;","map":{"version":3,"names":["InitExpression_1","require","DeriveExpression_1","Utils_1","ContextExpression_1","PropertyContextExpression","_super","__extends","targetType","rules","_this","call","split","propertyName","Array","inits","filter","i","InitExpression","derived","DeriveExpression","prototype","getInits","getDerived","getPropertyName","accept","visitor","Utils","getClassName","getObjectToEvaluate","evaluate","forEach","init","derive","ContextExpression","exports"],"sources":["../../../../lib/components/expressions/context/PropertyContextExpression.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AAIA,IAAAG,mBAAA,GAAAH,OAAA;AAEA;;;;;AAKA,IAAAI,yBAAA,0BAAAC,MAAA;EAA+CC,SAAA,CAAAF,yBAAA,EAAAC,MAAA;EAK3C,SAAAD,0BAAYG,UAAU,EAAEC,KAAK;IAA7B,IAAAC,KAAA,GACIJ,MAAA,CAAAK,IAAA,MAAO;IAEP,IAAMC,KAAK,GAAGJ,UAAU,CAACI,KAAK,CAAC,IAAI,CAAC;IACpCF,KAAI,CAACF,UAAU,GAAGI,KAAK,CAAC,CAAC,CAAC;IAC1BF,KAAI,CAACG,YAAY,GAAGD,KAAK,CAAC,CAAC,CAAC;IAE5B,IAAI,EAAEH,KAAK,YAAYK,KAAK,CAAC,EAAE;MAC3BL,KAAK,GAAG,CAACA,KAAK,CAAC;;IAGnBC,KAAI,CAACK,KAAK,GAAGN,KAAK,CAACO,MAAM,CAAC,UAAAC,CAAC;MAAI,OAAAA,CAAC,YAAYjB,gBAAA,CAAAkB,cAAc;IAA3B,CAA2B,CAAC;IAC3DR,KAAI,CAACS,OAAO,GAAGV,KAAK,CAACO,MAAM,CAAC,UAAAC,CAAC;MAAI,OAAAA,CAAC,YAAYf,kBAAA,CAAAkB,gBAAgB;IAA7B,CAA6B,CAAC;;EACnE;EAEAf,yBAAA,CAAAgB,SAAA,CAAAC,QAAQ,GAAR;IACI,OAAO,IAAI,CAACP,KAAK;EACrB,CAAC;EAEDV,yBAAA,CAAAgB,SAAA,CAAAE,UAAU,GAAV;IACI,OAAO,IAAI,CAACJ,OAAO;EACvB,CAAC;EAEDd,yBAAA,CAAAgB,SAAA,CAAAG,eAAe,GAAf;IACI,OAAO,IAAI,CAACX,YAAY;EAC5B,CAAC;EAEDR,yBAAA,CAAAgB,SAAA,CAAAI,MAAM,GAAN,UAAOC,OAA4B;IAC/B,OAAOvB,OAAA,CAAAwB,KAAK,CAACC,YAAY,CAACF,OAAO,CAACG,mBAAmB,EAAE,CAAC,KAAK,IAAI,CAACrB,UAAU;EAChF,CAAC;EAEDH,yBAAA,CAAAgB,SAAA,CAAAS,QAAQ,GAAR,UAASJ,OAA4B;IAArC,IAAAhB,KAAA;IACIJ,MAAA,CAAAe,SAAA,CAAMS,QAAQ,CAAAnB,IAAA,OAACe,OAAO,CAAC;IAEvB,IAAI,CAACJ,QAAQ,EAAE,CAACS,OAAO,CAAC,UAAAC,IAAI;MACxBN,OAAO,CAACG,mBAAmB,EAAE,CAACnB,KAAI,CAACc,eAAe,EAAE,CAAC,GAAGQ,IAAI,CAACF,QAAQ,CAACJ,OAAO,CAAC;IAClF,CAAC,CAAC;IAEF,IAAI,CAACH,UAAU,EAAE,CAACQ,OAAO,CAAC,UAAAE,MAAM;MAC5BP,OAAO,CAACG,mBAAmB,EAAE,CAACnB,KAAI,CAACc,eAAe,EAAE,CAAC,GAAGS,MAAM,CAACH,QAAQ,CAACJ,OAAO,CAAC;IACpF,CAAC,CAAC;IAEF,OAAO,IAAI;EACf,CAAC;EAEL,OAAArB,yBAAC;AAAD,CAAC,CAlD8CD,mBAAA,CAAA8B,iBAAiB;AAAnDC,OAAA,CAAA9B,yBAAA,GAAAA,yBAAA","ignoreList":[]},"metadata":{},"sourceType":"script"}