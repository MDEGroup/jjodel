{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollectExpression = void 0;\nvar Expression_1 = require(\"../Expression\");\nvar Utils_1 = require(\"../../Utils\");\n/**\n * @oclSpecification\n * When we want to specify a collection that is derived from some other collection, but which contains different\n * objects from the original collection (i.e., it is not a sub-collection), we can use a collect operation.\n * The collect operation uses the same syntax as the select and reject.\n *\n * @oclExpression collect(expr : OclExpression) : Collection\n * @oclExample self.children->collect(age)\n */\nvar CollectExpression = /** @class */function (_super) {\n  __extends(CollectExpression, _super);\n  function CollectExpression() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CollectExpression.prototype.evaluate = function (visitor, localVariables) {\n    var _this = this;\n    var collection = this.getSource().evaluate(visitor, localVariables);\n    if (collection instanceof Array) {\n      return collection.map(function (c) {\n        var variables = {};\n        if (_this.getIterators()) {\n          variables[_this.getIterators()[0]] = c;\n        } else {\n          var variableName = Utils_1.Utils.getVariableName(_this);\n          variables[variableName.getSource().evaluate(visitor)] = c;\n        }\n        return _this.getBody().evaluate(visitor, __assign(__assign({}, localVariables), variables));\n      });\n    } else {\n      return collection;\n    }\n  };\n  return CollectExpression;\n}(Expression_1.IteratorExpression);\nexports.CollectExpression = CollectExpression;","map":{"version":3,"names":["Expression_1","require","Utils_1","CollectExpression","_super","__extends","prototype","evaluate","visitor","localVariables","_this","collection","getSource","Array","map","c","variables","getIterators","variableName","Utils","getVariableName","getBody","__assign","IteratorExpression","exports"],"sources":["../../../../lib/components/expressions/collection/CollectExpression.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAEA;;;;;;;;;AASA,IAAAE,iBAAA,0BAAAC,MAAA;EAAuCC,SAAA,CAAAF,iBAAA,EAAAC,MAAA;EAAvC,SAAAD,kBAAA;;EAoBA;EAnBIA,iBAAA,CAAAG,SAAA,CAAAC,QAAQ,GAAR,UAASC,OAA4B,EAAEC,cAAoB;IAA3D,IAAAC,KAAA;IACI,IAAMC,UAAU,GAAG,IAAI,CAACC,SAAS,EAAE,CAACL,QAAQ,CAACC,OAAO,EAAEC,cAAc,CAAC;IAErE,IAAIE,UAAU,YAAYE,KAAK,EAAE;MAC7B,OAAOF,UAAU,CAACG,GAAG,CAAC,UAAAC,CAAC;QACnB,IAAMC,SAAS,GAAG,EAAE;QACpB,IAAIN,KAAI,CAACO,YAAY,EAAE,EAAE;UACrBD,SAAS,CAACN,KAAI,CAACO,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGF,CAAC;SACxC,MAAM;UACH,IAAMG,YAAY,GAAGhB,OAAA,CAAAiB,KAAK,CAACC,eAAe,CAACV,KAAI,CAAC;UAChDM,SAAS,CAACE,YAAY,CAACN,SAAS,EAAE,CAACL,QAAQ,CAACC,OAAO,CAAC,CAAC,GAAGO,CAAC;;QAG7D,OAAOL,KAAI,CAACW,OAAO,EAAE,CAACd,QAAQ,CAACC,OAAO,EAAAc,QAAA,CAAAA,QAAA,KAAMb,cAAc,GAAKO,SAAS,EAAE;MAC9E,CAAC,CAAC;KACL,MAAM;MACH,OAAOL,UAAU;;EAEzB,CAAC;EACL,OAAAR,iBAAC;AAAD,CAAC,CApBsCH,YAAA,CAAAuB,kBAAkB;AAA5CC,OAAA,CAAArB,iBAAA,GAAAA,iBAAA"},"metadata":{},"sourceType":"script"}