{"ast":null,"code":"var _dec, _class, _class2;\n///<reference path='../../joiner/index.ts' />\n\n//import type {RuntimeAccessible, RuntimeAccessibleClass, Point as PointType} from \"../../joiner\";\n\nimport { RuntimeAccessible, RuntimeAccessibleClass } from \"../../joiner\";\n// @static\nlet windoww = window;\nlet Point = windoww.Point;\nexport let GraphDragManager = (_dec = RuntimeAccessible('GraphDragManager'), _dec(_class = (_class2 = class GraphDragManager extends RuntimeAccessibleClass {\n  static startPanning(e, graph) {\n    console.log(\"start panning\", !GraphDragManager.draggingGraph, graph, graph.id);\n    if (GraphDragManager.draggingGraph) return;\n    GraphDragManager.draggingGraph = graph;\n    GraphDragManager.initialClickPos = Point.fromEvent(e);\n  }\n  static stopPanning(e) {\n    console.log(\"stop panning\", GraphDragManager.draggingGraph);\n    if (!GraphDragManager.draggingGraph) return;\n    let g = GraphDragManager.draggingGraph;\n    let initial = GraphDragManager.initialClickPos;\n    GraphDragManager.draggingGraph = undefined;\n    GraphDragManager.initialClickPos = undefined;\n    console.log(initial, Point.fromEvent(e), g.zoom, g.offset);\n    g.offset = initial.subtract(Point.fromEvent(e), false).multiply(g.zoom).add(g.offset, false); // actual type is Partial<Size>\n  }\n}, _class2.initialClickPos = void 0, _class2.draggingGraph = void 0, _class2)) || _class);","map":{"version":3,"names":["RuntimeAccessible","RuntimeAccessibleClass","windoww","window","Point","GraphDragManager","_dec","_class","_class2","startPanning","e","graph","console","log","draggingGraph","id","initialClickPos","fromEvent","stopPanning","g","initial","undefined","zoom","offset","subtract","multiply","add"],"sources":["C:/d/Programming/web/jodel-mde/src/graph/graphElement/GraphDragHandler.ts"],"sourcesContent":["///<reference path='../../joiner/index.ts' />\r\n\r\nimport type {LGraph} from \"../../joiner\";\r\n//import type {RuntimeAccessible, RuntimeAccessibleClass, Point as PointType} from \"../../joiner\";\r\nimport type {Point as PointType} from \"../../joiner\";\r\nimport {RuntimeAccessible, RuntimeAccessibleClass} from \"../../joiner\";\r\nimport React from \"react\";\r\n\r\n// @static\r\nlet windoww: any = window as any;\r\nlet Point: any = windoww.Point;\r\n\r\n@RuntimeAccessible('GraphDragManager')\r\nexport class GraphDragManager extends RuntimeAccessibleClass{\r\n    static initialClickPos?: PointType;\r\n    static draggingGraph?: LGraph;\r\n\r\n    static startPanning(e: React.MouseEvent, graph: LGraph) {\r\n        console.log(\"start panning\", !GraphDragManager.draggingGraph, graph, graph.id);\r\n        if (GraphDragManager.draggingGraph) return;\r\n        GraphDragManager.draggingGraph = graph as LGraph;\r\n        GraphDragManager.initialClickPos = Point.fromEvent(e);\r\n    }\r\n    static stopPanning(e: JQuery.MouseUpEvent | React.MouseEvent) {\r\n        console.log(\"stop panning\", GraphDragManager.draggingGraph);\r\n        if (!GraphDragManager.draggingGraph) return;\r\n        let g: LGraph = GraphDragManager.draggingGraph;\r\n        let initial: PointType = GraphDragManager.initialClickPos as PointType;\r\n        GraphDragManager.draggingGraph = undefined;\r\n        GraphDragManager.initialClickPos = undefined;\r\n        console.log(initial, Point.fromEvent(e), g.zoom, g.offset)\r\n        g.offset = initial.subtract(Point.fromEvent(e), false).multiply(g.zoom).add(g.offset, false) as any; // actual type is Partial<Size>\r\n    }\r\n}\r\n"],"mappings":";AAAA;;AAGA;;AAEA,SAAQA,iBAAiB,EAAEC,sBAAsB,QAAO,cAAc;AAGtE;AACA,IAAIC,OAAY,GAAGC,MAAa;AAChC,IAAIC,KAAU,GAAGF,OAAO,CAACE,KAAK;AAE9B,WACaC,gBAAgB,IAAAC,IAAA,GAD5BN,iBAAiB,CAAC,kBAAkB,CAAC,EAAAM,IAAA,CAAAC,MAAA,IAAAC,OAAA,GAAtC,MACaH,gBAAgB,SAASJ,sBAAsB;EAIxD,OAAOQ,YAAYA,CAACC,CAAmB,EAAEC,KAAa,EAAE;IACpDC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAE,CAACR,gBAAgB,CAACS,aAAa,EAAEH,KAAK,EAAEA,KAAK,CAACI,EAAE,CAAC;IAC9E,IAAIV,gBAAgB,CAACS,aAAa,EAAE;IACpCT,gBAAgB,CAACS,aAAa,GAAGH,KAAe;IAChDN,gBAAgB,CAACW,eAAe,GAAGZ,KAAK,CAACa,SAAS,CAACP,CAAC,CAAC;EACzD;EACA,OAAOQ,WAAWA,CAACR,CAAyC,EAAE;IAC1DE,OAAO,CAACC,GAAG,CAAC,cAAc,EAAER,gBAAgB,CAACS,aAAa,CAAC;IAC3D,IAAI,CAACT,gBAAgB,CAACS,aAAa,EAAE;IACrC,IAAIK,CAAS,GAAGd,gBAAgB,CAACS,aAAa;IAC9C,IAAIM,OAAkB,GAAGf,gBAAgB,CAACW,eAA4B;IACtEX,gBAAgB,CAACS,aAAa,GAAGO,SAAS;IAC1ChB,gBAAgB,CAACW,eAAe,GAAGK,SAAS;IAC5CT,OAAO,CAACC,GAAG,CAACO,OAAO,EAAEhB,KAAK,CAACa,SAAS,CAACP,CAAC,CAAC,EAAES,CAAC,CAACG,IAAI,EAAEH,CAAC,CAACI,MAAM,CAAC;IAC1DJ,CAAC,CAACI,MAAM,GAAGH,OAAO,CAACI,QAAQ,CAACpB,KAAK,CAACa,SAAS,CAACP,CAAC,CAAC,EAAE,KAAK,CAAC,CAACe,QAAQ,CAACN,CAAC,CAACG,IAAI,CAAC,CAACI,GAAG,CAACP,CAAC,CAACI,MAAM,EAAE,KAAK,CAAQ,CAAC,CAAC;EACzG;AACJ,CAAC,EAAAf,OAAA,CAnBUQ,eAAe,WAAAR,OAAA,CACfM,aAAa,WAAAN,OAAA,MAAAD,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}