{"ast":null,"code":"import _regeneratorRuntime from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import Api from'../../data/api';import Storage from'../../data/storage';import{DUser,U}from'../../joiner';var AuthApi=/*#__PURE__*/function(){function AuthApi(){_classCallCheck(this,AuthApi);}_createClass(AuthApi,null,[{key:\"login\",value:function(){var _login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Storage.reset();Storage.write('offline','false');_context.next=4;return Api.post(\"\".concat(Api.persistance,\"/auth/login\"),{email:email,password:password});case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}}},_callee);}));function login(_x,_x2){return _login.apply(this,arguments);}return login;}()},{key:\"register\",value:function(){var _register=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username,email,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Storage.reset();Storage.write('offline','false');_context2.next=4;return Api.post(\"\".concat(Api.persistance,\"/auth/register\"),{username:username,email:email,password:password});case 4:return _context2.abrupt(\"return\",_context2.sent);case 5:case\"end\":return _context2.stop();}}},_callee2);}));function register(_x3,_x4,_x5){return _register.apply(this,arguments);}return register;}()},{key:\"logout\",value:function(){var _logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Api.delete(\"\".concat(Api.persistance,\"/auth/logout\"));case 2:Storage.reset();U.refresh();case 4:case\"end\":return _context3.stop();}}},_callee3);}));function logout(){return _logout.apply(this,arguments);}return logout;}()},{key:\"offline\",value:function offline(){Storage.reset();Storage.write('offline','true');var user=DUser.new('Unknown','Pointer_User_Default');Storage.write('user',user);}}]);return AuthApi;}();export{AuthApi};","map":{"version":3,"names":["Api","Storage","DUser","U","AuthApi","_classCallCheck","_createClass","key","value","_login","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","password","wrap","_callee$","_context","prev","next","reset","write","post","concat","persistance","abrupt","sent","stop","login","_x","_x2","apply","arguments","_register","_callee2","username","_callee2$","_context2","register","_x3","_x4","_x5","_logout","_callee3","_callee3$","_context3","delete","refresh","logout","offline","user","new"],"sources":["C:/d/Programming/web/jodel-mde/src/api/persistance/auth.ts"],"sourcesContent":["import Api, {Response} from '../../data/api';\r\nimport Storage from '../../data/storage';\r\nimport {DUser, U} from '../../joiner';\r\n\r\nclass AuthApi {\r\n    static async login(email: string, password: string): Promise<Response> {\r\n        Storage.reset(); Storage.write('offline', 'false');\r\n        return await Api.post(`${Api.persistance}/auth/login`, {email, password});\r\n    }\r\n    static async register(username: string, email: string, password: string): Promise<Response> {\r\n        Storage.reset(); Storage.write('offline', 'false');\r\n        return await Api.post(`${Api.persistance}/auth/register`, {username, email, password});\r\n    }\r\n    static async logout(): Promise<void> {\r\n        await Api.delete(`${Api.persistance}/auth/logout`);\r\n        Storage.reset();\r\n        U.refresh();\r\n    }\r\n    static offline(): void {\r\n        Storage.reset(); Storage.write('offline', 'true');\r\n        const user = DUser.new('Unknown', 'Pointer_User_Default');\r\n        Storage.write('user', user);\r\n    }\r\n}\r\n\r\nexport {AuthApi};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}