{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\graph\\\\damedges\\\\damedge.tsx\",\n  _this = this;\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { DEdge, EdgeBendingMode, GraphElementComponent, GraphElementDispatchProps, GraphElementOwnProps, GraphElementReduxStateProps, GraphElementStatee, GraphPoint, LPointerTargetable, RuntimeAccessibleClass, U } from \"../../joiner\";\nimport { LViewPoint } from \"../../view/viewPoint/viewpoint\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet groupingsize = {};\ngroupingsize[EdgeBendingMode.Line] = 1;\ngroupingsize[EdgeBendingMode.Bezier_quadratic] = 2;\ngroupingsize[EdgeBendingMode.Bezier_cubic] = 3;\ngroupingsize[EdgeBendingMode.Bezier_quadratic_mirrored] = 1;\ngroupingsize[EdgeBendingMode.Bezier_cubic_mirrored] = 2;\ngroupingsize[EdgeBendingMode.Elliptical_arc] = 2; // (1_coord), (rotation), (sweep    arc), (1_coord)\n\nconst superclassGraphElementComponent = RuntimeAccessibleClass.classes.GraphElementComponent;\nconst superclassGraphElementComponentuntyped = RuntimeAccessibleClass.classes.GraphElementComponent;\nclass ThisStatee extends GraphElementStatee {}\nexport class EdgeComponent extends superclassGraphElementComponent {\n  constructor(props, context) {\n    super(props, context);\n  }\n  render() {\n    return super.render();\n  }\n}\nclass OwnProps extends GraphElementOwnProps {\n  constructor() {\n    super(...arguments);\n    this.onclick = void 0;\n    this.onmousedown = void 0;\n    this.isGraph = false;\n    this.isVertex = true;\n  }\n}\nclass StateProps extends GraphElementReduxStateProps {\n  constructor() {\n    super(...arguments);\n    this.node = void 0;\n    this.lastSelected = void 0;\n    this.isEdgePending = void 0;\n    this.viewpoint = void 0;\n    this.path = void 0;\n  } // svg path builder\n}\nclass DispatchProps extends GraphElementDispatchProps {}\nfunction mapStateToProps(state, ownProps) {\n  const ret = new StateProps();\n  // superret.lastSelected = state._lastSelected ? LPointerTargetable.from(state._lastSelected.modelElement) : null;\n  ret.isEdgePending = {\n    user: LPointerTargetable.from(state.isEdgePending.user),\n    source: LPointerTargetable.from(state.isEdgePending.source)\n  };\n  ret.viewpoint = LViewPoint.fromPointer(state.viewpoint);\n  ret.path = () => {\n    var _ret$node$start, _ret$node$end;\n    let s = '';\n    // @ts-ignore\n    console.log(\"path:\", this, ret, s);\n    let svgletter = ret.view.bendingMode;\n    if (!ret.node) return \"node missing\";\n    let coords = ret.node.midnodes.map(mn => mn.x + \" \" + mn.y);\n    if (!coords) coords = [];\n    let grouping = groupingsize[svgletter];\n    let scoord = ((_ret$node$start = ret.node.start) === null || _ret$node$start === void 0 ? void 0 : _ret$node$start.size.tl()) || new GraphPoint(50, 50);\n    let ecoord = ((_ret$node$end = ret.node.end) === null || _ret$node$end === void 0 ? void 0 : _ret$node$end.size.tl()) || new GraphPoint(500, 150);\n    s += \"M \" + scoord.x + \" \" + scoord.y + svgletter + \" \" + coords.join(\", \") + \", \" + ecoord.x + \" \" + ecoord.y;\n    /*for (let i = 0; i < coords.length + 1; i++) {\r\n        if (i-1 % grouping === 0) s+= \" \" + svgletter + \" \"\r\n        else s+=\", \";\r\n        s += (i === coords.length ? ecoord.x + \" \" + ecoord.y : coords[i]);\r\n    }*/\n    // if (U.isNumber(s[0])) s = \"M \" + s; else s = \"M \" + s.substring(1);\n    return s;\n  };\n  const superret = GraphElementComponent.mapStateToProps(state, ownProps, DEdge, ret);\n  // U.objectMergeInPlace(superret, ret);\n  // U.removeEmptyObjectKeys(superret);\n  // console.error(superret, ret); throw Error(\"aaa\");\n  return superret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const superret = GraphElementComponent.mapDispatchToProps(dispatch);\n  const ret = new GraphElementDispatchProps();\n  U.objectMergeInPlace(superret, ret);\n  U.removeEmptyObjectKeys(superret);\n  return superret;\n}\nexport const EdgeConnected = connect(mapStateToProps, mapDispatchToProps)(EdgeComponent);\nexport const DamEdge = function (props) {\n  let childrens = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(EdgeConnected, {\n    ...props,\n    childrens,\n    isGraph: false,\n    isVertex: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 12\n  }, _this);\n};\n_c = DamEdge;\nvar _c;\n$RefreshReg$(_c, \"DamEdge\");","map":{"version":3,"names":["React","connect","DEdge","EdgeBendingMode","GraphElementComponent","GraphElementDispatchProps","GraphElementOwnProps","GraphElementReduxStateProps","GraphElementStatee","GraphPoint","LPointerTargetable","RuntimeAccessibleClass","U","LViewPoint","jsxDEV","_jsxDEV","groupingsize","Line","Bezier_quadratic","Bezier_cubic","Bezier_quadratic_mirrored","Bezier_cubic_mirrored","Elliptical_arc","superclassGraphElementComponent","classes","superclassGraphElementComponentuntyped","ThisStatee","EdgeComponent","constructor","props","context","render","OwnProps","arguments","onclick","onmousedown","isGraph","isVertex","StateProps","node","lastSelected","isEdgePending","viewpoint","path","DispatchProps","mapStateToProps","state","ownProps","ret","user","from","source","fromPointer","_ret$node$start","_ret$node$end","s","console","log","svgletter","view","bendingMode","coords","midnodes","map","mn","x","y","grouping","scoord","start","size","tl","ecoord","end","join","superret","mapDispatchToProps","dispatch","objectMergeInPlace","removeEmptyObjectKeys","EdgeConnected","DamEdge","childrens","length","undefined","fileName","_jsxFileName","lineNumber","columnNumber","_this","_c","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/graph/damedges/damedge.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    DEdge,\r\n    DGraph,\r\n    DGraphElement,\r\n    DGraphVertex, Dictionary,\r\n    DVoidVertex, EdgeBendingMode,\r\n    GraphElementComponent,\r\n    GraphElementDispatchProps,\r\n    GraphElementOwnProps,\r\n    GraphElementReduxStateProps,\r\n    GraphElementStatee, GraphPoint,\r\n    IStore,\r\n    LClass, LEdge,\r\n    LModelElement,\r\n    LPointerTargetable,\r\n    LUser,\r\n    LVoidVertex, Overlap,\r\n    RuntimeAccessibleClass,\r\n    U,\r\n} from \"../../joiner\";\r\nimport {LViewPoint} from \"../../view/viewPoint/viewpoint\";\r\nlet groupingsize: Dictionary<EdgeBendingMode, number> = {} as any;\r\ngroupingsize[EdgeBendingMode.Line] = 1;\r\ngroupingsize[EdgeBendingMode.Bezier_quadratic] = 2;\r\ngroupingsize[EdgeBendingMode.Bezier_cubic] = 3;\r\ngroupingsize[EdgeBendingMode.Bezier_quadratic_mirrored] = 1;\r\ngroupingsize[EdgeBendingMode.Bezier_cubic_mirrored] = 2;\r\ngroupingsize[EdgeBendingMode.Elliptical_arc] = 2; // (1_coord), (rotation), (sweep    arc), (1_coord)\r\n\r\nconst superclassGraphElementComponent: typeof GraphElementComponent = RuntimeAccessibleClass.classes.GraphElementComponent as any as typeof GraphElementComponent;\r\nconst superclassGraphElementComponentuntyped: any = RuntimeAccessibleClass.classes.GraphElementComponent as any;\r\nclass ThisStatee extends GraphElementStatee {}\r\n\r\nexport class EdgeComponent<AllProps extends AllPropss = AllPropss, ThisState extends ThisStatee = ThisStatee>\r\n    extends superclassGraphElementComponent<AllProps, ThisState> {\r\n\r\n    constructor(props: AllProps, context: any) {\r\n        super(props, context);\r\n    }\r\n    render(): ReactNode {\r\n       return super.render();\r\n    }\r\n\r\n}\r\n\r\nclass OwnProps extends GraphElementOwnProps {\r\n    onclick?: (e: React.MouseEvent<HTMLDivElement>) => void;\r\n    onmousedown?: (e: React.MouseEvent<HTMLDivElement>) => void;\r\n    isGraph?: boolean = false;\r\n    isVertex?: boolean = true;\r\n}\r\n\r\nclass StateProps extends GraphElementReduxStateProps {\r\n    node!: LEdge;\r\n    lastSelected!: LModelElement | null;\r\n    isEdgePending!: { user: LUser, source: LClass };\r\n    viewpoint!: LViewPoint;\r\n    path!: () => string; // svg path builder\r\n}\r\n\r\nclass DispatchProps extends GraphElementDispatchProps {\r\n}\r\n\r\ntype AllPropss = Overlap<Overlap<OwnProps, StateProps>, DispatchProps>;\r\n\r\nfunction mapStateToProps(state: IStore, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = new StateProps();\r\n    // superret.lastSelected = state._lastSelected ? LPointerTargetable.from(state._lastSelected.modelElement) : null;\r\n    ret.isEdgePending = {\r\n        user: LPointerTargetable.from(state.isEdgePending.user),\r\n        source: LPointerTargetable.from(state.isEdgePending.source)\r\n    };\r\n    ret.viewpoint = LViewPoint.fromPointer(state.viewpoint);\r\n    ret.path = () => {\r\n        let s = '';\r\n        // @ts-ignore\r\n        console.log(\"path:\", this, ret, s);\r\n        let svgletter: EdgeBendingMode = (ret).view.bendingMode;\r\n        if(!ret.node) return \"node missing\";\r\n        let coords = ret.node.midnodes.map( (mn) => mn.x+\" \"+mn.y);\r\n        if (!coords) coords = [];\r\n        let grouping = groupingsize[svgletter];\r\n        let scoord: GraphPoint = ret.node.start?.size.tl() || new GraphPoint(50, 50);\r\n        let ecoord: GraphPoint = ret.node.end?.size.tl() || new GraphPoint(500, 150);\r\n        s+= \"M \" + scoord.x + \" \" + scoord.y + svgletter + \" \" + coords.join(\", \") + \", \" + ecoord.x+\" \"+ecoord.y;\r\n        /*for (let i = 0; i < coords.length + 1; i++) {\r\n            if (i-1 % grouping === 0) s+= \" \" + svgletter + \" \"\r\n            else s+=\", \";\r\n            s += (i === coords.length ? ecoord.x + \" \" + ecoord.y : coords[i]);\r\n        }*/\r\n        // if (U.isNumber(s[0])) s = \"M \" + s; else s = \"M \" + s.substring(1);\r\n        return s; }\r\n\r\n    const superret: StateProps = GraphElementComponent.mapStateToProps(state, ownProps, DEdge, ret) as StateProps;\r\n    // U.objectMergeInPlace(superret, ret);\r\n    // U.removeEmptyObjectKeys(superret);\r\n    // console.error(superret, ret); throw Error(\"aaa\");\r\n    return superret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const superret: GraphElementDispatchProps = GraphElementComponent.mapDispatchToProps(dispatch);\r\n    const ret: GraphElementDispatchProps = new GraphElementDispatchProps();\r\n    U.objectMergeInPlace(superret, ret);\r\n    U.removeEmptyObjectKeys(superret);\r\n    return superret;\r\n}\r\n\r\n\r\nexport const EdgeConnected = connect<StateProps, DispatchProps, OwnProps, IStore>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(EdgeComponent as any);\r\n\r\nexport const DamEdge = (props: OwnProps, childrens: (string | React.Component)[] = []): ReactElement => {\r\n    return <EdgeConnected {...{...props, childrens}} isGraph={false} isVertex={true} />;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}