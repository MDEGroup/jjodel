{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\components\\\\editors\\\\views\\\\NestedView.tsx\",\n  _s = $RefreshSig$(),\n  _this = this;\n/* Viewpoints */\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { DPointerTargetable, DUser, DViewPoint, Input, LPointerTargetable, LUser, TRANSACTION, U, windoww } from '../../../joiner';\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport { GenericTree } from \"../../forEndUser/Tree\";\nimport \"./nestedView.scss\";\nimport { ViewData } from './ViewData';\nimport { Tooltip } from \"../../forEndUser/Tooltip\";\nimport { Btn, CommandBar, Sep } from '../../commandbar/CommandBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction NestedViewComponent(props) {\n  _s();\n  const project = props.project;\n  const viewpoints = props.viewpoints;\n  const active = props.active;\n  const editName = (evt, vp) => {\n    vp.name = evt.target.value;\n  };\n  const addVP = () => {\n    let name = 'viewpoint_' + 0;\n    let viewpointNames = viewpoints.map(vp => vp && vp.name);\n    name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\n    DViewPoint.newVP(name);\n  };\n  const deleteV = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n  const deleteVP = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n\n  // function mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\n  //     const ret: StateProps = {} as FakeStateProps;\n  //     // const user = LUser.fromPointer(DUser.current, state);\n  //     // ret.project = user.project as LProject;\n  //     ret.priority = LPointerTargetable.fromArr(ownProps.priority); // ret.project.viewpoints;\n  //     ret.debug = state.debug;\n  //     ret.view = LPointerTargetable.fromPointer(ownProps.viewid, state);\n  //     return ret;\n  // }\n\n  const activateVP = viewPoint => {\n    project.activeViewpoint = viewPoint;\n  };\n  const clone = v => {\n    v.duplicate(true);\n  };\n  const getSubElements = v => (v === null || v === void 0 ? void 0 : v.subViews) || {}; //\n  let activeViewpointId = project.activeViewpoint.id;\n  let [collapseAll, setCollapseAll] = useState(undefined);\n  function renderEntry(e, childrens, isExpanded, toggleExpansion, depth, path, metadata) {\n    let d = e;\n    let appliableTo;\n    if (collapseAll !== undefined && collapseAll === isExpanded) toggleExpansion();\n    let expandClick = () => {\n      setCollapseAll(undefined);\n      toggleExpansion();\n    };\n    if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;else appliableTo = \"Any\";\n    appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\n    let parr = Object.keys(childrens);\n    let scoreBoost = (metadata === null || metadata === void 0 ? void 0 : metadata.scoreBoost) || 0;\n    let l = LPointerTargetable.fromD(d);\n    const preventClick = e => e.stopPropagation();\n    let isVP = d.className === DViewPoint.cname;\n    let isDefault = d.id.indexOf('Pointer_View') === 0;\n    function select(ptr) {\n      project.activeViewpoint = ptr;\n    }\n    let appliableToEnhanced = d.name === 'Singleton' ? 'Singleton' : appliableTo;\n    const max_priority = l.explicitApplicationPriority;\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"entry-root \" + d.className + (d.id === activeViewpointId ? ' selected' : ''),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'inline-row',\n        onClick: () => setView(d.id),\n        onDoubleClick: e => {\n          select(d.id);\n        },\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-stuff vertical-centering \",\n          onClick: preventClick,\n          children: parr.length >= 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              style: {\n                fontSize: '0.55em',\n                marginRight: '24px!important'\n              },\n              className: 'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right'),\n              onClick: expandClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"expansion-line\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 44\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mid-stuff vertical-centering\",\n          style: {\n            marginLeft: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `icon type tree-${appliableToEnhanced} ${d.className}`,\n            style: {\n              width: '24px',\n              height: '24px'\n            },\n            children: isVP ? 'VP' : appliableToEnhanced === \"Any\" ? \"âœ²\" : appliableToEnhanced === 'Singleton' ? 'S' : appliableToEnhanced[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: '4px'\n            },\n            children: d.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hover-stuff vertical-centering d-flex \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ms-auto d-flex\",\n            onClick: preventClick,\n            children: [isVP && /*#__PURE__*/_jsxDEV(CommandBar, {\n              style: {\n                transition: '1s 0.3s',\n                marginTop: '2px'\n              },\n              children: /*#__PURE__*/_jsxDEV(Btn, {\n                icon: 'check',\n                action: evt => {\n                  select(d.id);\n                },\n                tip: 'Activate'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)\n\n            /* <button className=\"bg btn-delete my-auto ms-2 green\" disabled={active.id === d.id}\r\n                onClick={(evt) => {select(d.id)}}>\r\n                <i className='bi bi-check2' />\r\n            </button>*/, /*#__PURE__*/_jsxDEV(CommandBar, {\n              style: {\n                transition: '1s 0.3s',\n                marginTop: '2px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Btn, {\n                icon: 'delete',\n                action: e => {\n                  l.delete();\n                  preventClick(e);\n                },\n                tip: 'Delete'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 29\n              }, this), \" \", /*#__PURE__*/_jsxDEV(Btn, {\n                icon: 'copy',\n                action: e => {\n                  l.duplicate();\n                  preventClick(e);\n                },\n                tip: 'Duplicate'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-stuff vertical-centering\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-content\",\n            onClick: preventClick,\n            children: [isVP ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spacer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this)\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [props.isAdvanced && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"priority\",\n                  children: [\"priority: \", l.explicitApplicationPriority, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  style: {\n                    paddingTop: '4px'\n                  },\n                  className: \"bi bi-x\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 111\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spacer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"number\",\n                  className: \"change-boost hidden-input priority-booster\",\n                  inputClassName: \"change-boost hidden-input\",\n                  readonly: false,\n                  data: l,\n                  getter: () => scoreBoost + '',\n                  setter: v => {\n                    l.subViews = {\n                      ...childrens,\n                      [d.id]: +v\n                    };\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"right-icon feature-border ocl-icon vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"right-icon feature-border js-icon vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(Tooltip, {\n              tooltip: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"is \", d.isExclusiveView ? \"\" : \"not\", \" mutually exclusive with other \\\"Ex\\\" views.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 43\n              }, this),\n              position: \"bottom\",\n              inline: true,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"right-icon feature-border ex-icon vertical-centering \" + (d.isExclusiveView ? '' : \"hidden\"),\n                onClick: () => l.isExclusiveView = !d.isExclusiveView\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: isExpanded && parr.map((ptr, i) => /*#__PURE__*/_jsxDEV(GenericTree, {\n          data: DPointerTargetable.from(ptr),\n          getSubElements: getSubElements,\n          renderEntry: renderEntry,\n          depth: depth + 1,\n          path: [...path, i],\n          metadata: {\n            setView: metadata.setView,\n            scoreBoost: childrens[ptr]\n          },\n          initialHidingState: depth < 100\n          // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\n        }, ptr, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }, this)]\n    }, d.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 16\n    }, this);\n  }\n  let test = windoww;\n  let [view, setView] = useStateIfMounted(undefined);\n  let vieweditor = view && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"single-view-content\",\n    children: /*#__PURE__*/_jsxDEV(ViewData, {\n      viewid: view,\n      viewpoints: viewpoints.map(v => v.id),\n      setSelectedView: setView\n    }, view, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 69\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 30\n  }, this);\n  if (test) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"view-editor-root\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: 'viewpoint-tab',\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"view-editor-fullsize-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'd-flexd-flex',\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Viewpoints\", /*#__PURE__*/_jsxDEV(CommandBar, {\n              style: {\n                float: 'right'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Btn, {\n                icon: 'shrink',\n                active: collapseAll,\n                action: () => {\n                  setCollapseAll(true);\n                },\n                tip: 'Collapse all'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Btn, {\n                icon: 'expand',\n                active: collapseAll === false,\n                action: () => {\n                  setCollapseAll(false);\n                },\n                tip: 'Expand all'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Sep, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Btn, {\n                icon: 'add',\n                action: addVP,\n                tip: 'Create a new viewpoint'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }, this), vieweditor, /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"ps-2 pt-2\",\n          children: viewpoints.map(vp => /*#__PURE__*/_jsxDEV(GenericTree, {\n            data: vp.__raw,\n            getSubElements: getSubElements,\n            renderEntry: renderEntry,\n            metadata: {\n              setView,\n              scoreBoost: 0\n            },\n            initialHidingState: vp.id === activeViewpointId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 41\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 22\n  }, this);\n  let hoverID = '';\n  function setHoverID(a) {}\n  function selectt(a) {}\n  let validation; // props.validation\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [viewpoints.map((viewpoint, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'd-flex p-1 mt-1 border round mx-1 viewpoint',\n        onMouseEnter: e => setHoverID(viewpoint.id),\n        onMouseLeave: e => setHoverID(''),\n        style: {\n          backgroundColor: active.id === viewpoint.id ? 'white' : hoverID === viewpoint.id ? '#E0E0E0' : 'transparent'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: 'p-0 input hidden-input',\n          value: viewpoint.name,\n          type: 'text',\n          onChange: evt => {\n            editName(evt, viewpoint);\n          },\n          disabled: index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          className: \"ms-auto\",\n          data: viewpoint,\n          field: \"isExclusiveView\",\n          type: \"checkbox\",\n          label: \"Is exclusive\",\n          readonly: validation || index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), (!validation || true) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          disabled: active.id === viewpoint.id,\n          onClick: evt => {\n            selectt(viewpoint.id);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-check2'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 47\n        }, this)\n        // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\n        , /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          onClick: evt => {\n            clone(viewpoint);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-clipboard2-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-danger ms-1',\n          disabled: index <= 0 || active.id === viewpoint.id,\n          onClick: e => deleteV(e, viewpoint),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-trash3-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: 'p-1',\n      children: \"*To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 13\n  }, this);\n}\n_s(NestedViewComponent, \"ch46/0ANVSDLBCCWg4PB0AzA88k=\", false, function () {\n  return [useStateIfMounted];\n});\n_c = NestedViewComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  const user = LUser.fromPointer(DUser.current, state);\n  ret.project = user.project;\n  ret.viewpoints = ret.project.viewpoints.filter(vp => !!vp /* && vp.isValidation === ownProps.validation*/);\n  ret.active = ret.project.activeViewpoint;\n  ret.isAdvanced = state.advanced;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const NestedViewConnected = connect(mapStateToProps, mapDispatchToProps)(NestedViewComponent);\nexport const NestedView = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(NestedViewConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = NestedView;\nvar _c, _c2;\n$RefreshReg$(_c, \"NestedViewComponent\");\n$RefreshReg$(_c2, \"NestedView\");","map":{"version":3,"names":["React","useState","connect","DPointerTargetable","DUser","DViewPoint","Input","LPointerTargetable","LUser","TRANSACTION","U","windoww","useStateIfMounted","GenericTree","ViewData","Tooltip","Btn","CommandBar","Sep","jsxDEV","_jsxDEV","Fragment","_Fragment","NestedViewComponent","props","_s","project","viewpoints","active","editName","evt","vp","name","target","value","addVP","viewpointNames","map","increaseEndingNumber","newName","indexOf","newVP","deleteV","e","viewPoint","stopPropagation","delete","deleteVP","activateVP","activeViewpoint","clone","v","duplicate","getSubElements","subViews","activeViewpointId","id","collapseAll","setCollapseAll","undefined","renderEntry","childrens","isExpanded","toggleExpansion","depth","path","metadata","d","appliableTo","expandClick","appliableToClasses","length","substring","replaceAll","parr","Object","keys","scoreBoost","l","fromD","preventClick","isVP","className","cname","isDefault","select","ptr","appliableToEnhanced","max_priority","explicitApplicationPriority","children","onClick","setView","onDoubleClick","style","fontSize","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","width","height","transition","marginTop","icon","action","tip","isAdvanced","paddingTop","type","inputClassName","readonly","data","getter","setter","oclCondition","jsCondition","tooltip","isExclusiveView","position","inline","i","from","initialHidingState","test","view","vieweditor","viewid","setSelectedView","float","__raw","hoverID","setHoverID","a","selectt","validation","viewpoint","index","onMouseEnter","onMouseLeave","backgroundColor","onChange","disabled","field","label","_c","mapStateToProps","state","ownProps","ret","user","fromPointer","current","filter","advanced","mapDispatchToProps","dispatch","NestedViewConnected","NestedView","arguments","_this","_c2","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/editors/views/NestedView.tsx"],"sourcesContent":["/* Viewpoints */\r\n\r\nimport React, {Dispatch, ReactElement, useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    DPointerTargetable,\r\n    DState,\r\n    DUser,\r\n    DViewElement,\r\n    DViewPoint,\r\n    Input,\r\n    LPointerTargetable,\r\n    LProject,\r\n    LUser,\r\n    LViewElement,\r\n    LViewPoint,\r\n    Pointer,\r\n    TRANSACTION,\r\n    U,\r\n    windoww\r\n} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {Dictionary, FakeStateProps} from '../../../joiner/types';\r\nimport {GenericTree} from \"../../forEndUser/Tree\";\r\nimport \"./nestedView.scss\"\r\nimport {ViewData} from './ViewData';\r\nimport {Tooltip} from \"../../forEndUser/Tooltip\";\r\nimport {Btn, CommandBar, Sep} from '../../commandbar/CommandBar';\r\nimport {InternalToggle} from '../../widgets/Widgets';\r\n\r\ntype Metadata = {setView: (p: Pointer)=>any, scoreBoost: number}\r\nfunction NestedViewComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const viewpoints = props.viewpoints;\r\n    const active = props.active;\r\n\r\n    const editName = (evt: React.ChangeEvent<HTMLInputElement>, vp: LViewElement) => { vp.name = evt.target.value; }\r\n    const addVP = () => {\r\n        let name = 'viewpoint_' + 0;\r\n        let viewpointNames: string[] = viewpoints.map(vp => vp && vp.name);\r\n        name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\r\n        DViewPoint.newVP(name);\r\n    }\r\n    const deleteV = (e: React.MouseEvent, viewPoint: LViewElement) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n    const deleteVP = (e: React.MouseEvent, viewPoint: LViewPoint) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n\r\n\r\n    // function mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    //     const ret: StateProps = {} as FakeStateProps;\r\n    //     // const user = LUser.fromPointer(DUser.current, state);\r\n    //     // ret.project = user.project as LProject;\r\n    //     ret.priority = LPointerTargetable.fromArr(ownProps.priority); // ret.project.viewpoints;\r\n    //     ret.debug = state.debug;\r\n    //     ret.view = LPointerTargetable.fromPointer(ownProps.viewid, state);\r\n    //     return ret;\r\n    // }\r\n\r\n    const activateVP = (viewPoint: LViewPoint) => { project.activeViewpoint = viewPoint; }\r\n    const clone = (v: LViewElement) => { v.duplicate(true); }\r\n    const getSubElements = (v: DViewElement) => v?.subViews || {}; //\r\n    let activeViewpointId: Pointer<DPointerTargetable> = project.activeViewpoint.id;\r\n\r\n    let [collapseAll, setCollapseAll] = useState<boolean | undefined>( undefined );\r\n\r\n    function renderEntry(e: DViewElement, childrens: Dictionary<Pointer, number>, isExpanded: boolean, toggleExpansion: ()=>any, depth: number, path: number[], metadata: Metadata): JSX.Element{\r\n        let d = e;\r\n        let appliableTo: string;\r\n\r\n        if (collapseAll !== undefined && collapseAll === isExpanded) toggleExpansion();\r\n        let expandClick = () => {\r\n            setCollapseAll(undefined);\r\n            toggleExpansion();\r\n        }\r\n\r\n        if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);\r\n        else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;\r\n        else appliableTo = \"Any\";\r\n        appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\r\n        let parr = Object.keys(childrens);\r\n        let scoreBoost = metadata?.scoreBoost || 0;\r\n        let l: LViewElement = LPointerTargetable.fromD(d);\r\n\r\n        const preventClick = (e: any)=>e.stopPropagation();\r\n        let isVP = d.className === DViewPoint.cname;\r\n        let isDefault = d.id.indexOf('Pointer_View') === 0;\r\n\r\n        function select(ptr: Pointer<DViewPoint>){ project.activeViewpoint = ptr as any; }\r\n\r\n        let appliableToEnhanced = (d.name === 'Singleton' ? 'Singleton' : appliableTo);\r\n\r\n        const max_priority = l.explicitApplicationPriority\r\n\r\n        return <li className={\"entry-root \" + d.className + (d.id === activeViewpointId ? ' selected' : '')} key={d.id}>\r\n\r\n            <div className={'inline-row'} onClick={()=>setView(d.id)} onDoubleClick={(e) => {select(d.id)}}> {/* activate anche con il dblclick */}\r\n\r\n                <div className={\"left-stuff vertical-centering \"} onClick={preventClick}>\r\n                    {parr.length >= 1 ?\r\n                        <>\r\n                            <i style={{fontSize: '0.55em', marginRight: '24px!important'}} className={'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right')} onClick={expandClick} />\r\n                            {isExpanded && <div className={\"expansion-line\"} />}\r\n                        </>\r\n                        :\r\n                        <></>\r\n                    }\r\n                </div>\r\n                <div className={\"mid-stuff vertical-centering\"} style={{marginLeft: '8px'}}>\r\n                    <div className={`icon type tree-${appliableToEnhanced} ${d.className}`} style={{width: '24px', height: '24px'}}>{\r\n                        isVP ? 'VP' : (appliableToEnhanced === \"Any\" ? \"âœ²\" : appliableToEnhanced === 'Singleton' ? 'S' : appliableToEnhanced[0])\r\n                    }</div>\r\n                    <div style={{marginLeft: '4px'}}>{d.name}</div>\r\n                </div>\r\n                <div className={\"hover-stuff vertical-centering d-flex \"}>\r\n                    <div className={\"ms-auto d-flex\"} onClick={preventClick}>\r\n                        {isVP &&\r\n                            <CommandBar style={{transition: '1s 0.3s', marginTop: '2px'}}>\r\n                                <Btn icon={'check'} action={(evt) => {select(d.id)}} tip={'Activate'}/>\r\n                            </CommandBar>\r\n\r\n                            /* <button className=\"bg btn-delete my-auto ms-2 green\" disabled={active.id === d.id}\r\n                                onClick={(evt) => {select(d.id)}}>\r\n                                <i className='bi bi-check2' />\r\n                            </button>*/\r\n                        }\r\n\r\n\r\n                        <CommandBar style={{transition: '1s 0.3s', marginTop: '2px'}}>\r\n                            <Btn icon={'delete'} action={(e)=> { l.delete(); preventClick(e);}} tip={'Delete'}/> {/* todo per damiano, la cancellazione non funziona - visto con giordano, l'elemento non Ã¨ correttamente eliminato, rimane quale dipendenza appesa (\"cannot read properties of undefined\")*/}\r\n                            <Btn icon={'copy'} action={(e)=> { l.duplicate(); preventClick(e);}} tip={'Duplicate'}/>\r\n                        </CommandBar>\r\n\r\n                        {/* <button className=\"bg btn-delete my-auto ms-2 green\" onClick={(e)=> { l.duplicate(); preventClick(e);}}><i className='bx bx-duplicate' /></button>\r\n                        <button className=\"bg btn-delete my-auto ms-2\" onClick={(e)=> { l.delete(); preventClick(e);}}><i className=\"p-1 bi bi-dash\" /></button>*/}\r\n                    </div>\r\n                </div>\r\n                <div className={\"right-stuff vertical-centering\"}>\r\n                    <div className={\"right-content\"} onClick={preventClick} >\r\n                        {\r\n                            isVP ? <>\r\n                                <div className={\"spacer\"}/>\r\n                            </> : <>{ props.isAdvanced && <>\r\n                                <span className={\"priority\"}>priority: {l.explicitApplicationPriority} </span><i style={{paddingTop: '4px'}} className=\"bi bi-x\"></i>\r\n                                <div className={\"spacer\"}/>\r\n                                <Input type=\"number\"\r\n                                       className={\"change-boost hidden-input priority-booster\"}\r\n                                       inputClassName={\"change-boost hidden-input\"}\r\n                                       readonly={false}\r\n                                       data={l}\r\n                                       getter={()=>scoreBoost + ''}\r\n                                       setter={(v)=>{l.subViews = {...childrens, [d.id]: +v} as any}}\r\n                                />\r\n                            </>}\r\n                                <span className={\"right-icon feature-border ocl-icon vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\")}></span>\r\n                                <span className={\"right-icon feature-border js-icon vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\")}></span>\r\n                            </>\r\n                        }\r\n                        <Tooltip tooltip={<div>is {d.isExclusiveView ? \"\" : \"not\"} mutually exclusive with other \"Ex\" views.</div>} position={\"bottom\"} inline={true}>\r\n                            <span className={\"right-icon feature-border ex-icon vertical-centering \" + (d.isExclusiveView ? '' : \"hidden\")}\r\n                                  onClick={()=>l.isExclusiveView = !d.isExclusiveView}\r\n                            /></Tooltip>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ul>{isExpanded && parr.map( (ptr, i) => (\r\n                <GenericTree key={ptr}\r\n                             data={DPointerTargetable.from(ptr)}\r\n                             getSubElements={getSubElements}\r\n                             renderEntry={renderEntry}\r\n                             depth={depth + 1} path={[...path, i]}\r\n                             metadata={{setView:metadata.setView, scoreBoost:childrens[ptr]} as Metadata}\r\n                             initialHidingState={depth < 100}\r\n                    // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\r\n                />))}</ul>\r\n        </li>;\r\n    }\r\n\r\n    let test = windoww;\r\n\r\n    let [view, setView] = useStateIfMounted(undefined as (undefined | Pointer<DViewElement>));\r\n    let vieweditor = view && <div className={\"single-view-content\"}><ViewData key={view} viewid={view} viewpoints={viewpoints.map(v=>v.id)} setSelectedView={setView} /></div>;\r\n    if (test) return(<div className={\"view-editor-root\"}>\r\n        <section className={'viewpoint-tab'}>\r\n            <div className={\"view-editor-fullsize-content\"}>\r\n                <div className={'d-flexd-flex'}>\r\n                    <h1>Viewpoints\r\n\r\n\r\n                        <CommandBar style={{float: 'right'}}>\r\n                            <Btn icon={'shrink'} active={collapseAll}         action={() => {setCollapseAll(true)}}  tip={'Collapse all'} />\r\n                            <Btn icon={'expand'} active={collapseAll===false} action={() => {setCollapseAll(false)}} tip={'Expand all'}   />\r\n                            <Sep />\r\n                            <Btn icon={'add'} action={addVP} tip={'Create a new viewpoint'} />\r\n                        </CommandBar>\r\n\r\n                    </h1>\r\n                </div>\r\n                {vieweditor}\r\n                <ul className={\"ps-2 pt-2\"}>\r\n                    {viewpoints.map(vp=><GenericTree\r\n                        data={vp.__raw}\r\n                        getSubElements={getSubElements}\r\n                        renderEntry={renderEntry}\r\n                        metadata={{setView, scoreBoost:0}}\r\n                        initialHidingState={vp.id === activeViewpointId} />)}\r\n                </ul>\r\n            </div>\r\n        </section>\r\n    </div>);\r\n\r\n    let hoverID: any = '';\r\n    function setHoverID(a:any){}\r\n    function selectt(a: any){}\r\n    let validation: false;// props.validation\r\n    return (<div>\r\n        {viewpoints.map((viewpoint, index) => {\r\n\r\n            return (\r\n                <div key={index}\r\n                     className={'d-flex p-1 mt-1 border round mx-1 viewpoint'}\r\n                     onMouseEnter={(e) => setHoverID(viewpoint.id)}\r\n                     onMouseLeave={(e) => setHoverID('')}\r\n                     style={{backgroundColor: (active.id === viewpoint.id) ? 'white' :\r\n                             (hoverID === viewpoint.id ? '#E0E0E0' : 'transparent')}}>\r\n                    <input\r\n                        className={'p-0 input hidden-input'}\r\n                        value={viewpoint.name} type={'text'}\r\n                        onChange={(evt) => {editName(evt, viewpoint)}}\r\n                        disabled={index <= 0}\r\n                    />\r\n                    <Input\r\n                        className={\"ms-auto\"}\r\n                        data={viewpoint}\r\n                        field={\"isExclusiveView\"}\r\n                        type={\"checkbox\"}\r\n                        label={\"Is exclusive\"}\r\n                        readonly={validation || index <= 0}\r\n                    />\r\n                    {(!validation || true) && <button className={'btn btn-success ms-1'} disabled={active.id === viewpoint.id}\r\n                                                      onClick={(evt) => {selectt(viewpoint.id)}}>\r\n                        <i className={'p-1 bi bi-check2'}/>\r\n                    </button>\r\n                        // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\r\n                    }\r\n                    <button\r\n                        className={'btn btn-success ms-1'}\r\n                        onClick={(evt) => {clone(viewpoint)}}>\r\n                        <i className={'p-1 bi bi-clipboard2-fill'}></i>\r\n                    </button>\r\n                    <button\r\n                        className={'btn btn-danger ms-1'}\r\n                        disabled={index <= 0 || active.id === viewpoint.id}\r\n                        onClick={(e) => deleteV(e, viewpoint)}>\r\n                        <i className={'p-1 bi bi-trash3-fill'}></i>\r\n                    </button>\r\n                </div>\r\n            )\r\n        })}\r\n        <label className={'p-1'}>\r\n            *To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\r\n        </label>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n}\r\ninterface StateProps {\r\n    project: LProject;\r\n    viewpoints: LViewPoint[];\r\n    active: LViewPoint;\r\n    isAdvanced: boolean;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user: LUser = LUser.fromPointer(DUser.current, state);\r\n    ret.project = user.project as LProject;\r\n    ret.viewpoints = ret.project.viewpoints.filter( (vp) => !!vp/* && vp.isValidation === ownProps.validation*/);\r\n    ret.active = ret.project.activeViewpoint;\r\n    ret.isAdvanced = state.advanced;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const NestedViewConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NestedViewComponent);\r\n\r\nexport const NestedView = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <NestedViewConnected {...{...props, children}} />;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}