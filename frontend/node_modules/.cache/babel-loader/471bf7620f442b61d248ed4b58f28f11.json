{"ast":null,"code":"import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var DSL=/*#__PURE__*/function(){function DSL(){_classCallCheck(this,DSL);}_createClass(DSL,null,[{key:\"parser\",value:function parser(jsx){jsx=DSL.loop('Children',jsx);return jsx;}},{key:\"loop\",value:function loop(component,jsx){var tag=DSL[component](jsx);while(tag){jsx=tag;tag=DSL[component](tag);}return jsx;}},{key:\"Children\",value:function Children(jsx){var params=DSL.extractParameters(jsx,'Children');if(!params)return undefined;var includes=DSL.extractParameter(params,'includes')||'[]';var excludes=DSL.extractParameter(params,'excludes')||'[]';var includesJsx=includes!=='[]'?\".filter(c => c.name && \".concat(includes,\".includes(c.name))\"):'';var excludesJsx=excludes!=='[]'?\".filter(c => c.name && !\".concat(excludes,\".includes(c.name))\"):'';var dsl=\"<div className={'children'}>\\n                {data.children\\n                    \".concat(includesJsx,\"\\n                    \").concat(excludesJsx,\"\\n                    .map(c => <DefaultNode key={c.id} data={c} />)\\n                }\\n        </div>\");return DSL.replace(jsx,'Children',dsl);}},{key:\"extractParameters\",value:function extractParameters(jsx,component){var regex=new RegExp(\"<\".concat(component,\"(.*?)\\\\/>\"));var match=jsx.match(regex);if(match&&match[1])return match[1];else return undefined;}},{key:\"extractParameter\",value:function extractParameter(params,name){var regex=new RegExp(\"\".concat(name,\"={(.*?)}\"));var match=params.match(regex);if(match&&match[1])return match[1];else return undefined;}},{key:\"replace\",value:function replace(jsx,component,dsl){var regex=new RegExp(\"<\".concat(component,\"(.*?)\\\\/>\"));return jsx.replace(regex,dsl);}}]);return DSL;}();export default DSL;","map":{"version":3,"names":["DSL","_classCallCheck","_createClass","key","value","parser","jsx","loop","component","tag","Children","params","extractParameters","undefined","includes","extractParameter","excludes","includesJsx","concat","excludesJsx","dsl","replace","regex","RegExp","match","name"],"sources":["C:/d/Programming/web/jodel-mde/src/DSL/DSL.ts"],"sourcesContent":["class DSL {\r\n    public static parser(jsx: string): string {\r\n        jsx = DSL.loop('Children', jsx);\r\n        return jsx;\r\n    }\r\n\r\n    private static loop(component: 'Children', jsx: string): string {\r\n        let tag = DSL[component](jsx);\r\n        while(tag) {\r\n            jsx = tag;\r\n            tag = DSL[component](tag);\r\n        }\r\n        return jsx;\r\n    }\r\n\r\n    private static Children(jsx: string): string|undefined {\r\n        const params = DSL.extractParameters(jsx, 'Children');\r\n        if(!params) return undefined;\r\n        const includes = DSL.extractParameter(params, 'includes') || '[]';\r\n        const excludes = DSL.extractParameter(params, 'excludes') || '[]';\r\n        const includesJsx = (includes !== '[]') ? `.filter(c => c.name && ${includes}.includes(c.name))` : '';\r\n        const excludesJsx = (excludes !== '[]') ? `.filter(c => c.name && !${excludes}.includes(c.name))` : '';\r\n        const dsl = `<div className={'children'}>\r\n                {data.children\r\n                    ${includesJsx}\r\n                    ${excludesJsx}\r\n                    .map(c => <DefaultNode key={c.id} data={c} />)\r\n                }\r\n        </div>`;\r\n        return DSL.replace(jsx, 'Children', dsl);\r\n    }\r\n\r\n    private static extractParameters(jsx: string, component: string): string|undefined {\r\n        const regex = new RegExp(`<${component}(.*?)\\\\/>`);\r\n        const match = jsx.match(regex);\r\n        if (match && match[1]) return match[1];\r\n        else return undefined;\r\n    }\r\n\r\n    private static extractParameter(params: string, name: string): string|undefined {\r\n        const regex = new RegExp(`${name}={(.*?)}`);\r\n        const match = params.match(regex);\r\n        if (match && match[1]) return match[1];\r\n        else return undefined;\r\n    }\r\n\r\n    private static replace(jsx: string, component: string, dsl: string): string {\r\n        const regex = new RegExp(`<${component}(.*?)\\\\/>`);\r\n        return jsx.replace(regex, dsl);\r\n    }\r\n\r\n}\r\n\r\nexport default DSL;\r\n"],"mappings":"2SAAM,CAAAA,GAAG,kCAAAA,IAAA,EAAAC,eAAA,MAAAD,GAAA,GAAAE,YAAA,CAAAF,GAAA,QAAAG,GAAA,UAAAC,KAAA,CACL,SAAAC,OAAqBC,GAAW,CAAU,CACtCA,GAAG,CAAGN,GAAG,CAACO,IAAI,CAAC,UAAU,CAAED,GAAG,CAAC,CAC/B,MAAO,CAAAA,GAAG,CACd,CAAC,GAAAH,GAAA,QAAAC,KAAA,CAED,SAAAG,KAAoBC,SAAqB,CAAEF,GAAW,CAAU,CAC5D,GAAI,CAAAG,GAAG,CAAGT,GAAG,CAACQ,SAAS,CAAC,CAACF,GAAG,CAAC,CAC7B,MAAMG,GAAG,CAAE,CACPH,GAAG,CAAGG,GAAG,CACTA,GAAG,CAAGT,GAAG,CAACQ,SAAS,CAAC,CAACC,GAAG,CAAC,CAC7B,CACA,MAAO,CAAAH,GAAG,CACd,CAAC,GAAAH,GAAA,YAAAC,KAAA,CAED,SAAAM,SAAwBJ,GAAW,CAAoB,CACnD,GAAM,CAAAK,MAAM,CAAGX,GAAG,CAACY,iBAAiB,CAACN,GAAG,CAAE,UAAU,CAAC,CACrD,GAAG,CAACK,MAAM,CAAE,MAAO,CAAAE,SAAS,CAC5B,GAAM,CAAAC,QAAQ,CAAGd,GAAG,CAACe,gBAAgB,CAACJ,MAAM,CAAE,UAAU,CAAC,EAAI,IAAI,CACjE,GAAM,CAAAK,QAAQ,CAAGhB,GAAG,CAACe,gBAAgB,CAACJ,MAAM,CAAE,UAAU,CAAC,EAAI,IAAI,CACjE,GAAM,CAAAM,WAAW,CAAIH,QAAQ,GAAK,IAAI,2BAAAI,MAAA,CAA8BJ,QAAQ,uBAAuB,EAAE,CACrG,GAAM,CAAAK,WAAW,CAAIH,QAAQ,GAAK,IAAI,4BAAAE,MAAA,CAA+BF,QAAQ,uBAAuB,EAAE,CACtG,GAAM,CAAAI,GAAG,sFAAAF,MAAA,CAEKD,WAAW,2BAAAC,MAAA,CACXC,WAAW,2GAGlB,CACP,MAAO,CAAAnB,GAAG,CAACqB,OAAO,CAACf,GAAG,CAAE,UAAU,CAAEc,GAAG,CAAC,CAC5C,CAAC,GAAAjB,GAAA,qBAAAC,KAAA,CAED,SAAAQ,kBAAiCN,GAAW,CAAEE,SAAiB,CAAoB,CAC/E,GAAM,CAAAc,KAAK,CAAG,GAAI,CAAAC,MAAM,KAAAL,MAAA,CAAKV,SAAS,aAAW,CAAC,CAClD,GAAM,CAAAgB,KAAK,CAAGlB,GAAG,CAACkB,KAAK,CAACF,KAAK,CAAC,CAC9B,GAAIE,KAAK,EAAIA,KAAK,CAAC,CAAC,CAAC,CAAE,MAAO,CAAAA,KAAK,CAAC,CAAC,CAAC,CAAC,IAClC,OAAO,CAAAX,SAAS,CACzB,CAAC,GAAAV,GAAA,oBAAAC,KAAA,CAED,SAAAW,iBAAgCJ,MAAc,CAAEc,IAAY,CAAoB,CAC5E,GAAM,CAAAH,KAAK,CAAG,GAAI,CAAAC,MAAM,IAAAL,MAAA,CAAIO,IAAI,YAAU,CAAC,CAC3C,GAAM,CAAAD,KAAK,CAAGb,MAAM,CAACa,KAAK,CAACF,KAAK,CAAC,CACjC,GAAIE,KAAK,EAAIA,KAAK,CAAC,CAAC,CAAC,CAAE,MAAO,CAAAA,KAAK,CAAC,CAAC,CAAC,CAAC,IAClC,OAAO,CAAAX,SAAS,CACzB,CAAC,GAAAV,GAAA,WAAAC,KAAA,CAED,SAAAiB,QAAuBf,GAAW,CAAEE,SAAiB,CAAEY,GAAW,CAAU,CACxE,GAAM,CAAAE,KAAK,CAAG,GAAI,CAAAC,MAAM,KAAAL,MAAA,CAAKV,SAAS,aAAW,CAAC,CAClD,MAAO,CAAAF,GAAG,CAACe,OAAO,CAACC,KAAK,CAAEF,GAAG,CAAC,CAClC,CAAC,WAAApB,GAAA,KAIL,cAAe,CAAAA,GAAG"},"metadata":{},"sourceType":"module"}