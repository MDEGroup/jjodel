{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\graph\\\\vertex\\\\RootVertex.tsx\",\n  _s = $RefreshSig$(),\n  _this = this;\nimport React, { useEffect } from \"react\";\nimport { useStateIfMounted } from \"use-state-if-mounted\";\nimport { connect } from \"react-redux\";\nimport { DUser, LPointerTargetable, SetFieldAction, SetRootFieldAction } from \"../../joiner\";\nimport $ from \"jquery\";\nimport \"jqueryui\";\nimport \"jqueryui/jquery-ui.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RootVertexComponent(props, state) {\n  _s();\n  var _rootProps$isEdgePend, _rootProps$view, _rootProps$node, _rootProps$data2, _rootProps$view2, _rootProps$data3, _rootProps$node2;\n  const rootProps = props.props;\n  const node = rootProps.node;\n  const data = rootProps.data;\n  const isEdgePending = !!((_rootProps$isEdgePend = rootProps.isEdgePending) === null || _rootProps$isEdgePend === void 0 ? void 0 : _rootProps$isEdgePend.source);\n  const user = rootProps.isEdgePending.user;\n  const source = rootProps.isEdgePending.source;\n  const extendError = {\n    reason: '',\n    allTargetSuperClasses: []\n  };\n  const canBeExtend = isEdgePending && rootProps.data.className === \"DClass\" && source.canExtend(rootProps.data, extendError);\n  const [classes, setClasses] = useStateIfMounted([data.className]);\n  const select = function () {\n    var _rootProps$data;\n    let forUser = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (!forUser) forUser = DUser.current;\n    rootProps.node.isSelected[forUser] = true;\n    SetRootFieldAction.new('_lastSelected', {\n      node: rootProps.nodeid,\n      view: rootProps.view.id,\n      modelElement: (_rootProps$data = rootProps.data) === null || _rootProps$data === void 0 ? void 0 : _rootProps$data.id\n    });\n  };\n  const onClick = e => {\n    if (isEdgePending) {\n      const user = rootProps.isEdgePending.user;\n      const source = rootProps.isEdgePending.source;\n      if (canBeExtend) {\n        const lClass = LPointerTargetable.from(rootProps.data.id);\n        SetFieldAction.new(lClass.id, \"extendedBy\", source.id, \"\", true); // todo: this should throw a error for wrong type.\n        SetFieldAction.new(lClass.id, \"extendedBy\", source.id, \"+=\", true);\n        SetFieldAction.new(source.id, \"extends\", lClass.id, \"+=\", true);\n      }\n      SetRootFieldAction.new('isEdgePending', {\n        user: '',\n        source: ''\n      });\n    } else {\n      select();\n    }\n    SetRootFieldAction.new(\"contextMenu\", {\n      display: false,\n      x: 0,\n      y: 0\n    });\n    e.stopPropagation();\n  };\n  const onContextMenu = e => {\n    select();\n    SetRootFieldAction.new(\"contextMenu\", {\n      display: true,\n      x: e.clientX,\n      y: e.clientY\n    });\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const onEnter = e => {\n    if (isEdgePending && rootProps.data.className === \"DClass\") {\n      const user = rootProps.isEdgePending.user;\n      const source = rootProps.isEdgePending.source;\n      if (canBeExtend) setClasses([...classes, \"class-can-be-extended\"]);else setClasses([...classes, \"class-cannot-be-extended\"]);\n    }\n  };\n  const onLeave = e => {\n    if (rootProps.data.className === \"DClass\") {\n      setClasses(classes.filter(classname => {\n        return classname !== \"class-can-be-extended\" && classname !== \"class-cannot-be-extended\";\n      }));\n    }\n  };\n  const view = rootProps.view;\n  /*const sizeStyle: CSSProperties = {};\r\n  if(rootProps.isVertex) { sizeStyle.position = \"absolute\"; }\r\n    const edgeRefresh = () => {\r\n      const nodeid = rootProps.nodeid;\r\n      if(nodeid) {\r\n          const sources : LeaderLine[] = (window as any).leaderline.bySource[nodeid] || [];\r\n          const targets : LeaderLine[] = (window as any).leaderline.byTarget[nodeid] || [];\r\n          for(let ll of sources) { ll.position(); }\r\n          for(let ll of targets) { ll.position(); }\r\n          const subNodes = rootProps.data.subNodes;\r\n          if(subNodes) {\r\n              for(let node of subNodes) {\r\n                  const sources : LeaderLine[] = (window as any).leaderline.bySource[node.id] || [];\r\n                  const targets : LeaderLine[] = (window as any).leaderline.byTarget[node.id] || [];\r\n                  for(let ll of sources) { ll.position(); }\r\n                  for(let ll of targets) { ll.position(); }\r\n              }\r\n          }\r\n      }\r\n  }*/\n\n  useEffect(() => {\n    const element = $('[id=\"' + rootProps.nodeid + '\"]');\n    if (element && rootProps.data.className !== 'DModel') {\n      if (view) {\n        element.draggable({\n          cursor: 'grabbing',\n          containment: 'parent',\n          disabled: !view.draggable,\n          start: function (event, obj) {\n            select();\n            SetRootFieldAction.new(\"contextMenu\", {\n              display: false,\n              x: 0,\n              y: 0\n            });\n            if (view.onDragStart) {\n              try {\n                eval(view.onDragStart);\n              } catch (e) {\n                console.log(e);\n              }\n            }\n          },\n          drag: function (event, obj) {\n            // SetRootFieldAction.new(\"dragging\", {})\n          },\n          stop: function (event, obj) {\n            if (node) {\n              node.y = obj.position.top;\n              node.x = obj.position.left;\n            }\n            if (view.onDragEnd) {\n              try {\n                eval(view.onDragEnd);\n              } catch (e) {\n                console.log(e);\n              }\n            }\n          }\n        });\n        element.resizable({\n          containment: 'parent',\n          disabled: !view.resizable,\n          start: function (event, obj) {\n            select();\n            SetRootFieldAction.new(\"contextMenu\", {\n              display: false,\n              x: 0,\n              y: 0\n            });\n            if (view.onResizeStart) {\n              try {\n                eval(view.onResizeStart);\n              } catch (e) {\n                console.log(e);\n              }\n            }\n          },\n          resize: function (event, obj) {\n            // SetRootFieldAction.new(\"dragging\", {})\n          },\n          stop: function (event, obj) {\n            if (node) {\n              node.width = obj.size.width;\n              node.height = obj.size.height;\n            }\n            if (view.onResizeEnd) {\n              try {\n                eval(view.onResizeEnd);\n              } catch (e) {\n                console.log(e);\n              }\n            }\n          }\n        });\n      }\n    }\n  });\n  const viewStyle = {};\n  viewStyle.overflow = 'hidden';\n  viewStyle.position = 'absolute';\n  viewStyle.display = (_rootProps$view = rootProps.view) === null || _rootProps$view === void 0 ? void 0 : _rootProps$view.display;\n  viewStyle.zIndex = (_rootProps$node = rootProps.node) === null || _rootProps$node === void 0 ? void 0 : _rootProps$node.zIndex;\n  if (view.adaptWidth) viewStyle.width = view.adaptWidth; // '-webkit-fill-available';\n  else viewStyle.height = rootProps.view.height && rootProps.view.height + 'px';\n  if (view.adaptHeight) viewStyle.height = view.adaptHeight; //'fit-content'; // '-webkit-fill-available'; if needs to actually fill all it's not a vertex but a field.\n  else viewStyle.width = rootProps.view.width && rootProps.view.width + 'px';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: rootProps.nodeid,\n    \"data-nodeid\": rootProps.nodeid,\n    \"data-dataid\": (_rootProps$data2 = rootProps.data) === null || _rootProps$data2 === void 0 ? void 0 : _rootProps$data2.id,\n    \"data-viewid\": (_rootProps$view2 = rootProps.view) === null || _rootProps$view2 === void 0 ? void 0 : _rootProps$view2.id,\n    \"data-modelname\": (_rootProps$data3 = rootProps.data) === null || _rootProps$data3 === void 0 ? void 0 : _rootProps$data3.className,\n    \"data-userselecting\": JSON.stringify(((_rootProps$node2 = rootProps.node) === null || _rootProps$node2 === void 0 ? void 0 : _rootProps$node2.__raw.isSelected) || {}),\n    style: {\n      ...viewStyle\n    },\n    className: classes.join(' '),\n    onClick: onClick,\n    onContextMenu: onContextMenu,\n    onMouseEnter: onEnter,\n    onMouseLeave: onLeave,\n    children: props.render\n  }, rootProps.key || rootProps.nodeid, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 9\n  }, this);\n}\n_s(RootVertexComponent, \"9e8CkJBhRyUBx57Auvg4aQPFvbQ=\", false, function () {\n  return [useStateIfMounted];\n});\n_c = RootVertexComponent;\nfunction mapStateToProps(state, ownProps) {\n  var _props$lastSelected;\n  const props = ownProps.props;\n  const selected = props.data.id === ((_props$lastSelected = props.lastSelected) === null || _props$lastSelected === void 0 ? void 0 : _props$lastSelected.id);\n  const ret = {\n    selected\n  };\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const RootVertexConnected = connect(mapStateToProps, mapDispatchToProps)(RootVertexComponent);\nexport const RootVertex = function (props) {\n  let childrens = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(RootVertexConnected, {\n    ...props,\n    childrens\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = RootVertex;\nexport default RootVertex;\nvar _c, _c2;\n$RefreshReg$(_c, \"RootVertexComponent\");\n$RefreshReg$(_c2, \"RootVertex\");","map":{"version":3,"names":["React","useEffect","useStateIfMounted","connect","DUser","LPointerTargetable","SetFieldAction","SetRootFieldAction","$","jsxDEV","_jsxDEV","RootVertexComponent","props","state","_s","_rootProps$isEdgePend","_rootProps$view","_rootProps$node","_rootProps$data2","_rootProps$view2","_rootProps$data3","_rootProps$node2","rootProps","node","data","isEdgePending","source","user","extendError","reason","allTargetSuperClasses","canBeExtend","className","canExtend","classes","setClasses","select","_rootProps$data","forUser","arguments","length","undefined","current","isSelected","new","nodeid","view","id","modelElement","onClick","e","lClass","from","display","x","y","stopPropagation","onContextMenu","clientX","clientY","preventDefault","onEnter","onLeave","filter","classname","element","draggable","cursor","containment","disabled","start","event","obj","onDragStart","eval","console","log","drag","stop","position","top","left","onDragEnd","resizable","onResizeStart","resize","width","size","height","onResizeEnd","viewStyle","overflow","zIndex","adaptWidth","adaptHeight","JSON","stringify","__raw","style","join","onMouseEnter","onMouseLeave","children","render","key","fileName","_jsxFileName","lineNumber","columnNumber","_c","mapStateToProps","ownProps","_props$lastSelected","selected","lastSelected","ret","mapDispatchToProps","dispatch","RootVertexConnected","RootVertex","childrens","_this","_c2","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/graph/vertex/RootVertex.tsx"],"sourcesContent":["import {EdgeOptions, IStore} from \"../../redux/store\";\r\nimport React, {Dispatch, ReactElement, ReactNode, useEffect} from \"react\";\r\nimport {useStateIfMounted} from \"use-state-if-mounted\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    BEGIN,\r\n    DClass,\r\n    DUser, END,\r\n    GObject,\r\n    LClass, LGraphElement,\r\n    LPointerTargetable,\r\n    LViewElement,\r\n    Pointer,\r\n    SetFieldAction,\r\n    SetRootFieldAction\r\n} from \"../../joiner\";\r\nimport {AllPropss as VertexProps} from \"./Vertex\";\r\nimport $ from \"jquery\";\r\nimport \"jqueryui\";\r\nimport \"jqueryui/jquery-ui.css\";\r\n\r\ninterface ThisState {}\r\nfunction RootVertexComponent(props: AllProps, state: ThisState) {\r\n    const rootProps = props.props; const node = rootProps.node;\r\n    const data = rootProps.data;\r\n    const isEdgePending = !!(rootProps.isEdgePending?.source);\r\n    const user = rootProps.isEdgePending.user;\r\n    const source = rootProps.isEdgePending.source;\r\n    const extendError: {reason: string, allTargetSuperClasses: LClass[]} = {reason: '', allTargetSuperClasses: []}\r\n    const canBeExtend = isEdgePending &&\r\n                        rootProps.data.className === \"DClass\" &&\r\n                        source.canExtend(rootProps.data as any as LClass, extendError);\r\n    const [classes, setClasses] = useStateIfMounted<string[]>([data.className]);\r\n\r\n    const select = (forUser:Pointer<DUser, 0, 1> = null) => {\r\n        if (!forUser) forUser = DUser.current;\r\n        rootProps.node.isSelected[forUser] = true;\r\n        SetRootFieldAction.new('_lastSelected', {\r\n            node: rootProps.nodeid,\r\n            view: rootProps.view.id,\r\n            modelElement: rootProps.data?.id\r\n        });\r\n    }\r\n    const onClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        if (isEdgePending) {\r\n            const user = rootProps.isEdgePending.user;\r\n            const source = rootProps.isEdgePending.source;\r\n            if (canBeExtend) {\r\n                const lClass: LClass = LPointerTargetable.from(rootProps.data.id);\r\n                SetFieldAction.new(lClass.id, \"extendedBy\", source.id, \"\", true); // todo: this should throw a error for wrong type.\r\n                SetFieldAction.new(lClass.id, \"extendedBy\", source.id, \"+=\", true);\r\n                SetFieldAction.new(source.id, \"extends\", lClass.id, \"+=\", true);\r\n            }\r\n            SetRootFieldAction.new('isEdgePending', { user: '',  source: '' });\r\n        } else { select(); }\r\n        SetRootFieldAction.new(\"contextMenu\", {display: false, x: 0, y: 0});\r\n        e.stopPropagation();\r\n    }\r\n    const onContextMenu = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        select();\r\n        SetRootFieldAction.new(\"contextMenu\", {\r\n            display: true,\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        });\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n    const onEnter = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        if(isEdgePending && rootProps.data.className === \"DClass\") {\r\n            const user = rootProps.isEdgePending.user;\r\n            const source = rootProps.isEdgePending.source;\r\n            if(canBeExtend) setClasses([...classes, \"class-can-be-extended\"]);\r\n            else setClasses([...classes, \"class-cannot-be-extended\"]);\r\n        }\r\n    }\r\n    const onLeave = (e: React.MouseEvent<HTMLDivElement>) => {\r\n        if(rootProps.data.className === \"DClass\") {\r\n            setClasses(classes.filter((classname) => {\r\n                return classname !== \"class-can-be-extended\" && classname !==\"class-cannot-be-extended\"\r\n            }));\r\n        }\r\n    }\r\n\r\n    const view: LViewElement|undefined = rootProps.view;\r\n    /*const sizeStyle: CSSProperties = {};\r\n    if(rootProps.isVertex) { sizeStyle.position = \"absolute\"; }\r\n\r\n    const edgeRefresh = () => {\r\n        const nodeid = rootProps.nodeid;\r\n        if(nodeid) {\r\n            const sources : LeaderLine[] = (window as any).leaderline.bySource[nodeid] || [];\r\n            const targets : LeaderLine[] = (window as any).leaderline.byTarget[nodeid] || [];\r\n            for(let ll of sources) { ll.position(); }\r\n            for(let ll of targets) { ll.position(); }\r\n            const subNodes = rootProps.data.subNodes;\r\n            if(subNodes) {\r\n                for(let node of subNodes) {\r\n                    const sources : LeaderLine[] = (window as any).leaderline.bySource[node.id] || [];\r\n                    const targets : LeaderLine[] = (window as any).leaderline.byTarget[node.id] || [];\r\n                    for(let ll of sources) { ll.position(); }\r\n                    for(let ll of targets) { ll.position(); }\r\n                }\r\n            }\r\n        }\r\n    }*/\r\n\r\n    useEffect(() => {\r\n        const element: GObject = $('[id=\"' + rootProps.nodeid + '\"]');\r\n        if(element && rootProps.data.className !== 'DModel') {\r\n            if(view) {\r\n                element.draggable({\r\n                    cursor: 'grabbing',\r\n                    containment: 'parent',\r\n                    disabled: !(view.draggable),\r\n                    start: function(event: GObject, obj: GObject) {\r\n                        select();\r\n                        SetRootFieldAction.new(\"contextMenu\", { display: false, x: 0, y: 0 });\r\n                        if(view.onDragStart) {\r\n                            try{ eval(view.onDragStart); }\r\n                            catch (e) { console.log(e) }\r\n                        }\r\n                    },\r\n                    drag: function(event: GObject, obj: GObject) {\r\n                        // SetRootFieldAction.new(\"dragging\", {})\r\n                    },\r\n                    stop: function (event: GObject, obj: GObject) {\r\n                        if(node) {\r\n                            node.y = obj.position.top;\r\n                            node.x = obj.position.left;\r\n                        }\r\n                        if(view.onDragEnd) {\r\n                            try{ eval(view.onDragEnd); }\r\n                            catch (e) { console.log(e) }\r\n                        }\r\n                    }\r\n                });\r\n                element.resizable({\r\n                    containment: 'parent',\r\n                    disabled: !(view.resizable),\r\n                    start: function(event: GObject, obj: GObject) {\r\n                        select();\r\n                        SetRootFieldAction.new(\"contextMenu\", { display: false, x: 0, y: 0 });\r\n                        if(view.onResizeStart) {\r\n                            try{ eval(view.onResizeStart); }\r\n                            catch (e) { console.log(e) }\r\n                        }\r\n                    },\r\n                    resize: function(event: GObject, obj: GObject) {\r\n                        // SetRootFieldAction.new(\"dragging\", {})\r\n                    },\r\n                    stop: function(event: GObject, obj: GObject) {\r\n                        if(node) {\r\n                            node.width = obj.size.width;\r\n                            node.height = obj.size.height;\r\n                        }\r\n                        if(view.onResizeEnd) {\r\n                            try{ eval(view.onResizeEnd); }\r\n                            catch (e) { console.log(e) }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }, )\r\n\r\n    const viewStyle: GObject = {};\r\n    viewStyle.overflow = 'hidden'; viewStyle.position = 'absolute';\r\n    viewStyle.display = rootProps.view?.display;\r\n    viewStyle.zIndex = rootProps.node?.zIndex;\r\n    if (view.adaptWidth) viewStyle.width = view.adaptWidth; // '-webkit-fill-available';\r\n    else viewStyle.height = (rootProps.view.height) && rootProps.view.height + 'px';\r\n    if (view.adaptHeight) viewStyle.height = view.adaptHeight; //'fit-content'; // '-webkit-fill-available'; if needs to actually fill all it's not a vertex but a field.\r\n    else viewStyle.width = (rootProps.view.width) && rootProps.view.width + 'px';\r\n    return(\r\n        <div id={rootProps.nodeid}\r\n             data-nodeid={rootProps.nodeid}\r\n             data-dataid={rootProps.data?.id}\r\n             data-viewid={rootProps.view?.id}\r\n             data-modelname={rootProps.data?.className}\r\n             data-userselecting={JSON.stringify(rootProps.node?.__raw.isSelected || {})}\r\n             style={{...viewStyle}}\r\n             className={classes.join(' ')}\r\n             onClick={onClick}\r\n             onContextMenu={onContextMenu}\r\n             onMouseEnter={onEnter}\r\n             onMouseLeave={onLeave}\r\n             key={rootProps.key || rootProps.nodeid}\r\n        >\r\n            {props.render}\r\n        </div>\r\n\r\n    );\r\n\r\n}\r\ninterface OwnProps {props: VertexProps, render: ReactNode}\r\ninterface StateProps {}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\nfunction mapStateToProps(state: IStore, ownProps: OwnProps): StateProps {\r\n    const props = ownProps.props;\r\n    const selected = props.data.id === props.lastSelected?.id;\r\n    const ret: StateProps = {selected};\r\n    return ret;\r\n\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {} as any;\r\n    return ret;\r\n}\r\n\r\n\r\nexport const RootVertexConnected = connect<StateProps, DispatchProps, OwnProps, IStore>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(RootVertexComponent);\r\n\r\nexport const RootVertex = (props: OwnProps, childrens: (string | React.Component)[] = []): ReactElement => {\r\n    return <RootVertexConnected {...{...props, childrens}} />;\r\n}\r\nexport default RootVertex;\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}