{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{connect}from'react-redux';import{LPointerTargetable,Defaults}from'../../joiner';import{useStateIfMounted}from'use-state-if-mounted';import'./style.scss';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TextAreaComponent(props){var data=props.data;var readOnly=props.readonly!==undefined?props.readonly:!props.debugmode&&Defaults.check(data.id);var field=props.field;var getter=props.getter;var setter=props.setter;var label=props.label;var jsxLabel=props.jsxLabel;var info=data&&field&&data['__info_of__'+field];var tooltip=(props.tooltip===true?info?info.txt:'':props.tooltip)||'';var __value=!data?'undefined':getter?getter(data,field):data[field]!==undefined?data[field]:'undefined';var _useStateIfMounted=useStateIfMounted(__value),_useStateIfMounted2=_slicedToArray(_useStateIfMounted,2),value=_useStateIfMounted2[0],setValue=_useStateIfMounted2[1];var _useStateIfMounted3=useStateIfMounted(false),_useStateIfMounted4=_slicedToArray(_useStateIfMounted3,2),isTouched=_useStateIfMounted4[0],setIsTouched=_useStateIfMounted4[1];var _useStateIfMounted5=useStateIfMounted(false),_useStateIfMounted6=_slicedToArray(_useStateIfMounted5,2),showTooltip=_useStateIfMounted6[0],setShowTooltip=_useStateIfMounted6[1];if(!data)return/*#__PURE__*/_jsx(_Fragment,{});var css='my-auto input ';css+=jsxLabel||label?'ms-auto':'';css+=props.hidden?' hidden-input':'';var change=function change(evt){setValue(evt.target.value);setIsTouched(true);// I'm editing the element in my local state.\n};var blur=function blur(evt){if(readOnly)return;var target=evt.target.value;var oldValue=data&&(getter?getter(data,field):data[field]);if(target!==oldValue){if(setter)setter(target,data,field);else data[field]=target;}// I terminate my editing, so I communicate it to other <Input /> that render the same field.\nsetIsTouched(false);};var otherprops=_objectSpread({},props);delete otherprops.data;delete otherprops.field;delete otherprops.getter;delete otherprops.setter;delete otherprops.label;delete otherprops.jsxLabel;delete otherprops.tooltip;delete otherprops.hidden;delete otherprops.inputStyle;delete otherprops.children;return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({style:{display:jsxLabel||label?'flex':'block'},className:'p-1 w-fill'},otherprops),{},{children:[/*#__PURE__*/_jsx(\"label\",{onMouseEnter:function onMouseEnter(e){return setShowTooltip(true);},onMouseLeave:function onMouseLeave(e){return setShowTooltip(false);},className:\"h-100 \".concat(label||jsxLabel?'d-block':'d-none'),children:label?label:jsxLabel?jsxLabel:''}),tooltip&&showTooltip&&/*#__PURE__*/_jsxs(\"div\",{className:'my-tooltip',children:[/*#__PURE__*/_jsx(\"b\",{className:'text-center text-capitalize',children:field}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:tooltip})]}),/*#__PURE__*/_jsx(\"textarea\",{spellCheck:false,readOnly:readOnly,className:props.inputClassName||css,style:props.inputStyle,onChange:change,onBlur:blur,value:value,placeholder:props.placeholder})]}));}function mapStateToProps(state,ownProps){var ret={};var pointer=typeof ownProps.data==='string'?ownProps.data:ownProps.data.id;ret.debugmode=state.debug;ret.data=LPointerTargetable.fromPointer(pointer);return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var TextAreaConnected=connect(mapStateToProps,mapDispatchToProps)(TextAreaComponent);export var TextArea=function TextArea(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(TextAreaConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};TextAreaComponent.cname='TextAreaComponent';TextAreaConnected.cname='TextAreaConnected';TextArea.cname='TextArea';export default TextArea;","map":{"version":3,"names":["React","connect","LPointerTargetable","Defaults","useStateIfMounted","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","TextAreaComponent","props","data","readOnly","readonly","undefined","debugmode","check","id","field","getter","setter","label","jsxLabel","info","tooltip","txt","__value","_useStateIfMounted","_useStateIfMounted2","_slicedToArray","value","setValue","_useStateIfMounted3","_useStateIfMounted4","isTouched","setIsTouched","_useStateIfMounted5","_useStateIfMounted6","showTooltip","setShowTooltip","css","hidden","change","evt","target","blur","oldValue","otherprops","_objectSpread","inputStyle","children","style","display","className","onMouseEnter","e","onMouseLeave","concat","spellCheck","inputClassName","onChange","onBlur","placeholder","mapStateToProps","state","ownProps","ret","pointer","debug","fromPointer","mapDispatchToProps","dispatch","TextAreaConnected","TextArea","arguments","length","cname"],"sources":["C:/d/Programming/web/jodel-mde/src/components/forEndUser/TextArea.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DocString, DPointerTargetable, DState, GObject, LPointerTargetable, Overlap, Pointer, Defaults, Info} from '../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport './style.scss';\r\n\r\n\r\nfunction TextAreaComponent(props: AllProps) {\r\n    const data = props.data;\r\n    const readOnly = (props.readonly !== undefined) ? props.readonly : !props.debugmode && Defaults.check(data.id);\r\n    const field = props.field;\r\n    const getter = props.getter;\r\n    const setter = props.setter;\r\n    const label: string|undefined = props.label;\r\n    const jsxLabel: ReactNode|undefined = props.jsxLabel;\r\n    const info: Info | undefined = data && field && data['__info_of__' + field];\r\n    let tooltip: ReactNode = ((props.tooltip === true) ? (info ? info.txt : '') : props.tooltip) || '';\r\n    let __value = (!data) ? 'undefined' : ((getter) ? getter(data, field) : (data[field] !== undefined) ? data[field] : 'undefined');\r\n    const [value, setValue] = useStateIfMounted(__value);\r\n    const [isTouched, setIsTouched] = useStateIfMounted(false);\r\n    const [showTooltip, setShowTooltip] = useStateIfMounted(false);\r\n\r\n    if (!data) return(<></>);\r\n    let css = 'my-auto input ';\r\n    css += (jsxLabel || label) ? 'ms-auto' : '';\r\n    css += (props.hidden) ? ' hidden-input' : '';\r\n\r\n\r\n    const change = (evt: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        setValue(evt.target.value);\r\n        setIsTouched(true);     // I'm editing the element in my local state.\r\n    }\r\n\r\n    const blur = (evt: React.FocusEvent<HTMLTextAreaElement>) => {\r\n        if (readOnly) return;\r\n        const target = evt.target.value;\r\n        const oldValue = data && (getter ? getter(data, field) : data[field]);\r\n        if (target !== oldValue) {\r\n            if (setter) setter(target, data, field);\r\n            else data[field] = target;\r\n        }\r\n        // I terminate my editing, so I communicate it to other <Input /> that render the same field.\r\n        setIsTouched(false);\r\n    }\r\n\r\n    const otherprops: GObject = {...props};\r\n    delete otherprops.data;\r\n    delete otherprops.field;\r\n    delete otherprops.getter;\r\n    delete otherprops.setter;\r\n    delete otherprops.label;\r\n    delete otherprops.jsxLabel;\r\n    delete otherprops.tooltip;\r\n    delete otherprops.hidden;\r\n    delete otherprops.inputStyle;\r\n    delete otherprops.children;\r\n\r\n    return(<div style={{display: (jsxLabel || label) ? 'flex' : 'block'}} className={'p-1 w-fill'} {...otherprops}>\r\n        <label onMouseEnter={e => setShowTooltip(true)} onMouseLeave={e => setShowTooltip(false)}\r\n               className={`h-100 ${(label || jsxLabel) ? 'd-block' : 'd-none'}`}>\r\n            {(label) ? label : (jsxLabel) ? jsxLabel : ''}\r\n        </label>\r\n\r\n        {(tooltip && showTooltip) && <div className={'my-tooltip'}>\r\n            <b className={'text-center text-capitalize'}>{field}</b>\r\n            <br />\r\n            <label>{tooltip}</label>\r\n        </div>}\r\n\r\n        <textarea spellCheck={false} readOnly={readOnly} className={props.inputClassName || css} style={props.inputStyle}\r\n                  onChange={change} onBlur={blur} value={value} placeholder={props.placeholder}/>\r\n    </div>);\r\n}\r\n\r\nexport interface TextAreaOwnProps {\r\n    data: LPointerTargetable | DPointerTargetable | Pointer<DPointerTargetable, 1, 1, LPointerTargetable>;\r\n    field: string;\r\n    label?: string;\r\n    getter?: <T extends LPointerTargetable>(data: T, field: DocString<\"keyof T\">) => string;\r\n    setter?: <T extends LPointerTargetable>(value: string|boolean, data: T, field: DocString<\"keyof T\">) => void;\r\n    jsxLabel?: ReactNode;\r\n    tooltip?: ReactNode;\r\n    readonly?: boolean;\r\n    hidden?: boolean;\r\n    key?: React.Key | null;\r\n    className?: string;\r\n    inputClassName?: string;\r\n    style?: GObject;\r\n    inputStyle?: GObject;\r\n    placeholder?: string;\r\n}\r\n\r\ninterface StateProps {\r\n    debugmode: boolean;\r\n    data: LPointerTargetable & GObject;\r\n}\r\ninterface DispatchProps { }\r\n\r\ntype AllProps = Overlap<TextAreaOwnProps, Overlap<StateProps, DispatchProps>>;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: TextAreaOwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    const pointer: Pointer = typeof ownProps.data === 'string' ? ownProps.data : ownProps.data.id;\r\n    ret.debugmode = state.debug;\r\n    ret.data = LPointerTargetable.fromPointer(pointer);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const TextAreaConnected = connect<StateProps, DispatchProps, TextAreaOwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(TextAreaComponent);\r\n\r\nexport const TextArea = (props: TextAreaOwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <TextAreaConnected {...{...props, children}} />;\r\n}\r\n\r\nTextAreaComponent.cname = 'TextAreaComponent';\r\nTextAreaConnected.cname = 'TextAreaConnected';\r\nTextArea.cname = 'TextArea';\r\nexport default TextArea;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}