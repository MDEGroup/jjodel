{"ast":null,"code":"var _dec,_class,_class2,_dec2,_class3,_class4,_dec3,_class5,_class6;import React,{PureComponent}from\"react\";import{Log,Point,RuntimeAccessible,Size,Try,U,windoww}from\"../../joiner\";import $ from\"jquery\";import{DockLayout}from\"rc-dock\";import{MyPortal}from\"./MyDock\";import\"./DockManagerStyles.scss\";// needs to be class component because needs setState() to be called externally\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";class TabHeaderState{constructor(){this.fixed=void 0;this.pinned=void 0;this.fixed=false;this.pinned='';}}class TabContentState extends TabHeaderState{}export let TabHeader=(_dec=RuntimeAccessible('TabHeader'),_dec(_class=(_class2=class TabHeader extends React.Component{constructor(props){super(props);this.html=null;TabHeader.instances[props.tid]=this;this.state=new TabHeaderState();}unpin(){let oldPinned=this.state.pinned;if(oldPinned===\"\")return Log.ee(\"tab already unpinned\",this.props.tid);TabContent.instances[this.props.tid].setState({pinned:''});this.setState({pinned:''},()=>{let strip=PinnableStrip[oldPinned];strip.unpin(this.props.tid);});}toggleFixed(){let fixed=!this.state.fixed;TabContent.instances[this.props.tid].setState({fixed});this.setState({fixed},()=>{// let strip: PinnableStrip = PinnableStrip[oldPinned as AnchorTypes];\n// strip.fixed(this.props.tid, fixed);\n});}onMouseHoverExpand(){this.setAsActiveTab();}onMouseLeaveExpand(){}getTabStrip(){Log.exDev(!this.state.pinned,\"Cannot get strip, tab is not pinned\");return PinnableStrip[this.state.pinned];}setAsActiveTab(){var _tabcontent$parentEle;let strip=this.getTabStrip();const tabdata=strip.dockLayout.find(this.props.tid+\"_pinned\");if(!this.html)return;// not pinned\nstrip.dockLayout.updateTab(tabdata.id,tabdata,true);// if (windoww) return;\nlet tabcontent=document.getElementById(this.props.tid+\"_pinned\");if(!tabcontent)return Log.eDevv(\"cannot find pinned tab content\",{tid:this.props.tid,tabdata});// let e: HTMLElement = strip.html!.querySelector('.dock-content-holder') as HTMLElement;\nlet csize=Size.of(tabcontent);let tabh=this.html;let tabsize=Size.of(tabh);//let tabcenter: Point = new Point(tabsize.x + tabsize.w/2, tabsize.y + tabsize.h/2);\nconsole.log(\"setActiveTab\",{strip,tabdata,tabcontent,csize,tabh,tabsize});let offset=new Point(tabsize.x+tabsize.w/2-csize.w/2,tabsize.y+tabsize.h/2-csize.h/2);let s;let tabcontentholder=(_tabcontent$parentEle=tabcontent.parentElement)===null||_tabcontent$parentEle===void 0?void 0:_tabcontent$parentEle.parentElement;if(!(tabcontentholder===null||tabcontentholder===void 0?void 0:tabcontentholder.classList.contains('dock-content-holder')))return Log.exDevv('rc-dock changed structure, need code update or downgrading of rc-dock library.',{tabcontent,tabcontentholder});let $tabholder=$(tabcontentholder);if(!$tabholder.data(\"uiResizable\")){let handles;switch(strip.props.side){default:handles=\"\";break;case\"t\":handles=\"s, se, sw\";break;case\"b\":handles=\"n, ne, nw\";break;case\"l\":handles=\"e, se, ne\";break;case\"r\":handles=\"w, sw, nw\";break;}$tabholder.resizable({handles});tabcontentholder.tabIndex=0;}switch(strip.props.side){default:return;case\"t\":case\"b\":s=\"clamp(0px, \"+offset.x+\"px, 100vw)\";//s = \"clamp(0px, calc(\" + tabcenter.x + \"px ), 100vw)\";\nconsole.log(\"clamp: \",s);tabcontentholder.style.left=s;break;case\"l\":case\"r\":s=\"clamp(0px, \"+offset.y+\"px, 100vw)\";//s = \"clamp(0px, calc(\" + tabcenter.y + \"px ), 100vw)\";\nconsole.log(\"clamp: \",s);tabcontentholder.style.top=s;break;}}render(){const props=this.props;let pinned=this.state.pinned;let content=/*#__PURE__*/_jsxs(\"div\",{onMouseDown:()=>{console.log(\"tab dragging start\");},children:[props.children,/*#__PURE__*/_jsx(\"i\",{className:\"pin-button bi bi-arrow-down\",onClick:()=>this.unpin()})]});console.log(\"tabheader portal pre pin\",{pinned});if(!pinned){let selectTab=()=>PinnableDock.instance.setAsActiveTab(props.tid);return/*#__PURE__*/_jsx(\"div\",{className:\"active-on-mouseenter not-pinned\",onMouseDown:selectTab/*onMouseEnter={selectTab}*/,children:content});}const strip=PinnableStrip[pinned];const html=tabdict_title[props.tid+'_pinned'];console.log(\"tabheader portal\",{html,content,tabdict:tabdict_title,td:{...tabdict_title}});if(!html){// unpinned tab\nLog.exDevv(\"cannot find html\",{html,pinned,'this':this});let selectTab=()=>PinnableDock.instance.setAsActiveTab(props.tid);return/*#__PURE__*/_jsx(\"div\",{className:\"active-on-mouseenter\",onMouseDown:selectTab/*onMouseEnter={selectTab}*/,children:content});}function preventFocusOnOriginDock(e){e.stopPropagation();// otherwise the pinned tab will focus the hidden-tab on original dock\n}content=/*#__PURE__*/_jsx(\"div\",{className:\"active-on-mouseenter\",ref:e=>this.html=e,onMouseDown:preventFocusOnOriginDock,onClick:preventFocusOnOriginDock,onMouseEnter:()=>this.onMouseHoverExpand(),onMouseLeave:()=>this.onMouseLeaveExpand(),children:content});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MyPortal,{container:html,children:content}),/*#__PURE__*/_jsx(\"div\",{className:\"moved-content\",children:\"moved\"})]});}},_class2.cname='TabHeader',_class2.instances={},_class2))||_class);export let TabContent=(_dec2=RuntimeAccessible('TabHeader'),_dec2(_class3=(_class4=class TabContent extends React.Component{constructor(props){super(props);TabContent.instances[props.tid]=this;this.state=new TabContentState();}render(){const props=this.props;let pinned=this.state.pinned;const content=/*#__PURE__*/_jsx(Try,{children:props.children});if(!pinned)return content;const strip=PinnableStrip[pinned];const html=tabdict_content[props.tid+'_pinned'];if(!html)return content;return/*#__PURE__*/_jsx(MyPortal,{container:html,children:content});/*\r\n        return <MyPortal container={html}>\r\n            <div className={\"pinned-tab-content-root \"+ (this.state.fixed ? \"fixed\" : '')}>{content}</div>\r\n        </MyPortal>;\r\n        */}},_class4.cname='TabContent',_class4.instances={},_class4))||_class3);class PinnableStripState{// pinnedTabs: TabData[];// or what?\n//pinnedTabsid: Dictionary<string, true>;\nconstructor(){this.pinned=void 0;this.pinned=false;// this.pinnedTabsid = {};\n}}export let PinnableStrip=(_dec3=RuntimeAccessible(\"PinnableStrip\"),_dec3(_class5=(_class6=class PinnableStrip extends PureComponent{constructor(props){super(props);this.html=null;this.headerHtml=null;this.contentHtml=null;this.panel=void 0;this.dockLayout=null;this.layout=void 0;this.groups=void 0;this.tabs={};this.afterUpdateCallback_funcs=[];PinnableStrip[props.side]=this;this.state=new PinnableStripState();this.groups={'pinned':{floatable:false,maximizable:false,tabLocked:true}};const tabsData=[];/*\r\n        let tabdict: Dictionary<string, TabData> = {};\r\n        for (let tabid in this.state.pinnedTabsid) {\r\n            const id: string = tabid+'_pinned';\r\n            const tabdata: TabData = {\r\n                id,\r\n                group: 'pinned',\r\n                closable: false,\r\n                title: <div ref={(curr)=>this.tabdict_title[id] = curr}></div>,\r\n                content: <div ref={(curr)=>this.tabdict_content[id] = curr}></div>,\r\n                //title: <TabHeader tid={tid()}>Structure</TabHeader>, content: <TabContent tid={tid()}><StructureEditor /></TabContent>\r\n            };\r\n            tabdict[tabdata.id as string] = tabdata;\r\n            tabsData.push(tabdata);\r\n        }*/this.layout={dockbox:{mode:'horizontal',children:[]}};this.panel={id:'side_panel'+this.props.side,tabs:tabsData};this.layout.dockbox.children.push(this.panel);}unpin(tid){const stripdock=this.dockLayout;let tabData=stripdock.find(tid+\"_pinned\");delete this.tabs[tid+\"_pinned\"];stripdock.dockMove(tabData,null,'remove');if(!Object.keys(this.tabs).length)this.forceUpdate();PinnableDock.instance.restoreTab(tid);}setAfterUpdateCallback(c){this.afterUpdateCallback_funcs.push(c);}componentDidUpdate(prevProps,prevState,snapshot){this.onupdate();}componentDidMount(){this.onupdate();}onupdate(){for(let c of this.afterUpdateCallback_funcs)c();this.afterUpdateCallback_funcs=[];}addTab(t){const tid=t.id;if(this.tabs[tid])Log.eDevv(\"docking tab already exist\",this,t);this.tabs[tid]=t;// if (Object.keys(this.tabs).length === 1) this.forceUpdate(); // updates .empty class\nconsole.log(\"addTab\",{t,pp1:this.dockLayout.getLayout().dockbox.children[0],pp0:this.panel});window.pinnableStrip=this;//this.dockLayout!.dockMove(t, 'side_panel' + this.props.side, 'middle');\nwindow.addTab=t=>this.addTab(t);this.dockLayout.dockMove(t,this.dockLayout.getLayout().dockbox.children[0],'middle');this.forceUpdate();//this.dockLayout!.dockMove(t, this.panel, 'middle');\n}removeTab(tid){if(!this.tabs[tid])Log.eDevv(\"docking tab already removed\",this,tid);Log.eDevv(\"docking removeTab() todo\",this,tid);delete this.tabs[tid];if(Object.keys(this.tabs).length===0)this.forceUpdate();// updates .empty class\n}render(){const layout=this.layout;const groups=this.groups;return/*#__PURE__*/_jsxs(\"div\",{className:(Object.keys(this.tabs).length?'':'empty')+\" pinnable-strip pinnable-strip-\"+this.props.side+(this.state.pinned?' pinned':''),ref:curr=>this.html=curr,children:[/*#__PURE__*/_jsx(\"i\",{className:\"side-pin-btn bi bi-pin-angle\"+(this.state.pinned?'-fill':''),onClick:()=>this.setState({pinned:!this.state.pinned})}),/*#__PURE__*/_jsx(DockLayout,{ref:e=>this.dockLayout=e,defaultLayout:layout,groups:groups,style:{width:'100%',height:'100%'}},\"thestripdock\")]});}},_class6.cname='PinnableStrip',_class6.t=void 0,_class6.b=void 0,_class6.l=void 0,_class6.r=void 0,_class6))||_class5);/// todo: lodash _.debounce on whileDragging and similar stuff triggered too often\nlet currentDropRect;let currentDropArea;let dockLayout;let dropIndicator=U.toHtml('<div class=\"dock-drop-indicator\" style=\"left: 0px; top: 0px; width: 0px; height: 60px; display: block;');function getStrip(side){let s=side[0];return PinnableStrip[s];}function getStripHtml(side){return getStrip(side).html;}windoww.highlightAnchorArea=function(side){//let highlightdiv = dockLayout.querySelector('.dock-drop-indicator') as HTMLElement;\n//if (!highlightdiv) return;\n//highlightdiv.style.background = '#ff000077';\nlet strip=getStripHtml(side);console.log(\"highlightpin\",{strip,side,PinnableStrip});strip.classList.add('dock-drop-indicator');};windoww.hideAnchorArea=function(side){let strip=getStripHtml(side);strip.classList.remove('dock-drop-indicator');};const tabdict_title={};const tabdict_content={};windoww.confirmSetAnchor=function(side){windoww.hideAnchorArea(side);const tabdata=PinnableDock.getTabFromDropRect(currentDropRect);let strip=getStrip(side);let content=TabContent.instances[tabdata.id];let title=TabHeader.instances[tabdata.id];const id=tabdata.id+'_pinned';// + '_' + side;\nconst newtabdata={//...tabdata, parent: undefined,\nid,group:'pinned',closable:false,title:/*#__PURE__*/_jsx(\"div\",{ref:curr=>tabdict_title[id]=curr}),content:/*#__PURE__*/_jsx(\"div\",{ref:curr=>tabdict_content[id]=curr})//title: <TabHeader tid={tid()}>Structure</TabHeader>, content: <TabContent tid={tid()}><StructureEditor /></TabContent>\n};strip.setAfterUpdateCallback(()=>{content.setState({pinned:side});title.setState({pinned:side});console.log(\"confirm pin anchor\",{content,title,strip,side,tabdata,newtabdata,currentDropRect});});strip.addTab(newtabdata);PinnableDock.instance.hideTab(tabdata.id,side);/*strip.setState({pinnedTabsid:{...strip.state.pinnedTabsid, [tabdata.id as string]:true}},\r\n        ()=>{\r\n        content.setState({pinned: side}); title.setState({pinned: side});\r\n        console.log(\"confirm pin anchor\", {content, title, strip, side, tabdata, currentDropRect});\r\n    });*/console.log(\"confirm pin anchor 0\",{tid:tabdata.id,TabHeader,TabContent});// how to? i create a new dockiing here for each strip?\n// no i scrap the tabstuf, take the tabdata.header as preview. the tabdata.content as content. then add a un-pin button to the header\n//strip.classList.remove('dock-drop-indicator');\n};/*\r\nlet htmltablist = <div className=\"dock-bar drag-initiator\" role=\"tablist\" tabIndex=\"-1\">\r\n    <div role=\"tablist\" className=\"dock-nav\">\r\n        <div className=\"dock-nav-wrap\">\r\n            <div className=\"dock-nav-list\" style=\"transform: translate(0px, 0px);\">\r\n                <div className=\"dock-tab dock-tab-active\">\r\n                    <div role=\"tab\" aria-selected=\"true\" className=\"dock-tab-btn\" tabIndex=\"0\" id={tabid+'_pinned'} aria-controls={tabid+'_pinned'}>\r\n                        <div className=\"drag-initiator\">\r\n                            <TabSlot />\r\n                            <div className=\"dock-tab-hit-area\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"dock-tab\">\r\n                    <div role=\"tab\" aria-selected=\"false\" className=\"dock-tab-btn\" tabIndex=\"0\" id={tabid} aria-controls={tabid}>\r\n                        <div className=\"drag-initiator\">\r\n                            <TabSlot />\r\n                            <div className=\"dock-tab-hit-area\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"dock-ink-bar dock-ink-bar-animated\" style=\"left: 0px; width: 30px;\"></div>\r\n            </div>\r\n        </div>\r\n        <div className=\"dock-nav-operations dock-nav-operations-hidden\">\r\n            <button type=\"button\" className=\"dock-nav-more\" tabIndex=\"-1\" aria-hidden=\"true\" aria-haspopup=\"listbox\"\r\n                    aria-controls=\"rc-tabs-1-more-popup\" id=\"rc-tabs-1-more\" aria-expanded=\"false\"\r\n                    style=\"visibility: hidden; order: 1;\">...\r\n            </button>\r\n        </div>\r\n        <div className=\"dock-extra-content\">\r\n            <div className=\"dock-panel-max-btn\"></div>\r\n        </div>\r\n    </div>\r\n</div>;\r\n    */ // <LayoutProps, LayoutState>\nfunction makeAnchorControl(side){let s=side[0];const str=\"<div class=\\\"dock-drop-square dock-drop-\".concat(side,\"-anchor\\\" onmouseup=\\\"confirmSetAnchor('\").concat(s,\"')\\\" onmouseenter=\\\"highlightAnchorArea('\").concat(s,\"')\\\" onmouseleave=\\\"hideAnchorArea('\").concat(s,\"')\\\"\\\">\\n<div class=\\\"dock-drop-square-box\\\">\\n<i class=\\\"bi bi-pin-angle-fill\\\"></i>\\n</div>\\n</div>\");return U.toHtml(str);}const anchorControls=[makeAnchorControl('top'),makeAnchorControl('bottom'),makeAnchorControl('left'),makeAnchorControl('right')];// todo: how to drop pinned tabs in the main layout https://github.com/ticlo/rc-dock/issues/97there is also an official example with a different strat\nexport class PinnableDock extends DockLayout{constructor(props){super(props);console.trace(\"pinnableDock instance\",this);//Log.exDevv(PinnableDock.instance, \"current PinnableDock is a singleton, cannot make 2 instances\", {thiss:this, oldnstance: PinnableDock.instance});\nPinnableDock.instance=this;let debug=false;if(!debug)return;let t=this;// for debug only, discovery of inner events\nfor(let k in t){let originalfunc=t[k];if(typeof t[k]===\"function\")t[k]=function(){for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}console.warn('PinnableDock called '+k,{arguments});return originalfunc(...a);};}}hideTab(tid,pinnedSide){let tabdata=this.find(tid);this.updateTab(tid,{...tabdata,pinned:pinnedSide},false);let siblings=this.getSiblings(tid);let i=siblings.findIndex(t=>t.id===tid);let newActiveTab=this.getAdiacentTab(tid);console.log(\"hideTab\",{siblings,i,newActiveTab,tabdata});if(newActiveTab)this.updateTab(newActiveTab.id,newActiveTab,true);else this.hidePanel(this.getPanelFromTab(tabdata));}getPanelFromTab(t){return t.parent;}hidePanel(p){// document.findElementById(p.id)\n}restoreTab(tid){let tabdata=this.find(tid);this.updateTab(tid,{...tabdata,pinned:undefined},true);}setAsActiveTab(tid,tabdata){// todo: on mousehover on unpinned tabs\ntabdata=tabdata||this.find(tid);this.updateTab(tid,tabdata,true);}setState(state,callback){// console.warn(\"set state\", state, (state as any)?.dropRect?.element);\nsuper.setState(state,callback);}getSiblings(tid){let tabdata=this.find(tid);let panel=tabdata.parent;return panel.tabs;}getAdiacentTab(tid){let siblings=this.getSiblings(tid);let i0=siblings.findIndex(t=>t.id===tid);let i=i0;while(++i<siblings.length)if(!siblings[i].pinned)return siblings[i];i=i0;while(--i>=0)if(!siblings[i].pinned)return siblings[i];return undefined;}getNextTab(tid){let siblings=this.getSiblings(tid);let i=siblings.findIndex(t=>t.id===tid);while(++i<siblings.length)if(!siblings[i].pinned)return siblings[i];return undefined;}getPrevTab(tid){let siblings=this.getSiblings(tid);let i=siblings.findIndex(t=>t.id===tid);while(--i>=0)if(!siblings[i].pinned)return siblings[i];return undefined;}static getTabFromDropRect(dropRect){if(!dropRect.source)return undefined;const panel=dropRect.source.props.panelData;console.log(\"getTabFromDropRect\",{dropRect,panel,active:panel.activeId});const tabdata=panel.tabs.filter(t=>t.id===panel.activeId)[0];return tabdata;}componentDidUpdate(prevProps,prevState,snapshot){super.componentDidUpdate(prevProps,prevState,snapshot);if(this.state.dropRect){let droparea=this.state.dropRect.element;if(!droparea||droparea.classList.contains('dock-style-models'))return;/*<div class=\"dock-drop-square dock-drop-top anchor\"><div class=\"dock-drop-square-box\"></div></div>*/let droplayer=droparea.querySelector('.dock-drop-layer');currentDropArea=droparea;dockLayout=windoww.htmldockLayout=this._ref;currentDropRect=this.state.dropRect;if(!droplayer)return;droplayer.append(...anchorControls);let tab=PinnableDock.getTabFromDropRect(droparea);console.log('activating pin buttons',{tab,currentDropRect,dockLayout,droparea,prevProps,prevState,snapshot});// todo: tabfocus but not the active one, the clicked one\n// droparea.style.backgroundColor = \"red\";\n}// document.querySelectorAll('.dock-drop-layer')\n}//\n// onDragStateChange = (draggingScope: any) => void{\n//     //super.onDragStateChange(draggingScope);\n// }\n// onSilentChange(currentTabId?: string, direction?: DropDirection) {\n//     super.onSilentChange(currentTabId, direction);\n// }\n// dockMove(source: TabData | PanelData, target: string | TabData | PanelData | BoxData | null, direction: DropDirection) {\n//     super.dockMove(source, target, direction);\n// }\n//\n// setDropRect(element: HTMLElement, direction?: DropDirection, source?: any, event?: { clientX: number; clientY: number }, panelSize?: [number, number]) {\n//     super.setDropRect(element, direction, source, event, panelSize);\n// }\n//\n// changeLayout(layoutData: LayoutData, currentTabId: string, direction: DropDirection, silent?: boolean) {\n//     super.changeLayout(layoutData, currentTabId, direction, silent);\n// }\n// updateTab(id: string, newTab: TabData, makeActive?: boolean): boolean {\n//     return super.updateTab(id, newTab, makeActive);\n// }\nrender(){return/*#__PURE__*/_jsxs(\"div\",{className:\"pinnable-dock-root white-style\",children:[/*#__PURE__*/_jsx(PinnableStrip,{side:\"t\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pinnable-dock-middle-strip\",children:[/*#__PURE__*/_jsx(PinnableStrip,{side:\"l\"}),/*#__PURE__*/_jsx(\"div\",{className:\"not-strip\",children:super.render()}),/*#__PURE__*/_jsx(PinnableStrip,{side:\"r\"})]}),/*#__PURE__*/_jsx(PinnableStrip,{side:\"b\"})]});}}PinnableDock.instance=void 0;","map":{"version":3,"names":["React","PureComponent","Log","Point","RuntimeAccessible","Size","Try","U","windoww","$","DockLayout","MyPortal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TabHeaderState","constructor","fixed","pinned","TabContentState","TabHeader","_dec","_class","_class2","Component","props","html","instances","tid","state","unpin","oldPinned","ee","TabContent","setState","strip","PinnableStrip","toggleFixed","onMouseHoverExpand","setAsActiveTab","onMouseLeaveExpand","getTabStrip","exDev","_tabcontent$parentEle","tabdata","dockLayout","find","updateTab","id","tabcontent","document","getElementById","eDevv","csize","of","tabh","tabsize","console","log","offset","x","w","y","h","s","tabcontentholder","parentElement","classList","contains","exDevv","$tabholder","data","handles","side","resizable","tabIndex","style","left","top","render","content","onMouseDown","children","className","onClick","selectTab","PinnableDock","instance","tabdict_title","tabdict","td","preventFocusOnOriginDock","e","stopPropagation","ref","onMouseEnter","onMouseLeave","container","cname","_dec2","_class3","_class4","tabdict_content","PinnableStripState","_dec3","_class5","_class6","headerHtml","contentHtml","panel","layout","groups","tabs","afterUpdateCallback_funcs","floatable","maximizable","tabLocked","tabsData","dockbox","mode","push","stripdock","tabData","dockMove","Object","keys","length","forceUpdate","restoreTab","setAfterUpdateCallback","c","componentDidUpdate","prevProps","prevState","snapshot","onupdate","componentDidMount","addTab","t","pp1","getLayout","pp0","window","pinnableStrip","removeTab","curr","defaultLayout","width","height","b","l","r","currentDropRect","currentDropArea","dropIndicator","toHtml","getStrip","getStripHtml","highlightAnchorArea","add","hideAnchorArea","remove","confirmSetAnchor","getTabFromDropRect","title","newtabdata","group","closable","hideTab","makeAnchorControl","str","concat","anchorControls","trace","debug","k","originalfunc","_len","arguments","a","Array","_key","warn","pinnedSide","siblings","getSiblings","i","findIndex","newActiveTab","getAdiacentTab","hidePanel","getPanelFromTab","parent","p","undefined","callback","i0","getNextTab","getPrevTab","dropRect","source","panelData","active","activeId","filter","droparea","element","droplayer","querySelector","htmldockLayout","_ref","append","tab"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/dock/MyRcDock.tsx"],"sourcesContent":["import React, {Component, PureComponent, ReactElement, ReactNode, useState} from \"react\";\r\nimport {\r\n    Dictionary,\r\n    DocString,\r\n    GObject,\r\n    Log,\r\n    LoggerComponent,\r\n    Point,\r\n    RuntimeAccessible,\r\n    Size,\r\n    Try,\r\n    U,\r\n    windoww\r\n} from \"../../joiner\";\r\nimport $ from \"jquery\";\r\nimport {BoxData, DockLayout, LayoutProps, PanelData, TabData, TabGroup} from \"rc-dock\";\r\nimport {MyPortal} from \"./MyDock\";\r\nimport \"./DockManagerStyles.scss\";\r\nimport {LayoutData} from \"rc-dock/src/DockData\";\r\n\r\n// needs to be class component because needs setState() to be called externally\r\ninterface TabHeaderProps{\r\n    tid: string;\r\n    children: ReactNode;\r\n}\r\nclass TabHeaderState{\r\n    fixed: boolean;\r\n    pinned: AnchorTypes | '';\r\n    constructor() {\r\n        this.fixed = false;\r\n        this.pinned = '';\r\n    }\r\n}\r\ninterface TabContentProps extends TabHeaderProps{}\r\nclass TabContentState extends TabHeaderState{}\r\n\r\n@RuntimeAccessible('TabHeader')\r\nexport class TabHeader extends React.Component<TabHeaderProps, TabHeaderState>{\r\n    static cname: string = 'TabHeader';\r\n    static instances: Dictionary<string, TabHeader> = {};\r\n    constructor(props:TabHeaderProps) {\r\n        super(props);\r\n        TabHeader.instances[props.tid] = this;\r\n        this.state = new TabHeaderState();\r\n    }\r\n\r\n    unpin(){\r\n        let oldPinned = this.state.pinned;\r\n        if (oldPinned === \"\") return Log.ee(\"tab already unpinned\", this.props.tid);\r\n        TabContent.instances[this.props.tid].setState({pinned: ''});\r\n        this.setState({pinned: ''}, ()=>{\r\n            let strip: PinnableStrip = PinnableStrip[oldPinned as AnchorTypes];\r\n            strip.unpin(this.props.tid);\r\n        });\r\n    }\r\n    toggleFixed(){\r\n        let fixed = !this.state.fixed;\r\n        TabContent.instances[this.props.tid].setState({fixed});\r\n        this.setState({fixed}, ()=>{\r\n            // let strip: PinnableStrip = PinnableStrip[oldPinned as AnchorTypes];\r\n            // strip.fixed(this.props.tid, fixed);\r\n        });\r\n    }\r\n    onMouseHoverExpand(){\r\n        this.setAsActiveTab();\r\n    }\r\n    onMouseLeaveExpand(){\r\n\r\n    }\r\n    getTabStrip(): PinnableStrip{\r\n        Log.exDev(!this.state.pinned, \"Cannot get strip, tab is not pinned\");\r\n        return PinnableStrip[this.state.pinned as AnchorTypes];\r\n    }\r\n    setAsActiveTab(){\r\n        let strip = this.getTabStrip();\r\n        const tabdata: TabData = strip.dockLayout!.find(this.props.tid+\"_pinned\") as TabData;\r\n        if (!this.html) return; // not pinned\r\n        strip.dockLayout!.updateTab(tabdata.id as string, tabdata, true);\r\n        // if (windoww) return;\r\n        let tabcontent: HTMLElement = document.getElementById(this.props.tid+\"_pinned\") as HTMLElement;\r\n        if (!tabcontent) return Log.eDevv(\"cannot find pinned tab content\", {tid: this.props.tid, tabdata});\r\n        // let e: HTMLElement = strip.html!.querySelector('.dock-content-holder') as HTMLElement;\r\n        let csize = Size.of(tabcontent);\r\n        let tabh: HTMLElement = this.html;\r\n        let tabsize = Size.of(tabh);\r\n        //let tabcenter: Point = new Point(tabsize.x + tabsize.w/2, tabsize.y + tabsize.h/2);\r\n        console.log(\"setActiveTab\", {strip, tabdata, tabcontent, csize, tabh, tabsize});\r\n        let offset: Point = new Point(tabsize.x + tabsize.w/2 - csize.w/2, tabsize.y + tabsize.h/2 - csize.h/2);\r\n        let s: string;\r\n        let tabcontentholder: HTMLElement|null|undefined = tabcontent.parentElement?.parentElement;\r\n        if (!tabcontentholder?.classList.contains('dock-content-holder'))\r\n            return Log.exDevv('rc-dock changed structure, need code update or downgrading of rc-dock library.', {tabcontent, tabcontentholder});\r\n        let $tabholder = $(tabcontentholder);\r\n        if (!$tabholder.data(\"uiResizable\")) {\r\n            let handles: string;\r\n            switch(strip.props.side){\r\n                default: handles = \"\"; break;\r\n                case \"t\": handles = \"s, se, sw\"; break;\r\n                case \"b\": handles = \"n, ne, nw\"; break;\r\n                case \"l\": handles = \"e, se, ne\"; break;\r\n                case \"r\": handles = \"w, sw, nw\"; break;\r\n            }\r\n            $tabholder.resizable({handles});\r\n            tabcontentholder.tabIndex = 0;\r\n        }\r\n        switch(strip.props.side){\r\n            default: return;\r\n            case \"t\": case \"b\":\r\n                s = \"clamp(0px, \" + offset.x + \"px, 100vw)\";\r\n                //s = \"clamp(0px, calc(\" + tabcenter.x + \"px ), 100vw)\";\r\n                console.log(\"clamp: \", s);\r\n                tabcontentholder.style.left = s;\r\n                break;\r\n            case \"l\": case \"r\":\r\n                s = \"clamp(0px, \" + offset.y + \"px, 100vw)\";\r\n                //s = \"clamp(0px, calc(\" + tabcenter.y + \"px ), 100vw)\";\r\n                console.log(\"clamp: \", s);\r\n                tabcontentholder.style.top = s;\r\n                break;\r\n        }\r\n    }\r\n\r\n    private html: HTMLElement | null = null\r\n    render(): ReactNode {\r\n        const props: TabHeaderProps = this.props;\r\n        let pinned = this.state.pinned;\r\n        let content = <div onMouseDown={()=>{console.log(\"tab dragging start\")}}>{props.children}\r\n            {/*<i className={\"pin-button bi bi-pin-angle\" + (this.state.fixed ? '-fill' : '')} onClick={()=>this.toggleFixed()}/>*/}\r\n            <i className={\"pin-button bi bi-arrow-down\"} onClick={()=>this.unpin()}/>\r\n        </div>;\r\n        console.log(\"tabheader portal pre pin\", {pinned});\r\n        if (!pinned) {\r\n            let selectTab = () => PinnableDock.instance.setAsActiveTab(props.tid);\r\n            return <div className={\"active-on-mouseenter not-pinned\"} onMouseDown={selectTab} /*onMouseEnter={selectTab}*/>{content}</div>;\r\n        }\r\n        const strip: PinnableStrip = (PinnableStrip as GObject)[pinned];\r\n        const html: Element|null = tabdict_title[props.tid + '_pinned'];\r\n        console.log(\"tabheader portal\", {html, content, tabdict:tabdict_title, td:{...tabdict_title}});\r\n        if (!html) { // unpinned tab\r\n            Log.exDevv(\"cannot find html\", {html, pinned, 'this': this});\r\n            let selectTab = () => PinnableDock.instance.setAsActiveTab(props.tid);\r\n            return <div className={\"active-on-mouseenter\"} onMouseDown={selectTab} /*onMouseEnter={selectTab}*/>{content}</div>;\r\n        }\r\n        function preventFocusOnOriginDock(e: any): void{\r\n            e.stopPropagation(); // otherwise the pinned tab will focus the hidden-tab on original dock\r\n        }\r\n        content = <div className={\"active-on-mouseenter\"} ref={(e) => this.html = e} onMouseDown={preventFocusOnOriginDock} onClick={preventFocusOnOriginDock} onMouseEnter={()=>this.onMouseHoverExpand()} onMouseLeave={()=>this.onMouseLeaveExpand()}>{content}</div>\r\n        return <><MyPortal container={html}>{content}</MyPortal><div className={\"moved-content\"}>moved</div></>;\r\n    }\r\n}\r\n@RuntimeAccessible('TabHeader')\r\nexport class TabContent extends React.Component<TabContentProps, TabContentState>{\r\n    static cname: string = 'TabContent';\r\n    static instances: Dictionary<string, TabContent> = {};\r\n    constructor(props:TabContentProps) {\r\n        super(props);\r\n        TabContent.instances[props.tid] = this;\r\n        this.state = new TabContentState();\r\n    }\r\n\r\n    render() {\r\n        const props: TabContentProps = this.props;\r\n        let pinned = this.state.pinned;\r\n        const content = <Try>{props.children}</Try>;\r\n        if (!pinned) return content;\r\n        const strip: PinnableStrip = (PinnableStrip as GObject)[pinned];\r\n        const html: Element|null = tabdict_content[props.tid + '_pinned'];\r\n        if (!html) return content;\r\n        return <MyPortal container={html}>{content}</MyPortal>;\r\n        /*\r\n        return <MyPortal container={html}>\r\n            <div className={\"pinned-tab-content-root \"+ (this.state.fixed ? \"fixed\" : '')}>{content}</div>\r\n        </MyPortal>;\r\n        */\r\n    }\r\n}\r\n\r\ntype AnchorTypes = \"t\" | \"l\" | \"r\" | \"b\";\r\ninterface PinnableStripProps{\r\n    side: AnchorTypes;\r\n}\r\nclass PinnableStripState{\r\n    // pinnedTabs: TabData[];// or what?\r\n    //pinnedTabsid: Dictionary<string, true>;\r\n    pinned: boolean;\r\n\r\n    constructor() {\r\n        this.pinned = false;\r\n       // this.pinnedTabsid = {};\r\n    }\r\n}\r\n@RuntimeAccessible(\"PinnableStrip\")\r\nexport class PinnableStrip extends PureComponent<PinnableStripProps, PinnableStripState>{\r\n    static cname = 'PinnableStrip';\r\n    public static t: PinnableStrip;\r\n    public static b: PinnableStrip;\r\n    public static l: PinnableStrip;\r\n    public static r: PinnableStrip;\r\n\r\n    html: Element | null = null;\r\n    headerHtml: Element | null = null;\r\n    contentHtml: Element | null = null;\r\n\r\n    constructor(props: PinnableStripProps) {\r\n        super(props);\r\n        PinnableStrip[props.side] = this;\r\n        this.state = new PinnableStripState();\r\n        this.groups = {\r\n            'pinned': {floatable: false, maximizable: false, tabLocked: true}\r\n        };\r\n        const tabsData: TabData[] = [];\r\n        /*\r\n        let tabdict: Dictionary<string, TabData> = {};\r\n        for (let tabid in this.state.pinnedTabsid) {\r\n            const id: string = tabid+'_pinned';\r\n            const tabdata: TabData = {\r\n                id,\r\n                group: 'pinned',\r\n                closable: false,\r\n                title: <div ref={(curr)=>this.tabdict_title[id] = curr}></div>,\r\n                content: <div ref={(curr)=>this.tabdict_content[id] = curr}></div>,\r\n                //title: <TabHeader tid={tid()}>Structure</TabHeader>, content: <TabContent tid={tid()}><StructureEditor /></TabContent>\r\n            };\r\n            tabdict[tabdata.id as string] = tabdata;\r\n            tabsData.push(tabdata);\r\n        }*/\r\n        this.layout = {dockbox: {mode: 'horizontal', children: []}};\r\n        this.panel = {id: 'side_panel' + this.props.side, tabs: tabsData};\r\n        this.layout.dockbox.children.push(this.panel);\r\n    }\r\n\r\n    private panel: PanelData;\r\n    dockLayout: DockLayout | null = null;\r\n\r\n    private layout: LayoutData;\r\n    private groups: {[p: string]: TabGroup};\r\n    private tabs: Dictionary<string, TabData> = {};\r\n    private afterUpdateCallback_funcs: ((...a:any)=>any)[] = [];\r\n\r\n    unpin(tid: string){\r\n        const stripdock: DockLayout = this.dockLayout as DockLayout;\r\n        let tabData: TabData = stripdock.find(tid+\"_pinned\") as TabData;\r\n        delete this.tabs[tid+\"_pinned\"];\r\n        stripdock.dockMove(tabData, null, 'remove');\r\n        if (!Object.keys(this.tabs).length) this.forceUpdate();\r\n        PinnableDock.instance.restoreTab(tid);\r\n    }\r\n    setAfterUpdateCallback(c: (...a:any)=>any){\r\n        this.afterUpdateCallback_funcs.push(c);\r\n    }\r\n    componentDidUpdate(prevProps: Readonly<PinnableStripProps>, prevState: Readonly<PinnableStripState>, snapshot?: any) {\r\n        this.onupdate();\r\n    }\r\n    componentDidMount() {\r\n        this.onupdate();\r\n    }\r\n    onupdate(){\r\n        for (let c of this.afterUpdateCallback_funcs) c();\r\n        this.afterUpdateCallback_funcs = [];\r\n    }\r\n\r\n    addTab(t: TabData): void{\r\n        const tid: string = t.id as string;\r\n        if (this.tabs[tid]) Log.eDevv(\"docking tab already exist\", this, t);\r\n        this.tabs[tid] = t;\r\n        // if (Object.keys(this.tabs).length === 1) this.forceUpdate(); // updates .empty class\r\n        console.log(\"addTab\", {t, pp1:this.dockLayout!.getLayout().dockbox.children[0], pp0: this.panel});\r\n        (window as any ).pinnableStrip = this;\r\n        //this.dockLayout!.dockMove(t, 'side_panel' + this.props.side, 'middle');\r\n        (window as any).addTab = (t: any)=> this.addTab(t);\r\n\r\n\r\n        this.dockLayout!.dockMove(t, this.dockLayout!.getLayout().dockbox.children[0], 'middle');\r\n        this.forceUpdate();\r\n        //this.dockLayout!.dockMove(t, this.panel, 'middle');\r\n\r\n    }\r\n    removeTab(tid: string): void{\r\n        if (!this.tabs[tid]) Log.eDevv(\"docking tab already removed\", this, tid);\r\n        Log.eDevv(\"docking removeTab() todo\", this, tid);\r\n        delete this.tabs[tid];\r\n        if (Object.keys(this.tabs).length === 0) this.forceUpdate(); // updates .empty class\r\n    }\r\n\r\n    render(){\r\n        const layout = this.layout;\r\n        const groups = this.groups;\r\n        return <div className={(Object.keys(this.tabs).length ? '' : 'empty') +\" pinnable-strip pinnable-strip-\" + this.props.side + (this.state.pinned ? ' pinned' : '')}\r\n                    ref={(curr)=>this.html = curr}>\r\n            <i className={\"side-pin-btn bi bi-pin-angle\" + (this.state.pinned ? '-fill' : '')} onClick={()=>this.setState({pinned: !this.state.pinned})} />\r\n            {/* loadTab={(d)=>tabdict[d.id as string]} */}\r\n            <DockLayout key=\"thestripdock\" ref={(e)=>this.dockLayout = e} defaultLayout={layout} groups={groups} style={{width: '100%', height: '100%'}} />\r\n            {/*<div className={\"tab-row\"} ref={(curr)=>this.headerHtml = curr}></div>\r\n            <div className={\"content-row\"} ref={(curr)=>this.contentHtml = curr}></div>*/}\r\n        </div>;\r\n    }\r\n}\r\n\r\n/// todo: lodash _.debounce on whileDragging and similar stuff triggered too often\r\ninterface LayoutState {\r\n    layout: LayoutData;\r\n    /** @ignore */\r\n    dropRect?: any;// {left: number, width: number, top: number, height: number, element: HTMLElement, source?: any, direction?: DropDirection};\r\n}\r\nlet currentDropRect!: LayoutState[\"dropRect\"];\r\nlet currentDropArea!: Element;\r\nlet dockLayout!: Element;\r\nlet dropIndicator: Element = U.toHtml('<div class=\"dock-drop-indicator\" style=\"left: 0px; top: 0px; width: 0px; height: 60px; display: block;')\r\n\r\nfunction getStrip(side: string): PinnableStrip {\r\n    let s = side[0];\r\n    return (PinnableStrip as any)[s];\r\n}\r\nfunction getStripHtml(side: string): Element {\r\n    return getStrip(side).html as Element;\r\n}\r\n\r\nwindoww.highlightAnchorArea = function(side: string){\r\n    //let highlightdiv = dockLayout.querySelector('.dock-drop-indicator') as HTMLElement;\r\n    //if (!highlightdiv) return;\r\n    //highlightdiv.style.background = '#ff000077';\r\n    let strip = getStripHtml(side);\r\n    console.log(\"highlightpin\", {strip, side, PinnableStrip});\r\n    strip.classList.add('dock-drop-indicator');\r\n}\r\nwindoww.hideAnchorArea = function(side: string){\r\n    let strip = getStripHtml(side);\r\n    strip.classList.remove('dock-drop-indicator');\r\n}\r\n\r\n\r\nconst tabdict_title: Dictionary<DocString<\"tabdata.id\">, HTMLElement | null> = {};\r\nconst tabdict_content: Dictionary<DocString<\"tabdata.id\">, HTMLElement | null> = {};\r\nwindoww.confirmSetAnchor = function(side: AnchorTypes){\r\n    windoww.hideAnchorArea(side);\r\n    const tabdata: TabData = PinnableDock.getTabFromDropRect(currentDropRect);\r\n    let strip = getStrip(side);\r\n    let content: TabContent = TabContent.instances[tabdata.id as string];\r\n    let title: TabHeader = TabHeader.instances[tabdata.id as string];\r\n    const id: string = tabdata.id+'_pinned';// + '_' + side;\r\n    const newtabdata: TabData = {\r\n        //...tabdata, parent: undefined,\r\n        id,\r\n        group: 'pinned',\r\n        closable: false,\r\n        title: <div ref={(curr)=>tabdict_title[id] = curr}></div>,\r\n        content: <div ref={(curr)=>tabdict_content[id] = curr}></div>,\r\n        //title: <TabHeader tid={tid()}>Structure</TabHeader>, content: <TabContent tid={tid()}><StructureEditor /></TabContent>\r\n    };\r\n    strip.setAfterUpdateCallback(()=>{\r\n        content.setState({pinned: side}); title.setState({pinned: side});\r\n        console.log(\"confirm pin anchor\", {content, title, strip, side, tabdata, newtabdata, currentDropRect});\r\n    });\r\n    strip.addTab( newtabdata );\r\n    PinnableDock.instance.hideTab(tabdata.id as string, side);\r\n\r\n    /*strip.setState({pinnedTabsid:{...strip.state.pinnedTabsid, [tabdata.id as string]:true}},\r\n        ()=>{\r\n        content.setState({pinned: side}); title.setState({pinned: side});\r\n        console.log(\"confirm pin anchor\", {content, title, strip, side, tabdata, currentDropRect});\r\n    });*/\r\n    console.log(\"confirm pin anchor 0\", {tid:tabdata.id, TabHeader, TabContent});\r\n\r\n\r\n    // how to? i create a new dockiing here for each strip?\r\n    // no i scrap the tabstuf, take the tabdata.header as preview. the tabdata.content as content. then add a un-pin button to the header\r\n    //strip.classList.remove('dock-drop-indicator');\r\n}\r\n/*\r\nlet htmltablist = <div className=\"dock-bar drag-initiator\" role=\"tablist\" tabIndex=\"-1\">\r\n    <div role=\"tablist\" className=\"dock-nav\">\r\n        <div className=\"dock-nav-wrap\">\r\n            <div className=\"dock-nav-list\" style=\"transform: translate(0px, 0px);\">\r\n                <div className=\"dock-tab dock-tab-active\">\r\n                    <div role=\"tab\" aria-selected=\"true\" className=\"dock-tab-btn\" tabIndex=\"0\" id={tabid+'_pinned'} aria-controls={tabid+'_pinned'}>\r\n                        <div className=\"drag-initiator\">\r\n                            <TabSlot />\r\n                            <div className=\"dock-tab-hit-area\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"dock-tab\">\r\n                    <div role=\"tab\" aria-selected=\"false\" className=\"dock-tab-btn\" tabIndex=\"0\" id={tabid} aria-controls={tabid}>\r\n                        <div className=\"drag-initiator\">\r\n                            <TabSlot />\r\n                            <div className=\"dock-tab-hit-area\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"dock-ink-bar dock-ink-bar-animated\" style=\"left: 0px; width: 30px;\"></div>\r\n            </div>\r\n        </div>\r\n        <div className=\"dock-nav-operations dock-nav-operations-hidden\">\r\n            <button type=\"button\" className=\"dock-nav-more\" tabIndex=\"-1\" aria-hidden=\"true\" aria-haspopup=\"listbox\"\r\n                    aria-controls=\"rc-tabs-1-more-popup\" id=\"rc-tabs-1-more\" aria-expanded=\"false\"\r\n                    style=\"visibility: hidden; order: 1;\">...\r\n            </button>\r\n        </div>\r\n        <div className=\"dock-extra-content\">\r\n            <div className=\"dock-panel-max-btn\"></div>\r\n        </div>\r\n    </div>\r\n</div>;\r\n    */\r\n// <LayoutProps, LayoutState>\r\nfunction makeAnchorControl(side: string){\r\n    let s = side[0];\r\n\r\n\r\n    const str = `<div class=\"dock-drop-square dock-drop-${side}-anchor\" onmouseup=\"confirmSetAnchor('${s}')\" onmouseenter=\"highlightAnchorArea('${s}')\" onmouseleave=\"hideAnchorArea('${s}')\"\">\r\n<div class=\"dock-drop-square-box\">\r\n<i class=\"bi bi-pin-angle-fill\"></i>\r\n</div>\r\n</div>`;\r\n    return U.toHtml(str);\r\n}\r\nconst anchorControls = [\r\n    makeAnchorControl('top'),\r\n    makeAnchorControl('bottom'),\r\n    makeAnchorControl('left'),\r\n    makeAnchorControl('right'),\r\n];\r\n\r\n// todo: how to drop pinned tabs in the main layout https://github.com/ticlo/rc-dock/issues/97there is also an official example with a different strat\r\nexport class PinnableDock extends DockLayout{\r\n    static instance: PinnableDock;\r\n    constructor(props: any) {\r\n        super(props);\r\n        console.trace(\"pinnableDock instance\", this);\r\n        //Log.exDevv(PinnableDock.instance, \"current PinnableDock is a singleton, cannot make 2 instances\", {thiss:this, oldnstance: PinnableDock.instance});\r\n        PinnableDock.instance = this;\r\n        let debug:boolean = false;\r\n        if (!debug) return;\r\n        let t: GObject = this;\r\n        // for debug only, discovery of inner events\r\n        for (let k in t) {\r\n            let originalfunc = t[k];\r\n            if (typeof t[k] === \"function\") t[k] = function (...a:any): any {\r\n                console.warn('PinnableDock called ' + k, {arguments});\r\n                return originalfunc(...a);\r\n            }\r\n        }\r\n    }\r\n\r\n    hideTab(tid: string, pinnedSide: AnchorTypes){\r\n        let tabdata: TabData = this.find(tid) as TabData;\r\n        this.updateTab(tid, {...tabdata, pinned:pinnedSide} as any, false);\r\n        let siblings = this.getSiblings(tid);\r\n        let i = siblings.findIndex((t)=> t.id === tid);\r\n        let newActiveTab = this.getAdiacentTab(tid);\r\n        console.log(\"hideTab\", {siblings, i, newActiveTab, tabdata});\r\n        if (newActiveTab) this.updateTab(newActiveTab.id as string, newActiveTab, true);\r\n        else this.hidePanel(this.getPanelFromTab(tabdata));\r\n    }\r\n    getPanelFromTab(t: TabData): PanelData{\r\n        return t.parent as any;\r\n    }\r\n    hidePanel(p:PanelData): void {\r\n        // document.findElementById(p.id)\r\n    }\r\n    restoreTab(tid: string){\r\n        let tabdata = this.find(tid);\r\n        this.updateTab(tid, {...tabdata, pinned:undefined} as any, true);\r\n    }\r\n    setAsActiveTab(tid: string, tabdata?: TabData): void{ // todo: on mousehover on unpinned tabs\r\n        tabdata = tabdata || this.find(tid) as TabData;\r\n        this.updateTab(tid, tabdata, true);\r\n    }\r\n    setState<K extends keyof LayoutState>(state: ((prevState: Readonly<LayoutState>, props: Readonly<LayoutProps>) => (Pick<LayoutState, K> | LayoutState | null)) | Pick<LayoutState, K> | LayoutState | null, callback?: () => void) {\r\n        // console.warn(\"set state\", state, (state as any)?.dropRect?.element);\r\n        super.setState(state, callback);\r\n    }\r\n    getSiblings(tid: string): TabData[]{\r\n        let tabdata = this.find(tid);\r\n        let panel: PanelData = tabdata.parent as PanelData;\r\n        return panel.tabs;\r\n    }\r\n    getAdiacentTab(tid: string): TabData | undefined{\r\n        let siblings: GObject<TabData>[] = this.getSiblings(tid);\r\n        let i0 = siblings.findIndex((t)=> t.id === tid);\r\n        let i = i0;\r\n        while (++i < siblings.length) if(!siblings[i].pinned) return siblings[i];\r\n        i = i0;\r\n        while (--i >= 0) if(!siblings[i].pinned) return siblings[i];\r\n        return undefined;\r\n    }\r\n    getNextTab(tid: string): TabData | undefined{\r\n        let siblings: GObject<TabData>[] = this.getSiblings(tid);\r\n        let i = siblings.findIndex((t)=> t.id === tid);\r\n        while (++i < siblings.length) if(!siblings[i].pinned) return siblings[i];\r\n        return undefined;\r\n    }\r\n    getPrevTab(tid: string): TabData | undefined{\r\n        let siblings: GObject<TabData>[] = this.getSiblings(tid);\r\n        let i = siblings.findIndex((t)=> t.id === tid);\r\n        while (--i >= 0) if(!siblings[i].pinned) return siblings[i];\r\n        return undefined;\r\n    }\r\n    public static getTabFromDropRect(dropRect: LayoutState['dropRect']): TabData{\r\n        if (!dropRect.source) return undefined as any;\r\n        const panel: PanelData = dropRect.source.props.panelData;\r\n        console.log(\"getTabFromDropRect\", {dropRect, panel, active: panel.activeId});\r\n        const tabdata: TabData = panel.tabs.filter(t=> t.id === panel.activeId)[0];\r\n        return tabdata;\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<LayoutProps>, prevState: Readonly<LayoutState>, snapshot?: any) {\r\n        super.componentDidUpdate(prevProps, prevState, snapshot);\r\n        if (this.state.dropRect) {\r\n            let droparea = this.state.dropRect.element;\r\n            if (!droparea || droparea.classList.contains('dock-style-models')) return;\r\n            /*<div class=\"dock-drop-square dock-drop-top anchor\"><div class=\"dock-drop-square-box\"></div></div>*/\r\n            let droplayer = droparea.querySelector('.dock-drop-layer');\r\n            currentDropArea = droparea;\r\n            dockLayout = windoww.htmldockLayout = this._ref;\r\n            currentDropRect = this.state.dropRect;\r\n            if (!droplayer) return;\r\n            droplayer.append(...anchorControls);\r\n            let tab = PinnableDock.getTabFromDropRect(droparea);\r\n            console.log('activating pin buttons', {tab, currentDropRect, dockLayout, droparea, prevProps, prevState, snapshot}, );\r\n            // todo: tabfocus but not the active one, the clicked one\r\n            // droparea.style.backgroundColor = \"red\";\r\n        }\r\n        // document.querySelectorAll('.dock-drop-layer')\r\n    }\r\n    //\r\n    // onDragStateChange = (draggingScope: any) => void{\r\n    //     //super.onDragStateChange(draggingScope);\r\n    // }\r\n    // onSilentChange(currentTabId?: string, direction?: DropDirection) {\r\n    //     super.onSilentChange(currentTabId, direction);\r\n    // }\r\n    // dockMove(source: TabData | PanelData, target: string | TabData | PanelData | BoxData | null, direction: DropDirection) {\r\n    //     super.dockMove(source, target, direction);\r\n    // }\r\n    //\r\n    // setDropRect(element: HTMLElement, direction?: DropDirection, source?: any, event?: { clientX: number; clientY: number }, panelSize?: [number, number]) {\r\n    //     super.setDropRect(element, direction, source, event, panelSize);\r\n    // }\r\n    //\r\n    // changeLayout(layoutData: LayoutData, currentTabId: string, direction: DropDirection, silent?: boolean) {\r\n    //     super.changeLayout(layoutData, currentTabId, direction, silent);\r\n    // }\r\n    // updateTab(id: string, newTab: TabData, makeActive?: boolean): boolean {\r\n    //     return super.updateTab(id, newTab, makeActive);\r\n    // }\r\n\r\n    render(): React.ReactNode {\r\n        return <div className={\"pinnable-dock-root white-style\"}>\r\n            <PinnableStrip side={\"t\"} />\r\n            <div className={\"pinnable-dock-middle-strip\"}>\r\n                <PinnableStrip side={\"l\"} />\r\n                <div className={\"not-strip\"}>{super.render()}</div>\r\n                <PinnableStrip side={\"r\"} />\r\n            </div>\r\n            <PinnableStrip side={\"b\"} />\r\n        </div>\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}