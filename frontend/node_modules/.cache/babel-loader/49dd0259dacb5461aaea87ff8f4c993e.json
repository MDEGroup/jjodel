{"ast":null,"code":"import'./style.scss';import'./navbar.scss';import{DModel,DUser,Input,Keystrokes,LModel,LPackage,LUser,Selectors,SetRootFieldAction,U}from'../../joiner';import{icon}from'../components/icons/Icons';import{useNavigate}from'react-router-dom';import React,{useState}from'react';import{connect}from'react-redux';import{MetamodelPopup,ModelPopup}from'./popups';import{AuthApi,ProjectsApi}from'../../api/persistance';import TabDataMaker from\"../../../src/components/abstract/tabs/TabDataMaker\";import DockManager from\"../../../src/components/abstract/DockManager\";import{Divisor,Item,Menu}from'../components/menu/Menu';import jj from'../../static/img/jj-k.png';import Collaborative from\"../../components/collaborative/Collaborative\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const createM2=project=>{let name='metamodel_'+1;let names=Selectors.getAllMetamodels().map(m=>m.name);name=U.increaseEndingNumber(name,false,false,newName=>names.indexOf(newName)>=0);const dModel=DModel.new(name,undefined,true);const lModel=LModel.fromD(dModel);project.metamodels=[...project.metamodels,lModel];project.graphs=[...project.graphs,lModel.node];const dPackage=lModel.addChild('package');const lPackage=LPackage.fromD(dPackage);lPackage.name='default';const tab=TabDataMaker.metamodel(dModel);DockManager.open('models',tab);};const createM1=(project,metamodel)=>{let name='model_'+1;let modelNames=metamodel.models.map(m=>m.name);name=U.increaseEndingNumber(name,false,false,newName=>modelNames.indexOf(newName)>=0);const dModel=DModel.new(name,metamodel.id,false,true);const lModel=LModel.fromD(dModel);project.models=[...project.models,lModel];project.graphs=[...project.graphs,lModel.node];const tab=TabDataMaker.model(dModel);DockManager.open('models',tab);};function getKeyStrokes(keys){if(!keys||!keys.length)return undefined;return/*#__PURE__*/_jsx(\"div\",{className:\"keystrokes\",children:keys.map(k=>Keystrokes.getKeystrokeJsx(k))});}function makeEntry(i){if(i.name===\"divisor\"){return/*#__PURE__*/_jsx(\"li\",{className:\"divisor\",children:/*#__PURE__*/_jsx(\"hr\",{})});}else{if(i.subItems&&i.subItems.length===0)return undefined;let slength=i.subItems?i.subItems.length:0;return/*#__PURE__*/_jsxs(\"li\",{className:slength>0?\"hoverable\":\"\",tabIndex:0,onClick:()=>{var _i$function;return(_i$function=i.function)===null||_i$function===void 0?void 0:_i$function.call(i);},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"highlight \".concat(i.disabled&&'disabled'),children:[i.icon?/*#__PURE__*/_jsxs(\"span\",{children:[i.icon,\" \",i.name]}):/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-app hidden\"}),\" \",i.name]}),!i.disabled&&slength>0?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right icon-expand-submenu\"}):getKeyStrokes(i.keystroke)]}),!i.disabled&&slength>0&&/*#__PURE__*/_jsx(\"div\",{className:\"content right\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"context-menu right\",children:i.subItems.map(si=>makeEntry(si))})})]});}}const User=props=>{const user=LUser.fromPointer(DUser.current);const name=\"\".concat(user===null||user===void 0?void 0:user.name,\" \").concat(user===null||user===void 0?void 0:user.surname);const initials=name.split(' ').map(n=>n[0]).join('');return/*#__PURE__*/_jsxs(\"div\",{className:'user text-end',children:[/*#__PURE__*/_jsx(\"div\",{className:'initials',children:initials.toUpperCase()}),\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"span\",{children:name})]});};function NavbarComponent(props){const navigate=useNavigate();const{version,metamodels,advanced,debug}=props;const[focussed,setFocussed]=useState('');const[clicked,setClicked]=useState('');const project=props.project;// const menuType = \"normal\";\nconst Key=Keystrokes;let projectItems=[];{/*name: 'Save as', icon: icon['save'], function:  () => {project && ProjectsApi.save(project)}, keystroke: [Key.shift, Key.cmd, 'S']*/}{/*name: 'divisor', function: () => {}, keystroke: []*/}{/*name: 'Import...', icon: icon['import'], function: () => {}, keystroke: []*/}{/*\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'View', icon: icon['view'],\r\n            subItems: [\r\n            {name: 'Show dot grid', icon: icon['grid'], function: async() => {}, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Maximize editor', icon: icon['maximize'], function: async() => {}, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Zoom in', icon: icon['zoom-in'], function: async() => {}, keystroke: [Key.cmd, '+']},\r\n            {name: 'Zoom out', icon: icon['zoom-out'], function: async() => {}, keystroke: [Key.cmd, '-']},\r\n            {name: 'Zoom to 100%', function: async() => {}, keystroke: [Key.cmd, '0']},\r\n        ],\r\n            keystroke: []\r\n        },\r\n    */}//            {name: 'Close project', icon: icon['close'], function: () => {\n//                 navigate('/allProjects');\n//                 Collaborative.client.off('pullAction');\n//                 Collaborative.client.disconnect();\n//                 SetRootFieldAction.new('collaborativeSession', false);\n//                 U.refresh();\n//                 }, keystroke: [Key.cmd, 'Q']},\nif(project){projectItems=[{name:'New metamodel',icon:icon['new'],function:()=>createM2(project),keystroke:[Key.alt,Key.cmd,'M']},{name:'New model',icon:icon['new'],subItems:project.metamodels.filter(m2=>!!m2).map((m2,i)=>({name:m2.name,function:()=>{createM1(project,m2);},keystroke:[]})),disabled:project.metamodels.length==0},{name:'divisor',function:()=>{},keystroke:[]},{name:'Close project',icon:icon['close'],function:()=>{navigate('/allProjects');Collaborative.client.off('pullAction');Collaborative.client.disconnect();SetRootFieldAction.new('collaborativeSession',false);U.refresh();},keystroke:[Key.cmd,'Q']},{name:'divisor',function:()=>{},keystroke:[]},{name:'Undo',icon:icon['undo'],function:()=>{},keystroke:[Key.cmd,'Z']},{name:'Redo',icon:icon['redo'],function:()=>{},keystroke:[Key.shift,Key.cmd,'Z']},// maybe better cmd + Y ?\n{name:'divisor',function:()=>{},keystroke:[]},{name:'Save',icon:icon['save'],function:async()=>{await ProjectsApi.save(project);},keystroke:[Key.cmd,'S']},{name:'Download',icon:icon['download'],function:async()=>{await ProjectsApi.save(project);U.download(\"\".concat(project.name,\".jjodel\"),JSON.stringify(project.__raw));},keystroke:[]},{name:'divisor',function:async()=>{},keystroke:[]},{name:'Help',icon:icon['help'],subItems:[{name:'What\\'s new',icon:icon['whats-new'],function:async()=>{},keystroke:[]},{name:'divisor',function:async()=>{},keystroke:[]},{name:'Homepage',icon:icon['home'],function:async()=>{},keystroke:[]},{name:'Getting started',icon:icon['getting-started'],function:async()=>{},keystroke:[]},{name:'User guide',icon:icon['manual'],function:async()=>{},keystroke:[]},{name:'divisor',function:async()=>{},keystroke:[]},{name:'Legal terms',icon:icon['legal'],function:async()=>{},keystroke:[]}],keystroke:[]},{name:'About jjodel',icon:icon['jjodel-dark'],function:async()=>{},keystroke:[]}];}const dashboardItems=[{name:'New project',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-plus-square\"}),function:async()=>{navigate('/allProjects');await ProjectsApi.create('public',undefined,undefined,undefined,props.user.projects);/*\r\n                SetRootFieldAction.new('isLoading', true);\r\n                await U.sleep(1);\r\n                await ProjectsApi.create('public', 'Unnamed Project');\r\n                SetRootFieldAction.new('isLoading', false);*/},keystroke:[Key.cmd,'M']},{name:'Import...',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-bar-left\"}),function:ProjectsApi.import,keystroke:[]},{name:'divisor',function:()=>{},keystroke:[]},{name:'Help',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-question-square\"}),subItems:[{name:'What\\'s new',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-clock\"}),function:()=>{},keystroke:[]},{name:'divisor',function:()=>{},keystroke:[]},{name:'Homepage',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-house\"}),function:()=>{},keystroke:[]},{name:'Getting started',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-airplane\"}),function:()=>{},keystroke:[]},{name:'User guide',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-journals\"}),function:()=>{},keystroke:[]},{name:'divisor',function:()=>{},keystroke:[]},{name:'Legal terms',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-mortarboard\"}),function:()=>{},keystroke:[]}],keystroke:[]},{name:'About jjodel',icon:/*#__PURE__*/_jsx(\"img\",{src:jj,width:15}),function:()=>{},keystroke:[]},{name:'divisor',function:()=>{},keystroke:[]},{name:'Logout',icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-box-arrow-right\"}),function:async()=>{navigate('/auth');await AuthApi.logout();},keystroke:[Key.cmd,'Q']}];let itemsToRegister=[...dashboardItems,...projectItems];Keystrokes.register('#root',Object.values(itemsToRegister));const MainMenu=props=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"nav-hamburger hoverable\",tabIndex:0,children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-grid-3x3-gap-fill list\"}),/*#__PURE__*/_jsx(\"div\",{className:'content context-menu',children:/*#__PURE__*/_jsx(\"ul\",{children:props.items.map(i=>makeEntry(i))})})]});};const Logo=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"nav-logo\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"aligner\",children:[props.debug?/*#__PURE__*/_jsx(\"div\",{className:\"logo-on\",onContextMenu:e=>{e.preventDefault();SetRootFieldAction.new('debug',!props.debug);}}):/*#__PURE__*/_jsx(\"div\",{className:\"logo\",onContextMenu:e=>{e.preventDefault();SetRootFieldAction.new('debug',!props.debug);}}),props.debug&&/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bug-fill\"})]})});};const Commands=()=>{return/*#__PURE__*/_jsx(\"label\",{className:\"text-end nav-commands d-flex\",children:project&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"my-auto me-1\",children:props.advanced?\"advanced\":\"base\"}),/*#__PURE__*/_jsx(Input,{type:\"toggle\",className:\"my-auto\",style:{fontSize:'1.25em'},setter:v=>{SetRootFieldAction.new('advanced',v);},getter:()=>props.advanced})]})});};const UserMenu=()=>{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"text-end nav-side\",children:/*#__PURE__*/_jsx(\"div\",{style:{float:'right',left:'300px!important',marginTop:'2px'},children:/*#__PURE__*/_jsxs(Menu,{position:'left',children:[/*#__PURE__*/_jsx(Item,{icon:icon['dashboard'],action:()=>{navigate('/allProjects');Collaborative.client.off('pullAction');Collaborative.client.disconnect();SetRootFieldAction.new('collaborativeSession',false);U.refresh();},children:\"Dashboard\"}),/*#__PURE__*/_jsx(Divisor,{}),/*#__PURE__*/_jsx(Item,{icon:icon['profile'],action:()=>{navigate('/account');U.refresh();},children:\"Profile\"}),/*#__PURE__*/_jsx(Item,{icon:icon['settings'],action:e=>{alert('');},children:\"Settings\"}),/*#__PURE__*/_jsx(Divisor,{}),/*#__PURE__*/_jsx(Item,{icon:icon['logout'],action:async()=>{navigate('/auth');await AuthApi.logout();},children:\"Logout\"})]})})})});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"nav\",{className:'w-100 nav-container d-flex',style:{zIndex:99},children:[project?/*#__PURE__*/_jsx(MainMenu,{items:projectItems}):/*#__PURE__*/_jsx(MainMenu,{items:dashboardItems}),/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(UserMenu,{}),/*#__PURE__*/_jsx(Commands,{}),/*#__PURE__*/_jsx(User,{})]}),project&&clicked==='new.metamodel'&&/*#__PURE__*/_jsx(MetamodelPopup,{project,setClicked}),project&&clicked==='new.model'&&/*#__PURE__*/_jsx(ModelPopup,{metamodels,project,setClicked})]});}function mapStateToProps(state,ownProps){var _ret$user;const ret={};ret.user=LUser.fromPointer(DUser.current);ret.project=((_ret$user=ret.user)===null||_ret$user===void 0?void 0:_ret$user.project)||undefined;ret.metamodels=LModel.fromArr(state.m2models);ret.version=state.version;ret.advanced=state.advanced;ret.debug=state.debug;return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}const NavbarConnected=connect(mapStateToProps,mapDispatchToProps)(NavbarComponent);const Navbar=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(NavbarConnected,{...props,children});};export{Navbar};","map":{"version":3,"names":["DModel","DUser","Input","Keystrokes","LModel","LPackage","LUser","Selectors","SetRootFieldAction","U","icon","useNavigate","React","useState","connect","MetamodelPopup","ModelPopup","AuthApi","ProjectsApi","TabDataMaker","DockManager","Divisor","Item","Menu","jj","Collaborative","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","createM2","project","name","names","getAllMetamodels","map","m","increaseEndingNumber","newName","indexOf","dModel","new","undefined","lModel","fromD","metamodels","graphs","node","dPackage","addChild","lPackage","tab","metamodel","open","createM1","modelNames","models","id","model","getKeyStrokes","keys","length","className","children","k","getKeystrokeJsx","makeEntry","i","subItems","slength","tabIndex","onClick","_i$function","function","call","concat","disabled","keystroke","si","User","props","user","fromPointer","current","surname","initials","split","n","join","toUpperCase","NavbarComponent","navigate","version","advanced","debug","focussed","setFocussed","clicked","setClicked","Key","projectItems","alt","cmd","filter","m2","client","off","disconnect","refresh","shift","save","download","JSON","stringify","__raw","dashboardItems","create","projects","import","src","width","logout","itemsToRegister","register","Object","values","MainMenu","items","Logo","onContextMenu","e","preventDefault","Commands","type","style","fontSize","setter","v","getter","UserMenu","float","left","marginTop","position","action","alert","zIndex","mapStateToProps","state","ownProps","_ret$user","ret","fromArr","m2models","mapDispatchToProps","dispatch","NavbarConnected","Navbar","arguments"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/pages/components/Navbar.tsx"],"sourcesContent":["import './style.scss';\r\nimport './navbar.scss';\r\nimport {\r\n    Dictionary,\r\n    DModel,\r\n    DState,\r\n    DUser,\r\n    Input,\r\n    Keystrokes,\r\n    LGraph,\r\n    LModel,\r\n    LPackage,\r\n    LProject,\r\n    LUser,\r\n    Selectors,\r\n    SetRootFieldAction,\r\n    U\r\n} from '../../joiner';\r\n\r\nimport {icon} from '../components/icons/Icons';\r\n\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nimport React, {Component, Dispatch, ReactElement, useState} from 'react';\r\nimport {FakeStateProps} from '../../joiner/types';\r\nimport {connect} from 'react-redux';\r\nimport {MetamodelPopup, ModelPopup} from './popups';\r\nimport {AuthApi, ProjectsApi} from '../../api/persistance';\r\nimport TabDataMaker from \"../../../src/components/abstract/tabs/TabDataMaker\";\r\nimport DockManager from \"../../../src/components/abstract/DockManager\";\r\n\r\nimport {Divisor, Item, Menu} from '../components/menu/Menu';\r\nimport {InternalToggle} from '../../components/widgets/Widgets';\r\nimport jj from '../../static/img/jj-k.png';\r\nimport Storage from '../../data/storage';\r\nimport Collaborative from \"../../components/collaborative/Collaborative\";\r\n\r\nconst createM2 = (project: LProject) => {\r\n    let name = 'metamodel_' + 1;\r\n    let names: string[] = Selectors.getAllMetamodels().map(m => m.name);\r\n    name = U.increaseEndingNumber(name, false, false, newName => names.indexOf(newName) >= 0)\r\n    const dModel = DModel.new(name, undefined, true);\r\n    const lModel: LModel = LModel.fromD(dModel);\r\n    project.metamodels = [...project.metamodels, lModel];\r\n    project.graphs = [...project.graphs, lModel.node as LGraph];\r\n    const dPackage = lModel.addChild('package');\r\n    const lPackage: LPackage = LPackage.fromD(dPackage);\r\n    lPackage.name = 'default';\r\n    const tab = TabDataMaker.metamodel(dModel);\r\n    DockManager.open('models', tab);\r\n}\r\n\r\nconst createM1 = (project: LProject, metamodel: LModel) => {\r\n    let name = 'model_' + 1;\r\n    let modelNames: (string)[] = metamodel.models.map(m => m.name);\r\n    name = U.increaseEndingNumber(name, false, false, newName => modelNames.indexOf(newName) >= 0);\r\n    const dModel: DModel = DModel.new(name, metamodel.id, false, true);\r\n    const lModel: LModel = LModel.fromD(dModel);\r\n    project.models = [...project.models, lModel];\r\n    project.graphs = [...project.graphs, lModel.node as LGraph];\r\n    const tab = TabDataMaker.model(dModel);\r\n    DockManager.open('models', tab);\r\n}\r\nfunction getKeyStrokes(keys?: string[]){\r\n    if (!keys || !keys.length) return undefined;\r\n    return <div className={\"keystrokes\"}>\r\n        {keys.map(k => Keystrokes.getKeystrokeJsx(k))}\r\n    </div>\r\n}\r\n\r\nfunction makeEntry(i: MenuEntry) {\r\n\r\n    if (i.name === \"divisor\") {\r\n        return (\r\n            <li className='divisor'>\r\n                <hr />\r\n            </li>\r\n        );\r\n    } else {\r\n        if (i.subItems && i.subItems.length === 0) return undefined;\r\n        let slength = i.subItems ? i.subItems.length : 0;\r\n        return (\r\n            <li className={slength > 0 ? \"hoverable\" : \"\"} tabIndex={0} onClick={()=>i.function?.()}>\r\n                <label className={`highlight ${i.disabled && 'disabled'}`}>\r\n                    {i.icon ?\r\n                        <span>{i.icon} {i.name}</span> :\r\n                        <span><i className=\"bi bi-app hidden\"></i> {i.name}</span>\r\n                    }\r\n                    {!i.disabled && slength > 0 ?\r\n                        <i className='bi bi-chevron-right icon-expand-submenu'></i> :\r\n                        getKeyStrokes(i.keystroke)\r\n                    }\r\n                </label>\r\n            {!i.disabled && slength > 0 &&\r\n                <div className='content right'>\r\n                    <ul className='context-menu right'>\r\n                        {i.subItems!.map(si => makeEntry(si))}\r\n                    </ul>\r\n                </div>\r\n            }\r\n            </li>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\ntype UserProps = {}\r\nconst User = (props: UserProps) => {\r\n    const user: LUser = LUser.fromPointer(DUser.current);\r\n    const name = `${user?.name} ${user?.surname}`;\r\n    const initials = name.split(' ').map(n=>n[0]).join('');\r\n    return (<div className={'user text-end'}>\r\n        <div className={'initials'}>\r\n            {initials.toUpperCase()}\r\n        </div>\r\n        &nbsp;&nbsp;\r\n        <span>{name}</span>\r\n    </div>);\r\n};\r\n\r\ntype MenuEntry = {\r\n    name: string,\r\n    icon?: any,\r\n    function?: ()=>any,\r\n    keystroke?: string[],\r\n    subItems?:MenuEntry[],\r\n    disabled?: boolean;\r\n};\r\n\r\nfunction NavbarComponent(props: AllProps) {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const {version, metamodels, advanced, debug} = props;\r\n    const [focussed, setFocussed] = useState('');\r\n    const [clicked, setClicked] = useState('');\r\n\r\n    const project = props.project;\r\n\r\n    // const menuType = \"normal\";\r\n\r\n    const Key = Keystrokes;\r\n    let projectItems: MenuEntry[] = [];\r\n    {/*name: 'Save as', icon: icon['save'], function:  () => {project && ProjectsApi.save(project)}, keystroke: [Key.shift, Key.cmd, 'S']*/}\r\n    {/*name: 'divisor', function: () => {}, keystroke: []*/}\r\n    {/*name: 'Import...', icon: icon['import'], function: () => {}, keystroke: []*/}\r\n    {/*\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'View', icon: icon['view'],\r\n            subItems: [\r\n            {name: 'Show dot grid', icon: icon['grid'], function: async() => {}, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Maximize editor', icon: icon['maximize'], function: async() => {}, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Zoom in', icon: icon['zoom-in'], function: async() => {}, keystroke: [Key.cmd, '+']},\r\n            {name: 'Zoom out', icon: icon['zoom-out'], function: async() => {}, keystroke: [Key.cmd, '-']},\r\n            {name: 'Zoom to 100%', function: async() => {}, keystroke: [Key.cmd, '0']},\r\n        ],\r\n            keystroke: []\r\n        },\r\n    */\r\n    }\r\n    //            {name: 'Close project', icon: icon['close'], function: () => {\r\n    //                 navigate('/allProjects');\r\n    //                 Collaborative.client.off('pullAction');\r\n    //                 Collaborative.client.disconnect();\r\n    //                 SetRootFieldAction.new('collaborativeSession', false);\r\n    //                 U.refresh();\r\n    //                 }, keystroke: [Key.cmd, 'Q']},\r\n    if (project){\r\n        projectItems = [\r\n\r\n            {name: 'New metamodel', icon: icon['new'], function: ()=>createM2(project), keystroke: [Key.alt, Key.cmd, 'M']},\r\n\r\n            {\r\n                name: 'New model',\r\n                icon: icon['new'],\r\n                subItems: project.metamodels.filter(m2=>!!m2).map((m2, i)=>({\r\n                    name: m2.name, function: () => { createM1(project, m2) }, keystroke: []\r\n                })),\r\n                disabled: project.metamodels.length == 0\r\n            },\r\n\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Close project', icon: icon['close'], function: () => {\r\n                navigate('/allProjects');\r\n                Collaborative.client.off('pullAction');\r\n                Collaborative.client.disconnect();\r\n                SetRootFieldAction.new('collaborativeSession', false);\r\n                U.refresh();\r\n                }, keystroke: [Key.cmd, 'Q']},\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Undo', icon: icon['undo'], function: () => {\r\n\r\n                }, keystroke: [Key.cmd, 'Z']},\r\n            {name: 'Redo', icon: icon['redo'], function: () => {\r\n\r\n                }, keystroke: [Key.shift, Key.cmd, 'Z']}, // maybe better cmd + Y ?\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Save', icon: icon['save'], function: async() => {\r\n                await ProjectsApi.save(project);\r\n                }, keystroke: [Key.cmd, 'S']},\r\n            {name: 'Download', icon: icon['download'], function: async() => {\r\n                    await ProjectsApi.save(project);\r\n                    U.download(`${project.name}.jjodel`, JSON.stringify(project.__raw));\r\n                }, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Help', icon: icon['help'], subItems: [\r\n                    {name: 'What\\'s new', icon: icon['whats-new'], function: async() => {}, keystroke: []},\r\n                    {name: 'divisor', function: async() => {}, keystroke: []},\r\n                    {name: 'Homepage', icon: icon['home'], function: async() => {}, keystroke: []},\r\n                    {name: 'Getting started', icon: icon['getting-started'], function: async() => {}, keystroke: []},\r\n                    {name: 'User guide', icon: icon['manual'], function: async() => {}, keystroke: []},\r\n                    {name: 'divisor', function: async() => {}, keystroke: []},\r\n                    {name: 'Legal terms', icon: icon['legal'], function: async() => {}, keystroke: []}\r\n                ],\r\n                keystroke: []},\r\n            {name: 'About jjodel', icon: icon['jjodel-dark'], function: async() => {}, keystroke: []}\r\n        ];\r\n    }\r\n\r\n    const dashboardItems: MenuEntry[] = [\r\n\r\n        {name: 'New project', icon: <i className=\"bi bi-plus-square\"></i>, function:\r\n            async()=>{\r\n                navigate('/allProjects');\r\n                await ProjectsApi.create('public', undefined, undefined, undefined, props.user.projects);\r\n                /*\r\n                SetRootFieldAction.new('isLoading', true);\r\n                await U.sleep(1);\r\n                await ProjectsApi.create('public', 'Unnamed Project');\r\n                SetRootFieldAction.new('isLoading', false);*/\r\n            },\r\n            keystroke: [Key.cmd, 'M']},\r\n        {name: 'Import...', icon: <i className=\"bi bi-arrow-bar-left\"></i>, function: ProjectsApi.import, keystroke: []},\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'Help', icon: <i className=\"bi bi-question-square\"></i>, subItems: [\r\n            {name: 'What\\'s new', icon: <i className=\"bi bi-clock\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Homepage', icon: <i className=\"bi bi-house\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'Getting started', icon: <i className=\"bi bi-airplane\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'User guide', icon: <i className=\"bi bi-journals\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Legal terms', icon: <i className=\"bi bi-mortarboard\"></i>, function: () => {}, keystroke: []}\r\n        ],\r\n        keystroke: []},\r\n        {name: 'About jjodel', icon: <img src={jj} width={15}/>, function: () => {}, keystroke: []},\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'Logout', icon: <i className=\"bi bi-box-arrow-right\"></i>, function: async() => {\r\n                navigate('/auth');\r\n                await AuthApi.logout();\r\n            }, keystroke: [Key.cmd, 'Q']}\r\n    ];\r\n\r\n    let itemsToRegister: MenuEntry[] = [...dashboardItems, ...projectItems];\r\n    Keystrokes.register('#root', Object.values(itemsToRegister));\r\n\r\n    type MenuProps = { items: MenuEntry[] }\r\n    const MainMenu = (props: MenuProps) => {\r\n\r\n        return(\r\n            <div className='nav-hamburger hoverable' tabIndex={0}>\r\n                <i className=\"bi bi-grid-3x3-gap-fill list\"></i>\r\n                <div className={'content context-menu'}>\r\n                    <ul>\r\n                        {props.items.map(i => makeEntry(i))}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const Logo = () => {\r\n        return (\r\n        <div className='nav-logo'>\r\n            <div className={\"aligner\"}>\r\n\r\n                {props.debug ?\r\n                    <div className='logo-on' onContextMenu={(e)=>{ e.preventDefault(); SetRootFieldAction.new('debug', !props.debug)}}></div>\r\n                    :\r\n                    <div className='logo' onContextMenu={(e)=>{ e.preventDefault(); SetRootFieldAction.new('debug', !props.debug)}}></div>\r\n                }\r\n                {props.debug && <i className=\"bi bi-bug-fill\"></i>}\r\n\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    const Commands = () => {\r\n        return (<label className='text-end nav-commands d-flex'>\r\n            {project && <>\r\n                <span className={\"my-auto me-1\"}>{props.advanced ? \"advanced\" : \"base\"}</span>\r\n                <Input type=\"toggle\"\r\n                       className={\"my-auto\"}\r\n                       style={{fontSize:'1.25em'}}\r\n                       setter={(v) => {\r\n                           SetRootFieldAction.new('advanced', v);\r\n                       }}\r\n                       getter={() => props.advanced}/>\r\n            </>\r\n            }\r\n        </label>);\r\n    };\r\n\r\n    const UserMenu = () => {\r\n        return (<>\r\n        <div className='text-end nav-side'>\r\n                <div style={{float: 'right', left: '300px!important', marginTop: '2px'}}>\r\n                    <Menu position={'left'}>\r\n                        <Item icon={icon['dashboard']} action={() => {\r\n                            navigate('/allProjects');\r\n                            Collaborative.client.off('pullAction');\r\n                            Collaborative.client.disconnect();\r\n                            SetRootFieldAction.new('collaborativeSession', false);\r\n                            U.refresh();\r\n                        }}>Dashboard</Item>\r\n                        <Divisor />\r\n                        <Item icon={icon['profile']} action={()=> {\r\n                            navigate('/account');\r\n                            U.refresh();\r\n                        }}>Profile</Item>\r\n                        <Item icon={icon['settings']} action={(e)=> {alert('')}}>Settings</Item>\r\n                        <Divisor />\r\n                        <Item icon={icon['logout']} action={async() => {\r\n                            navigate('/auth');\r\n                            await AuthApi.logout();\r\n                        }}>Logout</Item>\r\n                    </Menu>\r\n                </div>\r\n            </div>\r\n        </>);\r\n    }\r\n\r\n\r\n    return(<>\r\n        <nav className={'w-100 nav-container d-flex'} style={{zIndex: 99}}>\r\n            {project ?\r\n                <MainMenu items={projectItems}/>\r\n                :\r\n                <MainMenu items={dashboardItems} />\r\n            }\r\n            <Logo />\r\n            <UserMenu />\r\n            <Commands />\r\n            <User />\r\n        </nav>\r\n\r\n        {project && clicked === 'new.metamodel' && <MetamodelPopup {...{project, setClicked}} />}\r\n        {project && clicked === 'new.model' && <ModelPopup {...{metamodels, project, setClicked}} />}\r\n    </>);\r\n}\r\n\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    user: LUser;\r\n    project?: LProject;\r\n    metamodels: LModel[];\r\n    version: DState['version'];\r\n    advanced: boolean;\r\n    debug: boolean;\r\n}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.user = LUser.fromPointer(DUser.current);\r\n    ret.project = ret.user?.project || undefined;\r\n    ret.metamodels = LModel.fromArr(state.m2models);\r\n    ret.version = state.version;\r\n    ret.advanced = state.advanced;\r\n    ret.debug = state.debug;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nconst NavbarConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NavbarComponent);\r\n\r\nconst Navbar = (props: OwnProps, children: (string | Component)[] = []): ReactElement => {\r\n    return <NavbarConnected {...{...props, children}} />;\r\n}\r\n\r\nexport {Navbar};\r\n"],"mappings":"AAAA,MAAO,cAAc,CACrB,MAAO,eAAe,CACtB,OAEIA,MAAM,CAENC,KAAK,CACLC,KAAK,CACLC,UAAU,CAEVC,MAAM,CACNC,QAAQ,CAERC,KAAK,CACLC,SAAS,CACTC,kBAAkB,CAClBC,CAAC,KACE,cAAc,CAErB,OAAQC,IAAI,KAAO,2BAA2B,CAE9C,OAAQC,WAAW,KAAO,kBAAkB,CAE5C,MAAO,CAAAC,KAAK,EAAsCC,QAAQ,KAAO,OAAO,CAExE,OAAQC,OAAO,KAAO,aAAa,CACnC,OAAQC,cAAc,CAAEC,UAAU,KAAO,UAAU,CACnD,OAAQC,OAAO,CAAEC,WAAW,KAAO,uBAAuB,CAC1D,MAAO,CAAAC,YAAY,KAAM,oDAAoD,CAC7E,MAAO,CAAAC,WAAW,KAAM,8CAA8C,CAEtE,OAAQC,OAAO,CAAEC,IAAI,CAAEC,IAAI,KAAO,yBAAyB,CAE3D,MAAO,CAAAC,EAAE,KAAM,2BAA2B,CAE1C,MAAO,CAAAC,aAAa,KAAM,8CAA8C,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzE,KAAM,CAAAC,QAAQ,CAAIC,OAAiB,EAAK,CACpC,GAAI,CAAAC,IAAI,CAAG,YAAY,CAAG,CAAC,CAC3B,GAAI,CAAAC,KAAe,CAAG5B,SAAS,CAAC6B,gBAAgB,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACJ,IAAI,CAAC,CACnEA,IAAI,CAAGzB,CAAC,CAAC8B,oBAAoB,CAACL,IAAI,CAAE,KAAK,CAAE,KAAK,CAAEM,OAAO,EAAIL,KAAK,CAACM,OAAO,CAACD,OAAO,CAAC,EAAI,CAAC,CAAC,CACzF,KAAM,CAAAE,MAAM,CAAG1C,MAAM,CAAC2C,GAAG,CAACT,IAAI,CAAEU,SAAS,CAAE,IAAI,CAAC,CAChD,KAAM,CAAAC,MAAc,CAAGzC,MAAM,CAAC0C,KAAK,CAACJ,MAAM,CAAC,CAC3CT,OAAO,CAACc,UAAU,CAAG,CAAC,GAAGd,OAAO,CAACc,UAAU,CAAEF,MAAM,CAAC,CACpDZ,OAAO,CAACe,MAAM,CAAG,CAAC,GAAGf,OAAO,CAACe,MAAM,CAAEH,MAAM,CAACI,IAAI,CAAW,CAC3D,KAAM,CAAAC,QAAQ,CAAGL,MAAM,CAACM,QAAQ,CAAC,SAAS,CAAC,CAC3C,KAAM,CAAAC,QAAkB,CAAG/C,QAAQ,CAACyC,KAAK,CAACI,QAAQ,CAAC,CACnDE,QAAQ,CAAClB,IAAI,CAAG,SAAS,CACzB,KAAM,CAAAmB,GAAG,CAAGlC,YAAY,CAACmC,SAAS,CAACZ,MAAM,CAAC,CAC1CtB,WAAW,CAACmC,IAAI,CAAC,QAAQ,CAAEF,GAAG,CAAC,CACnC,CAAC,CAED,KAAM,CAAAG,QAAQ,CAAGA,CAACvB,OAAiB,CAAEqB,SAAiB,GAAK,CACvD,GAAI,CAAApB,IAAI,CAAG,QAAQ,CAAG,CAAC,CACvB,GAAI,CAAAuB,UAAsB,CAAGH,SAAS,CAACI,MAAM,CAACrB,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACJ,IAAI,CAAC,CAC9DA,IAAI,CAAGzB,CAAC,CAAC8B,oBAAoB,CAACL,IAAI,CAAE,KAAK,CAAE,KAAK,CAAEM,OAAO,EAAIiB,UAAU,CAAChB,OAAO,CAACD,OAAO,CAAC,EAAI,CAAC,CAAC,CAC9F,KAAM,CAAAE,MAAc,CAAG1C,MAAM,CAAC2C,GAAG,CAACT,IAAI,CAAEoB,SAAS,CAACK,EAAE,CAAE,KAAK,CAAE,IAAI,CAAC,CAClE,KAAM,CAAAd,MAAc,CAAGzC,MAAM,CAAC0C,KAAK,CAACJ,MAAM,CAAC,CAC3CT,OAAO,CAACyB,MAAM,CAAG,CAAC,GAAGzB,OAAO,CAACyB,MAAM,CAAEb,MAAM,CAAC,CAC5CZ,OAAO,CAACe,MAAM,CAAG,CAAC,GAAGf,OAAO,CAACe,MAAM,CAAEH,MAAM,CAACI,IAAI,CAAW,CAC3D,KAAM,CAAAI,GAAG,CAAGlC,YAAY,CAACyC,KAAK,CAAClB,MAAM,CAAC,CACtCtB,WAAW,CAACmC,IAAI,CAAC,QAAQ,CAAEF,GAAG,CAAC,CACnC,CAAC,CACD,QAAS,CAAAQ,aAAaA,CAACC,IAAe,CAAC,CACnC,GAAI,CAACA,IAAI,EAAI,CAACA,IAAI,CAACC,MAAM,CAAE,MAAO,CAAAnB,SAAS,CAC3C,mBAAOjB,IAAA,QAAKqC,SAAS,CAAE,YAAa,CAAAC,QAAA,CAC/BH,IAAI,CAACzB,GAAG,CAAC6B,CAAC,EAAI/D,UAAU,CAACgE,eAAe,CAACD,CAAC,CAAC,CAAC,CAC5C,CAAC,CACV,CAEA,QAAS,CAAAE,SAASA,CAACC,CAAY,CAAE,CAE7B,GAAIA,CAAC,CAACnC,IAAI,GAAK,SAAS,CAAE,CACtB,mBACIP,IAAA,OAAIqC,SAAS,CAAC,SAAS,CAAAC,QAAA,cACnBtC,IAAA,QAAK,CAAC,CACN,CAAC,CAEb,CAAC,IAAM,CACH,GAAI0C,CAAC,CAACC,QAAQ,EAAID,CAAC,CAACC,QAAQ,CAACP,MAAM,GAAK,CAAC,CAAE,MAAO,CAAAnB,SAAS,CAC3D,GAAI,CAAA2B,OAAO,CAAGF,CAAC,CAACC,QAAQ,CAAGD,CAAC,CAACC,QAAQ,CAACP,MAAM,CAAG,CAAC,CAChD,mBACIlC,KAAA,OAAImC,SAAS,CAAEO,OAAO,CAAG,CAAC,CAAG,WAAW,CAAG,EAAG,CAACC,QAAQ,CAAE,CAAE,CAACC,OAAO,CAAEA,CAAA,QAAAC,WAAA,QAAAA,WAAA,CAAIL,CAAC,CAACM,QAAQ,UAAAD,WAAA,iBAAVA,WAAA,CAAAE,IAAA,CAAAP,CAAa,CAAC,EAAC,CAAAJ,QAAA,eACpFpC,KAAA,UAAOmC,SAAS,cAAAa,MAAA,CAAeR,CAAC,CAACS,QAAQ,EAAI,UAAU,CAAG,CAAAb,QAAA,EACrDI,CAAC,CAAC3D,IAAI,cACHmB,KAAA,SAAAoC,QAAA,EAAOI,CAAC,CAAC3D,IAAI,CAAC,GAAC,CAAC2D,CAAC,CAACnC,IAAI,EAAO,CAAC,cAC9BL,KAAA,SAAAoC,QAAA,eAAMtC,IAAA,MAAGqC,SAAS,CAAC,kBAAkB,CAAI,CAAC,IAAC,CAACK,CAAC,CAACnC,IAAI,EAAO,CAAC,CAE7D,CAACmC,CAAC,CAACS,QAAQ,EAAIP,OAAO,CAAG,CAAC,cACvB5C,IAAA,MAAGqC,SAAS,CAAC,yCAAyC,CAAI,CAAC,CAC3DH,aAAa,CAACQ,CAAC,CAACU,SAAS,CAAC,EAE3B,CAAC,CACX,CAACV,CAAC,CAACS,QAAQ,EAAIP,OAAO,CAAG,CAAC,eACvB5C,IAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC1BtC,IAAA,OAAIqC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAC7BI,CAAC,CAACC,QAAQ,CAAEjC,GAAG,CAAC2C,EAAE,EAAIZ,SAAS,CAACY,EAAE,CAAC,CAAC,CACrC,CAAC,CACJ,CAAC,EAEN,CAAC,CAEb,CACJ,CAOA,KAAM,CAAAC,IAAI,CAAIC,KAAgB,EAAK,CAC/B,KAAM,CAAAC,IAAW,CAAG7E,KAAK,CAAC8E,WAAW,CAACnF,KAAK,CAACoF,OAAO,CAAC,CACpD,KAAM,CAAAnD,IAAI,IAAA2C,MAAA,CAAMM,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEjD,IAAI,MAAA2C,MAAA,CAAIM,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEG,OAAO,CAAE,CAC7C,KAAM,CAAAC,QAAQ,CAAGrD,IAAI,CAACsD,KAAK,CAAC,GAAG,CAAC,CAACnD,GAAG,CAACoD,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CACtD,mBAAQ7D,KAAA,QAAKmC,SAAS,CAAE,eAAgB,CAAAC,QAAA,eACpCtC,IAAA,QAAKqC,SAAS,CAAE,UAAW,CAAAC,QAAA,CACtBsB,QAAQ,CAACI,WAAW,CAAC,CAAC,CACtB,CAAC,WAEN,cAAAhE,IAAA,SAAAsC,QAAA,CAAO/B,IAAI,CAAO,CAAC,EAClB,CAAC,CACV,CAAC,CAWD,QAAS,CAAA0D,eAAeA,CAACV,KAAe,CAAE,CAEtC,KAAM,CAAAW,QAAQ,CAAGlF,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACmF,OAAO,CAAE/C,UAAU,CAAEgD,QAAQ,CAAEC,KAAK,CAAC,CAAGd,KAAK,CACpD,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGrF,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACsF,OAAO,CAAEC,UAAU,CAAC,CAAGvF,QAAQ,CAAC,EAAE,CAAC,CAE1C,KAAM,CAAAoB,OAAO,CAAGiD,KAAK,CAACjD,OAAO,CAE7B;AAEA,KAAM,CAAAoE,GAAG,CAAGlG,UAAU,CACtB,GAAI,CAAAmG,YAAyB,CAAG,EAAE,CAClC,CAAC,uIACD,CAAC,uDACD,CAAC,+EACD,CAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAdK,CAgBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAIrE,OAAO,CAAC,CACRqE,YAAY,CAAG,CAEX,CAACpE,IAAI,CAAE,eAAe,CAAExB,IAAI,CAAEA,IAAI,CAAC,KAAK,CAAC,CAAEiE,QAAQ,CAAEA,CAAA,GAAI3C,QAAQ,CAACC,OAAO,CAAC,CAAE8C,SAAS,CAAE,CAACsB,GAAG,CAACE,GAAG,CAAEF,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CAE/G,CACItE,IAAI,CAAE,WAAW,CACjBxB,IAAI,CAAEA,IAAI,CAAC,KAAK,CAAC,CACjB4D,QAAQ,CAAErC,OAAO,CAACc,UAAU,CAAC0D,MAAM,CAACC,EAAE,EAAE,CAAC,CAACA,EAAE,CAAC,CAACrE,GAAG,CAAC,CAACqE,EAAE,CAAErC,CAAC,IAAI,CACxDnC,IAAI,CAAEwE,EAAE,CAACxE,IAAI,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAEnB,QAAQ,CAACvB,OAAO,CAAEyE,EAAE,CAAC,CAAC,CAAC,CAAE3B,SAAS,CAAE,EACzE,CAAC,CAAC,CAAC,CACHD,QAAQ,CAAE7C,OAAO,CAACc,UAAU,CAACgB,MAAM,EAAI,CAC3C,CAAC,CAED,CAAC7B,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,eAAe,CAAExB,IAAI,CAAEA,IAAI,CAAC,OAAO,CAAC,CAAEiE,QAAQ,CAAEA,CAAA,GAAM,CACzDkB,QAAQ,CAAC,cAAc,CAAC,CACxBpE,aAAa,CAACkF,MAAM,CAACC,GAAG,CAAC,YAAY,CAAC,CACtCnF,aAAa,CAACkF,MAAM,CAACE,UAAU,CAAC,CAAC,CACjCrG,kBAAkB,CAACmC,GAAG,CAAC,sBAAsB,CAAE,KAAK,CAAC,CACrDlC,CAAC,CAACqG,OAAO,CAAC,CAAC,CACX,CAAC,CAAE/B,SAAS,CAAE,CAACsB,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CACjC,CAACtE,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,MAAM,CAAExB,IAAI,CAAEA,IAAI,CAAC,MAAM,CAAC,CAAEiE,QAAQ,CAAEA,CAAA,GAAM,CAE/C,CAAC,CAAEI,SAAS,CAAE,CAACsB,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CACjC,CAACtE,IAAI,CAAE,MAAM,CAAExB,IAAI,CAAEA,IAAI,CAAC,MAAM,CAAC,CAAEiE,QAAQ,CAAEA,CAAA,GAAM,CAE/C,CAAC,CAAEI,SAAS,CAAE,CAACsB,GAAG,CAACU,KAAK,CAAEV,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CAAE;AAC9C,CAACtE,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,MAAM,CAAExB,IAAI,CAAEA,IAAI,CAAC,MAAM,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CACpD,KAAM,CAAAzD,WAAW,CAAC8F,IAAI,CAAC/E,OAAO,CAAC,CAC/B,CAAC,CAAE8C,SAAS,CAAE,CAACsB,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CACjC,CAACtE,IAAI,CAAE,UAAU,CAAExB,IAAI,CAAEA,IAAI,CAAC,UAAU,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CACxD,KAAM,CAAAzD,WAAW,CAAC8F,IAAI,CAAC/E,OAAO,CAAC,CAC/BxB,CAAC,CAACwG,QAAQ,IAAApC,MAAA,CAAI5C,OAAO,CAACC,IAAI,YAAWgF,IAAI,CAACC,SAAS,CAAClF,OAAO,CAACmF,KAAK,CAAC,CAAC,CACvE,CAAC,CAAErC,SAAS,CAAE,EAAE,CAAC,CACrB,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACzD,CAAC7C,IAAI,CAAE,MAAM,CAAExB,IAAI,CAAEA,IAAI,CAAC,MAAM,CAAC,CAAE4D,QAAQ,CAAE,CACrC,CAACpC,IAAI,CAAE,aAAa,CAAExB,IAAI,CAAEA,IAAI,CAAC,WAAW,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACtF,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACzD,CAAC7C,IAAI,CAAE,UAAU,CAAExB,IAAI,CAAEA,IAAI,CAAC,MAAM,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAC9E,CAAC7C,IAAI,CAAE,iBAAiB,CAAExB,IAAI,CAAEA,IAAI,CAAC,iBAAiB,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAChG,CAAC7C,IAAI,CAAE,YAAY,CAAExB,IAAI,CAAEA,IAAI,CAAC,QAAQ,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAClF,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACzD,CAAC7C,IAAI,CAAE,aAAa,CAAExB,IAAI,CAAEA,IAAI,CAAC,OAAO,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACrF,CACDA,SAAS,CAAE,EAAE,CAAC,CAClB,CAAC7C,IAAI,CAAE,cAAc,CAAExB,IAAI,CAAEA,IAAI,CAAC,aAAa,CAAC,CAAEiE,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAC5F,CACL,CAEA,KAAM,CAAAsC,cAA2B,CAAG,CAEhC,CAACnF,IAAI,CAAE,aAAa,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,mBAAmB,CAAI,CAAC,CAAEW,QAAQ,CACvE,KAAAA,CAAA,GAAS,CACLkB,QAAQ,CAAC,cAAc,CAAC,CACxB,KAAM,CAAA3E,WAAW,CAACoG,MAAM,CAAC,QAAQ,CAAE1E,SAAS,CAAEA,SAAS,CAAEA,SAAS,CAAEsC,KAAK,CAACC,IAAI,CAACoC,QAAQ,CAAC,CACxF;AAChB;AACA;AACA;AACA,6DACY,CAAC,CACDxC,SAAS,CAAE,CAACsB,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CAC9B,CAACtE,IAAI,CAAE,WAAW,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,sBAAsB,CAAI,CAAC,CAAEW,QAAQ,CAAEzD,WAAW,CAACsG,MAAM,CAAEzC,SAAS,CAAE,EAAE,CAAC,CAChH,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,MAAM,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,uBAAuB,CAAI,CAAC,CAAEM,QAAQ,CAAE,CACtE,CAACpC,IAAI,CAAE,aAAa,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAI,CAAC,CAAEW,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAC/F,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,UAAU,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,aAAa,CAAI,CAAC,CAAEW,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAC5F,CAAC7C,IAAI,CAAE,iBAAiB,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,gBAAgB,CAAI,CAAC,CAAEW,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACtG,CAAC7C,IAAI,CAAE,YAAY,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,gBAAgB,CAAI,CAAC,CAAEW,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACjG,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,aAAa,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,mBAAmB,CAAI,CAAC,CAAEW,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACxG,CACDA,SAAS,CAAE,EAAE,CAAC,CACd,CAAC7C,IAAI,CAAE,cAAc,CAAExB,IAAI,cAAEiB,IAAA,QAAK8F,GAAG,CAAEjG,EAAG,CAACkG,KAAK,CAAE,EAAG,CAAC,CAAC,CAAE/C,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CAC3F,CAAC7C,IAAI,CAAE,SAAS,CAAEyC,QAAQ,CAAEA,CAAA,GAAM,CAAC,CAAC,CAAEI,SAAS,CAAE,EAAE,CAAC,CACpD,CAAC7C,IAAI,CAAE,QAAQ,CAAExB,IAAI,cAAEiB,IAAA,MAAGqC,SAAS,CAAC,uBAAuB,CAAI,CAAC,CAAEW,QAAQ,CAAE,KAAAA,CAAA,GAAW,CAC/EkB,QAAQ,CAAC,OAAO,CAAC,CACjB,KAAM,CAAA5E,OAAO,CAAC0G,MAAM,CAAC,CAAC,CAC1B,CAAC,CAAE5C,SAAS,CAAE,CAACsB,GAAG,CAACG,GAAG,CAAE,GAAG,CAAC,CAAC,CACpC,CAED,GAAI,CAAAoB,eAA4B,CAAG,CAAC,GAAGP,cAAc,CAAE,GAAGf,YAAY,CAAC,CACvEnG,UAAU,CAAC0H,QAAQ,CAAC,OAAO,CAAEC,MAAM,CAACC,MAAM,CAACH,eAAe,CAAC,CAAC,CAG5D,KAAM,CAAAI,QAAQ,CAAI9C,KAAgB,EAAK,CAEnC,mBACIrD,KAAA,QAAKmC,SAAS,CAAC,yBAAyB,CAACQ,QAAQ,CAAE,CAAE,CAAAP,QAAA,eACjDtC,IAAA,MAAGqC,SAAS,CAAC,8BAA8B,CAAI,CAAC,cAChDrC,IAAA,QAAKqC,SAAS,CAAE,sBAAuB,CAAAC,QAAA,cACnCtC,IAAA,OAAAsC,QAAA,CACKiB,KAAK,CAAC+C,KAAK,CAAC5F,GAAG,CAACgC,CAAC,EAAID,SAAS,CAACC,CAAC,CAAC,CAAC,CACnC,CAAC,CACJ,CAAC,EACL,CAAC,CAEd,CAAC,CAED,KAAM,CAAA6D,IAAI,CAAGA,CAAA,GAAM,CACf,mBACAvG,IAAA,QAAKqC,SAAS,CAAC,UAAU,CAAAC,QAAA,cACrBpC,KAAA,QAAKmC,SAAS,CAAE,SAAU,CAAAC,QAAA,EAErBiB,KAAK,CAACc,KAAK,cACRrE,IAAA,QAAKqC,SAAS,CAAC,SAAS,CAACmE,aAAa,CAAGC,CAAC,EAAG,CAAEA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAE7H,kBAAkB,CAACmC,GAAG,CAAC,OAAO,CAAE,CAACuC,KAAK,CAACc,KAAK,CAAC,EAAE,CAAM,CAAC,cAEzHrE,IAAA,QAAKqC,SAAS,CAAC,MAAM,CAACmE,aAAa,CAAGC,CAAC,EAAG,CAAEA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAE7H,kBAAkB,CAACmC,GAAG,CAAC,OAAO,CAAE,CAACuC,KAAK,CAACc,KAAK,CAAC,EAAE,CAAM,CAAC,CAEzHd,KAAK,CAACc,KAAK,eAAIrE,IAAA,MAAGqC,SAAS,CAAC,gBAAgB,CAAI,CAAC,EAEjD,CAAC,CACL,CAAC,CAEV,CAAC,CAED,KAAM,CAAAsE,QAAQ,CAAGA,CAAA,GAAM,CACnB,mBAAQ3G,IAAA,UAAOqC,SAAS,CAAC,8BAA8B,CAAAC,QAAA,CAClDhC,OAAO,eAAIJ,KAAA,CAAAE,SAAA,EAAAkC,QAAA,eACRtC,IAAA,SAAMqC,SAAS,CAAE,cAAe,CAAAC,QAAA,CAAEiB,KAAK,CAACa,QAAQ,CAAG,UAAU,CAAG,MAAM,CAAO,CAAC,cAC9EpE,IAAA,CAACzB,KAAK,EAACqI,IAAI,CAAC,QAAQ,CACbvE,SAAS,CAAE,SAAU,CACrBwE,KAAK,CAAE,CAACC,QAAQ,CAAC,QAAQ,CAAE,CAC3BC,MAAM,CAAGC,CAAC,EAAK,CACXnI,kBAAkB,CAACmC,GAAG,CAAC,UAAU,CAAEgG,CAAC,CAAC,CACzC,CAAE,CACFC,MAAM,CAAEA,CAAA,GAAM1D,KAAK,CAACa,QAAS,CAAC,CAAC,EACxC,CAAC,CAEA,CAAC,CACZ,CAAC,CAED,KAAM,CAAA8C,QAAQ,CAAGA,CAAA,GAAM,CACnB,mBAAQlH,IAAA,CAAAI,SAAA,EAAAkC,QAAA,cACRtC,IAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAC1BtC,IAAA,QAAK6G,KAAK,CAAE,CAACM,KAAK,CAAE,OAAO,CAAEC,IAAI,CAAE,iBAAiB,CAAEC,SAAS,CAAE,KAAK,CAAE,CAAA/E,QAAA,cACpEpC,KAAA,CAACN,IAAI,EAAC0H,QAAQ,CAAE,MAAO,CAAAhF,QAAA,eACnBtC,IAAA,CAACL,IAAI,EAACZ,IAAI,CAAEA,IAAI,CAAC,WAAW,CAAE,CAACwI,MAAM,CAAEA,CAAA,GAAM,CACzCrD,QAAQ,CAAC,cAAc,CAAC,CACxBpE,aAAa,CAACkF,MAAM,CAACC,GAAG,CAAC,YAAY,CAAC,CACtCnF,aAAa,CAACkF,MAAM,CAACE,UAAU,CAAC,CAAC,CACjCrG,kBAAkB,CAACmC,GAAG,CAAC,sBAAsB,CAAE,KAAK,CAAC,CACrDlC,CAAC,CAACqG,OAAO,CAAC,CAAC,CACf,CAAE,CAAA7C,QAAA,CAAC,WAAS,CAAM,CAAC,cACnBtC,IAAA,CAACN,OAAO,GAAE,CAAC,cACXM,IAAA,CAACL,IAAI,EAACZ,IAAI,CAAEA,IAAI,CAAC,SAAS,CAAE,CAACwI,MAAM,CAAEA,CAAA,GAAK,CACtCrD,QAAQ,CAAC,UAAU,CAAC,CACpBpF,CAAC,CAACqG,OAAO,CAAC,CAAC,CACf,CAAE,CAAA7C,QAAA,CAAC,SAAO,CAAM,CAAC,cACjBtC,IAAA,CAACL,IAAI,EAACZ,IAAI,CAAEA,IAAI,CAAC,UAAU,CAAE,CAACwI,MAAM,CAAGd,CAAC,EAAI,CAACe,KAAK,CAAC,EAAE,CAAC,EAAE,CAAAlF,QAAA,CAAC,UAAQ,CAAM,CAAC,cACxEtC,IAAA,CAACN,OAAO,GAAE,CAAC,cACXM,IAAA,CAACL,IAAI,EAACZ,IAAI,CAAEA,IAAI,CAAC,QAAQ,CAAE,CAACwI,MAAM,CAAE,KAAAA,CAAA,GAAW,CAC3CrD,QAAQ,CAAC,OAAO,CAAC,CACjB,KAAM,CAAA5E,OAAO,CAAC0G,MAAM,CAAC,CAAC,CAC1B,CAAE,CAAA1D,QAAA,CAAC,QAAM,CAAM,CAAC,EACd,CAAC,CACN,CAAC,CACL,CAAC,CACR,CAAC,CACP,CAAC,CAGD,mBAAOpC,KAAA,CAAAE,SAAA,EAAAkC,QAAA,eACHpC,KAAA,QAAKmC,SAAS,CAAE,4BAA6B,CAACwE,KAAK,CAAE,CAACY,MAAM,CAAE,EAAE,CAAE,CAAAnF,QAAA,EAC7DhC,OAAO,cACJN,IAAA,CAACqG,QAAQ,EAACC,KAAK,CAAE3B,YAAa,CAAC,CAAC,cAEhC3E,IAAA,CAACqG,QAAQ,EAACC,KAAK,CAAEZ,cAAe,CAAE,CAAC,cAEvC1F,IAAA,CAACuG,IAAI,GAAE,CAAC,cACRvG,IAAA,CAACkH,QAAQ,GAAE,CAAC,cACZlH,IAAA,CAAC2G,QAAQ,GAAE,CAAC,cACZ3G,IAAA,CAACsD,IAAI,GAAE,CAAC,EACP,CAAC,CAELhD,OAAO,EAAIkE,OAAO,GAAK,eAAe,eAAIxE,IAAA,CAACZ,cAAc,EAAMkB,OAAO,CAAEmE,UAAU,CAAI,CAAC,CACvFnE,OAAO,EAAIkE,OAAO,GAAK,WAAW,eAAIxE,IAAA,CAACX,UAAU,EAAM+B,UAAU,CAAEd,OAAO,CAAEmE,UAAU,CAAI,CAAC,EAC9F,CAAC,CACP,CAeA,QAAS,CAAAiD,eAAeA,CAACC,KAAa,CAAEC,QAAkB,CAAc,KAAAC,SAAA,CACpE,KAAM,CAAAC,GAAe,CAAG,CAAC,CAAmB,CAC5CA,GAAG,CAACtE,IAAI,CAAG7E,KAAK,CAAC8E,WAAW,CAACnF,KAAK,CAACoF,OAAO,CAAC,CAC3CoE,GAAG,CAACxH,OAAO,CAAG,EAAAuH,SAAA,CAAAC,GAAG,CAACtE,IAAI,UAAAqE,SAAA,iBAARA,SAAA,CAAUvH,OAAO,GAAIW,SAAS,CAC5C6G,GAAG,CAAC1G,UAAU,CAAG3C,MAAM,CAACsJ,OAAO,CAACJ,KAAK,CAACK,QAAQ,CAAC,CAC/CF,GAAG,CAAC3D,OAAO,CAAGwD,KAAK,CAACxD,OAAO,CAC3B2D,GAAG,CAAC1D,QAAQ,CAAGuD,KAAK,CAACvD,QAAQ,CAC7B0D,GAAG,CAACzD,KAAK,CAAGsD,KAAK,CAACtD,KAAK,CACvB,MAAO,CAAAyD,GAAG,CACd,CAEA,QAAS,CAAAG,kBAAkBA,CAACC,QAAuB,CAAiB,CAChE,KAAM,CAAAJ,GAAkB,CAAG,CAAC,CAAC,CAC7B,MAAO,CAAAA,GAAG,CACd,CAEA,KAAM,CAAAK,eAAe,CAAGhJ,OAAO,CAC3BuI,eAAe,CACfO,kBACJ,CAAC,CAAChE,eAAe,CAAC,CAElB,KAAM,CAAAmE,MAAM,CAAG,QAAAA,CAAC7E,KAAe,CAA0D,IAAxD,CAAAjB,QAAgC,CAAA+F,SAAA,CAAAjG,MAAA,IAAAiG,SAAA,MAAApH,SAAA,CAAAoH,SAAA,IAAG,EAAE,CAClE,mBAAOrI,IAAA,CAACmI,eAAe,EAAM,GAAG5E,KAAK,CAAEjB,QAAQ,CAAI,CAAC,CACxD,CAAC,CAED,OAAQ8F,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}