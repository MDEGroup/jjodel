{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import{Try}from'../../../joiner';import{DUser,LUser,Defaults,LPointerTargetable}from\"../../../joiner\";import InfoData from'./data/InfoData';import TemplateData from'./data/TemplateData';import{DockLayout}from'rc-dock';import EventsData from'./data/CustomData';import SubViewsData from'./data/SubViewsData';import{connect}from\"react-redux\";import PaletteData from\"./data/PaletteData\";import GenericNodeData from\"./data/GenericNodeData\";// import \"./view.scss\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var tabidprefix=\"Dock_in_view_detail\";var idcounter=0;function id(){// NB: cannot use just indexes or tab title because the id is injected in html, so it must be unique in the whole page.\nreturn tabidprefix+idcounter++;}function ViewDataComponent(props){var view=props.view;window.view=view;/*\r\n    if(!view) {\r\n        SetRootFieldAction.new('stackViews', undefined, '-=', false);\r\n        return(<></>);\r\n    }*/var viewpoints=props.viewpoints;var debug=props.debug;var readOnly=!debug&&Defaults.check(view.id);var layout={dockbox:{mode:'horizontal',children:[]}};var i=1;var tabs=[{id:id(),title:'Overview',group:'1',closable:false,content:/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(InfoData,{viewID:view.id,viewpointsID:viewpoints.map(function(vp){return vp.id;}),readonly:readOnly})})},{id:id(),title:'Template',group:'1',closable:false,content:/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(TemplateData,{viewID:view.id,readonly:readOnly})})},{id:id(),title:'Palette/Css',group:'1',closable:false,content:/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(PaletteData,{viewID:view.id,readonly:readOnly})})},{id:id(),title:'Events',group:'1',closable:false,content:/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(EventsData,{viewID:view.id,readonly:readOnly})})},{id:id(),title:'Options',group:'1',closable:false,content:/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(GenericNodeData,{viewID:view.id,readonly:readOnly})})}];/*\r\n    if(view.appliableTo === 'node') tabs.push(\r\n        {id: 'sharedid', title: 'Node behaviour', group: '1', closable: false, content: <NodeData viewID={view.id} readonly={readOnly} />},\r\n    );\r\n    if(view.appliableTo === 'edge') tabs.push(\r\n        {id: 'sharedid', title: 'Edge', group: '1', closable: false, content: <EdgeData viewID={view.id} readonly={readOnly} />}\r\n    );\r\n    if(view.appliableTo === 'edgePoint') tabs.push(\r\n        {id: 'sharedid', title: 'EdgePoint', group: '1', closable: false, content: <EdgePointData viewID={view.id} readonly={readOnly} />}\r\n    );*/tabs.push({id:id(),title:'Sub Views',group:'1',closable:false,content:/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(SubViewsData,{viewID:view.id,readonly:readOnly,setSelectedView:props.setSelectedView})})});layout.dockbox.children.push({tabs:tabs});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:'d-flex p-2 view-editor',children:[/*#__PURE__*/_jsx(\"b\",{className:'ms-1 my-auto',children:view.name}),/*#__PURE__*/_jsx(\"button\",{className:'bg btn-back ms-auto',onClick:function onClick(){return props.setSelectedView(undefined);},children:/*#__PURE__*/_jsx(\"i\",{className:'p-1 bi bi-arrow-left'})})]}),/*#__PURE__*/_jsx(DockLayout,{defaultLayout:layout,style:{position:'absolute',left:10,top:40,right:10,bottom:10,marginBottom:\"20px\"}})]});}function mapStateToProps(state,ownProps){var ret={};var user=LUser.fromPointer(DUser.current);ret.project=user.project;ret.viewpoints=ret.project.viewpoints;ret.debug=state.debug;ret.view=LPointerTargetable.fromPointer(ownProps.viewid,state);return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var ViewDataConnected=connect(mapStateToProps,mapDispatchToProps)(ViewDataComponent);export var ViewData=function ViewData(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ViewDataConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export default ViewData;","map":{"version":3,"names":["React","Try","DUser","LUser","Defaults","LPointerTargetable","InfoData","TemplateData","DockLayout","EventsData","SubViewsData","connect","PaletteData","GenericNodeData","jsx","_jsx","jsxs","_jsxs","tabidprefix","idcounter","id","ViewDataComponent","props","view","window","viewpoints","debug","readOnly","check","layout","dockbox","mode","children","i","tabs","title","group","closable","content","viewID","viewpointsID","map","vp","readonly","push","setSelectedView","className","name","onClick","undefined","defaultLayout","style","position","left","top","right","bottom","marginBottom","mapStateToProps","state","ownProps","ret","user","fromPointer","current","project","viewid","mapDispatchToProps","dispatch","ViewDataConnected","ViewData","arguments","length","_objectSpread"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/viewsEditor/View.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from 'react';\r\nimport {DViewElement, LViewElement, Pointer, Try} from '../../../joiner';\r\nimport {DState, DUser, LProject, LUser, LViewPoint, Defaults, LPointerTargetable} from \"../../../joiner\";\r\nimport InfoData from './data/InfoData';\r\nimport NodeData from './data/NodeData';\r\nimport TemplateData from './data/TemplateData';\r\nimport EdgeData from './data/EdgeData';\r\nimport EdgePointData from './data/EdgePointData';\r\nimport {DockLayout} from 'rc-dock';\r\nimport {LayoutData} from 'rc-dock/lib/DockData';\r\nimport EventsData from './data/CustomData';\r\nimport SubViewsData from './data/SubViewsData';\r\nimport {FakeStateProps} from \"../../../joiner/types\";\r\nimport {connect} from \"react-redux\";\r\nimport PaletteData from \"./data/PaletteData\";\r\nimport GenericNodeData from \"./data/GenericNodeData\";\r\n// import \"./view.scss\";\r\n\r\nconst tabidprefix = \"Dock_in_view_detail\";\r\nlet idcounter = 0;\r\nfunction id(){ // NB: cannot use just indexes or tab title because the id is injected in html, so it must be unique in the whole page.\r\n    return tabidprefix + (idcounter++);\r\n}\r\n\r\n\r\nfunction ViewDataComponent(props: AllProps) {\r\n    const view = props.view;\r\n    (window as any).view = view;\r\n/*\r\n    if(!view) {\r\n        SetRootFieldAction.new('stackViews', undefined, '-=', false);\r\n        return(<></>);\r\n    }*/\r\n    const viewpoints = props.viewpoints;\r\n    const debug = props.debug;\r\n    const readOnly = !debug && Defaults.check(view.id);\r\n\r\n    const layout: LayoutData = {dockbox: {mode: 'horizontal', children: []}};\r\n    let i = 1;\r\n    const tabs = [\r\n        {id: id(), title: 'Overview', group: '1', closable: false, content: <Try><InfoData viewID={view.id} viewpointsID={viewpoints.map(vp => vp.id)} readonly={readOnly} /></Try>},\r\n        {id: id(), title: 'Template', group: '1', closable: false, content: <Try><TemplateData viewID={view.id} readonly={readOnly} /></Try>},\r\n        {id: id(), title: 'Palette/Css', group: '1', closable: false, content: <Try><PaletteData viewID={view.id} readonly={readOnly} /></Try>},\r\n        {id: id(), title: 'Events', group: '1', closable: false, content: <Try><EventsData viewID={view.id} readonly={readOnly} /></Try>},\r\n        {id: id(), title: 'Options', group: '1', closable: false, content: <Try><GenericNodeData viewID={view.id} readonly={readOnly} /></Try>},\r\n    ];\r\n    /*\r\n    if(view.appliableTo === 'node') tabs.push(\r\n        {id: 'sharedid', title: 'Node behaviour', group: '1', closable: false, content: <NodeData viewID={view.id} readonly={readOnly} />},\r\n    );\r\n    if(view.appliableTo === 'edge') tabs.push(\r\n        {id: 'sharedid', title: 'Edge', group: '1', closable: false, content: <EdgeData viewID={view.id} readonly={readOnly} />}\r\n    );\r\n    if(view.appliableTo === 'edgePoint') tabs.push(\r\n        {id: 'sharedid', title: 'EdgePoint', group: '1', closable: false, content: <EdgePointData viewID={view.id} readonly={readOnly} />}\r\n    );*/\r\n    tabs.push({id: id(), title: 'Sub Views', group: '1', closable: false, content: <Try><SubViewsData viewID={view.id} readonly={readOnly} setSelectedView={props.setSelectedView} /></Try>});\r\n\r\n\r\n\r\n    layout.dockbox.children.push({tabs});\r\n\r\n    return(<div>\r\n        <div className={'d-flex p-2 view-editor'}>\r\n            <b className={'ms-1 my-auto'}>{view.name}</b>\r\n            <button className={'bg btn-back ms-auto'} onClick={ () => props.setSelectedView(undefined)}>\r\n                <i className={'p-1 bi bi-arrow-left'}></i>\r\n            </button>\r\n        </div>\r\n        <DockLayout defaultLayout={layout} style={{position: 'absolute', left: 10, top: 40, right: 10, bottom: 10, marginBottom: \"20px\"}} />\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n    viewid: Pointer<DViewElement>;\r\n    setSelectedView: React.Dispatch<React.SetStateAction<LViewElement | undefined>>;// (val: LViewElement | undefined) => {}\r\n}\r\ninterface StateProps {\r\n    view: LViewElement;\r\n    project: LProject;\r\n    viewpoints: LViewPoint[];\r\n    debug: boolean;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user = LUser.fromPointer(DUser.current);\r\n    ret.project = user.project as LProject;\r\n    ret.viewpoints = ret.project.viewpoints;\r\n    ret.debug = state.debug;\r\n    ret.view = LPointerTargetable.fromPointer(ownProps.viewid, state);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ViewDataConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ViewDataComponent);\r\n\r\nexport const ViewData = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <ViewDataConnected {...{...props, children}} />;\r\n}\r\nexport default ViewData;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}