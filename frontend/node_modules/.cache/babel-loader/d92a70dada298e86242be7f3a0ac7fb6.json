{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\rightbar\\\\collaboratorsEditor\\\\CollaboratorsEditor.tsx\",\n  _this = this;\nimport { connect } from 'react-redux';\nimport { DUser, LUser } from '../../../joiner';\nimport { UsersApi } from \"../../../api/persistance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CollaboratorsEditorComponent(props) {\n  const {\n    project,\n    users\n  } = props;\n  const addCollaborator = async () => {\n    const email = $('#collaborator-email')[0].value;\n    if (!email) {\n      alert('User not found!');\n      return;\n    }\n    const user = await UsersApi.getUserByEmail(email);\n    if (!user) {\n      alert('User not found!');\n      return;\n    }\n    console.log('Save (user)', user);\n    if (!users.map(u => u.id).includes(user.id)) DUser.new(user.username, user.id);\n    if (project.collaborators.map(c => c.id).includes(user.id)) return;\n    project.collaborators = [...project.collaborators, user];\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'p-2',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'p-1 w-100 border d-flex',\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Author\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'ms-auto',\n        children: project.author.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }, this), project.author.id === DUser.current && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'mt-2 p-1 w-100 border d-flex',\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'input w-25',\n        id: 'collaborator-email'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'ms-1 btn btn-success px-2',\n        onClick: addCollaborator,\n        children: \"+ Collaborator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 51\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'mt-2 p-1 w-100 border d-flex',\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Collaborators\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'ms-auto',\n        children: project.collaborators.map((collaborator, index) => {\n          return /*#__PURE__*/_jsxDEV(\"label\", {\n            className: 'ms-1',\n            children: collaborator.username\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 28\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }, this), \"** Important: To send the request Save the project! **\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 13\n  }, this);\n}\n_c = CollaboratorsEditorComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  const user = LUser.fromPointer(DUser.current);\n  ret.project = user.project;\n  ret.users = LUser.fromPointer(state.users);\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const CollaboratorsEditorConnected = connect(mapStateToProps, mapDispatchToProps)(CollaboratorsEditorComponent);\nconst CollaboratorsEditor = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(CollaboratorsEditorConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = CollaboratorsEditor;\nexport default CollaboratorsEditor;\nvar _c, _c2;\n$RefreshReg$(_c, \"CollaboratorsEditorComponent\");\n$RefreshReg$(_c2, \"CollaboratorsEditor\");","map":{"version":3,"names":["connect","DUser","LUser","UsersApi","jsxDEV","_jsxDEV","CollaboratorsEditorComponent","props","project","users","addCollaborator","email","$","value","alert","user","getUserByEmail","console","log","map","u","id","includes","new","username","collaborators","c","className","children","fileName","_jsxFileName","lineNumber","columnNumber","author","current","onClick","collaborator","index","_c","mapStateToProps","state","ownProps","ret","fromPointer","mapDispatchToProps","dispatch","CollaboratorsEditorConnected","CollaboratorsEditor","arguments","length","undefined","_this","_c2","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/collaboratorsEditor/CollaboratorsEditor.tsx"],"sourcesContent":["import {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport type {DState, LProject} from '../../../joiner';\r\nimport {DUser, GObject, LUser, SetRootFieldAction, U} from '../../../joiner';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\nimport {ProjectsApi, UsersApi} from \"../../../api/persistance\";\r\n\r\nfunction CollaboratorsEditorComponent(props: AllProps) {\r\n    const {project, users} = props;\r\n\r\n    const addCollaborator = async() => {\r\n        const email = ($('#collaborator-email')[0] as GObject).value;\r\n        if(!email) {alert('User not found!'); return;}\r\n        const user = await UsersApi.getUserByEmail(email);\r\n        if(!user) {alert('User not found!'); return;}\r\n        console.log('Save (user)', user)\r\n        if(!users.map(u => u.id).includes(user.id)) DUser.new(user.username, user.id);\r\n        if(project.collaborators.map(c => c.id).includes(user.id)) return;\r\n        project.collaborators = [...project.collaborators, user];\r\n    }\r\n\r\n    return (<div className={'p-2'}>\r\n        <div className={'p-1 w-100 border d-flex'}>\r\n            <b>Author</b>\r\n            <label className={'ms-auto'}>{project.author.username}</label>\r\n        </div>\r\n        {(project.author.id === DUser.current) && <div className={'mt-2 p-1 w-100 border d-flex'}>\r\n            <input className={'input w-25'} id={'collaborator-email'} />\r\n            <button className={'ms-1 btn btn-success px-2'} onClick={addCollaborator}>\r\n                + Collaborator\r\n            </button>\r\n        </div>}\r\n        <div className={'mt-2 p-1 w-100 border d-flex'}>\r\n            <b>Collaborators</b>\r\n            <div className={'ms-auto'}>\r\n                {project.collaborators.map((collaborator, index) => {\r\n                    return(<label className={'ms-1'} key={index}>{collaborator.username}</label>);\r\n                })}\r\n            </div>\r\n        </div>\r\n        ** Important: To send the request Save the project! **\r\n    </div>);\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {project: LProject, users: LUser[]}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user = LUser.fromPointer(DUser.current);\r\n    ret.project = user.project as LProject;\r\n    ret.users = LUser.fromPointer(state.users);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nexport const CollaboratorsEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(CollaboratorsEditorComponent);\r\n\r\nconst CollaboratorsEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <CollaboratorsEditorConnected {...{...props, children}} />;\r\n}\r\n\r\nexport default CollaboratorsEditor;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}