{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\pages\\\\components\\\\Navbar.tsx\",\n  _s = $RefreshSig$(),\n  _this = this;\nimport './style.scss';\nimport './navbar.scss';\nimport { DModel, DUser, Input, Keystrokes, LModel, LPackage, LUser, Selectors, SetRootFieldAction, U } from '../../joiner';\nimport { icon } from '../components/icons/Icons';\nimport { useNavigate } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { MetamodelPopup, ModelPopup } from './popups';\nimport { AuthApi, ProjectsApi } from '../../api/persistance';\nimport TabDataMaker from \"../../../src/components/abstract/tabs/TabDataMaker\";\nimport DockManager from \"../../../src/components/abstract/DockManager\";\nimport { Divisor, Item, Menu } from '../components/menu/Menu';\nimport { InternalToggle } from '../../components/widgets/Widgets';\nimport jj from '../../static/img/jj-k.png';\nimport Collaborative from \"../../components/collaborative/Collaborative\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst createM2 = project => {\n  let name = 'metamodel_' + 1;\n  let names = Selectors.getAllMetamodels().map(m => m.name);\n  name = U.increaseEndingNumber(name, false, false, newName => names.indexOf(newName) >= 0);\n  const dModel = DModel.new(name, undefined, true);\n  const lModel = LModel.fromD(dModel);\n  project.metamodels = [...project.metamodels, lModel];\n  project.graphs = [...project.graphs, lModel.node];\n  const dPackage = lModel.addChild('package');\n  const lPackage = LPackage.fromD(dPackage);\n  lPackage.name = 'default';\n  const tab = TabDataMaker.metamodel(dModel);\n  DockManager.open('models', tab);\n};\nconst createM1 = (project, metamodel) => {\n  let name = 'model_' + 1;\n  let modelNames = metamodel.models.map(m => m.name);\n  name = U.increaseEndingNumber(name, false, false, newName => modelNames.indexOf(newName) >= 0);\n  const dModel = DModel.new(name, metamodel.id, false, true);\n  const lModel = LModel.fromD(dModel);\n  project.models = [...project.models, lModel];\n  project.graphs = [...project.graphs, lModel.node];\n  const tab = TabDataMaker.model(dModel);\n  DockManager.open('models', tab);\n};\nfunction getKeyStrokes(keys) {\n  if (!keys || !keys.length) return undefined;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"keystrokes\",\n    children: keys.map(k => Keystrokes.getKeystrokeJsx(k))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 12\n  }, this);\n}\nfunction makeEntry(i) {\n  if (i.name === \"divisor\") {\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"divisor\",\n      children: /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this);\n  } else {\n    if (i.subItems && i.subItems.length === 0) return undefined;\n    let slength = i.subItems ? i.subItems.length : 0;\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: slength > 0 ? \"hoverable\" : \"\",\n      tabIndex: 0,\n      onClick: () => {\n        var _i$function;\n        return (_i$function = i.function) === null || _i$function === void 0 ? void 0 : _i$function.call(i);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: `highlight ${i.disabled && 'disabled'}`,\n        children: [i.icon ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [i.icon, \" \", i.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-app hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 31\n          }, this), \" \", i.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this), !i.disabled && slength > 0 ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-chevron-right icon-expand-submenu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this) : getKeyStrokes(i.keystroke)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), !i.disabled && slength > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content right\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"context-menu right\",\n          children: i.subItems.map(si => makeEntry(si))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this);\n  }\n}\nconst User = props => {\n  const user = LUser.fromPointer(DUser.current);\n  const name = `${user === null || user === void 0 ? void 0 : user.name} ${user === null || user === void 0 ? void 0 : user.surname}`;\n  const initials = name.split(' ').map(n => n[0]).join('');\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'user text-end',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'initials',\n      children: initials.toUpperCase()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 13\n  }, this);\n};\n_c = User;\nfunction NavbarComponent(props) {\n  _s();\n  const navigate = useNavigate();\n  const {\n    version,\n    metamodels,\n    advanced,\n    debug\n  } = props;\n  const [focussed, setFocussed] = useState('');\n  const [clicked, setClicked] = useState('');\n  const project = props.project;\n\n  // const menuType = \"normal\";\n\n  const Key = Keystrokes;\n  let projectItems = [];\n  {/*name: 'Save as', icon: icon['save'], function:  () => {project && ProjectsApi.save(project)}, keystroke: [Key.shift, Key.cmd, 'S']*/}\n  {/*name: 'divisor', function: () => {}, keystroke: []*/}\n  {/*name: 'Import...', icon: icon['import'], function: () => {}, keystroke: []*/}\n  {/*\r\n      {name: 'divisor', function: () => {}, keystroke: []},\r\n      {name: 'View', icon: icon['view'],\r\n          subItems: [\r\n          {name: 'Show dot grid', icon: icon['grid'], function: async() => {}, keystroke: []},\r\n          {name: 'divisor', function: async() => {}, keystroke: []},\r\n          {name: 'Maximize editor', icon: icon['maximize'], function: async() => {}, keystroke: []},\r\n          {name: 'divisor', function: async() => {}, keystroke: []},\r\n          {name: 'Zoom in', icon: icon['zoom-in'], function: async() => {}, keystroke: [Key.cmd, '+']},\r\n          {name: 'Zoom out', icon: icon['zoom-out'], function: async() => {}, keystroke: [Key.cmd, '-']},\r\n          {name: 'Zoom to 100%', function: async() => {}, keystroke: [Key.cmd, '0']},\r\n      ],\r\n          keystroke: []\r\n      },\r\n   */\n  }\n  //            {name: 'Close project', icon: icon['close'], function: () => {\n  //                 navigate('/allProjects');\n  //                 Collaborative.client.off('pullAction');\n  //                 Collaborative.client.disconnect();\n  //                 SetRootFieldAction.new('collaborativeSession', false);\n  //                 U.refresh();\n  //                 }, keystroke: [Key.cmd, 'Q']},\n  if (project) {\n    projectItems = [{\n      name: 'New metamodel',\n      icon: icon['new'],\n      function: () => createM2(project),\n      keystroke: [Key.alt, Key.cmd, 'M']\n    }, {\n      name: 'New model',\n      icon: icon['new'],\n      subItems: project.metamodels.filter(m2 => !!m2).map((m2, i) => ({\n        name: m2.name,\n        function: () => {\n          createM1(project, m2);\n        },\n        keystroke: []\n      })),\n      disabled: project.metamodels.length == 0\n    }, {\n      name: 'divisor',\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'Close project',\n      icon: icon['close'],\n      function: () => {\n        navigate('/allProjects');\n        Collaborative.client.off('pullAction');\n        Collaborative.client.disconnect();\n        SetRootFieldAction.new('collaborativeSession', false);\n        U.refresh();\n      },\n      keystroke: [Key.cmd, 'Q']\n    }, {\n      name: 'divisor',\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'Undo',\n      icon: icon['undo'],\n      function: () => {},\n      keystroke: [Key.cmd, 'Z']\n    }, {\n      name: 'Redo',\n      icon: icon['redo'],\n      function: () => {},\n      keystroke: [Key.shift, Key.cmd, 'Z']\n    },\n    // maybe better cmd + Y ?\n    {\n      name: 'divisor',\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'Save',\n      icon: icon['save'],\n      function: async () => {\n        if (project) await ProjectsApi.save(project);\n      },\n      keystroke: [Key.cmd, 'S']\n    }, {\n      name: 'Download',\n      icon: icon['download'],\n      function: () => {\n        U.download(`${project.name}.jjodel`, JSON.stringify(project.__raw));\n      },\n      keystroke: []\n    }, {\n      name: 'divisor',\n      function: async () => {},\n      keystroke: []\n    }, {\n      name: 'Help',\n      icon: icon['help'],\n      subItems: [{\n        name: 'What\\'s new',\n        icon: icon['whats-new'],\n        function: async () => {},\n        keystroke: []\n      }, {\n        name: 'divisor',\n        function: async () => {},\n        keystroke: []\n      }, {\n        name: 'Homepage',\n        icon: icon['home'],\n        function: async () => {},\n        keystroke: []\n      }, {\n        name: 'Getting started',\n        icon: icon['getting-started'],\n        function: async () => {},\n        keystroke: []\n      }, {\n        name: 'User guide',\n        icon: icon['manual'],\n        function: async () => {},\n        keystroke: []\n      }, {\n        name: 'divisor',\n        function: async () => {},\n        keystroke: []\n      }, {\n        name: 'Legal terms',\n        icon: icon['legal'],\n        function: async () => {},\n        keystroke: []\n      }],\n      keystroke: []\n    }, {\n      name: 'About jjodel',\n      icon: icon['jjodel-dark'],\n      function: async () => {},\n      keystroke: []\n    }];\n  }\n  const dashboardItems = [{\n    name: 'New project',\n    icon: /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-plus-square\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 37\n    }, this),\n    function: async () => {\n      navigate('/allProjects');\n      await ProjectsApi.create('public', undefined, undefined, undefined, props.user.projects);\n      /*\r\n      SetRootFieldAction.new('isLoading', true);\r\n      await U.sleep(1);\r\n      await ProjectsApi.create('public', 'Unnamed Project');\r\n      SetRootFieldAction.new('isLoading', false);*/\n    },\n    keystroke: [Key.cmd, 'M']\n  }, {\n    name: 'Import...',\n    icon: /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-arrow-bar-left\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 35\n    }, this),\n    function: ProjectsApi.import,\n    keystroke: []\n  }, {\n    name: 'divisor',\n    function: () => {},\n    keystroke: []\n  }, {\n    name: 'Help',\n    icon: /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-question-square\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 30\n    }, this),\n    subItems: [{\n      name: 'What\\'s new',\n      icon: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-clock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 41\n      }, this),\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'divisor',\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'Homepage',\n      icon: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-house\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 38\n      }, this),\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'Getting started',\n      icon: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-airplane\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 45\n      }, this),\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'User guide',\n      icon: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-journals\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 40\n      }, this),\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'divisor',\n      function: () => {},\n      keystroke: []\n    }, {\n      name: 'Legal terms',\n      icon: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-mortarboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 41\n      }, this),\n      function: () => {},\n      keystroke: []\n    }],\n    keystroke: []\n  }, {\n    name: 'About jjodel',\n    icon: /*#__PURE__*/_jsxDEV(\"img\", {\n      src: jj,\n      width: 15\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 38\n    }, this),\n    function: () => {},\n    keystroke: []\n  }, {\n    name: 'divisor',\n    function: () => {},\n    keystroke: []\n  }, {\n    name: 'Logout',\n    icon: /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-box-arrow-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 32\n    }, this),\n    function: async () => {\n      navigate('/auth');\n      await AuthApi.logout();\n    },\n    keystroke: [Key.cmd, 'Q']\n  }];\n  let itemsToRegister = [...dashboardItems, ...projectItems];\n  Keystrokes.register('#root', Object.values(itemsToRegister));\n  const MainMenu = props => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nav-hamburger hoverable\",\n      tabIndex: 0,\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-grid-3x3-gap-fill list\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'content context-menu',\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: props.items.map(i => makeEntry(i))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }, this);\n  };\n  const Logo = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nav-logo\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aligner\",\n        children: [props.debug ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo-on\",\n          onContextMenu: e => {\n            e.preventDefault();\n            SetRootFieldAction.new('debug', !props.debug);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          onContextMenu: e => {\n            e.preventDefault();\n            SetRootFieldAction.new('debug', !props.debug);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 21\n        }, this), props.debug && /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-bug-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }, this);\n  };\n  const Commands = () => {\n    return /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"text-end nav-commands d-flex\",\n      children: [true && project && /*#__PURE__*/_jsxDEV(InternalToggle, {\n        name: 'advanced',\n        labels: {\n          false: 'base',\n          true: 'advanced'\n        },\n        size: 'small'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 33\n      }, this), project && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"my-auto me-1\",\n          children: props.advanced ? \"advanced\" : \"base\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"toggle\",\n          className: \"my-auto\",\n          style: {\n            fontSize: '1.5em'\n          },\n          setter: v => {\n            SetRootFieldAction.new('advanced', v);\n          },\n          getter: () => props.advanced\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 17\n    }, this);\n  };\n  const UserMenu = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-end nav-side\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: 'right',\n            left: '300px!important',\n            marginTop: '2px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Menu, {\n            position: 'left',\n            children: [/*#__PURE__*/_jsxDEV(Item, {\n              icon: icon['dashboard'],\n              action: () => {\n                navigate('/allProjects');\n                Collaborative.client.off('pullAction');\n                Collaborative.client.disconnect();\n                SetRootFieldAction.new('collaborativeSession', false);\n                U.refresh();\n              },\n              children: \"Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Divisor, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Item, {\n              icon: icon['profile'],\n              action: () => {\n                navigate('/account');\n                U.refresh();\n              },\n              children: \"Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Item, {\n              icon: icon['settings'],\n              action: e => {\n                alert('');\n              },\n              children: \"Settings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Divisor, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Item, {\n              icon: icon['logout'],\n              action: async () => {\n                navigate('/auth');\n                await AuthApi.logout();\n              },\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: 'w-100 nav-container d-flex',\n      style: {\n        zIndex: 99\n      },\n      children: [project ? /*#__PURE__*/_jsxDEV(MainMenu, {\n        items: projectItems\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(MainMenu, {\n        items: dashboardItems\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(UserMenu, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Commands, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(User, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }, this), project && clicked === 'new.metamodel' && /*#__PURE__*/_jsxDEV(MetamodelPopup, {\n      project,\n      setClicked\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 52\n    }, this), project && clicked === 'new.model' && /*#__PURE__*/_jsxDEV(ModelPopup, {\n      metamodels,\n      project,\n      setClicked\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 48\n    }, this)]\n  }, void 0, true);\n}\n_s(NavbarComponent, \"Tg2KRfGsL9DWpoH/JiSp//o+dBg=\", false, function () {\n  return [useNavigate];\n});\n_c2 = NavbarComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.user = LUser.fromPointer(DUser.current);\n  ret.project = ret.user.project || undefined;\n  ret.metamodels = LModel.fromArr(state.m2models);\n  ret.version = state.version;\n  ret.advanced = state.advanced;\n  ret.debug = state.debug;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nconst NavbarConnected = connect(mapStateToProps, mapDispatchToProps)(NavbarComponent);\nconst Navbar = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(NavbarConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 396,\n    columnNumber: 12\n  }, _this);\n};\n_c3 = Navbar;\nexport { Navbar };\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"User\");\n$RefreshReg$(_c2, \"NavbarComponent\");\n$RefreshReg$(_c3, \"Navbar\");","map":{"version":3,"names":["DModel","DUser","Input","Keystrokes","LModel","LPackage","LUser","Selectors","SetRootFieldAction","U","icon","useNavigate","React","useState","connect","MetamodelPopup","ModelPopup","AuthApi","ProjectsApi","TabDataMaker","DockManager","Divisor","Item","Menu","InternalToggle","jj","Collaborative","jsxDEV","_jsxDEV","Fragment","_Fragment","createM2","project","name","names","getAllMetamodels","map","m","increaseEndingNumber","newName","indexOf","dModel","new","undefined","lModel","fromD","metamodels","graphs","node","dPackage","addChild","lPackage","tab","metamodel","open","createM1","modelNames","models","id","model","getKeyStrokes","keys","length","className","children","k","getKeystrokeJsx","fileName","_jsxFileName","lineNumber","columnNumber","makeEntry","i","subItems","slength","tabIndex","onClick","_i$function","function","call","disabled","keystroke","si","User","props","user","fromPointer","current","surname","initials","split","n","join","toUpperCase","_c","NavbarComponent","_s","navigate","version","advanced","debug","focussed","setFocussed","clicked","setClicked","Key","projectItems","alt","cmd","filter","m2","client","off","disconnect","refresh","shift","save","download","JSON","stringify","__raw","dashboardItems","create","projects","import","src","width","logout","itemsToRegister","register","Object","values","MainMenu","items","Logo","onContextMenu","e","preventDefault","Commands","labels","false","true","size","type","style","fontSize","setter","v","getter","UserMenu","float","left","marginTop","position","action","alert","zIndex","_c2","mapStateToProps","state","ownProps","ret","fromArr","m2models","mapDispatchToProps","dispatch","NavbarConnected","Navbar","arguments","_this","_c3","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/pages/components/Navbar.tsx"],"sourcesContent":["import './style.scss';\r\nimport './navbar.scss';\r\nimport {\r\n    Dictionary,\r\n    DModel,\r\n    DState,\r\n    DUser,\r\n    Input,\r\n    Keystrokes,\r\n    LGraph,\r\n    LModel,\r\n    LPackage,\r\n    LProject,\r\n    LUser,\r\n    Selectors,\r\n    SetRootFieldAction,\r\n    U\r\n} from '../../joiner';\r\n\r\nimport {icon} from '../components/icons/Icons';\r\n\r\nimport {useNavigate} from 'react-router-dom';\r\n\r\nimport React, {Component, Dispatch, ReactElement, useState} from 'react';\r\nimport {FakeStateProps} from '../../joiner/types';\r\nimport {connect} from 'react-redux';\r\nimport {MetamodelPopup, ModelPopup} from './popups';\r\nimport {AuthApi, ProjectsApi} from '../../api/persistance';\r\nimport TabDataMaker from \"../../../src/components/abstract/tabs/TabDataMaker\";\r\nimport DockManager from \"../../../src/components/abstract/DockManager\";\r\n\r\nimport {Divisor, Item, Menu} from '../components/menu/Menu';\r\nimport {InternalToggle} from '../../components/widgets/Widgets';\r\nimport jj from '../../static/img/jj-k.png';\r\nimport Storage from '../../data/storage';\r\nimport Collaborative from \"../../components/collaborative/Collaborative\";\r\n\r\nconst createM2 = (project: LProject) => {\r\n    let name = 'metamodel_' + 1;\r\n    let names: string[] = Selectors.getAllMetamodels().map(m => m.name);\r\n    name = U.increaseEndingNumber(name, false, false, newName => names.indexOf(newName) >= 0)\r\n    const dModel = DModel.new(name, undefined, true);\r\n    const lModel: LModel = LModel.fromD(dModel);\r\n    project.metamodels = [...project.metamodels, lModel];\r\n    project.graphs = [...project.graphs, lModel.node as LGraph];\r\n    const dPackage = lModel.addChild('package');\r\n    const lPackage: LPackage = LPackage.fromD(dPackage);\r\n    lPackage.name = 'default';\r\n    const tab = TabDataMaker.metamodel(dModel);\r\n    DockManager.open('models', tab);\r\n}\r\n\r\nconst createM1 = (project: LProject, metamodel: LModel) => {\r\n    let name = 'model_' + 1;\r\n    let modelNames: (string)[] = metamodel.models.map(m => m.name);\r\n    name = U.increaseEndingNumber(name, false, false, newName => modelNames.indexOf(newName) >= 0);\r\n    const dModel: DModel = DModel.new(name, metamodel.id, false, true);\r\n    const lModel: LModel = LModel.fromD(dModel);\r\n    project.models = [...project.models, lModel];\r\n    project.graphs = [...project.graphs, lModel.node as LGraph];\r\n    const tab = TabDataMaker.model(dModel);\r\n    DockManager.open('models', tab);\r\n}\r\nfunction getKeyStrokes(keys?: string[]){\r\n    if (!keys || !keys.length) return undefined;\r\n    return <div className={\"keystrokes\"}>\r\n        {keys.map(k => Keystrokes.getKeystrokeJsx(k))}\r\n    </div>\r\n}\r\n\r\nfunction makeEntry(i: MenuEntry) {\r\n\r\n    if (i.name === \"divisor\") {\r\n        return (\r\n            <li className='divisor'>\r\n                <hr />\r\n            </li>\r\n        );\r\n    } else {\r\n        if (i.subItems && i.subItems.length === 0) return undefined;\r\n        let slength = i.subItems ? i.subItems.length : 0;\r\n        return (\r\n            <li className={slength > 0 ? \"hoverable\" : \"\"} tabIndex={0} onClick={()=>i.function?.()}>\r\n                <label className={`highlight ${i.disabled && 'disabled'}`}>\r\n                    {i.icon ?\r\n                        <span>{i.icon} {i.name}</span> :\r\n                        <span><i className=\"bi bi-app hidden\"></i> {i.name}</span>\r\n                    }\r\n                    {!i.disabled && slength > 0 ?\r\n                        <i className='bi bi-chevron-right icon-expand-submenu'></i> :\r\n                        getKeyStrokes(i.keystroke)\r\n                    }\r\n                </label>\r\n            {!i.disabled && slength > 0 &&\r\n                <div className='content right'>\r\n                    <ul className='context-menu right'>\r\n                        {i.subItems!.map(si => makeEntry(si))}\r\n                    </ul>\r\n                </div>\r\n            }\r\n            </li>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\ntype UserProps = {}\r\nconst User = (props: UserProps) => {\r\n    const user: LUser = LUser.fromPointer(DUser.current);\r\n    const name = `${user?.name} ${user?.surname}`;\r\n    const initials = name.split(' ').map(n=>n[0]).join('');\r\n    return (<div className={'user text-end'}>\r\n        <div className={'initials'}>\r\n            {initials.toUpperCase()}\r\n        </div>\r\n        &nbsp;\r\n        <span>{name}</span>\r\n    </div>);\r\n};\r\n\r\ntype MenuEntry = {\r\n    name: string,\r\n    icon?: any,\r\n    function?: ()=>any,\r\n    keystroke?: string[],\r\n    subItems?:MenuEntry[],\r\n    disabled?: boolean;\r\n};\r\n\r\nfunction NavbarComponent(props: AllProps) {\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const {version, metamodels, advanced, debug} = props;\r\n    const [focussed, setFocussed] = useState('');\r\n    const [clicked, setClicked] = useState('');\r\n\r\n    const project = props.project;\r\n\r\n    // const menuType = \"normal\";\r\n\r\n    const Key = Keystrokes;\r\n    let projectItems: MenuEntry[] = [];\r\n    {/*name: 'Save as', icon: icon['save'], function:  () => {project && ProjectsApi.save(project)}, keystroke: [Key.shift, Key.cmd, 'S']*/}\r\n    {/*name: 'divisor', function: () => {}, keystroke: []*/}\r\n    {/*name: 'Import...', icon: icon['import'], function: () => {}, keystroke: []*/}\r\n    {/*\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'View', icon: icon['view'],\r\n            subItems: [\r\n            {name: 'Show dot grid', icon: icon['grid'], function: async() => {}, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Maximize editor', icon: icon['maximize'], function: async() => {}, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Zoom in', icon: icon['zoom-in'], function: async() => {}, keystroke: [Key.cmd, '+']},\r\n            {name: 'Zoom out', icon: icon['zoom-out'], function: async() => {}, keystroke: [Key.cmd, '-']},\r\n            {name: 'Zoom to 100%', function: async() => {}, keystroke: [Key.cmd, '0']},\r\n        ],\r\n            keystroke: []\r\n        },\r\n    */\r\n    }\r\n    //            {name: 'Close project', icon: icon['close'], function: () => {\r\n    //                 navigate('/allProjects');\r\n    //                 Collaborative.client.off('pullAction');\r\n    //                 Collaborative.client.disconnect();\r\n    //                 SetRootFieldAction.new('collaborativeSession', false);\r\n    //                 U.refresh();\r\n    //                 }, keystroke: [Key.cmd, 'Q']},\r\n    if (project){\r\n        projectItems = [\r\n\r\n            {name: 'New metamodel', icon: icon['new'], function: ()=>createM2(project), keystroke: [Key.alt, Key.cmd, 'M']},\r\n\r\n            {\r\n                name: 'New model',\r\n                icon: icon['new'],\r\n                subItems: project.metamodels.filter(m2=>!!m2).map((m2, i)=>({\r\n                    name: m2.name, function: () => { createM1(project, m2) }, keystroke: []\r\n                })),\r\n                disabled: project.metamodels.length == 0\r\n            },\r\n\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Close project', icon: icon['close'], function: () => {\r\n                navigate('/allProjects');\r\n                Collaborative.client.off('pullAction');\r\n                Collaborative.client.disconnect();\r\n                SetRootFieldAction.new('collaborativeSession', false);\r\n                U.refresh();\r\n                }, keystroke: [Key.cmd, 'Q']},\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Undo', icon: icon['undo'], function: () => {\r\n\r\n                }, keystroke: [Key.cmd, 'Z']},\r\n            {name: 'Redo', icon: icon['redo'], function: () => {\r\n\r\n                }, keystroke: [Key.shift, Key.cmd, 'Z']}, // maybe better cmd + Y ?\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Save', icon: icon['save'], function: async() => {\r\n                if(project) await ProjectsApi.save(project);\r\n                }, keystroke: [Key.cmd, 'S']},\r\n            {name: 'Download', icon: icon['download'], function: () => {\r\n                    U.download(`${project.name}.jjodel`, JSON.stringify(project.__raw));\r\n                }, keystroke: []},\r\n            {name: 'divisor', function: async() => {}, keystroke: []},\r\n            {name: 'Help', icon: icon['help'], subItems: [\r\n                    {name: 'What\\'s new', icon: icon['whats-new'], function: async() => {}, keystroke: []},\r\n                    {name: 'divisor', function: async() => {}, keystroke: []},\r\n                    {name: 'Homepage', icon: icon['home'], function: async() => {}, keystroke: []},\r\n                    {name: 'Getting started', icon: icon['getting-started'], function: async() => {}, keystroke: []},\r\n                    {name: 'User guide', icon: icon['manual'], function: async() => {}, keystroke: []},\r\n                    {name: 'divisor', function: async() => {}, keystroke: []},\r\n                    {name: 'Legal terms', icon: icon['legal'], function: async() => {}, keystroke: []}\r\n                ],\r\n                keystroke: []},\r\n            {name: 'About jjodel', icon: icon['jjodel-dark'], function: async() => {}, keystroke: []}\r\n        ];\r\n    }\r\n\r\n    const dashboardItems: MenuEntry[] = [\r\n\r\n        {name: 'New project', icon: <i className=\"bi bi-plus-square\"></i>, function:\r\n            async()=>{\r\n                navigate('/allProjects');\r\n                await ProjectsApi.create('public', undefined, undefined, undefined, props.user.projects);\r\n                /*\r\n                SetRootFieldAction.new('isLoading', true);\r\n                await U.sleep(1);\r\n                await ProjectsApi.create('public', 'Unnamed Project');\r\n                SetRootFieldAction.new('isLoading', false);*/\r\n            },\r\n            keystroke: [Key.cmd, 'M']},\r\n        {name: 'Import...', icon: <i className=\"bi bi-arrow-bar-left\"></i>, function: ProjectsApi.import, keystroke: []},\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'Help', icon: <i className=\"bi bi-question-square\"></i>, subItems: [\r\n            {name: 'What\\'s new', icon: <i className=\"bi bi-clock\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Homepage', icon: <i className=\"bi bi-house\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'Getting started', icon: <i className=\"bi bi-airplane\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'User guide', icon: <i className=\"bi bi-journals\"></i>, function: () => {}, keystroke: []},\r\n            {name: 'divisor', function: () => {}, keystroke: []},\r\n            {name: 'Legal terms', icon: <i className=\"bi bi-mortarboard\"></i>, function: () => {}, keystroke: []}\r\n        ],\r\n        keystroke: []},\r\n        {name: 'About jjodel', icon: <img src={jj} width={15}/>, function: () => {}, keystroke: []},\r\n        {name: 'divisor', function: () => {}, keystroke: []},\r\n        {name: 'Logout', icon: <i className=\"bi bi-box-arrow-right\"></i>, function: async() => {\r\n                navigate('/auth');\r\n                await AuthApi.logout();\r\n            }, keystroke: [Key.cmd, 'Q']}\r\n    ];\r\n\r\n    let itemsToRegister: MenuEntry[] = [...dashboardItems, ...projectItems];\r\n    Keystrokes.register('#root', Object.values(itemsToRegister));\r\n\r\n    type MenuProps = { items: MenuEntry[] }\r\n    const MainMenu = (props: MenuProps) => {\r\n\r\n        return(\r\n            <div className='nav-hamburger hoverable' tabIndex={0}>\r\n                <i className=\"bi bi-grid-3x3-gap-fill list\"></i>\r\n                <div className={'content context-menu'}>\r\n                    <ul>\r\n                        {props.items.map(i => makeEntry(i))}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const Logo = () => {\r\n        return (\r\n        <div className='nav-logo'>\r\n            <div className={\"aligner\"}>\r\n\r\n                {props.debug ?\r\n                    <div className='logo-on' onContextMenu={(e)=>{ e.preventDefault(); SetRootFieldAction.new('debug', !props.debug)}}></div>\r\n                    :\r\n                    <div className='logo' onContextMenu={(e)=>{ e.preventDefault(); SetRootFieldAction.new('debug', !props.debug)}}></div>\r\n                }\r\n                {props.debug && <i className=\"bi bi-bug-fill\"></i>}\r\n\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    const Commands = () => {\r\n        return (<label className='text-end nav-commands d-flex'>\r\n            {true && project && <InternalToggle\r\n                name={'advanced'}\r\n                labels={{false: 'base', true: 'advanced'}}\r\n                size={'small'}\r\n            />}\r\n            {project && <>\r\n                <span className={\"my-auto me-1\"}>{props.advanced ? \"advanced\" : \"base\"}</span>\r\n                <Input type=\"toggle\"\r\n                       className={\"my-auto\"}\r\n                       style={{fontSize:'1.5em'}}\r\n                       setter={(v) => {\r\n                           SetRootFieldAction.new('advanced', v);\r\n                       }}\r\n                       getter={() => props.advanced}/>\r\n            </>\r\n            }\r\n        </label>);\r\n    };\r\n\r\n    const UserMenu = () => {\r\n        return (<>\r\n        <div className='text-end nav-side'>\r\n                <div style={{float: 'right', left: '300px!important', marginTop: '2px'}}>\r\n                    <Menu position={'left'}>\r\n                        <Item icon={icon['dashboard']} action={() => {\r\n                            navigate('/allProjects');\r\n                            Collaborative.client.off('pullAction');\r\n                            Collaborative.client.disconnect();\r\n                            SetRootFieldAction.new('collaborativeSession', false);\r\n                            U.refresh();\r\n                        }}>Dashboard</Item>\r\n                        <Divisor />\r\n                        <Item icon={icon['profile']} action={()=> {\r\n                            navigate('/account');\r\n                            U.refresh();\r\n                        }}>Profile</Item>\r\n                        <Item icon={icon['settings']} action={(e)=> {alert('')}}>Settings</Item>\r\n                        <Divisor />\r\n                        <Item icon={icon['logout']} action={async() => {\r\n                            navigate('/auth');\r\n                            await AuthApi.logout();\r\n                        }}>Logout</Item>\r\n                    </Menu>\r\n                </div>\r\n            </div>\r\n        </>);\r\n    }\r\n\r\n\r\n    return(<>\r\n        <nav className={'w-100 nav-container d-flex'} style={{zIndex: 99}}>\r\n            {project ?\r\n                <MainMenu items={projectItems}/>\r\n                :\r\n                <MainMenu items={dashboardItems} />\r\n            }\r\n            <Logo />\r\n            <UserMenu />\r\n            <Commands />\r\n            <User />\r\n        </nav>\r\n\r\n        {project && clicked === 'new.metamodel' && <MetamodelPopup {...{project, setClicked}} />}\r\n        {project && clicked === 'new.model' && <ModelPopup {...{metamodels, project, setClicked}} />}\r\n    </>);\r\n}\r\n\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    user: LUser;\r\n    project?: LProject;\r\n    metamodels: LModel[];\r\n    version: DState['version'];\r\n    advanced: boolean;\r\n    debug: boolean;\r\n}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.user = LUser.fromPointer(DUser.current);\r\n    ret.project = ret.user.project || undefined;\r\n    ret.metamodels = LModel.fromArr(state.m2models);\r\n    ret.version = state.version;\r\n    ret.advanced = state.advanced;\r\n    ret.debug = state.debug;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nconst NavbarConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NavbarComponent);\r\n\r\nconst Navbar = (props: OwnProps, children: (string | Component)[] = []): ReactElement => {\r\n    return <NavbarConnected {...{...props, children}} />;\r\n}\r\n\r\nexport {Navbar};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}