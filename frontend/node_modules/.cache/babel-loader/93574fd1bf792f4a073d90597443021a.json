{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{connect}from'react-redux';import{DUser,LUser}from'../../../joiner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CollaboratorsEditorComponent(props){var project=props.project;var author=props.author;var collaborators=props.collaborators;var addCollaborator=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function addCollaborator(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:'p-2',children:[/*#__PURE__*/_jsxs(\"div\",{className:'p-1 w-100 border d-flex',children:[/*#__PURE__*/_jsx(\"b\",{children:\"Author\"}),/*#__PURE__*/_jsx(\"label\",{className:'ms-auto',children:author.username})]}),project.author.id===DUser.current&&/*#__PURE__*/_jsxs(\"div\",{className:'mt-2 p-1 w-100 border d-flex',children:[/*#__PURE__*/_jsx(\"input\",{className:'input w-25',id:'collaborator-email'}),/*#__PURE__*/_jsx(\"button\",{className:'ms-1 btn btn-success px-2',onClick:addCollaborator,children:\"+ Collaborator\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:'mt-2 p-1 w-100 border d-flex',children:[/*#__PURE__*/_jsx(\"b\",{children:\"Collaborators\"}),/*#__PURE__*/_jsx(\"div\",{className:'ms-auto',children:collaborators.map(function(collaborator,index){return/*#__PURE__*/_jsx(\"label\",{className:'ms-1',children:collaborator.username},index);})})]})]});}function mapStateToProps(state,ownProps){var ret={};var user=LUser.fromPointer(DUser.current);var project=user.project;ret.project=project;ret.author=project.author;ret.collaborators=project.collaborators;return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var CollaboratorsEditorConnected=connect(mapStateToProps,mapDispatchToProps)(CollaboratorsEditorComponent);var CollaboratorsEditor=function CollaboratorsEditor(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(CollaboratorsEditorConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export default CollaboratorsEditor;","map":{"version":3,"names":["connect","DUser","LUser","jsx","_jsx","jsxs","_jsxs","CollaboratorsEditorComponent","props","project","author","collaborators","addCollaborator","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","apply","arguments","className","children","username","id","current","onClick","map","collaborator","index","mapStateToProps","state","ownProps","ret","user","fromPointer","mapDispatchToProps","dispatch","CollaboratorsEditorConnected","CollaboratorsEditor","length","undefined","_objectSpread"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/collaboratorsEditor/CollaboratorsEditor.tsx"],"sourcesContent":["import {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DUser, GObject, LUser, SetRootFieldAction, U} from '../../../joiner';\r\nimport type {DState, LProject} from '../../../joiner';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\n\r\nfunction CollaboratorsEditorComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const author = props.author;\r\n    const collaborators = props.collaborators;\r\n\r\n    const addCollaborator = async() => {\r\n        /*\r\n        const email = ($('#collaborator-email')[0] as GObject).value;\r\n        if(!email) {alert('User not found!'); return;}\r\n        const user = await PersistanceApi.getUserByEmail(email);\r\n        SetRootFieldAction.new('isLoading', false);\r\n        if(!user) {alert('User not found!'); return;}\r\n        if(project.collaborators.map(c => c.id).includes(user.id)) return;\r\n        project.collaborators = [...project.collaborators, user];\r\n        await PersistanceApi.saveProject();\r\n        */\r\n    }\r\n\r\n    return (<div className={'p-2'}>\r\n        <div className={'p-1 w-100 border d-flex'}>\r\n            <b>Author</b>\r\n            <label className={'ms-auto'}>{author.username}</label>\r\n        </div>\r\n        {(project.author.id === DUser.current) && <div className={'mt-2 p-1 w-100 border d-flex'}>\r\n            <input className={'input w-25'} id={'collaborator-email'} />\r\n            <button className={'ms-1 btn btn-success px-2'} onClick={addCollaborator}>\r\n                + Collaborator\r\n            </button>\r\n        </div>}\r\n        <div className={'mt-2 p-1 w-100 border d-flex'}>\r\n            <b>Collaborators</b>\r\n            <div className={'ms-auto'}>\r\n                {collaborators.map((collaborator, index) => {\r\n                    return(<label className={'ms-1'} key={index}>{collaborator.username}</label>);\r\n                })}\r\n            </div>\r\n        </div>\r\n    </div>);\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {project: LProject, author: LUser, collaborators: LUser[]}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user = LUser.fromPointer(DUser.current);\r\n    const project = user.project as LProject;\r\n    ret.project = project;\r\n    ret.author = project.author;\r\n    ret.collaborators = project.collaborators;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nexport const CollaboratorsEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(CollaboratorsEditorComponent);\r\n\r\nconst CollaboratorsEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <CollaboratorsEditorConnected {...{...props, children}} />;\r\n}\r\n\r\nexport default CollaboratorsEditor;\r\n\r\n"],"mappings":"2bACA,OAAQA,OAAO,KAAO,aAAa,CACnC,OAAQC,KAAK,CAAWC,KAAK,KAA8B,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAI7E,QAAS,CAAAC,4BAA4BA,CAACC,KAAe,CAAE,CACnD,GAAM,CAAAC,OAAO,CAAGD,KAAK,CAACC,OAAO,CAC7B,GAAM,CAAAC,MAAM,CAAGF,KAAK,CAACE,MAAM,CAC3B,GAAM,CAAAC,aAAa,CAAGH,KAAK,CAACG,aAAa,CAEzC,GAAM,CAAAC,eAAe,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,0BAAAF,QAAA,CAAAG,IAAA,OAAAN,OAAA,GAWvB,kBAXK,CAAAL,eAAeA,CAAA,SAAAC,IAAA,CAAAW,KAAA,MAAAC,SAAA,OAWpB,CAED,mBAAQnB,KAAA,QAAKoB,SAAS,CAAE,KAAM,CAAAC,QAAA,eAC1BrB,KAAA,QAAKoB,SAAS,CAAE,yBAA0B,CAAAC,QAAA,eACtCvB,IAAA,MAAAuB,QAAA,CAAG,QAAM,CAAG,CAAC,cACbvB,IAAA,UAAOsB,SAAS,CAAE,SAAU,CAAAC,QAAA,CAAEjB,MAAM,CAACkB,QAAQ,CAAQ,CAAC,EACrD,CAAC,CACJnB,OAAO,CAACC,MAAM,CAACmB,EAAE,GAAK5B,KAAK,CAAC6B,OAAO,eAAKxB,KAAA,QAAKoB,SAAS,CAAE,8BAA+B,CAAAC,QAAA,eACrFvB,IAAA,UAAOsB,SAAS,CAAE,YAAa,CAACG,EAAE,CAAE,oBAAqB,CAAE,CAAC,cAC5DzB,IAAA,WAAQsB,SAAS,CAAE,2BAA4B,CAACK,OAAO,CAAEnB,eAAgB,CAAAe,QAAA,CAAC,gBAE1E,CAAQ,CAAC,EACR,CAAC,cACNrB,KAAA,QAAKoB,SAAS,CAAE,8BAA+B,CAAAC,QAAA,eAC3CvB,IAAA,MAAAuB,QAAA,CAAG,eAAa,CAAG,CAAC,cACpBvB,IAAA,QAAKsB,SAAS,CAAE,SAAU,CAAAC,QAAA,CACrBhB,aAAa,CAACqB,GAAG,CAAC,SAACC,YAAY,CAAEC,KAAK,CAAK,CACxC,mBAAO9B,IAAA,UAAOsB,SAAS,CAAE,MAAO,CAAAC,QAAA,CAAcM,YAAY,CAACL,QAAQ,EAA7BM,KAAqC,CAAC,CAChF,CAAC,CAAC,CACD,CAAC,EACL,CAAC,EACL,CAAC,CACV,CAOA,QAAS,CAAAC,eAAeA,CAACC,KAAa,CAAEC,QAAkB,CAAc,CACpE,GAAM,CAAAC,GAAe,CAAG,CAAC,CAAmB,CAC5C,GAAM,CAAAC,IAAI,CAAGrC,KAAK,CAACsC,WAAW,CAACvC,KAAK,CAAC6B,OAAO,CAAC,CAC7C,GAAM,CAAArB,OAAO,CAAG8B,IAAI,CAAC9B,OAAmB,CACxC6B,GAAG,CAAC7B,OAAO,CAAGA,OAAO,CACrB6B,GAAG,CAAC5B,MAAM,CAAGD,OAAO,CAACC,MAAM,CAC3B4B,GAAG,CAAC3B,aAAa,CAAGF,OAAO,CAACE,aAAa,CACzC,MAAO,CAAA2B,GAAG,CACd,CAEA,QAAS,CAAAG,kBAAkBA,CAACC,QAAuB,CAAiB,CAChE,GAAM,CAAAJ,GAAkB,CAAG,CAAC,CAAC,CAC7B,MAAO,CAAAA,GAAG,CACd,CAEA,MAAO,IAAM,CAAAK,4BAA4B,CAAG3C,OAAO,CAC/CmC,eAAe,CACfM,kBACJ,CAAC,CAAClC,4BAA4B,CAAC,CAE/B,GAAM,CAAAqC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIpC,KAAe,CAAgE,IAA9D,CAAAmB,QAAsC,CAAAF,SAAA,CAAAoB,MAAA,IAAApB,SAAA,MAAAqB,SAAA,CAAArB,SAAA,IAAG,EAAE,CACrF,mBAAOrB,IAAA,CAACuC,4BAA4B,CAAAI,aAAA,IAAAA,aAAA,CAAAA,aAAA,IAASvC,KAAK,MAAEmB,QAAQ,CAARA,QAAQ,GAAI,CAAC,CACrE,CAAC,CAED,cAAe,CAAAiB,mBAAmB"},"metadata":{},"sourceType":"module"}