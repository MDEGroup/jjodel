{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\rightbar\\\\viewpointsEditor\\\\ViewEditorNestedVersion.tsx\",\n  _s = $RefreshSig$(),\n  _this = this;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { DPointerTargetable, Input, LPointerTargetable, TRANSACTION, windoww } from '../../../joiner';\nimport { DUser, DViewPoint, LUser, U } from '../../../joiner';\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport { GenericTree } from \"../../forEndUser/Tree\";\nimport \"./VPNestedTree.scss\";\nimport ViewData from '../viewsEditor/View';\n// import \"./tree.scss\" already imported by <Tree> subcomponent\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction renderEntry(e, childrens, isExpanded, toggleExpansion, depth, path, metadata) {\n  let d = e;\n  let appliableTo;\n  if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;else appliableTo = \"Any\";\n  appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\n  let parr = Object.keys(childrens);\n  let scoreBoost = metadata || 0;\n  let l = LPointerTargetable.fromD(d);\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"entry-root\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inline-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-stuff vertical-centering\",\n        onClick: e => e.stopPropagation(),\n        children: parr.length >= 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            style: {\n              fontSize: '0.7em',\n              color: 'gray'\n            },\n            className: 'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right'),\n            onClick: toggleExpansion\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 25\n          }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"expansion-line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"i\", {\n          style: {\n            fontSize: '0.75em',\n            color: 'whitesmoke'\n          },\n          className: 'bi bi-caret-right-fill d-block my-auto'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mid-stuff vertical-centering\",\n        tabIndex: 0,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `icon type tree-${appliableTo}`,\n          children: appliableTo === \"Any\" ? \"*\" : appliableTo[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: d.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"single-view-content\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"m-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 56\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-stuff vertical-centering\",\n        onClick: e => {\n          e.stopPropagation();\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"priority\",\n            children: [\"priority: \", l.explicitApplicationPriority, \" *\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            className: \"change-boost hidden-input\",\n            inputClassName: \"change-boost hidden-input\",\n            readonly: false,\n            data: l,\n            getter: () => scoreBoost,\n            setter: v => {\n              l.subViews = {\n                ...childrens,\n                [d.id]: +v\n              };\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ocl-ico vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\"),\n            children: \"OCL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"js-ico vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\"),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-lightning\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 25\n            }, this), \"JS\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hover-stuff vertical-centering d-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ms-auto d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg btn-delete my-auto ms-2 green\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bx bx-duplicate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 74\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg btn-delete my-auto ms-2\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"p-1 bi bi-dash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 68\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: isExpanded && parr.map((ptr, i) => /*#__PURE__*/_jsxDEV(GenericTree, {\n        data: DPointerTargetable.from(ptr),\n        getSubElements: getSubElements,\n        renderEntry: renderEntry,\n        depth: depth + 1,\n        path: [...path, i],\n        metadata: childrens[ptr]\n        // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\n      }, ptr, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, d.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 12\n  }, this);\n}\nfunction NestedViewComponent(props) {\n  _s();\n  const project = props.project;\n  const viewpoints = props.viewpoints;\n  const active = props.active;\n  const editName = (evt, vp) => {\n    vp.name = evt.target.value;\n  };\n  const addVP = () => {\n    let name = 'viewpoint_' + 0;\n    let viewpointNames = viewpoints.map(vp => vp && vp.name);\n    name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\n    DViewPoint.new2(name, '', d => {/*d.isExclusiveView = !(d.isValidation = props.validation); */});\n  };\n  const deleteV = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n\n  const deleteVP = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n\n  const activateVP = viewPoint => {\n    project.activeViewpoint = viewPoint;\n  };\n  const clone = v => {\n    v.duplicate(true);\n  };\n  const getSubElements = v => v.subViews || {};\n  let test = windoww;\n  let [view, setView] = useStateIfMounted(undefined);\n  let vieweditor = view && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"single-view-content\",\n    children: /*#__PURE__*/_jsxDEV(ViewData, {\n      viewid: view,\n      setSelectedView: setView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 69\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 30\n  }, this);\n  if (test) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'd-flex p-2',\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        className: 'ms-1 my-auto',\n        children: \"Views\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'btn btn-primary ms-auto',\n        onClick: addVP,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: 'p-1 bi bi-plus'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), vieweditor, /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"p-2\",\n      children: viewpoints.map(vp => /*#__PURE__*/_jsxDEV(GenericTree, {\n        data: vp.__raw,\n        getSubElements: getSubElements,\n        renderEntry: renderEntry,\n        metadata: setView\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 29\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 22\n  }, this);\n  let hoverID = '';\n  function setHoverID(a) {}\n  function select(a) {}\n  let validation; // props.validation\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [viewpoints.map((viewpoint, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'd-flex p-1 mt-1 border round mx-1',\n        onMouseEnter: e => setHoverID(viewpoint.id),\n        onMouseLeave: e => setHoverID(''),\n        style: {\n          backgroundColor: active.id === viewpoint.id ? 'white' : hoverID === viewpoint.id ? '#E0E0E0' : 'transparent'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: 'p-0 input hidden-input',\n          value: viewpoint.name,\n          type: 'text',\n          onChange: evt => {\n            editName(evt, viewpoint);\n          },\n          disabled: index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          className: \"ms-auto\",\n          data: viewpoint,\n          field: \"isExclusiveView\",\n          type: \"checkbox\",\n          label: \"Is exclusive\",\n          readonly: validation || index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this), (!validation || true) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          disabled: active.id === viewpoint.id,\n          onClick: evt => {\n            select(viewpoint);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-check2'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 43\n        }, this)\n        // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\n        , /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          onClick: evt => {\n            clone(viewpoint);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-clipboard2-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-danger ms-1',\n          disabled: index <= 0 || active.id === viewpoint.id,\n          onClick: e => deleteV(e, viewpoint),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-trash3-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 20\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: 'p-1',\n      children: \"*To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 13\n  }, this);\n}\n_s(NestedViewComponent, \"6MsH1nAsNExaYE8azqm/ah8Qw/k=\", false, function () {\n  return [useStateIfMounted];\n});\n_c = NestedViewComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  const user = LUser.fromPointer(DUser.current);\n  const project = U.wrapper(user.project);\n  ret.project = project;\n  ret.viewpoints = project.viewpoints.filter(vp => !!vp /* && vp.isValidation === ownProps.validation*/);\n  ret.active = project.activeViewpoint;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const NestedViewConnected = connect(mapStateToProps, mapDispatchToProps)(NestedViewComponent);\nexport const NestedView = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(NestedViewConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = NestedView;\nexport default NestedView;\nvar _c, _c2;\n$RefreshReg$(_c, \"NestedViewComponent\");\n$RefreshReg$(_c2, \"NestedView\");","map":{"version":3,"names":["React","connect","DPointerTargetable","Input","LPointerTargetable","TRANSACTION","windoww","DUser","DViewPoint","LUser","U","useStateIfMounted","GenericTree","ViewData","jsxDEV","_jsxDEV","Fragment","_Fragment","renderEntry","e","childrens","isExpanded","toggleExpansion","depth","path","metadata","d","appliableTo","appliableToClasses","length","substring","replaceAll","parr","Object","keys","scoreBoost","l","fromD","className","children","onClick","stopPropagation","style","fontSize","color","fileName","_jsxFileName","lineNumber","columnNumber","tabIndex","name","explicitApplicationPriority","type","inputClassName","readonly","data","getter","setter","v","subViews","id","oclCondition","jsCondition","map","ptr","i","from","getSubElements","NestedViewComponent","props","_s","project","viewpoints","active","editName","evt","vp","target","value","addVP","viewpointNames","increaseEndingNumber","newName","indexOf","new2","deleteV","viewPoint","delete","deleteVP","activateVP","activeViewpoint","clone","duplicate","test","view","setView","undefined","vieweditor","viewid","setSelectedView","__raw","hoverID","setHoverID","a","select","validation","viewpoint","index","onMouseEnter","onMouseLeave","backgroundColor","onChange","disabled","field","label","_c","mapStateToProps","state","ownProps","ret","user","fromPointer","current","wrapper","filter","mapDispatchToProps","dispatch","NestedViewConnected","NestedView","arguments","_this","_c2","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/viewpointsEditor/ViewEditorNestedVersion.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    DPointerTargetable,\r\n    DState,\r\n    DViewElement,\r\n    Input, LPointerTargetable,\r\n    LViewElement,\r\n    Pointer,\r\n    TRANSACTION,\r\n    windoww\r\n} from '../../../joiner';\r\nimport {DUser, DViewPoint, LProject, LUser, LViewPoint, U, SetFieldAction} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {Dictionary, FakeStateProps} from '../../../joiner/types';\r\nimport {add} from \"lodash\";\r\nimport Tree, {GenericTree} from \"../../forEndUser/Tree\";\r\nimport \"./VPNestedTree.scss\"\r\nimport ViewData from '../viewsEditor/View';\r\n// import \"./tree.scss\" already imported by <Tree> subcomponent\r\n\r\nfunction renderEntry(e: DViewElement, childrens: Dictionary<Pointer, number>, isExpanded: boolean, toggleExpansion: ()=>any, depth: number, path: number[], metadata: any): JSX.Element{\r\n    let d = e;\r\n    let appliableTo: string;\r\n    if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);\r\n    else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;\r\n    else appliableTo = \"Any\";\r\n    appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\r\n    let parr = Object.keys(childrens);\r\n    let scoreBoost = metadata || 0;\r\n    let l: LViewElement = LPointerTargetable.fromD(d);\r\n\r\n\r\n    return <li className={\"entry-root\"} key={d.id} >\r\n        <div className={\"inline-row\"}>\r\n            <div className={\"left-stuff vertical-centering\"} onClick={(e)=>e.stopPropagation()}>\r\n                {parr.length >= 1 ?\r\n                    <>\r\n                        <i style={{fontSize: '0.7em', color: 'gray'}} className={'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right')} onClick={toggleExpansion} />\r\n                        {isExpanded && <div className={\"expansion-line\"} />}\r\n                    </>\r\n                    :\r\n                    <i style={{fontSize: '0.75em', color: 'whitesmoke'}} className={'bi bi-caret-right-fill d-block my-auto'} />\r\n                }\r\n            </div>\r\n            <div className={\"mid-stuff vertical-centering\"} tabIndex={0}>\r\n                <div className={`icon type tree-${appliableTo}`}>{appliableTo === \"Any\" ? \"*\" : appliableTo[0]}</div>\r\n                <div>{d.name}</div>\r\n                <div className={\"single-view-content\"}><h1 className={\"m-auto\"}/></div>\r\n            </div>\r\n            <div className={\"spacer\"} />\r\n            <div className={\"right-stuff vertical-centering\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                <div className={\"right-content\"}>\r\n                    <span className={\"priority\"}>priority: {l.explicitApplicationPriority} *</span>\r\n                    <Input type=\"number\"\r\n                           className={\"change-boost hidden-input\"}\r\n                           inputClassName={\"change-boost hidden-input\"}\r\n                           readonly={false}\r\n                           data={l}\r\n                           getter={()=>scoreBoost}\r\n                           setter={(v)=>{l.subViews = {...childrens, [d.id]: +v} as any}} />\r\n                    <span className={\"ocl-ico vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\")}>OCL</span>\r\n                    <span className={\"js-ico vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\")}>\r\n                        <i className=\"bi bi-lightning\"></i>JS</span>\r\n                </div>\r\n            </div>\r\n            <div className={\"hover-stuff vertical-centering d-flex\"}>\r\n                <div className={\"ms-auto d-flex\"}>\r\n                    {/*@ts-ignore*/}\r\n                    <button className=\"bg btn-delete my-auto ms-2 green\"><i className='bx bx-duplicate' /></button>\r\n                    <button className=\"bg btn-delete my-auto ms-2\"><i className=\"p-1 bi bi-dash\" /></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ul>{isExpanded && parr.map( (ptr, i) => (\r\n            <GenericTree key={ptr}\r\n                         data={DPointerTargetable.from(ptr)}\r\n                         getSubElements={getSubElements}\r\n                         renderEntry={renderEntry}\r\n                         depth={depth + 1} path={[...path, i]}\r\n                         metadata={childrens[ptr]}\r\n                // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\r\n            />))}</ul>\r\n    </li>;\r\n}\r\n\r\nfunction NestedViewComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const viewpoints = props.viewpoints;\r\n    const active = props.active;\r\n\r\n    const editName = (evt: React.ChangeEvent<HTMLInputElement>, vp: LViewElement) => { vp.name = evt.target.value; }\r\n    const addVP = () => {\r\n        let name = 'viewpoint_' + 0;\r\n        let viewpointNames: string[] = viewpoints.map(vp => vp && vp.name);\r\n        name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\r\n        DViewPoint.new2(name, '', (d) => { /*d.isExclusiveView = !(d.isValidation = props.validation); */} );\r\n    }\r\n    const deleteV = (e: React.MouseEvent, viewPoint: LViewElement) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n    const deleteVP = (e: React.MouseEvent, viewPoint: LViewPoint) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n\r\n    const activateVP = (viewPoint: LViewPoint) => { project.activeViewpoint = viewPoint; }\r\n    const clone = (v: LViewElement) => { v.duplicate(true); }\r\n    const getSubElements = (v: DViewElement) => v.subViews || {};\r\n\r\n    let test = windoww;\r\n\r\n    let [view, setView] = useStateIfMounted(undefined as (undefined | Pointer<DViewElement>));\r\n    let vieweditor = view && <div className={\"single-view-content\"}><ViewData viewid={view} setSelectedView={setView} /></div>;\r\n    if (test) return(<div>\r\n        <div className={'d-flex p-2'}>\r\n            <b className={'ms-1 my-auto'}>Views</b>\r\n            <button className={'btn btn-primary ms-auto'} onClick={addVP}>\r\n                <i className={'p-1 bi bi-plus'}></i>\r\n            </button>\r\n        </div>\r\n        {vieweditor}\r\n        <ul className={\"p-2\"}>\r\n        {viewpoints.map(vp=><GenericTree data={vp.__raw} getSubElements={getSubElements} renderEntry={renderEntry} metadata={setView} />)}\r\n        </ul>\r\n    </div>);\r\n\r\n    let hoverID: any = '';\r\n    function setHoverID(a:any){}\r\n    function select(a: any){}\r\n    let validation: false;// props.validation\r\n    return (<div>\r\n        {viewpoints.map((viewpoint, index) => {\r\n            return <div key={index} className={'d-flex p-1 mt-1 border round mx-1'}\r\n                        onMouseEnter={(e) => setHoverID(viewpoint.id)}\r\n                        onMouseLeave={(e) => setHoverID('')}\r\n                        style={{backgroundColor: (active.id === viewpoint.id) ? 'white' :\r\n                                (hoverID === viewpoint.id ? '#E0E0E0' : 'transparent')}}>\r\n                <input className={'p-0 input hidden-input'} value={viewpoint.name} type={'text'}\r\n                       onChange={(evt) => {editName(evt, viewpoint)}} disabled={index <= 0} />\r\n                <Input className={\"ms-auto\"} data={viewpoint} field={\"isExclusiveView\"} type={\"checkbox\"}\r\n                       label={\"Is exclusive\"} readonly={validation || index <= 0} />\r\n                {(!validation || true) && <button className={'btn btn-success ms-1'} disabled={active.id === viewpoint.id}\r\n                                                        onClick={(evt) => {select(viewpoint)}}>\r\n                    <i className={'p-1 bi bi-check2'}></i>\r\n                </button>\r\n                    // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\r\n                }\r\n                <button className={'btn btn-success ms-1'}\r\n                        onClick={(evt) => {clone(viewpoint)}}>\r\n                    <i className={'p-1 bi bi-clipboard2-fill'}></i>\r\n                </button>\r\n                <button className={'btn btn-danger ms-1'} disabled={index <= 0 || active.id === viewpoint.id}\r\n                        onClick={(e) => deleteV(e, viewpoint)}>\r\n                    <i className={'p-1 bi bi-trash3-fill'}></i>\r\n                </button>\r\n            </div>\r\n        })}\r\n        <label className={'p-1'}>\r\n            *To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\r\n        </label>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n}\r\ninterface StateProps {\r\n    project: LProject;\r\n    viewpoints: LViewPoint[];\r\n    active: LViewPoint;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user: LUser = LUser.fromPointer(DUser.current);\r\n    const project = U.wrapper<LProject>(user.project);\r\n    ret.project = project;\r\n    ret.viewpoints = project.viewpoints.filter( (vp) => !!vp/* && vp.isValidation === ownProps.validation*/);\r\n    ret.active = project.activeViewpoint;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const NestedViewConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NestedViewComponent);\r\n\r\nexport const NestedView = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <NestedViewConnected {...{...props, children}} />;\r\n}\r\nexport default NestedView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}