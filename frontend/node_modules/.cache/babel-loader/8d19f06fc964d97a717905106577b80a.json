{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\pages\\\\Auth.tsx\",\n  _s = $RefreshSig$();\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport PersistanceApi from '../api/persistance';\nimport { DUser, SetRootFieldAction, stateInitializer } from '../joiner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Auth(props) {\n  _s();\n  const [isRegister, setIsRegister] = useStateIfMounted(false);\n  const [error, setError] = useStateIfMounted('');\n  const onSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    SetRootFieldAction.new('isLoading', true);\n    const email = e.currentTarget.elements.namedItem('email').value;\n    const password = e.currentTarget.elements.namedItem('password').value;\n    if (isRegister) {\n      const username = e.currentTarget.elements.namedItem('username').value;\n      await register(username, email, password);\n    } else await login(email, password);\n    if (!error) stateInitializer();\n    SetRootFieldAction.new('isLoading', false);\n  };\n  const login = async (email, password) => {\n    const response = await PersistanceApi.login(email, password);\n    if (response.code === 200) {\n      const user = response.body;\n      const id = user.id;\n      const username = user.username;\n      DUser.new(username, id);\n      DUser.current = id;\n    } else setError(response.body);\n  };\n  const register = async (username, email, password) => {\n    const response = await PersistanceApi.register(username, email, password);\n    if (response.code === 200) {\n      const user = response.body;\n      const id = user.id;\n      const username = user.username;\n      DUser.new(username, id);\n      DUser.current = id;\n    } else setError(response.body);\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: 'w-100 h-100',\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: 'd-block bg-white rounded border mx-auto w-fit px-5 py-4 mt-5',\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'fs-1 d-block text-center text-primary',\n        children: isRegister ? 'REGISTER' : 'LOGIN'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this), error && /*#__PURE__*/_jsxDEV(\"section\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: 'text-danger mt-2 w-min text-center',\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 32\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'input w-fit d-block mx-auto mt-3',\n        id: 'email',\n        placeholder: 'Email',\n        type: 'email',\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), isRegister && /*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'input w-fit d-block mx-auto mt-2',\n        id: 'username',\n        placeholder: 'Username',\n        type: 'text',\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 28\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'input w-fit d-block mx-auto  mt-2',\n        id: 'password',\n        placeholder: 'Password',\n        type: 'password',\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'd-block btn btn-primary p-1 mx-auto mt-3',\n        type: 'submit',\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'mt-3 d-block text-center',\n        children: [isRegister ? 'Already have an account?' : 'Don\\'t have an account?', /*#__PURE__*/_jsxDEV(\"b\", {\n          tabIndex: -1,\n          onClick: e => setIsRegister(!isRegister),\n          className: 'ms-1 text-primary text-decoration-none cursor-pointer',\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }, this), \"Or start in\", /*#__PURE__*/_jsxDEV(\"b\", {\n          tabIndex: -1,\n          className: 'ms-1 text-primary text-decoration-none cursor-pointer',\n          onClick: e => {\n            DUser.offlineMode = true;\n            SetRootFieldAction.new(\"forceRerender\", Date.now());\n          },\n          children: \"Offline mode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 12\n  }, this);\n}\n_s(Auth, \"vRfmQFiURkk/QUs6RraddpmIT1Y=\", false, function () {\n  return [useStateIfMounted, useStateIfMounted];\n});\n_c = Auth;\nexport default Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["useStateIfMounted","PersistanceApi","DUser","SetRootFieldAction","stateInitializer","jsxDEV","_jsxDEV","Auth","props","_s","isRegister","setIsRegister","error","setError","onSubmit","e","preventDefault","new","email","currentTarget","elements","namedItem","value","password","username","register","login","response","code","user","body","id","current","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","type","required","tabIndex","onClick","offlineMode","Date","now","_c","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/pages/Auth.tsx"],"sourcesContent":["import {FormEvent} from 'react';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport PersistanceApi from '../api/persistance';\r\nimport {DUser, Json, SetRootFieldAction, stateInitializer} from '../joiner';\r\n\r\ninterface Props {}\r\nfunction Auth(props: Props) {\r\n    const [isRegister, setIsRegister] = useStateIfMounted(false);\r\n    const [error, setError] = useStateIfMounted('');\r\n\r\n    const onSubmit = async(e: FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault(); setError('');\r\n        SetRootFieldAction.new('isLoading', true);\r\n        const email = (e.currentTarget.elements.namedItem('email') as HTMLInputElement).value;\r\n        const password = (e.currentTarget.elements.namedItem('password') as HTMLInputElement).value;\r\n        if(isRegister) {\r\n            const username = (e.currentTarget.elements.namedItem('username') as HTMLInputElement).value;\r\n            await register(username, email, password);\r\n        } else await login(email, password);\r\n        if(!error) stateInitializer();\r\n        SetRootFieldAction.new('isLoading', false);\r\n    }\r\n    const login = async(email: string, password: string) => {\r\n        const response = await PersistanceApi.login(email, password);\r\n        if(response.code === 200) {\r\n            const user = response.body as Json;\r\n            const id = user.id as string;\r\n            const username = user.username as string;\r\n            DUser.new(username, id); DUser.current = id;\r\n        } else setError(response.body as string);\r\n    }\r\n    const register = async(username: string, email: string, password: string) => {\r\n        const response = await PersistanceApi.register(username, email, password);\r\n        if(response.code === 200) {\r\n            const user = response.body as Json;\r\n            const id = user.id as string;\r\n            const username = user.username as string;\r\n            DUser.new(username, id); DUser.current = id;\r\n        } else setError(response.body as string);\r\n    }\r\n\r\n    return(<section className={'w-100 h-100'}>\r\n        <form className={'d-block bg-white rounded border mx-auto w-fit px-5 py-4 mt-5'} onSubmit={onSubmit}>\r\n            <label className={'fs-1 d-block text-center text-primary'}>\r\n                {isRegister ? 'REGISTER' : 'LOGIN'}\r\n            </label>\r\n            <hr />\r\n            {error && <section><label className={'text-danger mt-2 w-min text-center'}>{error}</label></section>}\r\n            <input className={'input w-fit d-block mx-auto mt-3'} id={'email'} placeholder={'Email'} type={'email'}  required={true} />\r\n            {isRegister && <input className={'input w-fit d-block mx-auto mt-2'} id={'username'} placeholder={'Username'} type={'text'} required={true} />}\r\n            <input className={'input w-fit d-block mx-auto  mt-2'} id={'password'} placeholder={'Password'} type={'password'} required={true} />\r\n            <button className={'d-block btn btn-primary p-1 mx-auto mt-3'} type={'submit'}>Submit</button>\r\n            <label className={'mt-3 d-block text-center'}>\r\n                {isRegister ? 'Already have an account?' : 'Don\\'t have an account?'}\r\n                <b tabIndex={-1} onClick={e => setIsRegister(!isRegister)} className={'ms-1 text-primary text-decoration-none cursor-pointer'}>Register</b>\r\n                <br/>Or start in\r\n                <b tabIndex={-1} className={'ms-1 text-primary text-decoration-none cursor-pointer'} onClick={e => { DUser.offlineMode = true; SetRootFieldAction.new(\"forceRerender\", Date.now()); }}>Offline mode</b>\r\n            </label>\r\n        </form>\r\n    </section>);\r\n}\r\n\r\nexport default Auth;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}