{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import{LViewElement,U}from'../../../../joiner';import{connect}from\"react-redux\";import JsEditor from\"../../jsEditor/JsEditor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ViewEventsComponent(props){var view=props.view;var dview=props.view.__raw;var readOnly=props.readonly;function addEvent(){var eventname=\"customEvent1\";eventname=U.increaseEndingNumber(eventname,false,false,function(s){return s in dview.events;});var newevent={};newevent[eventname]='(parameter1, parameter2) => {\\n\\t// example, replace with your function\\n\\treturn parameter1 + parameter2;\\n}';view.events=newevent;}return/*#__PURE__*/_jsxs(\"section\",{className:'p-3',children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:'1.25em'},children:\"Default Events\"}),/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'onDataUpdate',title:'onDataUpdate'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'onDragStart',title:'onDragStart'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'whileDragging',title:'whileDragging'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'onDragEnd',title:'onDragEnd'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'onResizeStart',title:'onResizeStart'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'whileResizing',title:'whileResizing'}),/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,field:'onResizeEnd',title:'onResizeEnd'}),/*#__PURE__*/_jsxs(\"div\",{className:'d-flex mx-auto',children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:'1.25em'},children:\"Custom Events\"}),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-primary ms-auto',onClick:addEvent,disabled:readOnly,children:/*#__PURE__*/_jsx(\"i\",{className:'p-1 bi bi-plus'})})]}),/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}),Object.keys(dview.events).map(function(k){var val=dview.events[k];if(!val)return;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(JsEditor,{viewID:view.id,readonly:readOnly,title:/*#__PURE__*/_jsx(\"input\",{defaultValue:k,disabled:readOnly,onBlur:function onBlur(e){var newname=e.target.value;if(k===newname)return;var newEvent={};newEvent[newname]=dview.events[k];newEvent[k]=undefined;view.events=newEvent;}}),jsxLabel:/*#__PURE__*/_jsx(\"button\",{className:'btn btn-danger my-auto ms-auto',onClick:function onClick(){var newEvent={};newEvent[k]=undefined;// this is how you trigger deletion with object -= action\nview.events=newEvent;},disabled:readOnly,children:/*#__PURE__*/_jsx(\"i\",{className:'p-1 bi bi-trash3-fill'})}),getter:function getter(){return val;},setter:function setter(js){var newEvent={};newEvent[k]=js;view.events=newEvent;}},k/* if val does not update, concatenate it to the key (k+val)*/)});}),/*#__PURE__*/_jsx(\"div\",{className:'p-4'})]});}function mapStateToProps(state,ownProps){var view=LViewElement.fromPointer(ownProps.viewID);return{view:view};}function mapDispatchToProps(dispatch){var ret={};return ret;}export var ViewEventsConnected=connect(mapStateToProps,mapDispatchToProps)(ViewEventsComponent);export var ViewEvents=function ViewEvents(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ViewEventsConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export default ViewEvents;","map":{"version":3,"names":["React","LViewElement","U","connect","JsEditor","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ViewEventsComponent","props","view","dview","__raw","readOnly","readonly","addEvent","eventname","increaseEndingNumber","s","events","newevent","className","children","style","fontSize","viewID","id","field","title","onClick","disabled","Object","keys","map","k","val","defaultValue","onBlur","e","newname","target","value","newEvent","undefined","jsxLabel","getter","setter","js","mapStateToProps","state","ownProps","fromPointer","mapDispatchToProps","dispatch","ret","ViewEventsConnected","ViewEvents","arguments","length","_objectSpread"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/viewsEditor/data/CustomData.tsx"],"sourcesContent":["import React, {Dispatch, EventHandler, MouseEventHandler, ReactElement} from 'react';\r\nimport {DState, DViewElement, GObject, LViewElement, Pointer, TextArea, U} from '../../../../joiner';\r\nimport {connect} from \"react-redux\";\r\nimport {Function} from \"../../../forEndUser/FunctionComponent\";\r\nimport JsEditor from \"../../jsEditor/JsEditor\";\r\n\r\nfunction ViewEventsComponent(props: AllProps) {\r\n    const view = props.view;\r\n    const dview = props.view.__raw;\r\n    const readOnly = props.readonly;\r\n\r\n    function addEvent() {\r\n        let eventname = \"customEvent1\";\r\n        eventname = U.increaseEndingNumber(eventname, false, false, (s)=> s in dview.events);\r\n        let newevent: GObject = {};\r\n        newevent[eventname] = '(parameter1, parameter2) => {\\n\\t// example, replace with your function\\n\\treturn parameter1 + parameter2;\\n}';\r\n        view.events = newevent;\r\n    }\r\n\r\n    return(<section className={'p-3'}>\r\n        <b style={{fontSize: '1.25em'}}>Default Events</b>\r\n        <hr className={'my-1'} />\r\n        <JsEditor viewID={view.id} field={'onDataUpdate'} title={'onDataUpdate'}  />\r\n        <JsEditor viewID={view.id} field={'onDragStart'} title={'onDragStart'}  />\r\n        <JsEditor viewID={view.id} field={'whileDragging'} title={'whileDragging'}  />\r\n        <JsEditor viewID={view.id} field={'onDragEnd'} title={'onDragEnd'}  />\r\n        <JsEditor viewID={view.id} field={'onResizeStart'} title={'onResizeStart'}  />\r\n        <JsEditor viewID={view.id} field={'whileResizing'} title={'whileResizing'}  />\r\n        <JsEditor viewID={view.id} field={'onResizeEnd'} title={'onResizeEnd'}  />\r\n        <div className={'d-flex mx-auto'}>\r\n            <b style={{fontSize: '1.25em'}}>Custom Events</b>\r\n            <button className={'btn btn-primary ms-auto'} onClick={addEvent} disabled={readOnly}>\r\n                <i className={'p-1 bi bi-plus'} />\r\n            </button>\r\n        </div>\r\n        <hr className={'my-1'} />\r\n        {Object.keys(dview.events).map((k) => {\r\n            let val = dview.events[k];\r\n            if (!val) return;\r\n            return <>\r\n            <JsEditor\r\n            viewID={view.id} key={k/* if val does not update, concatenate it to the key (k+val)*/}\r\n            readonly={readOnly}\r\n            title={<input defaultValue={k} disabled={readOnly} onBlur={(e)=>{\r\n                let newname = e.target.value;\r\n                if (k === newname) return;\r\n                let newEvent: GObject = {};\r\n                newEvent[newname] = dview.events[k];\r\n                newEvent[k] = undefined;\r\n                view.events = newEvent;\r\n            }}/>}\r\n            jsxLabel={<button className={'btn btn-danger my-auto ms-auto'} onClick={() => {\r\n                let newEvent: GObject = {};\r\n                newEvent[k] = undefined; // this is how you trigger deletion with object -= action\r\n                view.events = newEvent;\r\n            }} disabled={readOnly}>\r\n                <i className={'p-1 bi bi-trash3-fill'} />\r\n            </button>}\r\n            getter={() => val}\r\n            setter={(js) => {\r\n                let newEvent: GObject = {};\r\n                newEvent[k] = js;\r\n                view.events = newEvent;\r\n            }}\r\n        /></>})}\r\n        <div className={'p-4'}></div>\r\n    </section>);\r\n}\r\n\r\ninterface OwnProps {viewID: Pointer<DViewElement, 1, 1, LViewElement>, readonly: boolean}\r\ninterface StateProps {view: LViewElement}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const view = LViewElement.fromPointer(ownProps.viewID);\r\n    return {view};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ViewEventsConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ViewEventsComponent);\r\n\r\nexport const ViewEvents = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <ViewEventsConnected {...{...props, children}} />;\r\n}\r\nexport default ViewEvents;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}