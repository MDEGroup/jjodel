{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\forEndUser\\\\Measurable.tsx\",\n  _dec,\n  _class,\n  _class2,\n  _dec2,\n  _class3,\n  _class4;\nimport React, { Component } from \"react\";\nimport { DGraphElement, Log, RuntimeAccessible, Size, U } from \"../../joiner\";\nimport $ from \"jquery\";\n\n/// <reference path=\"../../common/libraries/jqui-types.ts\" />\n\nimport \"./Measurable.scss\";\n\n// private\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport let MeasurableComponent = (_dec = RuntimeAccessible('MeasurableComponent'), _dec(_class = (_class2 = class MeasurableComponent extends Component {\n  constructor() {\n    super(...arguments);\n    this.html = null;\n    this.$html = void 0;\n    this.dragOptionsChanged = true;\n    this.resizeOptionsChanged = true;\n    this.rotateOptionsChanged = true;\n    this.defaultOptions = {\n      draggable: {\n        cancel: '.no-drag,[contenteditable=\"true\"],input,textarea,button,select,option',\n        cursor: 'grabbing',\n        // containment: 'parent',\n        distance: 5\n        // helper: 'clone', // 'original' or 'csselector'? or func=>html\n        // disabled: !(view.draggable),}\n      },\n      resizable: {},\n      rotatable: {}\n    };\n    this.oldPos = {\n      left: undefined,\n      top: undefined\n    };\n  }\n  componentDidMount() {\n    this.afterUpdate();\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    this.afterUpdate();\n  }\n  afterUpdate() {\n    if (!this.html) return;\n    this.$html = $(this.html);\n    if (this.dragOptionsChanged) {\n      this.afterUpdateSingle(\"draggable\");\n    }\n    if (this.resizeOptionsChanged) {\n      this.afterUpdateSingle(\"resizable\");\n    }\n    if (this.rotateOptionsChanged) {\n      this.afterUpdateSingle(\"rotatable\");\n    }\n  }\n  /*\r\n      afterUpdateSingle(type: \"draggable\" | \"resizable\" | \"rotatable\"): void{\r\n          if (this.props.draggable) this.afterUpdateDraggable\r\n      }/*\r\n      afterUpdateDraggable_old(): void{\r\n          nope, erase this and just make the previous _old genericversion with inner dynamic functions called 9 times like event('drag', 'while'); event('drag', 'end'); event('resize', 'while');...\r\n          make and extract new functions from code so that it dinamically build the jqui options object\r\n          if (!this.$html) return;\r\n          let $measurable = this.$html;\r\n          let jqui_options = this.props.draggable;\r\n          let jqui_start = jqui_options === 'object' ? jqui_options.start : undefined;\r\n          let jqui_end = jqui_options === 'object' ? jqui_options.stop : undefined;\r\n          let jqui_ing = jqui_options === 'object' ? jqui_options.drag : undefined;\r\n          let props_start = this.props.onDragStart;\r\n          let props_end = this.props.onDragEnd;\r\n          let props_ing = this.props.whileDragging;\r\n          let type = 'draggable';\r\n              //let positionMap = new WeakMap<HTMLElement, {left: number; top: number}>();\r\n          let childmode_drag = (e: HTMLElement, evt?: any, evtkind?: EventLetter, ui?:any): void => {\r\n              let oc = this.props.onChildren;\r\n              if (!oc) {\r\n                  Log.ee('not oc', {evt, oc, e, p: this.props}); return;\r\n              }\r\n              let child: HTMLElement;\r\n              if (typeof oc === 'function') child = oc(e);\r\n              else child = e.children[0] as HTMLElement;\r\n              if (!child) {\r\n                  Log.ee('child not found', {child, evt, oc, e}); return;\r\n              }\r\n              let oldpos = this.oldPos; // positionMap.get(e);\r\n              console.log('measurable default event child ' + evtkind, {ui, e, oc, oldpos});\r\n              //if (evtkind === 'e') { positionMap.set(e, ui.position); }\r\n                /*if (evtkind === 's') {\r\n                  ui.originalPosition.left = 300;\r\n                  ui.offset.left = 300;\r\n                  ui.position.left = 300;\r\n                  console.log('measurable sstart ', {type, e, oc, ui, el: e.style.left, cl: child.style.left});\r\n              }* /\r\n                let key: any;\r\n              for (key of childmodekeys) {\r\n                  let fixpos = () => {\r\n                      if (oldpos && (oldpos as any)[key] !== undefined) {\r\n                          if (key ==='left') console.log('measurable fixpos ' + evtkind, (oldpos as any)[key] + ui.position[key] + 'px', (oldpos as any)[key]);\r\n                          let newpos = (oldpos as any)[key] + ui.position[key];\r\n                          child.style[key] = (newpos) + 'px';\r\n                          if (evtkind === 'e') this.oldPos[key] = newpos;\r\n                      }\r\n                      else child.style[key] = e.style[key];\r\n                  }\r\n                  fixpos();\r\n                  if (evtkind === 'e')  setTimeout(fixpos, 1000);\r\n                  if (evtkind === 's' && !e.classList.contains('draggable-child-mode')) e.classList.add('draggable-child-mode');\r\n                  // delete e.style[key]\r\n              }\r\n          }\r\n            let translateeevents: Dictionary<string, Dictionary<string, DraggableEvent>> = {\r\n              'draggable': {\r\n                  's': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 's'); },\r\n                  'ing': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 'ing'); },\r\n                  'e': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 'e'); }},\r\n          };\r\n          let defaulteevent = (evtkind: EventLetter): MeasurableUIEvent | null =>{\r\n              if (!this.props.transformMode && !this.props.onChildren) return null;\r\n              return (e: any, ui: any) => {\r\n                  //console.log('measurable default event', {type, evtkind, translateeevents, e, t: e.target});\r\n                  if (this.props.transformMode === true) translateeevents[type][evtkind](e, ui);\r\n                  childmode_drag(e.target, e, evtkind, ui);\r\n              }\r\n          };\r\n            if (props[optionkey] === false || !props[optionkey]) {\r\n              console.log(\"measurable off \" + type, {$measurable, type, datamap, optionkey, props});\r\n              if ($measurable.data(datamap[type])) ($measurable as GObject)[type]('disable');\r\n              return;\r\n          }\r\n          if (props[optionkey] === true) {\r\n              options = {};\r\n          } else options = {...props[optionkey]};\r\n            if (props_start && typeof props_start !== \"function\") { return Log.ee(\"<Measurable /> onDragStart props must be a function\"); }\r\n          if (props_end && typeof props_end !== \"function\") { return Log.ee(\"<Measurable /> onDragEnd props must be a function\"); }\r\n          if (props_ing && typeof props_ing !== \"function\") { return Log.ee(\"<Measurable /> whileDragging props must be a function\"); }\r\n          if (!jqui_start && !props_start && ! default_start) delete options.start,\r\n              else options.start = (evt, ui) => { default_start?.(evt, ui); jqui_start?.(evt, ui); props_start?.(thiss.getCoords(evt, ui), evt, ui); }\r\n            let propsOptions = {...options};\r\n          let defaultOptions = this.defaultOptions[type];\r\n          U.objectMergeInPlace(options, defaultOptions);\r\n          //console.log(\"measurable\", {type, $measurable, options, propsOptions, defaultOptions});\r\n          ($measurable as GObject)[type](options);\r\n      }*/\n\n  absoluteToTransform(e, evt, evtkind) {\n    let x = e.style.left;\n    let y = e.style.top;\n    /*\r\n        e.style.left = '0px';\r\n        e.style.top = '0px';*/\n    //e.style.position = 'unset';\n    e.style.transform = `translate(${x}, ${y})`;\n  }\n  childmode(e, evt, evtkind, ui) {\n    let oc = this.props.onChildren;\n    if (!oc) {\n      Log.ee('not oc', {\n        evt,\n        oc,\n        e,\n        p: this.props\n      });\n      return;\n    }\n    let child;\n    console.log('cchild', {\n      e,\n      evt,\n      evtkind,\n      ui\n    });\n    if (typeof oc === 'function') child = oc(e);else child = e.children[0];\n    if (!child) {\n      Log.ee('child not found', {\n        child,\n        evt,\n        oc,\n        e\n      });\n      return;\n    }\n    console.log('measurable default event child ' + evtkind, {\n      ui,\n      e,\n      oc,\n      oldpos: this.oldPos\n    });\n    //if (evtkind === 'e') { positionMap.set(e, ui.position); }\n\n    /*if (evtkind === 's') {\r\n        ui.originalPosition.left = 300;\r\n        ui.offset.left = 300;\r\n        ui.position.left = 300;\r\n        console.log('measurable sstart ', {type, e, oc, ui, el: e.style.left, cl: child.style.left});\r\n    }*/\n\n    let key;\n    for (key of MeasurableComponent.childmodekeys) {\n      let fixpos = () => {\n        let oldpos = this.oldPos; // positionMap.get(e);\n        if (oldpos && oldpos[key] !== undefined) {\n          if (key === 'left') console.log('measurable fixpos ' + evtkind, oldpos[key] + ui.position[key] + 'px', oldpos[key]);\n          let newpos = oldpos[key] + ui.position[key];\n          child.style[key] = newpos + 'px';\n          if (evtkind === 'e') this.oldPos[key] = newpos;\n        } else child.style[key] = e.style[key];\n      };\n      fixpos();\n      if (evtkind === 'e') setTimeout(fixpos, 1000);\n      if (evtkind === 's') {\n        /*let graph = this.props.isPanning;\r\n        if (this.oldPos.x === undefined && graph) {\r\n            this.oldPos.x = graph.offset.x;\r\n            this.oldPos.y = graph.offset.y;\r\n        }*/\n        if (!e.classList.contains('draggable-child-mode')) e.classList.add('draggable-child-mode');\n      }\n      // delete e.style[key]\n    }\n  }\n  getDefaultEvent(type, evtkind) {\n    if (!this.props.transformMode && !(this.props.onChildren && type === 'draggable')) return null;\n    switch (type) {\n      case 'draggable':\n        if (!this.props.transformMode && !this.props.onChildren) return null;\n        break;\n      case 'resizable':\n        break;\n      case 'rotatable':\n        break;\n    }\n    let translateeevents = {\n      'draggable': {\n        's': (e, ui) => {\n          this.absoluteToTransform(e.target, e, 's');\n        },\n        'ing': (e, ui) => {\n          this.absoluteToTransform(e.target, e, 'ing');\n        },\n        'e': (e, ui) => {\n          this.absoluteToTransform(e.target, e, 'e');\n        }\n      }\n      /*'resizable': {\r\n          's': (e, ui)=>{ },\r\n          'ing': (e, ui)=>{ },\r\n          'e': (e, ui)=>{ }},\r\n      'rotatable': {\r\n          's': (e, ui)=>{ },\r\n          'ing': (e, ui)=>{ },\r\n          'e': (e, ui)=>{ }},*/\n    };\n    return (e, ui) => {\n      var _translateeevents$typ, _translateeevents$typ2;\n      console.log('measurable default event', {\n        type,\n        evtkind,\n        translateeevents,\n        e,\n        t: e.target\n      });\n      if (this.props.transformMode === true) (_translateeevents$typ = translateeevents[type]) === null || _translateeevents$typ === void 0 ? void 0 : (_translateeevents$typ2 = _translateeevents$typ[evtkind]) === null || _translateeevents$typ2 === void 0 ? void 0 : _translateeevents$typ2.call(_translateeevents$typ, e, ui);\n      this.childmode(e.target, e, evtkind, ui);\n    };\n  }\n  makeEvent(options, type, evtkey) {\n    let eventmap = {\n      's': {\n        'draggable': 'onDragStart',\n        'rotatable': 'onRotateStart',\n        'resizable': 'onResizeStart'\n      },\n      'ing': {\n        'draggable': 'whileDragging',\n        'rotatable': 'whileRotating',\n        'resizable': 'whileResizing'\n      },\n      'e': {\n        'draggable': 'onDragEnd',\n        'rotatable': 'onRotateEnd',\n        'resizable': 'onResizeEnd'\n      }\n    };\n    let jqui_ing;\n    switch (type) {\n      default:\n        jqui_ing = Log.eDevv(\"unexpected measurable event: \" + type);\n        return;\n      case \"draggable\":\n        jqui_ing = 'drag';\n        break;\n      case \"resizable\":\n        jqui_ing = 'resize';\n        break;\n      case \"rotatable\":\n        jqui_ing = 'rotate';\n        break;\n    }\n    //let jodelevent = {'s': eventmap.s[type], 'ing': eventmap.ing[type], 'e': eventmap.e[type]};\n    let jquievent = {\n      's': 'start',\n      'ing': jqui_ing,\n      'e': 'stop'\n    };\n    let jqkey = jquievent[evtkey] || '';\n    let props = this.props;\n    let propsevent = props[eventmap[evtkey][type]];\n    if (propsevent && typeof propsevent !== \"function\") {\n      Log.ee(\"<Measurable /> \" + eventmap[evtkey][type] + \" props must be a function\");\n      return;\n    }\n    // call ondragend... jodel events\n    let jquievt = options[jqkey];\n    // let jodelevt = propsevent; // (...params: any) => propsevent(...params); // was made to preserve \"this\"?\n    let defaultevt = this.getDefaultEvent(type, evtkey);\n    let allevents = [defaultevt, jquievt, propsevent].filter(e => !!e);\n    if (allevents.length) options[jqkey] = (evt, ui) => {\n      for (let e of allevents) {\n        propsevent = props[eventmap[evtkey][type]]; // if i don't redeclare it here, closure makes a mess taking always the last jodelevt for all iterations.\n        if (e === propsevent) {\n          e(this.getCoords(evt, ui, this.props.isPanning), evt, ui);\n        } else e(evt, ui);\n      }\n    };\n  }\n  afterUpdateSingle(type) {\n    // was forced to move from general loop-style implementation to individual redundant stuff because of closure messes.\n    if (!this.$html) return;\n    let $measurable = this.$html;\n    let options;\n    const props = this.props;\n    const datamap = {\n      draggable: \"uiDraggable\",\n      resizable: \"uiResizable\",\n      rotatable: \"uiRotatable\"\n    };\n    const optionmap = {\n      draggable: \"draggable\",\n      resizable: \"resizable\",\n      rotatable: \"rotatable\"\n    };\n    const optionkey = optionmap[type];\n    if (props[optionkey] === false || !props[optionkey]) {\n      console.log(\"measurable off \" + type, {\n        $measurable,\n        type,\n        datamap,\n        optionkey,\n        props\n      });\n      if ($measurable.data(datamap[type])) $measurable[type]('disable');\n      return;\n    }\n    if (props[optionkey] === true) {\n      options = {};\n    } else options = {\n      ...props[optionkey]\n    };\n\n    // todo: changing options at runtime works, but changing children does not update\n\n    let jqui_ing;\n    switch (type) {\n      default:\n        jqui_ing = Log.eDevv(\"unexpected measurable event: \" + type);\n        return;\n      case \"draggable\":\n        jqui_ing = 'drag';\n        break;\n      case \"resizable\":\n        jqui_ing = 'resize';\n        break;\n      case \"rotatable\":\n        jqui_ing = 'rotate';\n        break;\n    }\n    let jquievent = {\n      's': 'start',\n      'ing': jqui_ing,\n      'e': 'stop'\n    };\n    let evtkey;\n    for (evtkey in jquievent) {\n      this.makeEvent(options, type, evtkey);\n    }\n    let defaultOptions = this.defaultOptions[type];\n    U.objectMergeInPlace(options, defaultOptions);\n    console.log(\"measurable options\", {\n      type,\n      $measurable,\n      options,\n      defaultOptions\n    });\n    $measurable[type](options);\n  }\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    //console.log(\"measurable shouldup\", {nc:nextProps.children, tc:this.props.children, eq: nextProps.children == this.props.children});\n    // todo: would need to check if pros.children has changed, but that requires a deep search of subcomponents props and state.\n    // currently with just return true it works and rerenders every time the parent component rerenders. not when other elements are interacted.\n    // it works also with <Input> as direct child and it updates.\n    if (window) return true;\n    const oldProps = this.props || {};\n    this.dragOptionsChanged = false;\n    this.resizeOptionsChanged = false;\n    this.rotateOptionsChanged = false;\n    let ret = false;\n    const nestederr = \"Options cannot contain functions or nested objects\";\n    if (!U.isShallowEqualWithProxies(oldProps.draggable, nextProps.draggable)) {\n      const opt = oldProps.draggable;\n      if (opt && typeof opt === \"object\") for (let k in opt) {\n        switch (typeof opt[k]) {\n          case \"function\":\n          case \"object\":\n            Log.ee(\"drag\" + nestederr, k);\n        }\n      }\n      this.dragOptionsChanged = true;\n      ret = true;\n    }\n    if (!U.isShallowEqualWithProxies(oldProps.resizable, nextProps.resizable)) {\n      const opt = oldProps.resizable;\n      if (opt && typeof opt === \"object\") for (let k in opt) {\n        switch (typeof opt[k]) {\n          case \"function\":\n          case \"object\":\n            Log.ee(\"resize\" + nestederr, k);\n        }\n      }\n      this.resizeOptionsChanged = true;\n      ret = true;\n    }\n    if (!U.isShallowEqualWithProxies(oldProps.rotatable, nextProps.rotatable)) {\n      const opt = oldProps.rotatable;\n      if (opt && typeof opt === \"object\") for (let k in opt) {\n        switch (typeof opt[k]) {\n          case \"function\":\n          case \"object\":\n            Log.ee(\"rotate\" + nestederr, k);\n        }\n      }\n      this.rotateOptionsChanged = true;\n      return true;\n    }\n    if (ret) return true; // i don't need to set more this.variable stuff and i already determined something changed.\n    if (Object.keys(oldProps).length !== Object.keys(nextProps).length) return true;\n    let k;\n    for (k in oldProps) {\n      switch (k) {\n        //case \"axis\": if (ok)\n        case \"draggable\":\n        case \"resizable\":\n        case \"rotatable\":\n          continue;\n        case \"children\":\n          continue;\n      }\n      if (!(k in nextProps)) return false;\n      let ok = oldProps[k];\n      let nk = nextProps[k];\n      if (ok === nk) continue;\n      let tk = typeof ok;\n      if (tk !== typeof nk) return false;\n      switch (tk) {\n        case \"object\":\n          Log.ee(\"unexpected object in <Measurable/> props\", {\n            k,\n            nk,\n            ok\n          });\n          return true;\n        case \"function\":\n          if (ok.toString() !== nk.toString()) return true;\n          break;\n        default:\n          return false;\n        // already checked they are !==\n      }\n    }\n    return false;\n  }\n  updateDefaultOptions() {\n    /*let addClasses = this.props.children ? 'on-children' as any : undefined;\r\n                                      jqui.classes does not owrk? and addclass is only for draggable?\r\n    if (this.defaultOptions.draggable.addClasses !== addClasses) {\r\n        this.defaultOptions.resizable.classes = addClasses;\r\n        // this.defaultOptions.rotatable.classes = addClasses;\r\n    }*/\n  }\n  render() {\n    let child = this.props.children;\n    this.updateDefaultOptions();\n    if (!child) return child || null; // sometimes react passes {} as props.children?\n    if (!Object.keys(child).length) return Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\", child, this.props);\n    if (Array.isArray(child)) {\n      if (child.length !== 1) {\n        Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\", child, this.props);\n        return child;\n      } else child = child[0];\n    }\n    if (child.type.toString() === React.Fragment.toString()) {\n      Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\", child, this.props);\n      return child;\n    }\n    let oldProps = child.props;\n    let newProps = {\n      ref: html => {\n        if (html && !U.isHtmlNode(html)) {\n          Log.ee('ref tring to set non-html element', html);\n          return;\n        }\n        this.html = html;\n      }\n    };\n    U.objectMergeInPlace(newProps, oldProps);\n    let clonedChild = /*#__PURE__*/React.cloneElement(child, newProps);\n    return clonedChild;\n  }\n  getCoords(evt, ui, isPanning) {\n    let size = Size.of(evt.target);\n    let graph = DGraphElement.graphLFromHtml(evt.target);\n    let gsize = graph === null || graph === void 0 ? void 0 : graph.translateHtmlSize(size);\n    if (isPanning) {\n      let position = this.props.onChildren ? this.oldPos : ui.position;\n      gsize.x = position.left;\n      gsize.y = position.top;\n    }\n    return gsize;\n  }\n}, _class2.cname = \"MeasurableComponent\", _class2.childmodekeys = ['left', 'top', 'transform', 'position'], _class2)) || _class);\nexport let ScrollableComponent = (_dec2 = RuntimeAccessible('ScrollableComponent'), _dec2(_class3 = (_class4 = class ScrollableComponent extends Component {\n  render() {\n    let graph = this.props.graph;\n    let create = e => {\n      let target = e.target;\n      target.style.left = graph.offset.x + 'px';\n      target.style.top = graph.offset.y + 'px';\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scrollable\",\n      children: /*#__PURE__*/_jsxDEV(Measurable, {\n        draggable: {\n          create\n        },\n        isPanning: graph,\n        onDragEnd: graph ? function (coords) {\n          if (!graph) return; // just for ts-lint\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          console.log(\"drag odee\", {\n            coords,\n            graph,\n            args\n          });\n          let offset = graph.offset;\n          if (!offset.equals(coords)) graph.offset = coords;\n        } : undefined,\n        onChildren: true,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panning-handle\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"panning-content\",\n            children: this.props.children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 13\n    }, this);\n  }\n}, _class4.cname = \"ScrollableComponent\", _class4)) || _class3);\n\n// private\n\n// private\n\n// private\n\n// private\n\n////// mapper func\n/*\r\nfunction mapStateToProps(state: DState, ownProps: MeasurableOwnProps): MeasurableStateProps {\r\n    const ret: MeasurableStateProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n*/\n\nMeasurableComponent.defaultProps = {\n  autosizex: true,\n  autosizey: true,\n  style: undefined,\n  children: []\n};\nexport function Measurable(props, children) {\n  return /*#__PURE__*/_jsxDEV(MeasurableComponent, {\n    ...props,\n    children: props.children || children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 519,\n    columnNumber: 12\n  }, this);\n}\n// shortcuts for Draggable Resizable Rotatable with whileDragging onDragStart props simplified to start, while, end\n_c = Measurable;\nexport function Draggable(props, children) {\n  return /*#__PURE__*/_jsxDEV(MeasurableComponent, {\n    ...props,\n    draggable: props.options || props.draggable || true,\n    onDragStart: props.start || props.begin || props.onDragStart,\n    onDragEnd: props.end || props.stop || props.onDragEnd,\n    whileDragging: props.drag || props.while || props.ing || props.whileDragging,\n    children: props.children || children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 523,\n    columnNumber: 12\n  }, this);\n}\n_c2 = Draggable;\nexport function Resizable(props, children) {\n  return /*#__PURE__*/_jsxDEV(MeasurableComponent, {\n    ...props,\n    resizable: props.options || props.resizable || true,\n    onResizeStart: props.start || props.begin || props.onResizeStart,\n    onResizeEnd: props.end || props.stop || props.onResizeEnd,\n    whileResizing: props.resize || props.while || props.ing || props.whileResizing,\n    children: props.children || children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 532,\n    columnNumber: 12\n  }, this);\n}\n_c3 = Resizable;\nexport function Rotatable(props, children) {\n  return /*#__PURE__*/_jsxDEV(MeasurableComponent, {\n    ...props,\n    rotatable: props.options || props.rotatable || true,\n    onRotationStart: props.start || props.begin || props.onRotateStart || props.onRotationStart,\n    onRotationEnd: props.end || props.stop || props.onRotateEnd || props.onRotationEnd,\n    whileRotating: props.rotate || props.while || props.ing || props.whileRotate || props.whileRotating,\n    children: props.children || children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 541,\n    columnNumber: 12\n  }, this);\n}\n_c4 = Rotatable;\nexport function Scrollable(props, children) {\n  return /*#__PURE__*/_jsxDEV(ScrollableComponent, {\n    ...props,\n    children: props.children || children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 552,\n    columnNumber: 12\n  }, this);\n} /*\r\n  export function InfiniteScroll(props: MeasurableAllProps, children: ReactChild[] = []): ReactElement {\r\n     return <InfiniteScrollComponent {...{...props, children}}>{children}</InfiniteScrollComponent>;\r\n  }*/\n\n/*connect<MeasurableStateProps, DispatchProps, MeasurableOwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MeasurableComponent);*/\n_c5 = Scrollable;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Measurable\");\n$RefreshReg$(_c2, \"Draggable\");\n$RefreshReg$(_c3, \"Resizable\");\n$RefreshReg$(_c4, \"Rotatable\");\n$RefreshReg$(_c5, \"Scrollable\");","map":{"version":3,"names":["React","Component","DGraphElement","Log","RuntimeAccessible","Size","U","$","jsxDEV","_jsxDEV","MeasurableComponent","_dec","_class","_class2","constructor","arguments","html","$html","dragOptionsChanged","resizeOptionsChanged","rotateOptionsChanged","defaultOptions","draggable","cancel","cursor","distance","resizable","rotatable","oldPos","left","undefined","top","componentDidMount","afterUpdate","componentDidUpdate","prevProps","prevState","snapshot","afterUpdateSingle","absoluteToTransform","e","evt","evtkind","x","style","y","transform","childmode","ui","oc","props","onChildren","ee","p","child","console","log","children","oldpos","key","childmodekeys","fixpos","position","newpos","setTimeout","classList","contains","add","getDefaultEvent","type","transformMode","translateeevents","s","target","ing","_translateeevents$typ","_translateeevents$typ2","t","call","makeEvent","options","evtkey","eventmap","jqui_ing","eDevv","jquievent","jqkey","propsevent","jquievt","defaultevt","allevents","filter","length","getCoords","isPanning","$measurable","datamap","optionmap","optionkey","data","objectMergeInPlace","shouldComponentUpdate","nextProps","nextState","nextContext","window","oldProps","ret","nestederr","isShallowEqualWithProxies","opt","k","Object","keys","ok","nk","tk","toString","updateDefaultOptions","render","Array","isArray","Fragment","newProps","ref","isHtmlNode","clonedChild","cloneElement","size","of","graph","graphLFromHtml","gsize","translateHtmlSize","cname","ScrollableComponent","_dec2","_class3","_class4","create","offset","className","Measurable","onDragEnd","coords","_len","args","_key","equals","fileName","_jsxFileName","lineNumber","columnNumber","defaultProps","autosizex","autosizey","_c","Draggable","onDragStart","start","begin","end","stop","whileDragging","drag","while","_c2","Resizable","onResizeStart","onResizeEnd","whileResizing","resize","_c3","Rotatable","onRotationStart","onRotateStart","onRotationEnd","onRotateEnd","whileRotating","rotate","whileRotate","_c4","Scrollable","_c5","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/forEndUser/Measurable.tsx"],"sourcesContent":["import React, {Component, CSSProperties, PureComponent, ReactChild, ReactElement, ReactNode} from \"react\";\r\nimport {DGraphElement, Dictionary, GObject, GraphSize, LGraph, Log, RuntimeAccessible, Size, TRANSACTION, U} from \"../../joiner\";\r\nimport $ from \"jquery\";\r\nimport {OwnProps} from \"../rightbar/structureEditor/ModelMetaData\";\r\n/// <reference path=\"../../common/libraries/jqui-types.ts\" />\r\nimport {JQueryUI} from \"../../common/libraries/jqui-types\"\r\nimport \"./Measurable.scss\";\r\n\r\ntype ResizableEvent = JQueryUI.ResizableEvent;\r\ntype DraggableEvent = JQueryUI.DraggableEvent;\r\ntype RotatableEvent = JQueryUI.RotatableEvent;\r\ntype DraggableOptions = JQueryUI.DraggableOptions;\r\ntype ResizableOptions = JQueryUI.ResizableOptions;\r\ntype RotatabeOptions = JQueryUI.RotatableOptions;\r\n// private\r\ninterface MeasurableState {\r\n}\r\ninterface ScrollState {\r\n}\r\n\r\ntype EventLetter = 's'|'ing'|'e';\r\ntype MeasurableUIEvent = ResizableEvent | DraggableEvent | RotatableEvent;\r\n\r\n@RuntimeAccessible('MeasurableComponent')\r\nexport class MeasurableComponent extends Component<MeasurableAllProps, MeasurableState>{\r\n    static cname: string = \"MeasurableComponent\";\r\n    static childmodekeys: (keyof CSSStyleDeclaration)[] = ['left', 'top', 'transform', 'position'];\r\n\r\n\r\n    private html: Element | null = null;\r\n    private $html!:  JQuery<Element>;\r\n    dragOptionsChanged: boolean = true;\r\n    resizeOptionsChanged: boolean = true;\r\n    rotateOptionsChanged: boolean = true;\r\n    defaultOptions: {\"draggable\": JQueryUI.DraggableOptions, resizable: JQueryUI.ResizableOptions, rotatable: GObject} = {\r\n        draggable: {\r\n            cancel: '.no-drag,[contenteditable=\"true\"],input,textarea,button,select,option',\r\n            cursor: 'grabbing',\r\n            // containment: 'parent',\r\n            distance: 5,\r\n            // helper: 'clone', // 'original' or 'csselector'? or func=>html\r\n            // disabled: !(view.draggable),}\r\n        },\r\n        resizable: {},\r\n        rotatable: {},\r\n    }\r\n    oldPos: Dictionary<string, number> =  {left: undefined, top: undefined} as any;\r\n\r\n    componentDidMount() {\r\n        this.afterUpdate();\r\n    }\r\n    componentDidUpdate(prevProps: Readonly<MeasurableAllProps>, prevState: Readonly<MeasurableState>, snapshot?: any) {\r\n        this.afterUpdate();\r\n    }\r\n\r\n    afterUpdate(): void{\r\n        if (!this.html) return;\r\n        this.$html = $(this.html);\r\n        if (this.dragOptionsChanged) { this.afterUpdateSingle(\"draggable\"); }\r\n        if (this.resizeOptionsChanged) { this.afterUpdateSingle(\"resizable\"); }\r\n        if (this.rotateOptionsChanged) { this.afterUpdateSingle(\"rotatable\"); }\r\n    }\r\n    /*\r\n        afterUpdateSingle(type: \"draggable\" | \"resizable\" | \"rotatable\"): void{\r\n            if (this.props.draggable) this.afterUpdateDraggable\r\n        }/*\r\n        afterUpdateDraggable_old(): void{\r\n            nope, erase this and just make the previous _old genericversion with inner dynamic functions called 9 times like event('drag', 'while'); event('drag', 'end'); event('resize', 'while');...\r\n            make and extract new functions from code so that it dinamically build the jqui options object\r\n            if (!this.$html) return;\r\n            let $measurable = this.$html;\r\n            let jqui_options = this.props.draggable;\r\n            let jqui_start = jqui_options === 'object' ? jqui_options.start : undefined;\r\n            let jqui_end = jqui_options === 'object' ? jqui_options.stop : undefined;\r\n            let jqui_ing = jqui_options === 'object' ? jqui_options.drag : undefined;\r\n            let props_start = this.props.onDragStart;\r\n            let props_end = this.props.onDragEnd;\r\n            let props_ing = this.props.whileDragging;\r\n            let type = 'draggable';\r\n\r\n\r\n            //let positionMap = new WeakMap<HTMLElement, {left: number; top: number}>();\r\n            let childmode_drag = (e: HTMLElement, evt?: any, evtkind?: EventLetter, ui?:any): void => {\r\n                let oc = this.props.onChildren;\r\n                if (!oc) {\r\n                    Log.ee('not oc', {evt, oc, e, p: this.props}); return;\r\n                }\r\n                let child: HTMLElement;\r\n                if (typeof oc === 'function') child = oc(e);\r\n                else child = e.children[0] as HTMLElement;\r\n                if (!child) {\r\n                    Log.ee('child not found', {child, evt, oc, e}); return;\r\n                }\r\n                let oldpos = this.oldPos; // positionMap.get(e);\r\n                console.log('measurable default event child ' + evtkind, {ui, e, oc, oldpos});\r\n                //if (evtkind === 'e') { positionMap.set(e, ui.position); }\r\n\r\n                /*if (evtkind === 's') {\r\n                    ui.originalPosition.left = 300;\r\n                    ui.offset.left = 300;\r\n                    ui.position.left = 300;\r\n                    console.log('measurable sstart ', {type, e, oc, ui, el: e.style.left, cl: child.style.left});\r\n                }* /\r\n\r\n                let key: any;\r\n                for (key of childmodekeys) {\r\n                    let fixpos = () => {\r\n                        if (oldpos && (oldpos as any)[key] !== undefined) {\r\n                            if (key ==='left') console.log('measurable fixpos ' + evtkind, (oldpos as any)[key] + ui.position[key] + 'px', (oldpos as any)[key]);\r\n                            let newpos = (oldpos as any)[key] + ui.position[key];\r\n                            child.style[key] = (newpos) + 'px';\r\n                            if (evtkind === 'e') this.oldPos[key] = newpos;\r\n                        }\r\n                        else child.style[key] = e.style[key];\r\n                    }\r\n                    fixpos();\r\n                    if (evtkind === 'e')  setTimeout(fixpos, 1000);\r\n                    if (evtkind === 's' && !e.classList.contains('draggable-child-mode')) e.classList.add('draggable-child-mode');\r\n                    // delete e.style[key]\r\n                }\r\n            }\r\n\r\n            let translateeevents: Dictionary<string, Dictionary<string, DraggableEvent>> = {\r\n                'draggable': {\r\n                    's': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 's'); },\r\n                    'ing': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 'ing'); },\r\n                    'e': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 'e'); }},\r\n            };\r\n            let defaulteevent = (evtkind: EventLetter): MeasurableUIEvent | null =>{\r\n                if (!this.props.transformMode && !this.props.onChildren) return null;\r\n                return (e: any, ui: any) => {\r\n                    //console.log('measurable default event', {type, evtkind, translateeevents, e, t: e.target});\r\n                    if (this.props.transformMode === true) translateeevents[type][evtkind](e, ui);\r\n                    childmode_drag(e.target, e, evtkind, ui);\r\n                }\r\n            };\r\n\r\n            if (props[optionkey] === false || !props[optionkey]) {\r\n                console.log(\"measurable off \" + type, {$measurable, type, datamap, optionkey, props});\r\n                if ($measurable.data(datamap[type])) ($measurable as GObject)[type]('disable');\r\n                return;\r\n            }\r\n            if (props[optionkey] === true) {\r\n                options = {};\r\n            } else options = {...props[optionkey]};\r\n\r\n            if (props_start && typeof props_start !== \"function\") { return Log.ee(\"<Measurable /> onDragStart props must be a function\"); }\r\n            if (props_end && typeof props_end !== \"function\") { return Log.ee(\"<Measurable /> onDragEnd props must be a function\"); }\r\n            if (props_ing && typeof props_ing !== \"function\") { return Log.ee(\"<Measurable /> whileDragging props must be a function\"); }\r\n            if (!jqui_start && !props_start && ! default_start) delete options.start,\r\n                else options.start = (evt, ui) => { default_start?.(evt, ui); jqui_start?.(evt, ui); props_start?.(thiss.getCoords(evt, ui), evt, ui); }\r\n\r\n            let propsOptions = {...options};\r\n            let defaultOptions = this.defaultOptions[type];\r\n            U.objectMergeInPlace(options, defaultOptions);\r\n            //console.log(\"measurable\", {type, $measurable, options, propsOptions, defaultOptions});\r\n            ($measurable as GObject)[type](options);\r\n        }*/\r\n\r\n    absoluteToTransform(e: HTMLElement, evt?: any, evtkind?: EventLetter): any {\r\n        let x = e.style.left;\r\n        let y = e.style.top;\r\n        /*\r\n            e.style.left = '0px';\r\n            e.style.top = '0px';*/\r\n        //e.style.position = 'unset';\r\n        e.style.transform = `translate(${x}, ${y})`;\r\n    }\r\n    childmode(e: HTMLElement, evt?: any, evtkind?: EventLetter, ui?:any): void{\r\n        let oc = this.props.onChildren;\r\n        if (!oc) {\r\n            Log.ee('not oc', {evt, oc, e, p: this.props}); return;\r\n        }\r\n        let child: HTMLElement;\r\n        console.log('cchild', {e, evt,  evtkind, ui});\r\n        if (typeof oc === 'function') child = oc(e);\r\n        else child = e.children[0] as HTMLElement;\r\n        if (!child) {\r\n            Log.ee('child not found', {child, evt, oc, e}); return;\r\n        }\r\n        console.log('measurable default event child ' + evtkind, {ui, e, oc, oldpos: this.oldPos});\r\n        //if (evtkind === 'e') { positionMap.set(e, ui.position); }\r\n\r\n        /*if (evtkind === 's') {\r\n            ui.originalPosition.left = 300;\r\n            ui.offset.left = 300;\r\n            ui.position.left = 300;\r\n            console.log('measurable sstart ', {type, e, oc, ui, el: e.style.left, cl: child.style.left});\r\n        }*/\r\n\r\n        let key: any;\r\n        for (key of MeasurableComponent.childmodekeys) {\r\n            let fixpos = () => {\r\n                let oldpos = this.oldPos; // positionMap.get(e);\r\n                if (oldpos && (oldpos as any)[key] !== undefined) {\r\n                    if (key ==='left') console.log('measurable fixpos ' + evtkind, (oldpos as any)[key] + ui.position[key] + 'px', (oldpos as any)[key]);\r\n                    let newpos = (oldpos as any)[key] + ui.position[key];\r\n                    child.style[key] = (newpos) + 'px';\r\n                    if (evtkind === 'e') this.oldPos[key] = newpos;\r\n                }\r\n                else child.style[key] = e.style[key];\r\n            }\r\n            fixpos();\r\n            if (evtkind === 'e')  setTimeout(fixpos, 1000);\r\n            if (evtkind === 's') {\r\n                /*let graph = this.props.isPanning;\r\n                if (this.oldPos.x === undefined && graph) {\r\n                    this.oldPos.x = graph.offset.x;\r\n                    this.oldPos.y = graph.offset.y;\r\n                }*/\r\n                if (!e.classList.contains('draggable-child-mode')) e.classList.add('draggable-child-mode');\r\n            }\r\n            // delete e.style[key]\r\n        }\r\n    }\r\n    getDefaultEvent(type: \"draggable\" | \"resizable\" | \"rotatable\", evtkind: EventLetter): MeasurableUIEvent | null {\r\n        if (!this.props.transformMode && !(this.props.onChildren && type === 'draggable')) return null;\r\n        switch (type) {\r\n            case 'draggable': if (!this.props.transformMode && !this.props.onChildren) return null; break\r\n            case 'resizable': break\r\n            case 'rotatable': break\r\n        }\r\n\r\n        let translateeevents: Dictionary<string, Dictionary<string, DraggableEvent>> = {\r\n            'draggable': {\r\n                's': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 's'); },\r\n                'ing': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 'ing'); },\r\n                'e': (e, ui)=>{ this.absoluteToTransform(e.target as HTMLElement, e, 'e'); }},\r\n            /*'resizable': {\r\n                's': (e, ui)=>{ },\r\n                'ing': (e, ui)=>{ },\r\n                'e': (e, ui)=>{ }},\r\n            'rotatable': {\r\n                's': (e, ui)=>{ },\r\n                'ing': (e, ui)=>{ },\r\n                'e': (e, ui)=>{ }},*/\r\n        };\r\n        return (e: any, ui: any) => {\r\n            console.log('measurable default event', {type, evtkind, translateeevents, e, t: e.target});\r\n            if (this.props.transformMode === true) translateeevents[type]?.[evtkind]?.(e, ui);\r\n            this.childmode(e.target, e, evtkind, ui);\r\n        }\r\n    }\r\n    makeEvent(options: GObject<DraggableOptions>, type: string, evtkey: keyof typeof jquievent) {\r\n        let eventmap = {\r\n            's':    {'draggable': 'onDragStart',    'rotatable': 'onRotateStart',   'resizable': 'onResizeStart'},\r\n            'ing':  {'draggable': 'whileDragging',  'rotatable': 'whileRotating',   'resizable': 'whileResizing'},\r\n            'e':    {'draggable': 'onDragEnd',      'rotatable': 'onRotateEnd',     'resizable': 'onResizeEnd'  },\r\n        }\r\n        let jqui_ing: string;\r\n        switch (type){\r\n            default: jqui_ing = Log.eDevv(\"unexpected measurable event: \" + type); return;\r\n            case \"draggable\": jqui_ing = 'drag'; break;\r\n            case \"resizable\": jqui_ing = 'resize'; break;\r\n            case \"rotatable\": jqui_ing = 'rotate'; break;\r\n        }\r\n        //let jodelevent = {'s': eventmap.s[type], 'ing': eventmap.ing[type], 'e': eventmap.e[type]};\r\n        let jquievent = {'s': 'start', 'ing': jqui_ing, 'e':'stop'};\r\n\r\n        let jqkey = jquievent[evtkey] || '';\r\n        let props: GObject<MeasurableAllProps> = this.props;\r\n        let propsevent = props[eventmap[evtkey][type]];\r\n\r\n        if (propsevent && typeof propsevent !== \"function\") {\r\n            Log.ee(\"<Measurable /> \" + eventmap[evtkey][type] + \" props must be a function\");\r\n            return;\r\n        }\r\n        // call ondragend... jodel events\r\n        let jquievt = options[jqkey];\r\n        // let jodelevt = propsevent; // (...params: any) => propsevent(...params); // was made to preserve \"this\"?\r\n        let defaultevt: null | MeasurableUIEvent = this.getDefaultEvent(type, evtkey);\r\n        let allevents = [defaultevt, jquievt, propsevent].filter((e)=>!!e);\r\n        if (allevents.length) options[jqkey] = ((evt, ui)=>{\r\n            for (let e of allevents) {\r\n                propsevent = props[eventmap[evtkey][type]]; // if i don't redeclare it here, closure makes a mess taking always the last jodelevt for all iterations.\r\n                if (e === propsevent) { e(this.getCoords(evt, ui, this.props.isPanning), evt, ui); }\r\n                else e(evt, ui);\r\n            }\r\n        }) as DraggableEvent;\r\n    }\r\n    afterUpdateSingle(type: \"draggable\" | \"resizable\" | \"rotatable\"): void{\r\n        // was forced to move from general loop-style implementation to individual redundant stuff because of closure messes.\r\n        if (!this.$html) return;\r\n        let $measurable = this.$html;\r\n        let options: GObject;\r\n        const props: GObject = this.props;\r\n        const datamap = {draggable: \"uiDraggable\", resizable: \"uiResizable\", rotatable: \"uiRotatable\"};\r\n        const optionmap = {draggable: \"draggable\", resizable: \"resizable\", rotatable: \"rotatable\"};\r\n        const optionkey = optionmap[type];\r\n        if (props[optionkey] === false || !props[optionkey]) {\r\n            console.log(\"measurable off \" + type, {$measurable, type, datamap, optionkey, props});\r\n            if ($measurable.data(datamap[type])) ($measurable as GObject)[type]('disable');\r\n            return;\r\n        }\r\n        if (props[optionkey] === true) {\r\n            options = {};\r\n        } else options = {...props[optionkey]};\r\n\r\n        // todo: changing options at runtime works, but changing children does not update\r\n\r\n        let jqui_ing: string;\r\n        switch (type){\r\n            default: jqui_ing = Log.eDevv(\"unexpected measurable event: \" + type); return;\r\n            case \"draggable\": jqui_ing = 'drag'; break;\r\n            case \"resizable\": jqui_ing = 'resize'; break;\r\n            case \"rotatable\": jqui_ing = 'rotate'; break;\r\n        }\r\n        let jquievent = {'s': 'start', 'ing': jqui_ing, 'e':'stop'};\r\n        let evtkey: keyof typeof jquievent;\r\n        for (evtkey in jquievent) { this.makeEvent(options, type, evtkey); }\r\n        let defaultOptions = this.defaultOptions[type];\r\n        U.objectMergeInPlace(options, defaultOptions);\r\n        console.log(\"measurable options\", {type, $measurable, options, defaultOptions});\r\n        ($measurable as GObject)[type](options);\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<MeasurableAllProps>, nextState: Readonly<MeasurableState>, nextContext: any): boolean {\r\n        //console.log(\"measurable shouldup\", {nc:nextProps.children, tc:this.props.children, eq: nextProps.children == this.props.children});\r\n        // todo: would need to check if pros.children has changed, but that requires a deep search of subcomponents props and state.\r\n        // currently with just return true it works and rerenders every time the parent component rerenders. not when other elements are interacted.\r\n        // it works also with <Input> as direct child and it updates.\r\n        if (window) return true;\r\n        const oldProps = this.props || {};\r\n        this.dragOptionsChanged = false;\r\n        this.resizeOptionsChanged = false;\r\n        this.rotateOptionsChanged = false;\r\n        let ret: boolean = false;\r\n        const nestederr = \"Options cannot contain functions or nested objects\";\r\n        if (!U.isShallowEqualWithProxies(oldProps.draggable, nextProps.draggable)) {\r\n            const opt: GObject = oldProps.draggable as any;\r\n            if (opt && typeof opt === \"object\") for(let k in opt){ switch (typeof opt[k]){ case \"function\": case \"object\": Log.ee(\"drag\" + nestederr, k); } }\r\n            this.dragOptionsChanged = true;\r\n            ret = true;\r\n        }\r\n        if (!U.isShallowEqualWithProxies(oldProps.resizable, nextProps.resizable)) {\r\n            const opt: GObject = oldProps.resizable as any;\r\n            if (opt && typeof opt === \"object\") for(let k in opt){ switch (typeof opt[k]){ case \"function\": case \"object\": Log.ee(\"resize\" + nestederr, k); } }\r\n            this.resizeOptionsChanged = true;\r\n            ret = true;\r\n        }\r\n        if (!U.isShallowEqualWithProxies(oldProps.rotatable, nextProps.rotatable)) {\r\n            const opt: GObject = oldProps.rotatable as any;\r\n            if (opt && typeof opt === \"object\") for(let k in opt){ switch (typeof opt[k]){ case \"function\": case \"object\": Log.ee(\"rotate\" + nestederr, k); } }\r\n            this.rotateOptionsChanged = true;\r\n            return true;\r\n        }\r\n        if (ret) return true; // i don't need to set more this.variable stuff and i already determined something changed.\r\n        if (Object.keys(oldProps).length !== Object.keys(nextProps).length) return true;\r\n        let k: keyof typeof nextProps;\r\n        for (k in oldProps){\r\n            switch(k){\r\n                //case \"axis\": if (ok)\r\n                case \"draggable\": case \"resizable\": case \"rotatable\": continue;\r\n                case \"children\": continue;\r\n            }\r\n            if (!(k in nextProps)) return false;\r\n            let ok = oldProps[k];\r\n            let nk = nextProps[k];\r\n            if (ok === nk) continue;\r\n            let tk = typeof ok;\r\n            if (tk !== typeof nk) return false;\r\n            switch (tk) {\r\n                case \"object\": Log.ee(\"unexpected object in <Measurable/> props\", {k, nk, ok}); return true;\r\n                case \"function\": if (ok!.toString() !== nk!.toString()) return true; break;\r\n                default: return false; // already checked they are !==\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    updateDefaultOptions(){\r\n        /*let addClasses = this.props.children ? 'on-children' as any : undefined;\r\n                                          jqui.classes does not owrk? and addclass is only for draggable?\r\n        if (this.defaultOptions.draggable.addClasses !== addClasses) {\r\n            this.defaultOptions.resizable.classes = addClasses;\r\n            // this.defaultOptions.rotatable.classes = addClasses;\r\n        }*/\r\n    }\r\n    render(): ReactNode {\r\n        let child: ReactElement = this.props.children as any;\r\n\r\n        this.updateDefaultOptions();\r\n        if (!child) return child || null; // sometimes react passes {} as props.children?\r\n        if (!Object.keys(child).length) return Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\", child, this.props);\r\n        if (Array.isArray(child)) {\r\n            if (child.length !== 1) {\r\n                Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\", child, this.props);\r\n                return child;\r\n            }\r\n            else child = child[0];\r\n        }\r\n        if (child.type.toString() === React.Fragment.toString()) {\r\n            Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\", child, this.props);\r\n            return child; }\r\n\r\n        let oldProps = child.props;\r\n        let newProps = {\r\n            ref: (html: Element | null)=>{\r\n                if (html && !U.isHtmlNode(html)) {\r\n                    Log.ee('ref tring to set non-html element', html);\r\n                    return;\r\n                }\r\n                this.html = html;\r\n            }\r\n        };\r\n        U.objectMergeInPlace(newProps, oldProps);\r\n        let clonedChild = React.cloneElement(child, newProps);\r\n        return clonedChild;\r\n    }\r\n\r\n    private getCoords(evt: JQueryEventObject, ui: JQueryUI.DraggableEventUIParams, isPanning?: LGraph): GraphSize {\r\n        let size = Size.of(evt.target);\r\n        let graph: LGraph = DGraphElement.graphLFromHtml(evt.target) as LGraph;\r\n        let gsize: GraphSize = graph?.translateHtmlSize(size);\r\n        if (isPanning) {\r\n            let position = this.props.onChildren ? this.oldPos : ui.position;\r\n            gsize.x = position.left;\r\n            gsize.y = position.top;\r\n        }\r\n        return gsize;\r\n    }\r\n}\r\n\r\n@RuntimeAccessible('ScrollableComponent')\r\nexport class ScrollableComponent extends Component<ScrollOwnProps, ScrollState>{\r\n    static cname: string = \"ScrollableComponent\";\r\n    render(){\r\n        let graph = this.props.graph;\r\n        let create = (e: JQueryEventObject) => {\r\n            let target: HTMLElement = e.target as HTMLElement;\r\n            target.style.left = graph.offset.x+'px';\r\n            target.style.top = graph.offset.y+'px';\r\n        }\r\n        return (\r\n            <div className={\"scrollable\"}>\r\n                <Measurable draggable={{create}}\r\n                            isPanning={graph}\r\n                            onDragEnd={graph ? (coords, ...args: any)=>{\r\n                                if (!graph) return; // just for ts-lint\r\n                                console.log(\"drag odee\", {coords, graph, args});\r\n                                let offset = graph.offset;\r\n                                if (!offset.equals(coords)) graph.offset = coords as any;\r\n                            } : undefined}\r\n                            onChildren={true}>\r\n                    <div className=\"panning-handle\">\r\n                        <div className=\"panning-content\">{ this.props.children }</div>\r\n                    </div>\r\n                </Measurable>\r\n            </div>);\r\n    }\r\n}\r\n\r\n// private\r\ninterface ScrollOwnProps {\r\n    children: ReactChild[] | ReactChild;\r\n    graph: LGraph;\r\n}\r\ninterface MeasurableOwnProps {\r\n    isPanning?: LGraph;\r\n    children: ReactChild[] | ReactChild;\r\n    //dragOptions?: Options;\r\n    //drag?: Options;\r\n    draggable?: JQueryUI.DraggableOptions | boolean;\r\n    onDragStart?: DraggableEvent;\r\n    whileDragging?: DraggableEvent;\r\n    onDragEnd?: (coords: GraphSize, ...args: Parameters<DraggableEvent>)=>void;\r\n    onChildren?: boolean | ((e: HTMLElement)=>HTMLElement);\r\n\r\n    //resizeOptions?: Options;\r\n    //resize?: Options;\r\n    resizable?: JQueryUI.ResizableOptions | boolean;\r\n    onResizeStart?: ResizableEvent;\r\n    whileResizing?: ResizableEvent;\r\n    onResizeEnd?: ResizableEvent;\r\n    transformMode?: boolean; // if true uses transform: translate() instead of pos:absolute; left; & top;\r\n\r\n    //rotateOptions?: Options;\r\n    //rotate?: Options;\r\n    rotatable?: GObject | boolean;\r\n    onRotationStart?: RotatableEvent;\r\n    whileRotating?: RotatableEvent;\r\n    onRotationEnd?: RotatableEvent;\r\n}\r\n// private\r\ninterface MeasurableStateProps {\r\n    // propsFromReduxStateOrOtherKindOfStateManagement: boolean; // flux or custom things too, unrelated to this.state of react.\r\n}\r\n\r\n// private\r\ninterface DispatchProps {\r\n    // propsFromReduxActions: typeof funzioneTriggeraAzioneDaImportare;\r\n}\r\n\r\n\r\n// private\r\ntype MeasurableAllProps = MeasurableOwnProps & MeasurableStateProps & DispatchProps;\r\n\r\n////// mapper func\r\n/*\r\nfunction mapStateToProps(state: DState, ownProps: MeasurableOwnProps): MeasurableStateProps {\r\n    const ret: MeasurableStateProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n*/\r\n\r\n(MeasurableComponent as any).defaultProps = {\r\n    autosizex: true,\r\n    autosizey: true,\r\n    style: undefined,\r\n    children: [],\r\n} as MeasurableOwnProps;\r\n\r\n\r\nexport function Measurable(props: MeasurableAllProps, children?: any): ReactElement {\r\n    return <MeasurableComponent {...{...props}}>{props.children||children}</MeasurableComponent>;\r\n}\r\n// shortcuts for Draggable Resizable Rotatable with whileDragging onDragStart props simplified to start, while, end\r\nexport function Draggable(props: GObject<MeasurableAllProps>, children?: any): ReactElement {\r\n    return <MeasurableComponent\r\n        {...{...props}}\r\n        draggable={props.options || props.draggable || true}\r\n        onDragStart={props.start || props.begin || props.onDragStart}\r\n        onDragEnd={props.end || props.stop || props.onDragEnd}\r\n        whileDragging={props.drag || props.while || props.ing || props.whileDragging}\r\n    >{props.children||children}</MeasurableComponent>;\r\n}\r\nexport function Resizable(props: GObject<MeasurableAllProps>, children?: any): ReactElement {\r\n    return <MeasurableComponent\r\n        {...{...props}}\r\n        resizable={props.options || props.resizable || true}\r\n        onResizeStart={props.start || props.begin || props.onResizeStart}\r\n        onResizeEnd={props.end || props.stop || props.onResizeEnd}\r\n        whileResizing={props.resize || props.while || props.ing || props.whileResizing}\r\n    >{props.children||children}</MeasurableComponent>;\r\n}\r\nexport function Rotatable(props: GObject<MeasurableAllProps>, children?: any): ReactElement {\r\n    return <MeasurableComponent\r\n        {...{...props}}\r\n        rotatable={props.options || props.rotatable || true}\r\n        onRotationStart={props.start || props.begin || props.onRotateStart|| props.onRotationStart}\r\n        onRotationEnd={props.end || props.stop || props.onRotateEnd|| props.onRotationEnd}\r\n        whileRotating={props.rotate || props.while || props.ing || props.whileRotate || props.whileRotating}\r\n    >{props.children||children}</MeasurableComponent>;\r\n}\r\n\r\n\r\nexport function Scrollable(props: MeasurableAllProps, children?: any): ReactElement {\r\n    return <ScrollableComponent {...{...props}}>{props.children||children}</ScrollableComponent>;\r\n}/*\r\nexport function InfiniteScroll(props: MeasurableAllProps, children: ReactChild[] = []): ReactElement {\r\n    return <InfiniteScrollComponent {...{...props, children}}>{children}</InfiniteScrollComponent>;\r\n}*/\r\n\r\n/*connect<MeasurableStateProps, DispatchProps, MeasurableOwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MeasurableComponent);*/\r\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAK,IAAGC,SAAS,QAA0E,OAAO;AACzG,SAAQC,aAAa,EAA0CC,GAAG,EAAEC,iBAAiB,EAAEC,IAAI,EAAeC,CAAC,QAAO,cAAc;AAChI,OAAOC,CAAC,MAAM,QAAQ;;AAEtB;;AAEA,OAAO,mBAAmB;;AAQ1B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AASA,WACaC,mBAAmB,IAAAC,IAAA,GAD/BP,iBAAiB,CAAC,qBAAqB,CAAC,EAAAO,IAAA,CAAAC,MAAA,IAAAC,OAAA,GAAzC,MACaH,mBAAmB,SAAST,SAAS,CAAqC;EAAAa,YAAA;IAAA,SAAAC,SAAA;IAAA,KAK3EC,IAAI,GAAmB,IAAI;IAAA,KAC3BC,KAAK;IAAA,KACbC,kBAAkB,GAAY,IAAI;IAAA,KAClCC,oBAAoB,GAAY,IAAI;IAAA,KACpCC,oBAAoB,GAAY,IAAI;IAAA,KACpCC,cAAc,GAAuG;MACjHC,SAAS,EAAE;QACPC,MAAM,EAAE,uEAAuE;QAC/EC,MAAM,EAAE,UAAU;QAClB;QACAC,QAAQ,EAAE;QACV;QACA;MACJ,CAAC;MACDC,SAAS,EAAE,CAAC,CAAC;MACbC,SAAS,EAAE,CAAC;IAChB,CAAC;IAAA,KACDC,MAAM,GAAgC;MAACC,IAAI,EAAEC,SAAS;MAAEC,GAAG,EAAED;IAAS,CAAC;EAAA;EAEvEE,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAACC,WAAW,CAAC,CAAC;EACtB;EACAC,kBAAkBA,CAACC,SAAuC,EAAEC,SAAoC,EAAEC,QAAc,EAAE;IAC9G,IAAI,CAACJ,WAAW,CAAC,CAAC;EACtB;EAEAA,WAAWA,CAAA,EAAQ;IACf,IAAI,CAAC,IAAI,CAACjB,IAAI,EAAE;IAChB,IAAI,CAACC,KAAK,GAAGV,CAAC,CAAC,IAAI,CAACS,IAAI,CAAC;IACzB,IAAI,IAAI,CAACE,kBAAkB,EAAE;MAAE,IAAI,CAACoB,iBAAiB,CAAC,WAAW,CAAC;IAAE;IACpE,IAAI,IAAI,CAACnB,oBAAoB,EAAE;MAAE,IAAI,CAACmB,iBAAiB,CAAC,WAAW,CAAC;IAAE;IACtE,IAAI,IAAI,CAAClB,oBAAoB,EAAE;MAAE,IAAI,CAACkB,iBAAiB,CAAC,WAAW,CAAC;IAAE;EAC1E;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAUIC,mBAAmBA,CAACC,CAAc,EAAEC,GAAS,EAAEC,OAAqB,EAAO;IACvE,IAAIC,CAAC,GAAGH,CAAC,CAACI,KAAK,CAACf,IAAI;IACpB,IAAIgB,CAAC,GAAGL,CAAC,CAACI,KAAK,CAACb,GAAG;IACnB;AACR;AACA;IACQ;IACAS,CAAC,CAACI,KAAK,CAACE,SAAS,GAAG,aAAaH,CAAC,KAAKE,CAAC,GAAG;EAC/C;EACAE,SAASA,CAACP,CAAc,EAAEC,GAAS,EAAEC,OAAqB,EAAEM,EAAO,EAAO;IACtE,IAAIC,EAAE,GAAG,IAAI,CAACC,KAAK,CAACC,UAAU;IAC9B,IAAI,CAACF,EAAE,EAAE;MACL9C,GAAG,CAACiD,EAAE,CAAC,QAAQ,EAAE;QAACX,GAAG;QAAEQ,EAAE;QAAET,CAAC;QAAEa,CAAC,EAAE,IAAI,CAACH;MAAK,CAAC,CAAC;MAAE;IACnD;IACA,IAAII,KAAkB;IACtBC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAE;MAAChB,CAAC;MAAEC,GAAG;MAAGC,OAAO;MAAEM;IAAE,CAAC,CAAC;IAC7C,IAAI,OAAOC,EAAE,KAAK,UAAU,EAAEK,KAAK,GAAGL,EAAE,CAACT,CAAC,CAAC,CA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","ignoreList":[]},"metadata":{},"sourceType":"module"}