{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import'./style.scss';import{SetRootFieldAction}from'../../redux/action/action';import{DUser,DViewElement,LClass,LGraphElement,LNamedElement,LPackage,LUser,U,windoww}from'../../joiner';import MemoRec from'../../api/memorec';import{useStateIfMounted}from'use-state-if-mounted';import ModellingIcon from\"../forEndUser/ModellingIcon\";import{toggleMetrics}from'../metrics/Metrics';import{icon}from'../../pages/components/icons/Icons';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ContextMenuComponent(props){var _node$model,_memorec$data;const user=props.user;const project=user.project;const display=props.display;const position=props.position;const node=props.node;const data=LNamedElement.fromPointer(node===null||node===void 0?void 0:(_node$model=node.model)===null||_node$model===void 0?void 0:_node$model.id);let jsxList=[];const[memorec,setMemorec]=useStateIfMounted(null);const[suggestedName,setSuggestedName]=useStateIfMounted('');const[childrenMenu,setChildrenMenu]=useStateIfMounted(false);if(!node||!data)return/*#__PURE__*/_jsx(_Fragment,{});const close=()=>{// if (!windoww.ContextMenuVisible) return;\nwindoww.ContextMenuVisible=false;setSuggestedName('');setMemorec(null);SetRootFieldAction.new('contextMenu',{display:false,x:0,y:0});setChildrenMenu(false);};const addView=async()=>{DViewElement.newDefault((data===null||data===void 0?void 0:data.__raw)||undefined);close();};const structuralFeature=async()=>{setMemorec(await MemoRec.structuralFeature(data));};const classifier=async()=>{setMemorec(await MemoRec.classifier(data));};const suggestOnClass=isAttribute=>{const lClass=LClass.fromPointer(data.id);if(isAttribute)lClass.addAttribute(suggestedName);else lClass.addReference(suggestedName);close();};const suggestOnPackage=()=>{const lPackage=LPackage.fromPointer(data.id);lPackage.addClass(suggestedName);close();};/* Handling the add of composition children to specific M1 Object */ // const getAddChildren = (): ReactNode[] => {\n//     const list: ReactNode[] = [];\n//     const object = U.wrapper<LObject>(data);\n//     const instanceOf = U.wrapper<LObject>(data).instanceof;\n//     if(!instanceOf) return [];\n//     for(const reference of instanceOf.allReferences) {\n//         if(!reference.containment) continue;\n//         const feature =  U.wrapper<LValue>(object[`$${reference.name}`]);\n//         if(feature.values.length >= reference.upperBound && reference.upperBound !== -1) continue;\n//         const options = [reference.type, ...reference.type.allSubClasses].filter(o => !o.abstract && !o.interface)\n//         for(const option of options) {\n//             list.push(<div onClick={() => {\n//                 close();\n//                 const child = object.model.addObject({}, option);\n//                 feature.values = [...(feature.values as LObject[]), child];\n//             }} className={'col item'}>Add {option.name}</div>);\n//         }\n//     }\n//     return list;\n// }\nconst getAddChildren=()=>{const list=[];const object=U.wrapper(data);const instanceOf=U.wrapper(data).instanceof;// style={{position: 'absolute', top: position.y - 0, left: position.x - 0}}\nif(!instanceOf)return[];for(const reference of instanceOf.allReferences){if(!reference.containment)continue;const feature=U.wrapper(object[\"$\".concat(reference.name)]);if(feature.values.length>=reference.upperBound&&reference.upperBound!==-1)continue;const options=[reference.type,...reference.type.allSubClasses].filter(o=>!o.abstract&&!o.interface);switch(options.length){case 0:break;case 1:list.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();const child=object.model.addObject({},options[0]);feature.values=[...feature.values,child];},className:'col item',children:[icon['add'],\" Add \",options[0].name]}));break;default:list.push(/*#__PURE__*/_jsxs(\"div\",{onClick:e=>{setChildrenMenu(!childrenMenu);},className:'col item',children:[icon['add'],\" Add \",icon['submenu'],childrenMenu&&/*#__PURE__*/_jsx(\"div\",{className:'context-menu round submenu',style:{top:position.y-216,left:position.x-333},onContextMenu:e=>e.preventDefault(),children:options.map(option=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>{close();setChildrenMenu(false);const child=object.model.addObject({},option);feature.values=[...feature.values,child];},className:'col item',children:option.name}))})]}));list.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));break;}}return list;};if(display){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{className:'mt-1 col',style:{paddingLeft:'12px',fontWeight:'300'},children:[data.className,\": \",/*#__PURE__*/_jsx(\"i\",{children:data.name})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));if(data.className==='DObject'){jsxList=[...jsxList,...getAddChildren()];}/* Memorec */if(!U.isOffline()){if(data.className==='DClass'){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:structuralFeature,className:'col item',children:[icon['ai'],\" AI Suggest \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right\",style:{fontSize:'0.75em',float:'right',paddingTop:'2px',fontWeight:'800'}})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}if(data.className==='DPackage'){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:classifier,className:'col item',children:[icon['ai'],\" AI Suggest\",/*#__PURE__*/_jsx(\"i\",{className:'ms-1 bi bi-chevron-right',style:{fontSize:'0.75em',float:'right',paddingTop:'2px',fontWeight:'800'}})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}}/* Extend */switch(data.className){case'DValue':if(data.instanceof)jsxList.pop();break;case'DClass':jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();SetRootFieldAction.new('isEdgePending',{user:user.id,source:data.id});},className:'col item',children:[icon['extend'],\" Extend\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" E\"]})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));break;}/* Deselect */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();SetRootFieldAction.new(\"selected.\".concat(DUser.current),'','',false);},className:'col item',children:[icon['deselect'],\" Deselect\"]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* Delete */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();console.log('delete ctxmenu',{data,node});if(data)data.delete();else node.delete();// if there is data, then the node is indirectly deleted, no need to call it too.\n//node.delete();\n},className:'col item',children:[icon['delete'],\" Delete\",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-backspace\",style:{fontSize:'1em',float:'right',paddingTop:'2px',fontWeight:'800'}})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* Refresh */ // jsxList.push(<div onClick={() => {alert('refresh')}} className={'col item'}>{icon['refresh']} Refresh</div>);\n// jsxList.push(<hr className={'my-1'} />);\n/* Up / Down */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();node.zIndex+=1;},className:'col item',children:[icon['up'],\" Up\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-up\"})]})]}));jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();node.zIndex-=1;},className:'col item',children:[icon['down'],\" Down\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-down\"})]})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* LOCK-UNLOCK */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();data.delete();node.delete();},className:'col item',children:[icon['lock'],\" Lock/Unlock\",/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" L\"]})]}));/* UNLOCK ALL ELEMENTS */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();data.delete();node.delete();},className:'col item',children:[icon['unlock'],\" Unlock all\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-alt\"}),\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" L\"]})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* METRICS */if(data.model.isMetamodel){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{toggleMetrics();close();},className:'col item',children:[icon['metrics'],\" Analytics\",/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" A\"]})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}/* ADD VIEW */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:async()=>{close();await addView();},className:'col item',children:[icon['view'],\" Add View\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-alt\"}),\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" A\"]})]}));}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:'context-menu round',style:{top:position.y-100,left:position.x-10},onContextMenu:e=>e.preventDefault(),children:jsxList.map((jsx,index)=>{return/*#__PURE__*/_jsx(\"div\",{children:jsx},index);})}),memorec&&/*#__PURE__*/_jsx(\"div\",{className:'context-menu round',style:{overflow:'auto',maxHeight:'12em',top:position.y-100,left:position.x+130},children:memorec&&((_memorec$data=memorec.data)===null||_memorec$data===void 0?void 0:_memorec$data.map((obj,index)=>{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:'col item d-block',onClick:e=>setSuggestedName(obj.recommendedItem),children:[obj.recommendedItem,\" :\",/*#__PURE__*/_jsx(\"span\",{className:'ms-1 text-primary',children:Math.round(obj.score*100)/100})]})},index);}))}),memorec&&suggestedName&&/*#__PURE__*/_jsx(\"div\",{className:'memorec-overlay',children:/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onBlur:e=>close(),className:'memorec-popup',children:[/*#__PURE__*/_jsxs(\"div\",{className:'d-block text-center mb-1',children:[\"Add \",/*#__PURE__*/_jsx(\"b\",{children:suggestedName}),\" as:\"]}),memorec.type==='class'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onClick:e=>suggestOnClass(true),className:'d-flex memorec-button',children:[/*#__PURE__*/_jsx(ModellingIcon,{className:'my-auto',name:'attribute'}),\" Attribute\"]}),/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onClick:e=>suggestOnClass(false),className:'d-flex memorec-button mt-1',children:[/*#__PURE__*/_jsx(ModellingIcon,{className:'my-auto',name:'reference'}),\" Reference\"]})]}):/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onClick:e=>suggestOnPackage(),className:'d-flex memorec-button mt-1',children:[/*#__PURE__*/_jsx(ModellingIcon,{className:'my-auto',name:'class'}),\" Class\"]}),/*#__PURE__*/_jsx(\"div\",{className:'d-flex memorec-button mt-3',tabIndex:-1,onClick:e=>close(),children:/*#__PURE__*/_jsx(\"span\",{className:'mx-auto text-danger',children:\"Close\"})})]})})]});}function mapStateToProps(state,ownProps){const ret={};ret.user=LUser.fromPointer(DUser.current);ret.display=state.contextMenu.display;ret.position={x:state.contextMenu.x,y:state.contextMenu.y};const nodeid=state.contextMenu.nodeid;//state._lastSelected?.node;\nif(nodeid)ret.node=LGraphElement.fromPointer(nodeid);else ret.node=null;return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const ContextMenuConnected=connect(mapStateToProps,mapDispatchToProps)(ContextMenuComponent);export const ContextMenu=function(props){let childrens=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ContextMenuConnected,{...props,childrens});};export default ContextMenu;","map":{"version":3,"names":["React","connect","SetRootFieldAction","DUser","DViewElement","LClass","LGraphElement","LNamedElement","LPackage","LUser","U","windoww","MemoRec","useStateIfMounted","ModellingIcon","toggleMetrics","icon","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","ContextMenuComponent","props","_node$model","_memorec$data","user","project","display","position","node","data","fromPointer","model","id","jsxList","memorec","setMemorec","suggestedName","setSuggestedName","childrenMenu","setChildrenMenu","close","ContextMenuVisible","new","x","y","addView","newDefault","__raw","undefined","structuralFeature","classifier","suggestOnClass","isAttribute","lClass","addAttribute","addReference","suggestOnPackage","lPackage","addClass","getAddChildren","list","object","wrapper","instanceOf","instanceof","reference","allReferences","containment","feature","concat","name","values","length","upperBound","options","type","allSubClasses","filter","o","abstract","interface","push","onClick","child","addObject","className","children","e","style","top","left","onContextMenu","preventDefault","map","option","paddingLeft","fontWeight","isOffline","fontSize","float","paddingTop","pop","source","current","console","log","delete","zIndex","isMetamodel","index","overflow","maxHeight","obj","recommendedItem","Math","round","score","tabIndex","onBlur","mapStateToProps","state","ownProps","ret","contextMenu","nodeid","mapDispatchToProps","dispatch","ContextMenuConnected","ContextMenu","childrens","arguments"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/contextMenu/ContextMenu.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.scss';\r\nimport {SetRootFieldAction} from '../../redux/action/action';\r\nimport {\r\n    DClass,\r\n    DNamedElement,\r\n    DState,\r\n    DUser,\r\n    DValue,\r\n    DViewElement,\r\n    GObject,\r\n    LClass,\r\n    LGraphElement,\r\n    LNamedElement,\r\n    LObject,\r\n    LPackage,\r\n    LProject,\r\n    LUser,\r\n    LValue,\r\n    U,\r\n    windoww,\r\n} from '../../joiner';\r\nimport MemoRec from '../../api/memorec';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport ModellingIcon from \"../forEndUser/ModellingIcon\";\r\nimport {FakeStateProps} from \"../../joiner/types\";\r\nimport {toggleMetrics} from '../metrics/Metrics';\r\nimport {icon} from '../../pages/components/icons/Icons';\r\n\r\nfunction ContextMenuComponent(props: AllProps) {\r\n    const user = props.user;\r\n    const project = user.project as LProject;\r\n    const display = props.display;\r\n    const position = props.position;\r\n    const node = props.node;\r\n    const data: LNamedElement = LNamedElement.fromPointer(node?.model?.id);\r\n    let jsxList: ReactNode[] = [];\r\n    const [memorec, setMemorec] = useStateIfMounted<{data:GObject[], type:'class'|'package'}|null>(null);\r\n    const [suggestedName, setSuggestedName] = useStateIfMounted('');\r\n\r\n    const [childrenMenu, setChildrenMenu] = useStateIfMounted(false);\r\n\r\n    if(!node || !data) return(<></>);\r\n\r\n    const close = () => {\r\n        // if (!windoww.ContextMenuVisible) return;\r\n        windoww.ContextMenuVisible = false;\r\n        setSuggestedName('');\r\n        setMemorec(null);\r\n        SetRootFieldAction.new('contextMenu', {display: false, x: 0, y: 0});\r\n        setChildrenMenu(false);\r\n    }\r\n\r\n    const addView = async() => {\r\n        DViewElement.newDefault(data?.__raw as DNamedElement || undefined);\r\n        close();\r\n    }\r\n\r\n    const structuralFeature = async () => {\r\n        setMemorec(await MemoRec.structuralFeature(data));\r\n    }\r\n\r\n    const classifier = async() => {\r\n        setMemorec(await MemoRec.classifier(data));\r\n    }\r\n\r\n    const suggestOnClass = (isAttribute:boolean) => {\r\n        const lClass: LClass = LClass.fromPointer(data.id);\r\n        if(isAttribute) lClass.addAttribute(suggestedName);\r\n        else lClass.addReference(suggestedName);\r\n        close();\r\n\r\n    }\r\n    const suggestOnPackage = () => {\r\n        const lPackage: LPackage = LPackage.fromPointer(data.id);\r\n        lPackage.addClass(suggestedName);\r\n        close();\r\n    }\r\n\r\n    /* Handling the add of composition children to specific M1 Object */\r\n\r\n\r\n\r\n    // const getAddChildren = (): ReactNode[] => {\r\n    //     const list: ReactNode[] = [];\r\n    //     const object = U.wrapper<LObject>(data);\r\n    //     const instanceOf = U.wrapper<LObject>(data).instanceof;\r\n\r\n    //     if(!instanceOf) return [];\r\n    //     for(const reference of instanceOf.allReferences) {\r\n    //         if(!reference.containment) continue;\r\n    //         const feature =  U.wrapper<LValue>(object[`$${reference.name}`]);\r\n    //         if(feature.values.length >= reference.upperBound && reference.upperBound !== -1) continue;\r\n    //         const options = [reference.type, ...reference.type.allSubClasses].filter(o => !o.abstract && !o.interface)\r\n    //         for(const option of options) {\r\n    //             list.push(<div onClick={() => {\r\n    //                 close();\r\n    //                 const child = object.model.addObject({}, option);\r\n    //                 feature.values = [...(feature.values as LObject[]), child];\r\n    //             }} className={'col item'}>Add {option.name}</div>);\r\n    //         }\r\n\r\n    //     }\r\n    //     return list;\r\n    // }\r\n\r\n    const getAddChildren = (): ReactNode[] => {\r\n        const list: ReactNode[] = [];\r\n        const object = U.wrapper<LObject>(data);\r\n        const instanceOf = U.wrapper<LObject>(data).instanceof;\r\n        // style={{position: 'absolute', top: position.y - 0, left: position.x - 0}}\r\n        if(!instanceOf) return [];\r\n        for(const reference of instanceOf.allReferences) {\r\n            if(!reference.containment) continue;\r\n            const feature =  U.wrapper<LValue>(object[`$${reference.name}`]);\r\n            if(feature.values.length >= reference.upperBound && reference.upperBound !== -1) continue;\r\n            const options = [reference.type, ...reference.type.allSubClasses].filter(o => !o.abstract && !o.interface)\r\n\r\n            switch (options.length) {\r\n                case 0: break;\r\n                case 1:\r\n                    list.push(<div onClick={() => {\r\n                        close();\r\n                        const child = object.model.addObject({}, options[0]);\r\n                        feature.values = [...(feature.values as LObject[]), child];\r\n                    }} className={'col item'}>{icon['add']} Add {options[0].name}</div>);\r\n                    break;\r\n                default:\r\n                    list.push(<div onClick={(e) => {setChildrenMenu(!childrenMenu)}} className={'col item'}>{icon['add']} Add {icon['submenu']}\r\n                        {childrenMenu && <div className={'context-menu round submenu'} style={{top: position.y - 216, left: position.x - 333}} onContextMenu={(e)=>e.preventDefault()}>\r\n                            {options.map(option =>\r\n                                <div onClick={() => {\r\n                                    close();\r\n                                    setChildrenMenu(false);\r\n                                    const child = object.model.addObject({}, option);\r\n                                    feature.values = [...(feature.values as LObject[]), child];\r\n                                }} className={'col item'}>\r\n                                 {option.name}\r\n\r\n                                </div>\r\n                            )}\r\n                        </div>}\r\n                    </div>);\r\n                    list.push(<hr className={'my-1'} />);\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n\r\n    if(display) {\r\n        jsxList.push(<div className={'mt-1 col'} style={{paddingLeft:'12px', fontWeight: '300' }}>{data.className}: <i>{data.name}</i></div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        if(data.className === 'DObject') {\r\n            jsxList = [...jsxList, ...getAddChildren()];\r\n        }\r\n        /* Memorec */\r\n        if(!U.isOffline()) {\r\n            if(data.className === 'DClass') {\r\n                jsxList.push(<div onClick={structuralFeature} className={'col item'}>{icon['ai']} AI Suggest <i\r\n                    className='bi bi-chevron-right' style={{fontSize: '0.75em', float: 'right', paddingTop: '2px', fontWeight: '800'}}></i></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n            }\r\n            if(data.className === 'DPackage') {\r\n                jsxList.push(<div onClick={classifier} className={'col item'}>{icon['ai']} AI Suggest<i\r\n                    className={'ms-1 bi bi-chevron-right'} style={{fontSize: '0.75em', float: 'right', paddingTop: '2px', fontWeight: '800'}}></i></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n            }\r\n        }\r\n\r\n        /* Extend */\r\n        switch (data.className) {\r\n            case 'DValue': if ((data as any as LValue).instanceof) jsxList.pop(); break;\r\n            case 'DClass':\r\n                jsxList.push(<div onClick={() => {\r\n                    close();\r\n                    SetRootFieldAction.new('isEdgePending', {user: user.id, source: data.id});\r\n                }} className={'col item'}>{icon['extend']} Extend<div><i\r\n                className='bi bi-command'></i> E</div></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n                break;\r\n        }\r\n\r\n        /* Deselect */\r\n        jsxList.push(<div onClick={() => {\r\n            close();\r\n            SetRootFieldAction.new(`selected.${DUser.current}`, '', '', false);\r\n        }} className={'col item'}>{icon['deselect']} Deselect</div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n\r\n        /* Delete */\r\n        jsxList.push(<div onClick={() => {\r\n            close();\r\n            console.log('delete ctxmenu', {data, node});\r\n            if (data) data.delete();\r\n            else node.delete();// if there is data, then the node is indirectly deleted, no need to call it too.\r\n            //node.delete();\r\n        }} className={'col item'}>{icon['delete']} Delete<i\r\n            className='bi bi-backspace' style={{fontSize: '1em', float: 'right', paddingTop: '2px', fontWeight: '800'}}></i></div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* Refresh */\r\n\r\n        // jsxList.push(<div onClick={() => {alert('refresh')}} className={'col item'}>{icon['refresh']} Refresh</div>);\r\n        // jsxList.push(<hr className={'my-1'} />);\r\n\r\n        /* Up / Down */\r\n        jsxList.push(<div onClick={() => {close(); node.zIndex += 1;}} className={'col item'}>{icon['up']} Up<div><i\r\n        className='bi bi-command'></i><i className=\"bi bi-arrow-up\"></i></div></div>);\r\n        jsxList.push(<div onClick={() => {close(); node.zIndex -= 1;}} className={'col item'}>{icon['down']} Down<div><i\r\n        className='bi bi-command'></i><i className=\"bi bi-arrow-down\"></i></div></div>);\r\n\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* LOCK-UNLOCK */\r\n        jsxList.push(<div onClick={() => {close(); data.delete(); node.delete();}} className={'col item'}>{icon['lock']} Lock/Unlock<div> <i\r\n            className='bi bi-command'></i> L</div></div>);\r\n        /* UNLOCK ALL ELEMENTS */\r\n        jsxList.push(<div onClick={() => {close(); data.delete(); node.delete();}} className={'col item'}>{icon['unlock']} Unlock all<div><i className=\"bi bi-alt\"></i> <i\r\n            className='bi bi-command'></i> L</div></div>);\r\n\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* METRICS */\r\n        if (data.model.isMetamodel) {\r\n        jsxList.push(<div onClick={() => {toggleMetrics(); close();}} className={'col item'}>{icon['metrics']} Analytics<div> <i\r\n            className='bi bi-command'></i> A</div></div>);\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n\r\n        \r\n\r\n        /* ADD VIEW */\r\n        jsxList.push(<div onClick={async () => {close(); await addView();}} className={'col item'}>{icon['view']} Add View<div><i\r\n        className='bi bi-alt'></i> <i\r\n        className='bi bi-command'></i> A</div></div>);\r\n    }\r\n\r\n    return(<>\r\n        <div className={'context-menu round'} style={{top: position.y - 100, left: position.x - 10}} onContextMenu={(e)=>e.preventDefault()}>\r\n            {jsxList.map((jsx, index) => {return <div key={index}>{jsx}</div>})}\r\n        </div>\r\n\r\n\r\n        {(memorec) && <div className={'context-menu round'} style={{overflow: 'auto', maxHeight: '12em', top: position.y - 100, left: position.x + 130}}>\r\n            {(memorec && memorec.data?.map((obj, index) => {\r\n                return (<div key={index}>\r\n                    <div className={'col item d-block'} onClick={e => setSuggestedName(obj.recommendedItem)}>\r\n                        {obj.recommendedItem} :\r\n                        <span className={'ms-1 text-primary'}>{Math.round(obj.score * 100) / 100}</span>\r\n                    </div>\r\n                </div>)\r\n            }))}\r\n        </div>}\r\n\r\n        {(memorec && suggestedName) && <div className={'memorec-overlay'}>\r\n            <div tabIndex={-1} onBlur={e => close()} className={'memorec-popup'}>\r\n                <div className={'d-block text-center mb-1'}>Add <b>{suggestedName}</b> as:</div>\r\n                {(memorec.type === 'class') ? <>\r\n                    <div tabIndex={-1} onClick={e =>suggestOnClass(true)} className={'d-flex memorec-button'}>\r\n                        <ModellingIcon className={'my-auto'} name={'attribute'} /> Attribute\r\n                    </div>\r\n                    <div tabIndex={-1} onClick={e =>suggestOnClass(false)} className={'d-flex memorec-button mt-1'}>\r\n                        <ModellingIcon className={'my-auto'} name={'reference'} /> Reference\r\n                    </div>\r\n                </> :\r\n                    <div tabIndex={-1} onClick={e =>suggestOnPackage()} className={'d-flex memorec-button mt-1'}>\r\n                        <ModellingIcon className={'my-auto'} name={'class'} /> Class\r\n                    </div>\r\n                }\r\n                <div className={'d-flex memorec-button mt-3'} tabIndex={-1} onClick={e => close()}>\r\n                    <span className={'mx-auto text-danger'}>Close</span>\r\n                </div>\r\n            </div>\r\n        </div>}\r\n\r\n\r\n\r\n\r\n    </>);\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    user: LUser,\r\n    display: boolean,\r\n    position: {x: number, y: number},\r\n    node: LGraphElement|null\r\n}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.user = LUser.fromPointer(DUser.current);\r\n    ret.display = state.contextMenu.display;\r\n    ret.position = {x: state.contextMenu.x, y: state.contextMenu.y};\r\n\r\n    const nodeid = state.contextMenu.nodeid; //state._lastSelected?.node;\r\n    if (nodeid) ret.node = LGraphElement.fromPointer(nodeid);\r\n    else ret.node = null;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ContextMenuConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ContextMenuComponent);\r\n\r\nexport const ContextMenu = (props: OwnProps, childrens: (string | React.Component)[] = []): ReactElement => {\r\n    return <ContextMenuConnected {...{...props, childrens}} />;\r\n}\r\nexport default ContextMenu;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAA2C,OAAO,CAC9D,OAAQC,OAAO,KAAO,aAAa,CACnC,MAAO,cAAc,CACrB,OAAQC,kBAAkB,KAAO,2BAA2B,CAC5D,OAIIC,KAAK,CAELC,YAAY,CAEZC,MAAM,CACNC,aAAa,CACbC,aAAa,CAEbC,QAAQ,CAERC,KAAK,CAELC,CAAC,CACDC,OAAO,KACJ,cAAc,CACrB,MAAO,CAAAC,OAAO,KAAM,mBAAmB,CACvC,OAAQC,iBAAiB,KAAO,sBAAsB,CACtD,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CAEvD,OAAQC,aAAa,KAAO,oBAAoB,CAChD,OAAQC,IAAI,KAAO,oCAAoC,CAAC,OAAAC,QAAA,IAAAC,SAAA,gCAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExD,QAAS,CAAAC,oBAAoBA,CAACC,KAAe,CAAE,KAAAC,WAAA,CAAAC,aAAA,CAC3C,KAAM,CAAAC,IAAI,CAAGH,KAAK,CAACG,IAAI,CACvB,KAAM,CAAAC,OAAO,CAAGD,IAAI,CAACC,OAAmB,CACxC,KAAM,CAAAC,OAAO,CAAGL,KAAK,CAACK,OAAO,CAC7B,KAAM,CAAAC,QAAQ,CAAGN,KAAK,CAACM,QAAQ,CAC/B,KAAM,CAAAC,IAAI,CAAGP,KAAK,CAACO,IAAI,CACvB,KAAM,CAAAC,IAAmB,CAAGzB,aAAa,CAAC0B,WAAW,CAACF,IAAI,SAAJA,IAAI,kBAAAN,WAAA,CAAJM,IAAI,CAAEG,KAAK,UAAAT,WAAA,iBAAXA,WAAA,CAAaU,EAAE,CAAC,CACtE,GAAI,CAAAC,OAAoB,CAAG,EAAE,CAC7B,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGzB,iBAAiB,CAAgD,IAAI,CAAC,CACpG,KAAM,CAAC0B,aAAa,CAAEC,gBAAgB,CAAC,CAAG3B,iBAAiB,CAAC,EAAE,CAAC,CAE/D,KAAM,CAAC4B,YAAY,CAAEC,eAAe,CAAC,CAAG7B,iBAAiB,CAAC,KAAK,CAAC,CAEhE,GAAG,CAACkB,IAAI,EAAI,CAACC,IAAI,CAAE,mBAAOZ,IAAA,CAAAF,SAAA,GAAI,CAAC,CAE/B,KAAM,CAAAyB,KAAK,CAAGA,CAAA,GAAM,CAChB;AACAhC,OAAO,CAACiC,kBAAkB,CAAG,KAAK,CAClCJ,gBAAgB,CAAC,EAAE,CAAC,CACpBF,UAAU,CAAC,IAAI,CAAC,CAChBpC,kBAAkB,CAAC2C,GAAG,CAAC,aAAa,CAAE,CAAChB,OAAO,CAAE,KAAK,CAAEiB,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,CAAC,CAAC,CACnEL,eAAe,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAM,OAAO,CAAG,KAAAA,CAAA,GAAW,CACvB5C,YAAY,CAAC6C,UAAU,CAAC,CAAAjB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEkB,KAAK,GAAqBC,SAAS,CAAC,CAClER,KAAK,CAAC,CAAC,CACX,CAAC,CAED,KAAM,CAAAS,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CAClCd,UAAU,CAAC,KAAM,CAAA1B,OAAO,CAACwC,iBAAiB,CAACpB,IAAI,CAAC,CAAC,CACrD,CAAC,CAED,KAAM,CAAAqB,UAAU,CAAG,KAAAA,CAAA,GAAW,CAC1Bf,UAAU,CAAC,KAAM,CAAA1B,OAAO,CAACyC,UAAU,CAACrB,IAAI,CAAC,CAAC,CAC9C,CAAC,CAED,KAAM,CAAAsB,cAAc,CAAIC,WAAmB,EAAK,CAC5C,KAAM,CAAAC,MAAc,CAAGnD,MAAM,CAAC4B,WAAW,CAACD,IAAI,CAACG,EAAE,CAAC,CAClD,GAAGoB,WAAW,CAAEC,MAAM,CAACC,YAAY,CAAClB,aAAa,CAAC,CAAC,IAC9C,CAAAiB,MAAM,CAACE,YAAY,CAACnB,aAAa,CAAC,CACvCI,KAAK,CAAC,CAAC,CAEX,CAAC,CACD,KAAM,CAAAgB,gBAAgB,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,QAAkB,CAAGpD,QAAQ,CAACyB,WAAW,CAACD,IAAI,CAACG,EAAE,CAAC,CACxDyB,QAAQ,CAACC,QAAQ,CAACtB,aAAa,CAAC,CAChCI,KAAK,CAAC,CAAC,CACX,CAAC,CAED,qEAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA,KAAM,CAAAmB,cAAc,CAAGA,CAAA,GAAmB,CACtC,KAAM,CAAAC,IAAiB,CAAG,EAAE,CAC5B,KAAM,CAAAC,MAAM,CAAGtD,CAAC,CAACuD,OAAO,CAAUjC,IAAI,CAAC,CACvC,KAAM,CAAAkC,UAAU,CAAGxD,CAAC,CAACuD,OAAO,CAAUjC,IAAI,CAAC,CAACmC,UAAU,CACtD;AACA,GAAG,CAACD,UAAU,CAAE,MAAO,EAAE,CACzB,IAAI,KAAM,CAAAE,SAAS,GAAI,CAAAF,UAAU,CAACG,aAAa,CAAE,CAC7C,GAAG,CAACD,SAAS,CAACE,WAAW,CAAE,SAC3B,KAAM,CAAAC,OAAO,CAAI7D,CAAC,CAACuD,OAAO,CAASD,MAAM,KAAAQ,MAAA,CAAKJ,SAAS,CAACK,IAAI,EAAG,CAAC,CAChE,GAAGF,OAAO,CAACG,MAAM,CAACC,MAAM,EAAIP,SAAS,CAACQ,UAAU,EAAIR,SAAS,CAACQ,UAAU,GAAK,CAAC,CAAC,CAAE,SACjF,KAAM,CAAAC,OAAO,CAAG,CAACT,SAAS,CAACU,IAAI,CAAE,GAAGV,SAAS,CAACU,IAAI,CAACC,aAAa,CAAC,CAACC,MAAM,CAACC,CAAC,EAAI,CAACA,CAAC,CAACC,QAAQ,EAAI,CAACD,CAAC,CAACE,SAAS,CAAC,CAE1G,OAAQN,OAAO,CAACF,MAAM,EAClB,IAAK,EAAC,CAAE,MACR,IAAK,EAAC,CACFZ,IAAI,CAACqB,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAC1B1C,KAAK,CAAC,CAAC,CACP,KAAM,CAAA2C,KAAK,CAAGtB,MAAM,CAAC9B,KAAK,CAACqD,SAAS,CAAC,CAAC,CAAC,CAAEV,OAAO,CAAC,CAAC,CAAC,CAAC,CACpDN,OAAO,CAACG,MAAM,CAAG,CAAC,GAAIH,OAAO,CAACG,MAAoB,CAAEY,KAAK,CAAC,CAC9D,CAAE,CAACE,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,KAAK,CAAC,CAAC,OAAK,CAAC6D,OAAO,CAAC,CAAC,CAAC,CAACJ,IAAI,EAAM,CAAC,CAAC,CACpE,MACJ,QACIV,IAAI,CAACqB,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAGK,CAAC,EAAK,CAAChD,eAAe,CAAC,CAACD,YAAY,CAAC,EAAE,CAAC+C,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,KAAK,CAAC,CAAC,OAAK,CAACA,IAAI,CAAC,SAAS,CAAC,CACrHyB,YAAY,eAAIrB,IAAA,QAAKoE,SAAS,CAAE,4BAA6B,CAACG,KAAK,CAAE,CAACC,GAAG,CAAE9D,QAAQ,CAACiB,CAAC,CAAG,GAAG,CAAE8C,IAAI,CAAE/D,QAAQ,CAACgB,CAAC,CAAG,GAAG,CAAE,CAACgD,aAAa,CAAGJ,CAAC,EAAGA,CAAC,CAACK,cAAc,CAAC,CAAE,CAAAN,QAAA,CACzJZ,OAAO,CAACmB,GAAG,CAACC,MAAM,eACf7E,IAAA,QAAKiE,OAAO,CAAEA,CAAA,GAAM,CAChB1C,KAAK,CAAC,CAAC,CACPD,eAAe,CAAC,KAAK,CAAC,CACtB,KAAM,CAAA4C,KAAK,CAAGtB,MAAM,CAAC9B,KAAK,CAACqD,SAAS,CAAC,CAAC,CAAC,CAAEU,MAAM,CAAC,CAChD1B,OAAO,CAACG,MAAM,CAAG,CAAC,GAAIH,OAAO,CAACG,MAAoB,CAAEY,KAAK,CAAC,CAC9D,CAAE,CAACE,SAAS,CAAE,UAAW,CAAAC,QAAA,CACvBQ,MAAM,CAACxB,IAAI,CAER,CACT,CAAC,CACA,CAAC,EACL,CAAC,CAAC,CACPV,IAAI,CAACqB,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CACpC,MACR,CAEJ,CAEA,MAAO,CAAAzB,IAAI,CACf,CAAC,CAGD,GAAGlC,OAAO,CAAE,CACRO,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAKkE,SAAS,CAAE,UAAW,CAACG,KAAK,CAAE,CAACO,WAAW,CAAC,MAAM,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAAV,QAAA,EAAEzD,IAAI,CAACwD,SAAS,CAAC,IAAE,cAAApE,IAAA,MAAAqE,QAAA,CAAIzD,IAAI,CAACyC,IAAI,CAAI,CAAC,EAAK,CAAC,CAAC,CACrIrC,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CACvC,GAAGxD,IAAI,CAACwD,SAAS,GAAK,SAAS,CAAE,CAC7BpD,OAAO,CAAG,CAAC,GAAGA,OAAO,CAAE,GAAG0B,cAAc,CAAC,CAAC,CAAC,CAC/C,CACA,aACA,GAAG,CAACpD,CAAC,CAAC0F,SAAS,CAAC,CAAC,CAAE,CACf,GAAGpE,IAAI,CAACwD,SAAS,GAAK,QAAQ,CAAE,CAC5BpD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEjC,iBAAkB,CAACoC,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,IAAI,CAAC,CAAC,cAAY,cAAAI,IAAA,MACzFoE,SAAS,CAAC,qBAAqB,CAACG,KAAK,CAAE,CAACU,QAAQ,CAAE,QAAQ,CAAEC,KAAK,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEJ,UAAU,CAAE,KAAK,CAAE,CAAI,CAAC,EAAK,CAAC,CAAC,CAClI/D,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CAC3C,CACA,GAAGxD,IAAI,CAACwD,SAAS,GAAK,UAAU,CAAE,CAC9BpD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEhC,UAAW,CAACmC,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,IAAI,CAAC,CAAC,aAAW,cAAAI,IAAA,MACjFoE,SAAS,CAAE,0BAA2B,CAACG,KAAK,CAAE,CAACU,QAAQ,CAAE,QAAQ,CAAEC,KAAK,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEJ,UAAU,CAAE,KAAK,CAAE,CAAI,CAAC,EAAK,CAAC,CAAC,CACzI/D,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CAC3C,CACJ,CAEA,YACA,OAAQxD,IAAI,CAACwD,SAAS,EAClB,IAAK,QAAQ,CAAE,GAAKxD,IAAI,CAAmBmC,UAAU,CAAE/B,OAAO,CAACoE,GAAG,CAAC,CAAC,CAAE,MACtE,IAAK,QAAQ,CACTpE,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAC7B1C,KAAK,CAAC,CAAC,CACPzC,kBAAkB,CAAC2C,GAAG,CAAC,eAAe,CAAE,CAAClB,IAAI,CAAEA,IAAI,CAACQ,EAAE,CAAEsE,MAAM,CAAEzE,IAAI,CAACG,EAAE,CAAC,CAAC,CAC7E,CAAE,CAACqD,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAO,cAAAM,KAAA,QAAAmE,QAAA,eAAKrE,IAAA,MACtDoE,SAAS,CAAC,eAAe,CAAI,CAAC,KAAE,EAAK,CAAC,EAAK,CAAC,CAAC,CAC7CpD,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CACvC,MACR,CAEA,cACApD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAC7B1C,KAAK,CAAC,CAAC,CACPzC,kBAAkB,CAAC2C,GAAG,aAAA2B,MAAA,CAAarE,KAAK,CAACuG,OAAO,EAAI,EAAE,CAAE,EAAE,CAAE,KAAK,CAAC,CACtE,CAAE,CAAClB,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,UAAU,CAAC,CAAC,WAAS,EAAK,CAAC,CAAC,CAC5DoB,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CAEvC,YACApD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAC7B1C,KAAK,CAAC,CAAC,CACPgE,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAE,CAAC5E,IAAI,CAAED,IAAI,CAAC,CAAC,CAC3C,GAAIC,IAAI,CAAEA,IAAI,CAAC6E,MAAM,CAAC,CAAC,CAAC,IACnB,CAAA9E,IAAI,CAAC8E,MAAM,CAAC,CAAC,CAAC;AACnB;AACJ,CAAE,CAACrB,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAO,cAAAI,IAAA,MAC7CoE,SAAS,CAAC,iBAAiB,CAACG,KAAK,CAAE,CAACU,QAAQ,CAAE,KAAK,CAAEC,KAAK,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEJ,UAAU,CAAE,KAAK,CAAE,CAAI,CAAC,EAAK,CAAC,CAAC,CAC3H/D,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CACvC,cAEA;AACA;AAEA,eACApD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAAC1C,KAAK,CAAC,CAAC,CAAEZ,IAAI,CAAC+E,MAAM,EAAI,CAAC,CAAC,CAAE,CAACtB,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,IAAI,CAAC,CAAC,KAAG,cAAAM,KAAA,QAAAmE,QAAA,eAAKrE,IAAA,MAC1GoE,SAAS,CAAC,eAAe,CAAI,CAAC,cAAApE,IAAA,MAAGoE,SAAS,CAAC,gBAAgB,CAAI,CAAC,EAAK,CAAC,EAAK,CAAC,CAAC,CAC7EpD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAAC1C,KAAK,CAAC,CAAC,CAAEZ,IAAI,CAAC+E,MAAM,EAAI,CAAC,CAAC,CAAE,CAACtB,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,MAAM,CAAC,CAAC,OAAK,cAAAM,KAAA,QAAAmE,QAAA,eAAKrE,IAAA,MAC9GoE,SAAS,CAAC,eAAe,CAAI,CAAC,cAAApE,IAAA,MAAGoE,SAAS,CAAC,kBAAkB,CAAI,CAAC,EAAK,CAAC,EAAK,CAAC,CAAC,CAE/EpD,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CACvC,iBACApD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAAC1C,KAAK,CAAC,CAAC,CAAEX,IAAI,CAAC6E,MAAM,CAAC,CAAC,CAAE9E,IAAI,CAAC8E,MAAM,CAAC,CAAC,CAAC,CAAE,CAACrB,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,MAAM,CAAC,CAAC,cAAY,cAAAM,KAAA,QAAAmE,QAAA,EAAK,GAAC,cAAArE,IAAA,MAC9HoE,SAAS,CAAC,eAAe,CAAI,CAAC,KAAE,EAAK,CAAC,EAAK,CAAC,CAAC,CACjD,yBACApD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAAC1C,KAAK,CAAC,CAAC,CAAEX,IAAI,CAAC6E,MAAM,CAAC,CAAC,CAAE9E,IAAI,CAAC8E,MAAM,CAAC,CAAC,CAAC,CAAE,CAACrB,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,QAAQ,CAAC,CAAC,aAAW,cAAAM,KAAA,QAAAmE,QAAA,eAAKrE,IAAA,MAAGoE,SAAS,CAAC,WAAW,CAAI,CAAC,IAAC,cAAApE,IAAA,MAC5JoE,SAAS,CAAC,eAAe,CAAI,CAAC,KAAE,EAAK,CAAC,EAAK,CAAC,CAAC,CAEjDpD,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CACvC,aACA,GAAIxD,IAAI,CAACE,KAAK,CAAC6E,WAAW,CAAE,CAC5B3E,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAEA,CAAA,GAAM,CAACtE,aAAa,CAAC,CAAC,CAAE4B,KAAK,CAAC,CAAC,CAAC,CAAE,CAAC6C,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,SAAS,CAAC,CAAC,YAAU,cAAAM,KAAA,QAAAmE,QAAA,EAAK,GAAC,cAAArE,IAAA,MAClHoE,SAAS,CAAC,eAAe,CAAI,CAAC,KAAE,EAAK,CAAC,EAAK,CAAC,CAAC,CAC7CpD,OAAO,CAACgD,IAAI,cAAChE,IAAA,OAAIoE,SAAS,CAAE,MAAO,CAAE,CAAC,CAAC,CAC3C,CAIA,cACApD,OAAO,CAACgD,IAAI,cAAC9D,KAAA,QAAK+D,OAAO,CAAE,KAAAA,CAAA,GAAY,CAAC1C,KAAK,CAAC,CAAC,CAAE,KAAM,CAAAK,OAAO,CAAC,CAAC,CAAC,CAAE,CAACwC,SAAS,CAAE,UAAW,CAAAC,QAAA,EAAEzE,IAAI,CAAC,MAAM,CAAC,CAAC,WAAS,cAAAM,KAAA,QAAAmE,QAAA,eAAKrE,IAAA,MACvHoE,SAAS,CAAC,WAAW,CAAI,CAAC,IAAC,cAAApE,IAAA,MAC3BoE,SAAS,CAAC,eAAe,CAAI,CAAC,KAAE,EAAK,CAAC,EAAK,CAAC,CAAC,CACjD,CAEA,mBAAOlE,KAAA,CAAAJ,SAAA,EAAAuE,QAAA,eACHrE,IAAA,QAAKoE,SAAS,CAAE,oBAAqB,CAACG,KAAK,CAAE,CAACC,GAAG,CAAE9D,QAAQ,CAACiB,CAAC,CAAG,GAAG,CAAE8C,IAAI,CAAE/D,QAAQ,CAACgB,CAAC,CAAG,EAAE,CAAE,CAACgD,aAAa,CAAGJ,CAAC,EAAGA,CAAC,CAACK,cAAc,CAAC,CAAE,CAAAN,QAAA,CAC/HrD,OAAO,CAAC4D,GAAG,CAAC,CAAC7E,GAAG,CAAE6F,KAAK,GAAK,CAAC,mBAAO5F,IAAA,QAAAqE,QAAA,CAAkBtE,GAAG,EAAX6F,KAAiB,CAAC,EAAC,CAAC,CAClE,CAAC,CAGJ3E,OAAO,eAAKjB,IAAA,QAAKoE,SAAS,CAAE,oBAAqB,CAACG,KAAK,CAAE,CAACsB,QAAQ,CAAE,MAAM,CAAEC,SAAS,CAAE,MAAM,CAAEtB,GAAG,CAAE9D,QAAQ,CAACiB,CAAC,CAAG,GAAG,CAAE8C,IAAI,CAAE/D,QAAQ,CAACgB,CAAC,CAAG,GAAG,CAAE,CAAA2C,QAAA,CAC1IpD,OAAO,IAAAX,aAAA,CAAIW,OAAO,CAACL,IAAI,UAAAN,aAAA,iBAAZA,aAAA,CAAcsE,GAAG,CAAC,CAACmB,GAAG,CAAEH,KAAK,GAAK,CAC3C,mBAAQ5F,IAAA,QAAAqE,QAAA,cACJnE,KAAA,QAAKkE,SAAS,CAAE,kBAAmB,CAACH,OAAO,CAAEK,CAAC,EAAIlD,gBAAgB,CAAC2E,GAAG,CAACC,eAAe,CAAE,CAAA3B,QAAA,EACnF0B,GAAG,CAACC,eAAe,CAAC,IACrB,cAAAhG,IAAA,SAAMoE,SAAS,CAAE,mBAAoB,CAAAC,QAAA,CAAE4B,IAAI,CAACC,KAAK,CAACH,GAAG,CAACI,KAAK,CAAG,GAAG,CAAC,CAAG,GAAG,CAAO,CAAC,EAC/E,CAAC,EAJQP,KAKb,CAAC,CACV,CAAC,CAAC,EACD,CAAC,CAEJ3E,OAAO,EAAIE,aAAa,eAAKnB,IAAA,QAAKoE,SAAS,CAAE,iBAAkB,CAAAC,QAAA,cAC7DnE,KAAA,QAAKkG,QAAQ,CAAE,CAAC,CAAE,CAACC,MAAM,CAAE/B,CAAC,EAAI/C,KAAK,CAAC,CAAE,CAAC6C,SAAS,CAAE,eAAgB,CAAAC,QAAA,eAChEnE,KAAA,QAAKkE,SAAS,CAAE,0BAA2B,CAAAC,QAAA,EAAC,MAAI,cAAArE,IAAA,MAAAqE,QAAA,CAAIlD,aAAa,CAAI,CAAC,OAAI,EAAK,CAAC,CAC9EF,OAAO,CAACyC,IAAI,GAAK,OAAO,cAAIxD,KAAA,CAAAJ,SAAA,EAAAuE,QAAA,eAC1BnE,KAAA,QAAKkG,QAAQ,CAAE,CAAC,CAAE,CAACnC,OAAO,CAAEK,CAAC,EAAGpC,cAAc,CAAC,IAAI,CAAE,CAACkC,SAAS,CAAE,uBAAwB,CAAAC,QAAA,eACrFrE,IAAA,CAACN,aAAa,EAAC0E,SAAS,CAAE,SAAU,CAACf,IAAI,CAAE,WAAY,CAAE,CAAC,aAC9D,EAAK,CAAC,cACNnD,KAAA,QAAKkG,QAAQ,CAAE,CAAC,CAAE,CAACnC,OAAO,CAAEK,CAAC,EAAGpC,cAAc,CAAC,KAAK,CAAE,CAACkC,SAAS,CAAE,4BAA6B,CAAAC,QAAA,eAC3FrE,IAAA,CAACN,aAAa,EAAC0E,SAAS,CAAE,SAAU,CAACf,IAAI,CAAE,WAAY,CAAE,CAAC,aAC9D,EAAK,CAAC,EACR,CAAC,cACCnD,KAAA,QAAKkG,QAAQ,CAAE,CAAC,CAAE,CAACnC,OAAO,CAAEK,CAAC,EAAG/B,gBAAgB,CAAC,CAAE,CAAC6B,SAAS,CAAE,4BAA6B,CAAAC,QAAA,eACxFrE,IAAA,CAACN,aAAa,EAAC0E,SAAS,CAAE,SAAU,CAACf,IAAI,CAAE,OAAQ,CAAE,CAAC,SAC1D,EAAK,CAAC,cAEVrD,IAAA,QAAKoE,SAAS,CAAE,4BAA6B,CAACgC,QAAQ,CAAE,CAAC,CAAE,CAACnC,OAAO,CAAEK,CAAC,EAAI/C,KAAK,CAAC,CAAE,CAAA8C,QAAA,cAC9ErE,IAAA,SAAMoE,SAAS,CAAE,qBAAsB,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,CACnD,CAAC,EACL,CAAC,CACL,CAAC,EAKR,CAAC,CACP,CAYA,QAAS,CAAAiC,eAAeA,CAACC,KAAa,CAAEC,QAAkB,CAAc,CACpE,KAAM,CAAAC,GAAe,CAAG,CAAC,CAAmB,CAC5CA,GAAG,CAAClG,IAAI,CAAGlB,KAAK,CAACwB,WAAW,CAAC9B,KAAK,CAACuG,OAAO,CAAC,CAC3CmB,GAAG,CAAChG,OAAO,CAAG8F,KAAK,CAACG,WAAW,CAACjG,OAAO,CACvCgG,GAAG,CAAC/F,QAAQ,CAAG,CAACgB,CAAC,CAAE6E,KAAK,CAACG,WAAW,CAAChF,CAAC,CAAEC,CAAC,CAAE4E,KAAK,CAACG,WAAW,CAAC/E,CAAC,CAAC,CAE/D,KAAM,CAAAgF,MAAM,CAAGJ,KAAK,CAACG,WAAW,CAACC,MAAM,CAAE;AACzC,GAAIA,MAAM,CAAEF,GAAG,CAAC9F,IAAI,CAAGzB,aAAa,CAAC2B,WAAW,CAAC8F,MAAM,CAAC,CAAC,IACpD,CAAAF,GAAG,CAAC9F,IAAI,CAAG,IAAI,CACpB,MAAO,CAAA8F,GAAG,CACd,CAEA,QAAS,CAAAG,kBAAkBA,CAACC,QAAuB,CAAiB,CAChE,KAAM,CAAAJ,GAAkB,CAAG,CAAC,CAAC,CAC7B,MAAO,CAAAA,GAAG,CACd,CAGA,MAAO,MAAM,CAAAK,oBAAoB,CAAGjI,OAAO,CACvCyH,eAAe,CACfM,kBACJ,CAAC,CAACzG,oBAAoB,CAAC,CAEvB,MAAO,MAAM,CAAA4G,WAAW,CAAG,QAAAA,CAAC3G,KAAe,CAAiE,IAA/D,CAAA4G,SAAuC,CAAAC,SAAA,CAAA1D,MAAA,IAAA0D,SAAA,MAAAlF,SAAA,CAAAkF,SAAA,IAAG,EAAE,CACrF,mBAAOjH,IAAA,CAAC8G,oBAAoB,EAAM,GAAG1G,KAAK,CAAE4G,SAAS,CAAI,CAAC,CAC9D,CAAC,CACD,cAAe,CAAAD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module"}