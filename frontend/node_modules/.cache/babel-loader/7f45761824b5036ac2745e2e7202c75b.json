{"ast":null,"code":"import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import{connect}from\"react-redux\";import{useStateIfMounted}from\"use-state-if-mounted\";import tinycolor from\"tinycolor2\";import Editor from\"@monaco-editor/react\";import DropDownButton from\"smart-webcomponents-react/dropdownbutton\";import'smart-webcomponents-react/source/styles/smart.default.css';import{EdgeHead,Input,Keystrokes,Log,LViewElement,U}from'../../../../joiner';import{Color}from'../../../forEndUser/Color';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function makeNumericInput(prefix,number,setNumber,setText,readOnly){var type;var min;var max;var step=undefined;switch(number.unit){case'':return/*#__PURE__*/_jsx(\"input\",{className:\"value\",placeholder:\"value\",type:\"text\",defaultValue:number.value,onBlur:function onBlur(e){return setText(e,prefix);},disabled:readOnly,onKeyDown:function onKeyDown(e){if(e.key===Keystrokes.enter)setText(e,prefix);if(e.key===Keystrokes.escape)e.target.value=''+number.value;}});case'px':min=0;max=300;break;case'pt':break;// 1pt = 1.33 px; 1px = 0.75pt\ncase'cm':case'mm':min=0;max=200;break;// 1mm = 3.7px\ncase'ch':case'ex':case'em':case'rem':case'in':// 1in = 96px\ncase'pc':// 2px = 0.125 picas; 18.75pc = 300px\ncase'fr':min=0;max=20;step=0.5;break;default:type=\"number\";break;case\"%\":case\"vh\":case\"vw\":case\"vmax\":case\"vmin\":type=\"range\";min=0;max=100;break;}var roundedValue0=Math.round(((number.value||0)-(typeof step===\"number\"?number.value%step:number.value%0.1))*10000)/10000;// % works on decimals right.\nvar roundedValue=typeof step===\"number\"?Math.round((number.value||0)*(1/step))*step:Math.round(number.value*100)/100;// % works on decimals right.\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"value\",placeholder:\"value\",type:\"range\",disabled:readOnly,defaultValue:number.value,min:min,max:max,step:\"any\",onBlur:function onBlur(e){setNumber(e,prefix);},onMouseUp:function onMouseUp(e){setNumber(e,prefix);}},\"s\"+number.value),/*#__PURE__*/_jsx(\"input\",{className:\"spinner\",placeholder:\"value\",type:\"number\",disabled:readOnly,defaultValue:roundedValue,\"data-dv\":roundedValue,\"data-dv2\":number.value,step:step,onBlur:function onBlur(e){setNumber(e,prefix);},onKeyDown:function onKeyDown(e){if(e.key===Keystrokes.enter)setNumber(e,prefix);if(e.key===Keystrokes.escape)e.target.value=''+number.value;}},roundedValue)]});}// delete button <button className=\"btn btn-danger ms-1\"><i className=\"p-1 bi bi-trash3-fill\"/></button>\nfunction PaletteDataComponent(props){var view=props.view;var readOnly=props.readonly;var palette=_objectSpread({},view.palette);var tmp=undefined;var _useStateIfMounted=useStateIfMounted(view.css),_useStateIfMounted2=_slicedToArray(_useStateIfMounted,2),css=_useStateIfMounted2[0],setCss=_useStateIfMounted2[1];var change=function change(value){if(value!==undefined)setCss(value);};// save in local state for frequent changes.\nvar blur=function blur(){return view.css=css;};// confirm in redux state for final state\nvar addControl=function addControl(type){var _headdict;if(readOnly)return;var i;var prefix0;//= 'palette_' + i + '-';\nswitch(type){default:Log.exDevv(\"unexpected case in addControl:\"+type);return;case'path':i=Object.values(palette).filter(function(o){return o.type===\"path\";}).length+1;prefix0='path_';break;case'text':i=Object.values(palette).filter(function(o){return o.type===\"text\";}).length+1;prefix0='text_';break;case'number':i=Object.values(palette).filter(function(o){return o.type===\"number\";}).length+1;prefix0='numeric_';break;case'palette':i=Object.values(palette).filter(function(o){return Array.isArray(o);}).length+1;prefix0='palette_';break;}var prefix;while(true){prefix=prefix0+i++;if(prefix in palette)continue;break;}switch(type){default:Log.exDevv(\"unexpected case in addControl:\"+type);return;case'path':var agglabel=\"◇ Aggregation / Composition\";var extendlabel=\"△ \"+EdgeHead.extend;var asslabel=\"Λ \"+EdgeHead.reference;var headdict=(_headdict={},_defineProperty(_headdict,asslabel,'M 0 0   L x y/2   L 0 y'),_defineProperty(_headdict,extendlabel,'M 0 0   L x y/2   L 0 y   Z'),_defineProperty(_headdict,agglabel,'M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z'),_headdict);var predefinedPaths=Object.entries(headdict).map(function(e){return{k:e[0],v:e[1]};});tmp=_objectSpread({},palette);tmp[prefix]={type:'path',value:'',x:'edgeHeadSize.x',y:'edgeHeadSize.y',options:predefinedPaths};break;case'text':tmp=_objectSpread({},palette);tmp[prefix]={type:'text',value:''};break;case'number':tmp=_objectSpread({},palette);tmp[prefix]={type:'number',value:0,unit:'px'};break;case'palette':tmp=_objectSpread({},palette);tmp[prefix]={type:'color',value:[]};break;}view.palette=palette=tmp;};var setGeneric=function setGeneric(e,prefix,key){var val=e.target.value;if(readOnly||palette[prefix][key]===val)return;var tmp=_objectSpread({},palette);tmp[prefix][key]=val;view.palette=palette=tmp;};var setText=function setText(e,prefix){var val=e.target.value;if(readOnly||palette[prefix].value===val)return;var tmp=_objectSpread({},palette);tmp[prefix].value=val;view.palette=palette=tmp;};var setNumber=function setNumber(e,prefix){var val=+e.target.value||0;if(readOnly||palette[prefix].value===val)return;var tmp=_objectSpread({},palette);tmp[prefix].value=val;view.palette=palette=tmp;};var setUnit=function setUnit(e,prefix){var val=e.target.value===undefined?'px':e.target.value;if(readOnly||val===palette[prefix].unit)return;var tmp=_objectSpread({},palette);tmp[prefix].unit=val;view.palette=palette=tmp;};var changePrefix=function changePrefix(oldPrefix,newPrefix){newPrefix=newPrefix.replaceAll(/[^\\w\\-]/g,'-');// /^[^a-zA-Z0-9_\\-]*$/, '-');\nif(readOnly||palette[newPrefix])return;// refuse to overwrite existing palette name (2 different palettes with same name)\ntmp=_objectSpread({},palette);tmp[newPrefix]=palette[oldPrefix];delete tmp[oldPrefix];view.palette=palette=tmp;};var removeControl=function removeControl(prefix){if(readOnly||!palette[prefix])return;tmp=_objectSpread({},palette);delete tmp[prefix];view.palette=palette=tmp;};var addColor=function addColor(prefix,colors){var index=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;var skipFirst=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(readOnly)return;if(!Array.isArray(colors)){colors=[colors];skipFirst=false;}var tmp=_objectSpread({},palette);var lastAdded=undefined;for(var i=colors.length-1;i>=(skipFirst?1:0);i--){var color=colors[i];var rgba=color.toRgb();console.log(\"addingColor:\",{rgba:rgba,lastAdded:lastAdded,color:color});if(rgba===lastAdded)continue;lastAdded=rgba;if(!tmp[prefix])tmp[prefix]={type:'color',value:[]};else tmp[prefix]=_objectSpread({},tmp[prefix]);tmp[prefix].value=_toConsumableArray(tmp[prefix].value);if(index>=0)tmp[prefix].value.splice(index+1,0,rgba);else tmp[prefix].value.push(rgba);}view.palette=palette=tmp;};var setColor=function setColor(prefix,index,hex,alpha){var tmp=_objectSpread({},palette);if(readOnly||!tmp[prefix])tmp[prefix]={type:'color',value:[]};else tmp[prefix]=_objectSpread({},tmp[prefix]);var oldColor=tmp[prefix].value[index];if(hex){var color=tinycolor(hex);if(alpha!==undefined)color.setAlpha(alpha);var rgba=color.toRgb();if(oldColor&&oldColor.a!==undefined)rgba.a=oldColor.a;tmp[prefix].value[index]=oldColor=rgba;view.palette=palette=tmp;}if(alpha!==undefined)tmp[prefix].value[index]=_objectSpread(_objectSpread({},oldColor),{},{a:alpha});};var transparencyColor=function transparencyColor(prefix,index,color,alpha){if(readOnly||!palette[prefix])return;var tmp=_objectSpread({},palette);if(!alpha&&alpha!==0)alpha=1;tmp[prefix]=_objectSpread({},tmp[prefix]);tmp[prefix].value=_toConsumableArray(tmp[prefix].value);tmp[prefix].value[index]=_objectSpread({},tmp[prefix].value[index]);tmp[prefix].value[index].a=alpha;color.setAlpha(alpha);console.log(\"set transparency\",{color:color,tinycolor:tinycolor,oldcolor:tmp[prefix].value[index]});view.palette=palette=tmp;};var removeColor=function removeColor(prefix,index){if(readOnly||!palette[prefix])return;var tmp=_objectSpread({},palette);tmp[prefix].value=_toConsumableArray(tmp[prefix].value);tmp[prefix].value=tmp[prefix].value.filter(function(c,i){return i!==index;});view.palette=palette=tmp;};var cssIsGlobal=view.cssIsGlobal;var a;var dropDownButton={current:null};function addcss(color){var ret={};ret.background=color.toRgbString();// ret.opacity = color.getAlpha();\nreturn ret;}function invert(color){var transformGrays=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.2;transformGrays=transformGrays*128;var _color$toRgb=color.toRgb(),r=_color$toRgb.r,g=_color$toRgb.g,b=_color$toRgb.b,a=_color$toRgb.a;r=Math.abs(r-128)<=transformGrays?r>=128?0:255:255-r;g=Math.abs(g-128)<=transformGrays?g>=128?0:255:255-g;b=Math.abs(b-128)<=transformGrays?b>=128?0:255:255-b;if(a||a===0)a=255-a;return tinycolor({r:r,g:g,b:b,a:a}).toRgbString();}function style(c){return{backgroundColor:c.toRgbString(),color:invert(c)};}var palettes=U.paletteSplit(palette);function palettewrap(prefix,node){return/*#__PURE__*/_jsxs(\"div\",{className:\"palette-row-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger me-1\",onClick:function onClick(){return removeControl(prefix);},disabled:readOnly,children:/*#__PURE__*/_jsx(\"i\",{className:\"p-1 bi bi-trash3-fill\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"prefix\",placeholder:\"variable name\",value:prefix,onChange:function onChange(e){return changePrefix(prefix,e.target.value);},disabled:readOnly}),node]});}return/*#__PURE__*/_jsxs(\"section\",{className:'p-3',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",style:{position:'relative',zIndex:2},children:[Object.entries(palettes.color).map(function(entry,index,entries){var prefix=entry[0];var paletteobj=entry[1];var colors=paletteobj.value.map(function(v){return tinycolor(v);});var suggestions=[tinycolor('#ffaaaa')];// todo: compute according to current row \"colors\"\nreturn palettewrap(prefix,/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"palette-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"color-container\",children:colors.map(function(color,i){return/*#__PURE__*/_jsx(Color,{readonly:readOnly,data:view,field:'palette',canDelete:!readOnly,getter:function getter(){return colors[i].toHexString();},setter:function setter(newVal){setColor(prefix,i,newVal);},style:{background:'white'},inputStyle:{opacity:color.getAlpha()},childrenn:/*#__PURE__*/_jsxs(\"div\",{className:\"content suggestions\",style:{backgroundColor:\"inherit\"},onClick:function onClick(e){e.preventDefault();e.stopPropagation();},children:[function(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h6\",{title:\"Alter current color transparency\",children:\"Opacity\"}),/*#__PURE__*/_jsx(\"input\",{style:{width:\"auto\",marginLeft:\"1em\",marginRight:\"1em\"},type:\"range\",min:0,max:1,step:\"any\",value:color.getAlpha(),onChange:function onChange(e){transparencyColor(prefix,i,color,+e.target.value);}}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,color.analogous(7,30/1.5),i);},title:\"Add all the colors\",children:\"\\u2795Analogous\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roww\",children:color.analogous(7,30/1.5).map(function(c,ii){return ii===0?undefined:/*#__PURE__*/_jsx(\"button\",{style:style(c),onClick:function onClick(e){addColor(prefix,c,i);},className:\"btn color-suggestion\",children:\"+\"});})}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,[1/12,2/12,3/12,4/12,5/12,6/12].map(function(n){return color.clone().lighten(n*100);}),i,false);},title:\"Add all the colors\",children:\"\\u2795Lighten\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roww\",children:[1/12,2/12,3/12,4/12,5/12,6/12].map(function(n){return color.clone().lighten(n*100);}).map(function(c,ii){return/*#__PURE__*/_jsx(\"button\",{style:style(c),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,c,i);},children:\"+\"});})}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,[6/12,5/12,4/12,3/12,2/12,1/12].map(function(n){return color.clone().darken(n*100);}),i,false);},title:\"Add all the colors\",children:\"\\u2795Darken\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roww\",children:[6/12,5/12,4/12,3/12,2/12,1/12].map(function(n){return color.clone().darken(n*100);}).map(function(c,ii){return/*#__PURE__*/_jsx(\"button\",{style:style(c),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,c,i);},children:\"+\"});})}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,[color.complement(),tinycolor(invert(color))],i,false);},title:\"Add all the colors\",children:\"\\u2795Complementary / Opposite\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"roww\",children:[/*#__PURE__*/_jsx(\"button\",{style:style(color.complement()),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,color.complement(),i);},children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{style:style(color),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,tinycolor(invert(color)),i);},children:\"+\"})]}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,color.splitcomplement(),i);},title:\"Add all the colors\",children:\"\\u2795Split Complementary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roww\",children:color.splitcomplement().map(function(c){return/*#__PURE__*/_jsx(\"button\",{style:_objectSpread({},style(c)),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,c,i);},children:\"+\"});})}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,color.triad(),i);},title:\"Add all the colors\",children:\"\\u2795Triadic\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roww\",children:color.triad().map(function(c){return/*#__PURE__*/_jsx(\"button\",{style:_objectSpread({},style(c)),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,c,i);},children:\"+\"});})}),/*#__PURE__*/_jsx(\"h6\",{onClick:function onClick(){return addColor(prefix,color.tetrad(),i);},title:\"Add all the colors\",children:\"\\u2795Tetradic\"}),/*#__PURE__*/_jsx(\"div\",{className:\"roww\",children:color.tetrad().map(function(c){return/*#__PURE__*/_jsx(\"button\",{style:_objectSpread({},style(c)),className:\"btn color-suggestion\",onClick:function onClick(e){addColor(prefix,c,i);},children:\"+\"});})})]});}(),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-danger content delete-color mt-2',onClick:function onClick(){return removeColor(prefix,i);},disabled:readOnly,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi p-1 bi-trash3-fill\"})})]})},prefix+i);})}),/*#__PURE__*/_jsx(\"div\",{className:\"suggestion-container\",children:suggestions.map(function(c,i){return/*#__PURE__*/_jsx(\"label\",{className:\"p-1\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn color-suggestion\",style:style(c),onClick:function onClick(){addColor(prefix,c);},disabled:readOnly,children:\"+\"})});})})]})}));}),Object.entries(palettes.path).map(function(entry,index,entries){var prefix=entry[0];var path=entry[1];return palettewrap(prefix,/*#__PURE__*/_jsxs(\"div\",{className:\"palette-row path\",title:\"todo: proper tooltip.\\nedgeHeadSize is in the \\\"Options\\\" tab and determines the position of the head.\\nBasic math operators are allowed, but the minus and plus must have spaces around them or they will be traated as unary operators.\\nx and y are variables local to this path used to scale his shape.\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"value hoverable\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex w-100\",children:/*#__PURE__*/_jsx(\"input\",{className:\"value w-100 my-auto\",placeholder:\"svg path [d]\",defaultValue:path.value,onBlur:function onBlur(e){setText(e,prefix);},disabled:readOnly,onKeyDown:function onKeyDown(e){if(e.key===Keystrokes.enter)setText(e,prefix);if(e.key===Keystrokes.escape)e.target.value=path.value;}},path.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"content d-flex\",style:{backgroundColor:'whitesmoke'},children:[/*#__PURE__*/_jsx(\"input\",{className:\"spacer w-100\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"mx-auto\",children:[\"x:\\xA0\",/*#__PURE__*/_jsx(\"input\",{className:\"x\",placeholder:\"x\",defaultValue:path.x,disabled:readOnly,onChange:function onChange(e){return setGeneric(e,prefix,\"x\");}})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"mx-auto\",children:[\"y:\\xA0\",/*#__PURE__*/_jsx(\"input\",{className:\"y\",placeholder:\"y\",defaultValue:path.y,disabled:readOnly,onChange:function onChange(e){return setGeneric(e,prefix,\"y\");}})]})]})]}),/*#__PURE__*/_jsx(\"select\",{value:path.value,disabled:readOnly,onChange:function onChange(e){return setText(e,prefix);},children:[/*#__PURE__*/_jsx(\"option\",{style:{fontStyle:'italic',color:'gray'},value:\"\",children:\"Custom\"}),path.options.map(function(e){var k=e.k;var v=e.v;return/*#__PURE__*/_jsx(\"option\",{value:v,children:k});})]})]}));}),Object.entries(palettes.number).map(function(entry,index,entries){var prefix=entry[0];var number=entry[1];return palettewrap(prefix,/*#__PURE__*/_jsxs(\"div\",{className:\"palette-row numeric\",children:[makeNumericInput(prefix,number,setNumber,setText,readOnly),/*#__PURE__*/_jsxs(\"select\",{className:\"unit\",placeholder:\"unit\",value:number.unit,onChange:function onChange(e){setUnit(e,prefix);},disabled:readOnly,children:[/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Recommended units\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"px\",children:\"px - pixels\"}),/*#__PURE__*/_jsx(\"option\",{value:\"%\",children:\"% - Relative to parent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"em\",children:\"em - font height\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vw\",children:\"vw - viewport width\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vh\",children:\"vh - viewport height\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Unit-less\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Absolute units\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"px\",children:\"px - pixels\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cm\",children:\"cm - centimeters\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mm\",children:\"mm - millimiters\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pt\",children:\"pt - points\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pc\",children:\"pc - picas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in\",children:\"in - inches\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Relative (DOM) units\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"%\",children:\"% - Relative to parent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fr\",children:\"fr - grid fraction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vw\",children:\"vw - viewport width\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vh\",children:\"vh - viewport height\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vmin\",children:\"vmin - x% of viewport min axis\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vmax\",children:\"vmax - x% of viewport max axis\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Relative (font) units\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"em\",children:\"em - font height\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rem\",children:\"rem - <body> font height\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ex\",children:\"ex - height of the \\\"x\\\" char\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ch\",children:\"ch - width of the \\\"0\\\" char\"})]})]})]}));}),Object.entries(palettes.text).map(function(entry,index,entries){var prefix=entry[0];var string=entry[1];return palettewrap(prefix,/*#__PURE__*/_jsx(\"div\",{className:\"palette-row textual\",children:/*#__PURE__*/_jsx(\"input\",{className:\"value\",placeholder:\"value\",defaultValue:string.value,onBlur:function onBlur(e){setText(e,prefix);},disabled:readOnly,onKeyDown:function onKeyDown(e){if(e.key===Keystrokes.enter)setText(e,prefix);if(e.key===Keystrokes.escape)e.target.value=string.value;}})}));})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100\",style:{display:'grid',gridTemplateColumns:'repeat(10, 1fr)',position:'relative',zIndex:1},onMouseEnter:function onMouseEnter(e){var _dropDownButton$curre;(_dropDownButton$curre=dropDownButton.current)===null||_dropDownButton$curre===void 0?void 0:_dropDownButton$curre.open();},onMouseLeave:function onMouseLeave(e){var _dropDownButton$curre2;(_dropDownButton$curre2=dropDownButton.current)===null||_dropDownButton$curre2===void 0?void 0:_dropDownButton$curre2.close();},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",style:{flexBasis:0,flexGrow:9,gridArea:'1 / 1 / 1 / 1',zIndex:2,minWidth:'calc(1000% - var(--smart-editor-addon-width))'},onClick:function onClick(){return addControl('palette');},children:\"+ Palette\"}),/*#__PURE__*/_jsx(DropDownButton,{ref:dropDownButton,style:{flexBasis:0,flexGrow:1,minWidth:0,gridArea:'1 / 1 / 1 / 11',zIndex:1,transform:'scaleX(-1)'},children:/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){var _dropDownButton$curre3;return(_dropDownButton$curre3=dropDownButton.current)===null||_dropDownButton$curre3===void 0?void 0:_dropDownButton$curre3.close();},style:{transform:'scaleX(-1)'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-outline-success\",style:{height:'var(--smart-editor-height)'},onClick:function onClick(){return addControl('number');},children:\"+ Number\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-outline-success\",style:{height:'var(--smart-editor-height)'},onClick:function onClick(){return addControl('text');},children:\"+ Text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-outline-success\",style:{height:'var(--smart-editor-height)'},onClick:function onClick(){return addControl('path');},children:\"+ Path\"})]})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Input,{data:view,field:'cssIsGlobal',type:\"checkbox\",jsxLabel:/*#__PURE__*/_jsxs(\"span\",{style:{width:'80%',display:'inline-block'},children:[cssIsGlobal?/*#__PURE__*/_jsx(\"b\",{style:{color:'inherit',fontWeight:'bold'},children:\"Global\"}):/*#__PURE__*/_jsx(\"b\",{style:{color:'inherit'},children:\"Local\"}),' CSS & LESS Editor ',cssIsGlobal?/*#__PURE__*/_jsx(\"b\",{style:{color:'red',fontSize:'0.7em',fontWeight:'bold'},children:\"Use with caution\"}):'']})}),/*#__PURE__*/_jsx(\"div\",{className:\"monaco-editor-wrapper\",style:{minHeight:'20ùpx',height:'200px'/*there is a bug of height 100% on childrens not working if parent have only minHeight*/,resize:'vertical',overflow:'hidden'},onBlur:blur,children:/*#__PURE__*/_jsx(Editor,{className:'mx-1',options:{fontSize:12,scrollbar:{vertical:'hidden',horizontalScrollbarSize:5},minimap:{enabled:false},readOnly:readOnly},defaultLanguage:'less',value:view.css,onChange:change})}),/*#__PURE__*/_jsx(\"div\",{className:\"debug\",children:/*#__PURE__*/_jsx(\"div\",{style:{whiteSpace:'pre'},children:view.compiled_css})})]});}function mapStateToProps(state,ownProps){var view=LViewElement.fromPointer(ownProps.viewID);return{view:view};}function mapDispatchToProps(dispatch){var ret={};return ret;}export var PaletteDataConnected=connect(mapStateToProps,mapDispatchToProps)(PaletteDataComponent);export var PaletteData=function PaletteData(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(PaletteDataConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export default PaletteData;","map":{"version":3,"names":["React","connect","useStateIfMounted","tinycolor","Editor","DropDownButton","EdgeHead","Input","Keystrokes","Log","LViewElement","U","Color","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","makeNumericInput","prefix","number","setNumber","setText","readOnly","type","min","max","step","undefined","unit","className","placeholder","defaultValue","value","onBlur","e","disabled","onKeyDown","key","enter","escape","target","roundedValue0","Math","round","roundedValue","children","onMouseUp","PaletteDataComponent","props","view","readonly","palette","_objectSpread","tmp","_useStateIfMounted","css","_useStateIfMounted2","_slicedToArray","setCss","change","blur","addControl","_headdict","i","prefix0","exDevv","Object","values","filter","o","length","Array","isArray","agglabel","extendlabel","extend","asslabel","reference","headdict","_defineProperty","predefinedPaths","entries","map","k","v","x","y","options","setGeneric","val","setUnit","changePrefix","oldPrefix","newPrefix","replaceAll","removeControl","addColor","colors","index","arguments","skipFirst","lastAdded","color","rgba","toRgb","console","log","_toConsumableArray","splice","push","setColor","hex","alpha","oldColor","setAlpha","a","transparencyColor","oldcolor","removeColor","c","cssIsGlobal","dropDownButton","current","addcss","ret","background","toRgbString","invert","transformGrays","_color$toRgb","r","g","b","abs","style","backgroundColor","palettes","paletteSplit","palettewrap","node","onClick","onChange","position","zIndex","entry","paletteobj","suggestions","data","field","canDelete","getter","toHexString","setter","newVal","inputStyle","opacity","getAlpha","childrenn","preventDefault","stopPropagation","title","width","marginLeft","marginRight","analogous","ii","n","clone","lighten","darken","complement","splitcomplement","triad","tetrad","path","fontStyle","label","text","string","display","gridTemplateColumns","onMouseEnter","_dropDownButton$curre","open","onMouseLeave","_dropDownButton$curre2","close","flexBasis","flexGrow","gridArea","minWidth","ref","transform","_dropDownButton$curre3","height","jsxLabel","fontWeight","fontSize","minHeight","resize","overflow","scrollbar","vertical","horizontalScrollbarSize","minimap","enabled","defaultLanguage","whiteSpace","compiled_css","mapStateToProps","state","ownProps","fromPointer","viewID","mapDispatchToProps","dispatch","PaletteDataConnected","PaletteData"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/viewsEditor/data/PaletteData.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode, Ref, RefObject, SyntheticEvent} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {useStateIfMounted} from \"use-state-if-mounted\";\r\nimport tinycolor, {Instance} from \"tinycolor2\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport DropDownButton from \"smart-webcomponents-react/dropdownbutton\";\r\nimport 'smart-webcomponents-react/source/styles/smart.default.css';\r\nimport type {\r\n    PaletteControl,\r\n    NumberControl,\r\n    StringControl,\r\n    PaletteType,\r\n    CSSUnit,\r\n    PathControl\r\n} from '../../../../view/viewElement/view';\r\nimport {\r\n    Dictionary,\r\n    DState,\r\n    DViewElement, EdgeHead, GObject,\r\n    Input,\r\n    KeyDownEvent,\r\n    Keystrokes,\r\n    Log,\r\n    LViewElement,\r\n    Pointer,\r\n    U\r\n} from '../../../../joiner';\r\nimport {Function} from \"../../../forEndUser/FunctionComponent\";\r\nimport { Color } from '../../../forEndUser/Color';\r\n\r\n\r\nfunction makeNumericInput(prefix: string, number: NumberControl,\r\n                          setNumber: (e: React.FocusEvent<HTMLInputElement>, prefix: string) => void,\r\n                          setText: (e: React.FocusEvent<HTMLInputElement>, prefix: string) => void, readOnly: boolean) {\r\n    let type: string;\r\n    let min: number | undefined;\r\n    let max: number | undefined;\r\n    let step: number | undefined = undefined;\r\n    switch (number.unit) {\r\n        case '': return <input className={\"value\"} placeholder={\"value\"} type={\"text\"}\r\n                               defaultValue={number.value} onBlur={e => setText(e as any, prefix)} disabled={readOnly}\r\n                               onKeyDown={e => {\r\n                                   if (e.key === Keystrokes.enter) setText(e as any, prefix);\r\n                                   if (e.key === Keystrokes.escape) (e.target as HTMLInputElement).value = '' + number.value; }} />\r\n        case 'px': min = 0; max = 300; break;\r\n        case 'pt': break; // 1pt = 1.33 px; 1px = 0.75pt\r\n        case 'cm':\r\n        case 'mm': min = 0; max = 200; break; // 1mm = 3.7px\r\n        case 'ch':\r\n        case 'ex':\r\n        case 'em':\r\n        case 'rem':\r\n        case 'in': // 1in = 96px\r\n        case 'pc': // 2px = 0.125 picas; 18.75pc = 300px\r\n        case 'fr': min=0; max=20; step = 0.5; break;\r\n\r\n        default: type = \"number\"; break;\r\n        case \"%\": case \"vh\": case \"vw\": case \"vmax\": case \"vmin\":\r\n            type = \"range\";\r\n            min = 0;\r\n            max = 100;\r\n            break;\r\n    }\r\n    let roundedValue0 = Math.round(((number.value || 0) - (typeof step === \"number\" ? number.value % step : number.value % 0.1))*10000)/10000; // % works on decimals right.\r\n    let roundedValue = typeof step === \"number\" ? Math.round(((number.value || 0)  * (1/step))) * step : Math.round(number.value*100)/100; // % works on decimals right.\r\n    return <>\r\n        <input className={\"value\"} placeholder={\"value\"} type={\"range\"} disabled={readOnly}\r\n            key={\"s\"+number.value} defaultValue={number.value}\r\n            min={min}\r\n            max={max}\r\n            step={\"any\"}\r\n            onBlur={e => {setNumber(e as any, prefix)}}\r\n            onMouseUp={e => { setNumber(e as any, prefix); }} />\r\n        <input className={\"spinner\"} placeholder={\"value\"} type={\"number\"} disabled={readOnly}\r\n            key={roundedValue} defaultValue={roundedValue} data-dv={roundedValue} data-dv2={number.value}\r\n            step={step}\r\n            onBlur={e => {setNumber(e as any, prefix)}}\r\n            onKeyDown={e => {\r\n               if (e.key === Keystrokes.enter) setNumber(e as any, prefix);\r\n               if (e.key === Keystrokes.escape) (e.target as HTMLInputElement).value = '' + number.value; }} />\r\n    </>\r\n}\r\n\r\n// delete button <button className=\"btn btn-danger ms-1\"><i className=\"p-1 bi bi-trash3-fill\"/></button>\r\nfunction PaletteDataComponent(props: AllProps) {\r\n    const view = props.view;\r\n    const readOnly = props.readonly;\r\n    let palette: Readonly<PaletteType> = {...view.palette};\r\n    let tmp: PaletteType = undefined as any;\r\n    const [css, setCss] = useStateIfMounted(view.css);\r\n\r\n    const change = (value: string|undefined) => { if(value !== undefined) setCss(value); } // save in local state for frequent changes.\r\n    const blur = () => view.css = css; // confirm in redux state for final state\r\n\r\n    const addControl = (type: 'palette' | 'number' | 'text' | 'path') => {\r\n        if (readOnly) return;\r\n        let i: number;\r\n        let prefix0: string;//= 'palette_' + i + '-';\r\n        switch (type){\r\n            default: Log.exDevv(\"unexpected case in addControl:\" + type); return;\r\n            case 'path':\r\n                i = Object.values(palette).filter( o => (o as PathControl).type === \"path\").length + 1;\r\n                prefix0 = 'path_';\r\n                break;\r\n            case 'text':\r\n                i = Object.values(palette).filter( o => (o as StringControl).type === \"text\").length + 1;\r\n                prefix0 = 'text_';\r\n                break;\r\n            case 'number':\r\n                i = Object.values(palette).filter( o => (o as NumberControl).type === \"number\").length + 1;\r\n                prefix0 = 'numeric_';\r\n                break;\r\n            case 'palette':\r\n                i = Object.values(palette).filter( o => Array.isArray(o as any)).length + 1;\r\n                prefix0 = 'palette_';\r\n                break;\r\n        }\r\n        let prefix: string;\r\n        while (true){\r\n            prefix = prefix0 + i++;\r\n            if (prefix in palette) continue;\r\n            break;\r\n        }\r\n        switch (type){\r\n            default: Log.exDevv(\"unexpected case in addControl:\" + type); return;\r\n            case 'path':\r\n                const agglabel = \"◇ Aggregation / Composition\";\r\n                const extendlabel = \"△ \"+EdgeHead.extend;\r\n                const asslabel = \"Λ \"+EdgeHead.reference;\r\n                let headdict: Dictionary<string, string> = {\r\n                    [asslabel]: 'M 0 0   L x y/2   L 0 y',\r\n                    [extendlabel]: 'M 0 0   L x y/2   L 0 y   Z',\r\n                    [agglabel]: 'M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z',\r\n                };\r\n                let predefinedPaths: {k:string, v:string}[] = Object.entries(headdict).map((e)=>({k:e[0], v:e[1]}));\r\n\r\n                tmp = {...palette};\r\n                tmp[prefix] = {type: 'path', value: '', x:'edgeHeadSize.x', y:'edgeHeadSize.y', options: predefinedPaths};\r\n                break;\r\n            case 'text':\r\n                tmp = {...palette};\r\n                tmp[prefix] = {type: 'text', value: ''};\r\n                break;\r\n            case 'number':\r\n                tmp = {...palette};\r\n                tmp[prefix] = {type: 'number', value: 0, unit: 'px'};\r\n                break;\r\n            case 'palette':\r\n                tmp = {...palette};\r\n                tmp[prefix] = {type:'color', value:[]};\r\n                break;\r\n        }\r\n        view.palette = palette = tmp;\r\n    }\r\n    const setGeneric = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>, prefix: string, key: string) => {\r\n        const val: string = e.target.value;\r\n        if (readOnly || (palette[prefix] as any)[key] === val) return;\r\n        let tmp: Dictionary<string, StringControl> = {...palette} as any;\r\n        (tmp[prefix] as any)[key] = val;\r\n        view.palette = palette = tmp; }\r\n    const setText = (e: React.FocusEvent<HTMLInputElement | HTMLSelectElement>, prefix: string) => {\r\n        const val: string = e.target.value;\r\n        if (readOnly || (palette[prefix] as StringControl).value === val) return;\r\n        let tmp: Dictionary<string, StringControl> = {...palette} as any;\r\n        tmp[prefix].value = val;\r\n        view.palette = palette = tmp; }\r\n    const setNumber = (e: React.FocusEvent<HTMLInputElement>, prefix: string) => {\r\n        const val: number = +e.target.value || 0;\r\n        if (readOnly || (palette[prefix] as NumberControl).value === val) return;\r\n        let tmp: Dictionary<string, NumberControl> = {...palette} as any;\r\n        tmp[prefix].value = val;\r\n        view.palette = palette = tmp; }\r\n    const setUnit = (e: React.FocusEvent<HTMLInputElement>, prefix: string) => {\r\n        const val: string = e.target.value === undefined ? 'px' : e.target.value;\r\n        if (readOnly || val === (palette[prefix] as NumberControl).unit) return;\r\n        let tmp: Dictionary<string, NumberControl> = {...palette} as any;\r\n        tmp[prefix].unit = val as CSSUnit;\r\n        view.palette = palette = tmp; }\r\n    const changePrefix = (oldPrefix: string, newPrefix: string) => {\r\n        newPrefix = newPrefix.replaceAll(/[^\\w\\-]/g,'-'); // /^[^a-zA-Z0-9_\\-]*$/, '-');\r\n        if (readOnly || palette[newPrefix]) return; // refuse to overwrite existing palette name (2 different palettes with same name)\r\n        tmp = {...palette};\r\n        tmp[newPrefix] = palette[oldPrefix];\r\n        delete tmp[oldPrefix];\r\n        view.palette = palette = tmp;\r\n    }\r\n    const removeControl = (prefix: string) => {\r\n        if (readOnly || !palette[prefix]) return;\r\n        tmp = {...palette};\r\n        delete tmp[prefix];\r\n        view.palette = palette = tmp;\r\n    }\r\n\r\n    const addColor = (prefix: string, colors: Instance[] | Instance, index: number = -1, skipFirst: boolean = true) => {\r\n        if (readOnly) return;\r\n        if (!Array.isArray(colors)) {\r\n            colors = [colors as Instance];\r\n            skipFirst = false;\r\n        }\r\n        let tmp: Dictionary<string, PaletteControl> = {...palette} as GObject;\r\n        let lastAdded: tinycolor.ColorFormats.RGBA = undefined as any;\r\n        for (let i = colors.length-1; i >= (skipFirst ? 1 : 0); i--) {\r\n            let color: Instance = colors[i];\r\n            let rgba = color.toRgb();\r\n            console.log(\"addingColor:\", {rgba, lastAdded, color});\r\n            if (rgba === lastAdded) continue;\r\n            lastAdded = rgba;\r\n            if (!tmp[prefix]) tmp[prefix] = {type:'color', value:[]};\r\n            else tmp[prefix] = {...tmp[prefix]};\r\n            tmp[prefix].value = [...tmp[prefix].value];\r\n            if (index >= 0) tmp[prefix].value.splice(index + 1, 0, rgba);\r\n            else tmp[prefix].value.push(rgba);\r\n        }\r\n        view.palette = palette = tmp;\r\n    }\r\n\r\n    const setColor = (prefix: string, index: number, hex?: string, alpha?: number) => {\r\n        let tmp: Dictionary<string, PaletteControl> = {...palette} as any;\r\n        if (readOnly || !tmp[prefix]) tmp[prefix] = {type:'color', value:[]};\r\n        else tmp[prefix] = {...tmp[prefix]};\r\n        let oldColor = tmp[prefix].value[index];\r\n        if (hex) {\r\n            let color = tinycolor(hex);\r\n            if (alpha !== undefined) color.setAlpha(alpha);\r\n            let rgba = color.toRgb();\r\n            if (oldColor && oldColor.a !== undefined) rgba.a = oldColor.a;\r\n            tmp[prefix].value[index] = oldColor = rgba;\r\n            view.palette = palette = tmp;\r\n        }\r\n        if (alpha !== undefined) tmp[prefix].value[index] = {...oldColor, a:alpha};\r\n    }\r\n    const transparencyColor = (prefix: string, index: number, color: tinycolor.Instance, alpha: number) => {\r\n        if (readOnly || !palette[prefix]) return;\r\n        let tmp: Dictionary<string, PaletteControl> = {...palette} as any;\r\n        if (!alpha && alpha !== 0) alpha = 1;\r\n        tmp[prefix] = {...tmp[prefix]};\r\n        tmp[prefix].value = [...tmp[prefix].value];\r\n        tmp[prefix].value[index] = {...tmp[prefix].value[index]};\r\n        tmp[prefix].value[index].a = alpha;\r\n        color.setAlpha(alpha);\r\n        console.log(\"set transparency\", {color, tinycolor, oldcolor: tmp[prefix].value[index]});\r\n        view.palette = palette = tmp;\r\n    }\r\n    const removeColor = (prefix: string, index: number) => {\r\n        if (readOnly || !palette[prefix]) return;\r\n        let tmp: Dictionary<string, PaletteControl> = {...palette} as any;\r\n        tmp[prefix].value = [...tmp[prefix].value];\r\n        tmp[prefix].value = tmp[prefix].value.filter((c, i) => i !== index);\r\n        view.palette = palette = tmp;\r\n    }\r\n\r\n    const cssIsGlobal = view.cssIsGlobal;\r\n    let a: DropDownButton;\r\n    let dropDownButton: RefObject<DropDownButton> = {current: null};\r\n    function addcss(color: Instance): GObject {\r\n        let ret: GObject = {};\r\n        ret.background = color.toRgbString();\r\n        // ret.opacity = color.getAlpha();\r\n        return ret;\r\n    }\r\n    function invert(color: Instance, transformGrays: number = 0.2): string {\r\n        transformGrays = transformGrays * 128;\r\n        let {r, g, b, a} = color.toRgb();\r\n        r = Math.abs(r-128) <= transformGrays ? (r >= 128 ? 0 : 255) : 255 - r;\r\n        g = Math.abs(g-128) <= transformGrays ? (g >= 128 ? 0 : 255) : 255 - g;\r\n        b = Math.abs(b-128) <= transformGrays ? (b >= 128 ? 0 : 255) : 255 - b;\r\n        if (a || a === 0) a = 255 - a;\r\n        return (tinycolor({r, g, b, a})).toRgbString();\r\n    }\r\n    function style(c: Instance): GObject{\r\n        return {backgroundColor: c.toRgbString(), color:invert(c)};\r\n    }\r\n\r\n    let palettes = U.paletteSplit(palette);\r\n    function palettewrap(prefix: string, node: ReactNode): ReactNode{\r\n        return (\r\n            <div className=\"palette-row-container\">\r\n                <button className=\"btn btn-danger me-1\" onClick={()=>removeControl(prefix)} disabled={readOnly}><i className=\"p-1 bi bi-trash3-fill\"/></button>\r\n                <input className={\"prefix\"} placeholder={\"variable name\"} value={prefix} onChange={(e)=> changePrefix(prefix, e.target.value)} disabled={readOnly} />\r\n                {node}\r\n            </div>)\r\n    }\r\n\r\n    return(<section className={'p-3'}>\r\n        <div className={\"controls\"} style={{position:'relative', zIndex:2}}>\r\n            {Object.entries(palettes.color).map((entry, index, entries)=>{\r\n                let prefix = entry[0];\r\n                let paletteobj: PaletteControl = entry[1] as PaletteControl;\r\n                let colors: Instance[] = paletteobj.value.map(v=> tinycolor(v));\r\n                let suggestions = [tinycolor('#ffaaaa')]; // todo: compute according to current row \"colors\"\r\n                return palettewrap(prefix, <>\r\n                    <div className=\"palette-row\">\r\n                        <div className=\"color-container\">{\r\n                            colors.map((color, i) => <Color key={prefix+i} readonly={readOnly}\r\n                                                            data={view} field={'palette'} canDelete={!readOnly}\r\n                                                            getter={()=>colors[i].toHexString()} setter={(newVal) => { setColor(prefix, i, newVal) }}\r\n                                                            style ={{background: 'white'}}\r\n                                                            inputStyle ={{opacity: color.getAlpha()}}\r\n                                                            childrenn={\r\n                                                                <div className={\"content suggestions\"} style={{backgroundColor: \"inherit\"}} onClick={(e) => {e.preventDefault(); e.stopPropagation();}}>\r\n                                                                    {(()=>{ return <>\r\n                                                                        <h6 title={\"Alter current color transparency\"}>Opacity</h6>\r\n                                                                        <input style={{width: \"auto\", marginLeft:\"1em\", marginRight:\"1em\"}} type={\"range\"} min={0} max={1} step={\"any\"} value={color.getAlpha()} onChange={(e)=>{ transparencyColor(prefix, i, color, +e.target.value) }} />\r\n                                                                        <h6 onClick={()=>addColor(prefix, color.analogous(7, 30/1.5), i)} title={\"Add all the colors\"}>➕Analogous</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            {color.analogous(7, 30/1.5).map((c,ii) => ii===0?undefined:\r\n                                                                                <button style={style(c)} onClick={(e)=>{addColor(prefix, c, i)}} className=\"btn color-suggestion\">+</button>\r\n                                                                            )}\r\n                                                                        </div>{/*\r\n                                    <h6 onClick={()=>addColor(prefix, color.monochromatic(7), i)} title={\"Add all the colors\"}>➕Monochromatic</h6>\r\n                                    <div className={\"roww\"}>\r\n                                        {color.monochromatic(7).map((c,ii) => ii===0?undefined: <button style={style(c)}\r\n                                                                                                        onClick={(e)=>{addColor(prefix, c, i)}} className=\"btn color-suggestion\">+</button>)}\r\n                                    </div>{/*[6/12, 5/12, 4/12, 3/12, 2/12, 1/12]*/}\r\n                                                                        <h6 onClick={()=>addColor(prefix, [1/12, 2/12, 3/12, 4/12, 5/12, 6/12].map(n=>color.clone().lighten(n*100)), i, false)} title={\"Add all the colors\"}>➕Lighten</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            {[1/12, 2/12, 3/12, 4/12, 5/12, 6/12].map(n=>color.clone().lighten(n*100))\r\n                                                                                .map((c,ii) => <button style={style(c)} className=\"btn color-suggestion\"\r\n                                                                                                       onClick={(e)=>{addColor(prefix, c, i)}}>+</button>)}\r\n                                                                        </div>\r\n                                                                        <h6 onClick={()=>addColor(prefix, [6/12, 5/12, 4/12, 3/12, 2/12, 1/12].map(n=>color.clone().darken(n*100)), i, false)} title={\"Add all the colors\"}>➕Darken</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            {[6/12, 5/12, 4/12, 3/12, 2/12, 1/12].map(n=>color.clone().darken(n*100))\r\n                                                                                .map((c,ii) => <button style={style(c)} className=\"btn color-suggestion\"\r\n                                                                                                       onClick={(e)=>{addColor(prefix, c, i)}}>+</button>)}\r\n                                                                        </div>\r\n                                                                        <h6 onClick={()=>addColor(prefix, [color.complement(), tinycolor(invert(color))], i, false)} title={\"Add all the colors\"}>➕Complementary / Opposite</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            <button style={style(color.complement())} className=\"btn color-suggestion\"\r\n                                                                                    onClick={(e)=>{addColor(prefix, color.complement(), i)}}>+</button>\r\n                                                                            <button style={style(color)} className=\"btn color-suggestion\"\r\n                                                                                    onClick={(e)=>{addColor(prefix, tinycolor(invert(color)), i)}}>+</button>\r\n                                                                        </div>\r\n                                                                        <h6 onClick={()=>addColor(prefix, color.splitcomplement(), i)} title={\"Add all the colors\"}>➕Split Complementary</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            {color.splitcomplement().map((c) => <button style={{...style(c)}} className=\"btn color-suggestion\"\r\n                                                                                                                        onClick={(e)=>{addColor(prefix, c, i)}}>+</button>)}\r\n                                                                        </div>\r\n                                                                        <h6 onClick={()=>addColor(prefix, color.triad(), i)} title={\"Add all the colors\"}>➕Triadic</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            {color.triad().map ( (c) => <button style={{...style(c)}} className=\"btn color-suggestion\"\r\n                                                                                                                onClick={(e)=>{addColor(prefix, c, i)}}>+</button>)}\r\n                                                                        </div>\r\n                                                                        <h6 onClick={()=>addColor(prefix, color.tetrad(), i)} title={\"Add all the colors\"}>➕Tetradic</h6>\r\n                                                                        <div className={\"roww\"}>\r\n                                                                            {color.tetrad().map ( (c) => <button style={{...style(c)}} className=\"btn color-suggestion\"\r\n                                                                                                                 onClick={(e)=>{addColor(prefix, c, i)}}>+</button>)}\r\n                                                                        </div>\r\n                                                                    </>})()}\r\n                                                                    <button className={'btn btn-danger content delete-color mt-2'} onClick={()=>removeColor(prefix, i)} disabled={readOnly}>\r\n                                                                        <i className=\"bi p-1 bi-trash3-fill\"/>\r\n                                                                    </button>\r\n                                                                </div>\r\n                                                            }\r\n                            />)\r\n                        }\r\n                        </div>\r\n                        <div className=\"suggestion-container\">{\r\n                            suggestions.map((c, i) => <label className=\"p-1\">\r\n                                <button className=\"btn color-suggestion\" style={style(c)} onClick={()=>{addColor(prefix, c)}} disabled={readOnly}>+</button>\r\n                            </label>)\r\n                        }</div>\r\n                    </div>\r\n                </>); })\r\n            }\r\n            {Object.entries(palettes.path).map((entry, index, entries)=>{\r\n                    let prefix = entry[0];\r\n                    let path: PathControl = entry[1] as any;\r\n                    return palettewrap(prefix,\r\n                        <div className=\"palette-row path\" title={\"todo: proper tooltip.\\nedgeHeadSize is in the \\\"Options\\\" tab and determines the position of the head.\\nBasic math operators are allowed, but the minus and plus must have spaces around them or they will be traated as unary operators.\\nx and y are variables local to this path used to scale his shape.\"}>\r\n                            <div className={\"value hoverable\"}>\r\n                                <div className={\"d-flex w-100\"}>\r\n                                    <input className={\"value w-100 my-auto\"} placeholder={\"svg path [d]\"} defaultValue={path.value} key={path.value} onBlur={e => {setText(e as any, prefix)}} disabled={readOnly}\r\n                                           onKeyDown={e => {\r\n                                               if (e.key === Keystrokes.enter) setText(e as any, prefix);\r\n                                               if (e.key === Keystrokes.escape) (e.target as HTMLInputElement).value = path.value; }} />\r\n                                </div>\r\n                                <div className={\"content d-flex\"} style={{backgroundColor: 'whitesmoke'}}>\r\n                                    <input className={\"spacer w-100\"}/>\r\n                                    <label className={\"mx-auto\"}>x:&nbsp;<input className=\"x\" placeholder={\"x\"} defaultValue={path.x} disabled={readOnly} onChange={(e)=>setGeneric(e, prefix, \"x\")}/></label>\r\n                                    <label className={\"mx-auto\"}>y:&nbsp;<input className=\"y\" placeholder={\"y\"} defaultValue={path.y} disabled={readOnly} onChange={(e)=>setGeneric(e, prefix, \"y\")}/></label>\r\n                                </div>\r\n                            </div>\r\n                            <select value={path.value} disabled={readOnly} onChange={(e)=>setText(e as any, prefix)}>\r\n                                {[<option style={{fontStyle:'italic', color:'gray'}} value={\"\"}>Custom</option>, path.options.map((e)=>{\r\n                                let k = e.k;\r\n                                let v = e.v;\r\n                                return <option value={v}>{k}</option>\r\n                            })]}</select>\r\n                        </div>)\r\n                }\r\n            )}\r\n            {Object.entries(palettes.number).map((entry, index, entries)=>{\r\n                    let prefix = entry[0];\r\n                    let number: NumberControl = entry[1] as any;\r\n                    return palettewrap(prefix,\r\n                        <div className=\"palette-row numeric\">\r\n                            {makeNumericInput(prefix, number, setNumber, setText, readOnly)}\r\n                            <select className={\"unit\"} placeholder={\"unit\"} value={number.unit} onChange={e => {setUnit(e as any, prefix)}} disabled={readOnly}>\r\n                                <optgroup label={\"Recommended units\"}>\r\n                                    <option value={\"px\"}>px - pixels</option>\r\n                                    <option value={\"%\"}>% - Relative to parent</option>\r\n                                    <option value={\"em\"}>em - font height</option>\r\n                                    <option value={\"vw\"}>vw - viewport width</option>\r\n                                    <option value={\"vh\"}>vh - viewport height</option>\r\n                                    <option value={\"\"}>Unit-less</option>\r\n                                </optgroup>\r\n                                <optgroup label={\"Absolute units\"}>\r\n                                    <option value={\"px\"}>px - pixels</option>\r\n                                    <option value={\"cm\"}>cm - centimeters</option>\r\n                                    <option value={\"mm\"}>mm - millimiters</option>\r\n                                    <option value={\"pt\"}>pt - points</option>\r\n                                    <option value={\"pc\"}>pc - picas</option>\r\n                                    <option value={\"in\"}>in - inches</option>\r\n                                </optgroup>\r\n                                <optgroup label={\"Relative (DOM) units\"}>\r\n                                    <option value={\"%\"}>% - Relative to parent</option>\r\n                                    <option value={\"fr\"}>fr - grid fraction</option>\r\n                                    <option value={\"vw\"}>vw - viewport width</option>\r\n                                    <option value={\"vh\"}>vh - viewport height</option>\r\n                                    <option value={\"vmin\"}>vmin - x% of viewport min axis</option>\r\n                                    <option value={\"vmax\"}>vmax - x% of viewport max axis</option>\r\n                                </optgroup>\r\n                                <optgroup label={\"Relative (font) units\"}>\r\n                                    <option value={\"em\"}>em - font height</option>\r\n                                    <option value={\"rem\"}>rem - &lt;body&gt; font height</option>\r\n                                    <option value={\"ex\"}>ex - height of the \"x\" char</option>\r\n                                    <option value={\"ch\"}>ch - width of the \"0\" char</option>\r\n                                </optgroup>\r\n                            </select>\r\n                        </div>)\r\n                }\r\n            )}\r\n            {Object.entries(palettes.text).map((entry, index, entries)=>{\r\n                    let prefix = entry[0];\r\n                    let string: StringControl = entry[1] as any;\r\n                    return palettewrap(prefix,\r\n                        <div className={\"palette-row textual\"}>\r\n                            <input className={\"value\"} placeholder={\"value\"} defaultValue={string.value} onBlur={e => {setText(e as any, prefix)}} disabled={readOnly}\r\n                                   onKeyDown={e => {\r\n                                       if (e.key === Keystrokes.enter) setText(e as any, prefix);\r\n                                       if (e.key === Keystrokes.escape) (e.target as HTMLInputElement).value = string.value; }} />\r\n                        </div>)\r\n                }\r\n            )}\r\n        </div>\r\n\r\n        <div className={\"w-100\"} style={{display: 'grid', gridTemplateColumns: 'repeat(10, 1fr)', position: 'relative', zIndex:1}}\r\n             onMouseEnter={(e)=>{ dropDownButton.current?.open()}}\r\n             onMouseLeave={(e)=>{ dropDownButton.current?.close()}}\r\n        >\r\n            <button className=\"btn btn-success\" style={{flexBasis:0, flexGrow:9, gridArea: '1 / 1 / 1 / 1', zIndex: 2, minWidth: 'calc(1000% - var(--smart-editor-addon-width))'}} onClick={()=>addControl('palette')}>+ Palette</button>\r\n            <DropDownButton ref={dropDownButton} style={{flexBasis:0, flexGrow:1, minWidth:0, gridArea: '1 / 1 / 1 / 11', zIndex:1, transform: 'scaleX(-1)'}}>\r\n                <div onClick={(e)=> dropDownButton.current?.close()} style={{transform: 'scaleX(-1)'}}>\r\n                    <button className={\"w-100 btn btn-outline-success\"} style={{height: 'var(--smart-editor-height)'}}\r\n                            onClick={()=>addControl('number')}>+ Number</button>\r\n                    <button className={\"w-100 btn btn-outline-success\"} style={{height: 'var(--smart-editor-height)'}}\r\n                            onClick={()=>addControl('text')}>+ Text</button>\r\n                    <button className={\"w-100 btn btn-outline-success\"} style={{height: 'var(--smart-editor-height)'}}\r\n                            onClick={()=>addControl('path')}>+ Path</button>\r\n                </div>\r\n            </DropDownButton>\r\n        </div>\r\n\r\n        <hr/>\r\n        <Input data={view} field={'cssIsGlobal'} type={\"checkbox\"} jsxLabel={\r\n            <span style={{width:'80%', display:'inline-block'}}>\r\n                {cssIsGlobal ? <b style={{color: 'inherit', fontWeight:'bold'}}>Global</b> : <b style={{color: 'inherit'}}>Local</b>}\r\n                {' CSS & LESS Editor '}\r\n                {cssIsGlobal ? <b style={{color: 'red', fontSize:'0.7em', fontWeight:'bold'}}>Use with caution</b> : ''}\r\n            </span>\r\n        } />\r\n        {/*<label className={'ms-1 mb-1'}>{view.cssIsGlobal ? 'Global' : 'Local'} CSS Editor</label>*/}\r\n        <div className={\"monaco-editor-wrapper\"} style={{\r\n            minHeight: '20ùpx', height:'200px'/*there is a bug of height 100% on childrens not working if parent have only minHeight*/,\r\n            resize: 'vertical', overflow:'hidden'}} onBlur={blur}>\r\n            <Editor className={'mx-1'}\r\n                    options={{fontSize: 12, scrollbar: {vertical: 'hidden', horizontalScrollbarSize: 5}, minimap: {enabled: false}, readOnly: readOnly}}\r\n                    defaultLanguage={'less'} value={view.css} onChange={change}/>\r\n        </div>\r\n        <div className={\"debug\"}><div style={{whiteSpace:'pre'}}>{view.compiled_css}</div></div>\r\n        {/*<textarea>\r\n            '[data-viewid=\"'+view.id+'\"]{\\n' +\r\n            Object.entries(palette).flatMap((entry, index, entries)=>{\r\n                let prefix = entry[0];\r\n                let colors = entry[1];\r\n                return colors.map((color, i)=> \"\\t--\" + prefix + i + \": \" + color + \";\\n\");\r\n            }).join('')+'\\n' + (cssISGlobal ? '}\\n' : '\\n') +\r\n            '/ *** custom css area *** /\\n' + view.css + (!cssISGlobal ? '}\\n' : '\\n')\r\n            view.css\r\n        </textarea>*/}\r\n        {\r\n            // todo: if row have only 1 color can be accessed both as palette prefix-1 or as palett prefix without number, so i can name colors.\r\n        }\r\n\r\n    </section>);\r\n}\r\n\r\ninterface OwnProps {viewID: Pointer<DViewElement, 1, 1, LViewElement>, readonly: boolean}\r\ninterface StateProps {view: LViewElement}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const view = LViewElement.fromPointer(ownProps.viewID);\r\n    return {view};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const PaletteDataConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(PaletteDataComponent);\r\n\r\nexport const PaletteData = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <PaletteDataConnected {...{...props, children}} />;\r\n}\r\nexport default PaletteData;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}