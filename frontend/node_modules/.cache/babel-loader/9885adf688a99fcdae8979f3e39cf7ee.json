{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\view\\\\viewElement\\\\view.tsx\",\n  _dec,\n  _class,\n  _class2,\n  _dec2,\n  _class3,\n  _class4,\n  _dec3,\n  _class5,\n  _class6,\n  _dec4,\n  _class7,\n  _class8;\nimport { BEGIN, Constructors, CoordinateMode, Debug, Defaults, DPointerTargetable, DViewPoint, EdgeBendingMode, EdgeGapMode, EGraphElements, EModelElements, END, GraphPoint, GraphSize, Log, LPointerTargetable, LUser, LViewPoint, MyProxyHandler, Pointers, RuntimeAccessible, RuntimeAccessibleClass, SetFieldAction, SetRootFieldAction, ShortAttribETypes, store, TRANSACTION, U, windoww } from \"../../joiner\";\nimport { DUser, transientProperties } from \"../../joiner/classes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CSS_Units = {\n  'Local-font relative': {\n    'cap': 'cap - (Cap height) the nominal height of capital letters of the element\\'s font.',\n    'ch': 'ch - Average character advance of a narrow glyph in the element\\'s font, as represented by the \"0\" (ZERO, U+0030) glyph.',\n    'em': 'em - Font size of the element\\'s font.',\n    'ex': 'ex - x-height of the element\\'s font.',\n    'ic': 'ic - Average character advance of a full-width glyph in the element\\'s font, as represented by the \"水\" (CJK water ideograph, U+6C34) glyph.',\n    'lh': 'lh - Line height of the element.'\n  },\n  'Root-font relative': {\n    'rcap': 'rcap - Cap height (the nominal height of capital letters) of the root element\\'s font.',\n    'rch': 'rch - Average character advance of a narrow glyph in the root element\\'s font, as represented by the \"0\" (ZERO, U+0030) glyph.',\n    'rem': 'rem - Font size of the root element\\'s font.',\n    'rex': 'rex - x-height of the root element\\'s font.',\n    'ric': 'ric - Average character advance of a full-width glyph in the root element\\'s font, as represented by the \"水\" (CJK water ideograph, U+6C34) glyph.',\n    'rlh': 'rlh - Line height of the root element.'\n  },\n  'Relative': {\n    'dvh': 'dvh - 1% of the dynamic viewport\\'s height.',\n    'dvw': 'dvw - 1% of the dynamic viewport\\'s width.',\n    'lvh': 'lvh - 1% of the large viewport\\'s height.',\n    'lvw': 'lvw - 1% of the large viewport\\'s width.',\n    'svh': 'svh - 1% of the small viewport\\'s height.',\n    'svw': 'svw - 1% of the small viewport\\'s width.',\n    'vb': 'vb - 1% of viewport\\'s size in the root element\\'s block axis.',\n    'vh': 'vh - 1% of viewport\\'s height.',\n    'vi': 'vi - 1% of viewport\\'s size in the root element\\'s inline axis.',\n    'vmax': 'vmax - 1% of viewport\\'s larger dimension.',\n    'vmin': 'vmin - 1% of viewport\\'s smaller dimension.',\n    'vw': 'vw - 1% of viewport\\'s width.',\n    'fr': 'fr - (Flex) Represents a flexible length within a grid container',\n    '%': '% - Percentage'\n  },\n  'Container @Query relative': {\n    'cqb': 'cqb - 1% of a query container\\'s block size',\n    'cqh': 'cqh - 1% of a query container\\'s height',\n    'cqi': 'cqi - 1% of a query container\\'s inline size',\n    'cqmax': 'cqmax - The larger value of cqi or cqb',\n    'cqmin': 'cqmin - The smaller value of cqi or cqb',\n    'cqw': 'cqw - 1% of a query container\\'s width'\n  },\n  'Absolute lengths': {\n    'cm': 'cm - (Centimeters) 1cm = 96px/2.54',\n    'in': 'in - (Inches) 1in = 2.54cm = 96px',\n    'mm': 'mm - (Millimeters) 1mm = 1/10th of 1cm',\n    'pc': 'pc - (Picas) 1pc = 1/6th of 1in',\n    'pt': 'pt - (Points) 1pt = 1/72th of 1in',\n    'px': 'px - (Pixels) 1px = 1/96th of 1in',\n    'Q': 'Q - (Quarter-millimeters) 1Q = 1/40th of 1cm'\n  },\n  'Angles': {\n    'deg': 'deg - (Degrees) There are 360 degrees in a full circle.',\n    'grad': 'grad - (Gradians) There are 400 gradians in a full circle.',\n    'rad': 'rad - (Radians) There are 2π radians in a full circle.',\n    'turn': 'turn - (Turns) There is 1 turn in a full circle.'\n  },\n  'Time': {\n    'ms': 'ms - Milliseconds',\n    's': 's - (Seconds) There are 1,000 milliseconds in a second.'\n  },\n  'Frequency': {\n    'Hz': 'Hz - (Hertz) Represents the number of occurrences per second.',\n    'kHz': 'kHz - (KiloHertz) A kiloHertz is 1000 Hertz.'\n  },\n  'Resolution': {\n    'dpcm': 'dpcm - Dots per centimeter.',\n    'dpi': 'dpi - Dots per inch.',\n    'dppx': 'dppx - Dots per px unit.'\n  }\n};\n/*\r\nexport type CSS_AbsoluteUnit = 'px' | 'cm' | 'mm' | 'pt' | 'pc' | 'in' | '';\r\nexport type CSS_RelativeDomUnit = '%' | 'fr' | 'vw' | 'vh' | 'vmin' | 'vmax';\r\nexport type CSS_RelativeFontUnit =  'em' | 'rem' | 'ex' | 'ch';\r\nexport type CSSUnit = CSS_AbsoluteUnit | CSS_RelativeFontUnit | CSS_RelativeDomUnit;*/\n\n// array of rgba: red, green, blue, alpha\n// array of rgba: red, green, blue, alpha\n\nexport let DViewElement = (_dec = RuntimeAccessible('DViewElement'), _dec(_class = (_class2 = class DViewElement extends DPointerTargetable {\n  constructor() {\n    super(...arguments);\n    this.id = void 0;\n    this.isValidation = void 0;\n    this.name = void 0;\n    this.isExclusiveView = void 0;\n    this.constants = void 0;\n    this.preRenderFunc = void 0;\n    this.jsxString = void 0;\n    this.usageDeclarations = void 0;\n    this.forceNodeType = void 0;\n    this.appliableToClasses = void 0;\n    this.appliableTo = void 0;\n    this.subViews = void 0;\n    this.oclCondition = void 0;\n    this.jsCondition = void 0;\n    this.oclUpdateCondition = void 0;\n    this.OCL_NEEDS_RECALCULATION = void 0;\n    this.OCL_UPDATE_NEEDS_RECALCULATION = void 0;\n    this.explicitApplicationPriority = void 0;\n    this.defaultVSize = void 0;\n    this.adaptHeight = void 0;\n    this.adaptWidth = void 0;\n    this.draggable = void 0;\n    this.resizable = void 0;\n    this.viewpoint = void 0;\n    this.onDataUpdate = void 0;\n    this.onDragStart = void 0;\n    this.onDragEnd = void 0;\n    this.whileDragging = void 0;\n    this.onResizeStart = void 0;\n    this.onResizeEnd = void 0;\n    this.whileResizing = void 0;\n    this.onRotationStart = void 0;\n    this.onRotationEnd = void 0;\n    this.whileRotating = void 0;\n    this.events = void 0;\n    this.bendingMode = void 0;\n    this.edgeGapMode = void 0;\n    this.storeSize = void 0;\n    this.size = void 0;\n    this.lazySizeUpdate = void 0;\n    this.edgeStartOffset = void 0;\n    this.edgeEndOffset = void 0;\n    this.edgeStartOffset_isPercentage = void 0;\n    this.edgeEndOffset_isPercentage = void 0;\n    this.edgeStartStopAtBoundaries = void 0;\n    this.edgeEndStopAtBoundaries = void 0;\n    this.edgePointCoordMode = void 0;\n    this.edgeHeadSize = void 0;\n    this.edgeTailSize = void 0;\n    this.palette = void 0;\n    this.css = void 0;\n    this.cssIsGlobal = void 0;\n    this.compiled_css = void 0;\n    this.css_MUST_RECOMPILE = void 0;\n  } // static singleton: LViewElement;\n  // static logic: typeof LViewDViewElementElement;\n  // static structure: typeof DViewElement;\n  // inherited redefine\n  // public __raw!: DViewElement;\n  // own properties\n  // only for root views (ex viewpoints) to group views semantically.\n  // processate 1 sola volta all'applicazione della vista o all'editing del campo\n  // _parsedConstants?: GObject; // should be protected but LView is not subclass\n  // evaluate tutte le volte che l'elemento viene aggiornato (il model o la view cambia).\n  // l'html template\n  // used in DefaultNode\n  // scalezoomx: boolean = false; // whether to resize the element normally using width-height or resize it using zoom-scale css\n  // scalezoomy: boolean = false;\n  // not persistent, some not shared. deve essere diverso da utente ad utente perchè dipende dal pan e zoom nel grafo dell'utente attuale.\n  // facendo pan su grafo html sposti gli elementi, per simulare uno spostamento del grafo e farlo sembrare illimitato.\n  // __transient: DViewTransientProperties;\n  // class names: DModel, DPackage, DAttribute...\n  // ocl selector\n  // js selector\n  //oclUpdateCondition_PARSED!: undefined | ((view: LViewElement)=>boolean); moved in transient\n  // if only the oclCondition needs to be reapplied to all model elements\n  // if both ocl needsto be reapplied and the oclUpdateCondition -> transient.view[v.id].oclUpdateCondition_PARSED needs to be remade\n  // priority of the view, if a node have multiple applicable views, the view with highest priority is applied.\n  // | 'fit-content' | '-webkit-fill-available';\n  /*width!: number;\r\n  height!: number;*/\n  //display!: 'block'|'contents'|'flex'|string;\n  //constraints!: GObject<\"obsolete, used in Vertex. they are triggered by events (view.onDragStart....) and can bound the size of the vertex\">[];\n  //useSizeFrom!: EuseSizeFrom;\n  // if true updates it once when the vertex is released. if false updates vertex position every X millisecond while dragging.\n  /* private */\n  /* private */\n  static new(name, jsxString, defaultVSize) {\n    let usageDeclarations = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n    let constants = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n    let preRenderFunc = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '';\n    let appliableToClasses = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : [];\n    let oclCondition = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : '';\n    let priority = arguments.length > 8 ? arguments[8] : undefined;\n    let persist = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : true;\n    let isDefaultView = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : false;\n    let vp = arguments.length > 11 ? arguments[11] : undefined;\n    let id = isDefaultView ? 'Pointer_View' + name : undefined;\n    return new Constructors(new DViewElement('dwc'), undefined, persist, undefined, id).DPointerTargetable().DViewElement(name, jsxString, vp, defaultVSize, usageDeclarations, constants, preRenderFunc, appliableToClasses, oclCondition, priority).end();\n  }\n  static new2(name, jsxString, callback) {\n    let persist = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    let vp = arguments.length > 4 ? arguments[4] : undefined;\n    let id = arguments.length > 5 ? arguments[5] : undefined;\n    // let id = isDefaultView ? 'Pointer_View' + name : undefined;\n    return new Constructors(new DViewElement('dwc'), undefined, persist, undefined, id).DPointerTargetable().DViewElement(name, jsxString, vp).end(callback);\n  }\n  static newDefault(forData) {\n    const jsx = `<div className={'root'}>\n    <div className={'header'}>\n        <Input\n            placeholder={\"?\"}\n            autosize={\"true\"}\n            hidden={true}\n            data={data}\n            field={\"name\"}\n        />\n    </div>\n    <div className={'body'}>To add information here,<br/> edit the view<br/><i>\"{view.name}\"</i></div>\n</div>`;\n    const palettes = {\n      \"border-color-\": {\n        type: \"color\",\n        value: [{\n          r: 187,\n          g: 187,\n          b: 187,\n          a: 1\n        }]\n      },\n      \"background-\": {\n        type: \"color\",\n        value: [{\n          r: 238,\n          g: 242,\n          b: 243,\n          a: 1\n        }]\n      },\n      \"color-\": {\n        type: \"color\",\n        value: [{\n          r: 3,\n          g: 54,\n          b: 86,\n          a: 1\n        }]\n      }\n    };\n    const css = `.root {\n    border: 1px solid var(--border-color-1);\n    border-radius: 4px;\n    background-color: var(--background-1);\n    \n    font-family: Verdana, sans-serif;\n    color: var(--color-1);\n    font-size: 11px;\n}\n \n.root div.header {\n    text-align: center;\n    border-bottom: 1px solid var(--border-color-1);\n    padding: 0px;\n    margin: 0px;\n}\n \n.root div.header {\n    font-size: 5px;\n}\n \n.root div.header input:empty {\n    margin-left: 0px;\n}\n.root div.body {\n    text-align: center;\n    font-weight: normal;  \n    height: auto;\n    padding: 5px;\n}\n `;\n    let query = '';\n    if (forData) switch (forData.className) {\n      case 'DClass':\n        query = `context DObject inv: self.instanceof.id = '${forData.id}'`;\n        break;\n      case 'DAttribute':\n      case 'DReference':\n        query = `context DValue inv: self.instanceof.id = '${forData.id}'`;\n        break;\n      default:\n        query = `context ${forData.className} inv: self.id = '${forData.id}'`;\n        break;\n    }\n    const user = LUser.fromPointer(DUser.current);\n    // const project = user?.project; if(!project) return this;\n    let name;\n    if (forData === null || forData === void 0 ? void 0 : forData.name) {\n      name = forData.name + 'View';\n    } else {\n      var _user$project;\n      const vp = (user === null || user === void 0 ? void 0 : (_user$project = user.project) === null || _user$project === void 0 ? void 0 : _user$project.activeViewpoint) || LPointerTargetable.fromPointer(Defaults.viewpoints[0]);\n      let names = vp.subViews.map(v => v && v.name);\n      name = U.increaseEndingNumber('view_' + 0, false, false, newName => names.indexOf(newName) >= 0);\n    }\n    return DViewElement.new2(name, jsx, d => {\n      d.css = css;\n      d.palette = palettes;\n      d.css_MUST_RECOMPILE = true;\n      d.oclCondition = query;\n    }, true);\n  }\n}, _class2.subclasses = [], _class2._extends = [], _class2.MeasurableKeys = ['onDataUpdate', 'onDragStart', 'onDragEnd', 'whileDragging', 'onResizeStart', 'onResizeEnd', 'whileResizing', 'onRotationStart', 'onRotationEnd', 'whileRotating'], _class2.RecompileKeys = ['onDataUpdate', 'onDragStart', 'onDragEnd', 'whileDragging', 'onResizeStart', 'onResizeEnd', 'whileResizing', 'onRotationStart', 'onRotationEnd', 'whileRotating', 'constants', 'usageDeclarations', 'jsxString', 'preconditions', 'jsCondition', 'ocl', 'events'], _class2)) || _class);\nexport let LViewElement = (_dec2 = RuntimeAccessible('LViewElement'), _dec2(_class3 = (_class4 = class LViewElement extends LPointerTargetable {\n  constructor() {\n    super(...arguments);\n    this.__raw = void 0;\n    this.id = void 0;\n    this.r = void 0;\n    this.isValidation = void 0;\n    this.name = void 0;\n    this.__info_of__name = {\n      isGlobal: true,\n      type: ShortAttribETypes.EString,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Name of the view\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 83\n      }, this)\n    };\n    this.isOverlay = void 0;\n    this.__info_of__isOverlay = {\n      isGlobal: true,\n      type: ShortAttribETypes.EBoolean,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"If not exclusive, the view is meant to add a functional outline of tools to a primary View, or css.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this), \"A non-exclusive view cannot be applied alone and needs an exclusive view to render the main graphical content.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 88\n      }, this)\n    };\n    this.explicitApplicationPriority = void 0;\n    this.__info_of__explicitApplicationPriority = {\n      isGlobal: true,\n      type: ShortAttribETypes.EByte,\n      label: \"explicit priority\",\n      txt: 'Application priority of view. If multiple views match an element, the highest priority will render the main jsx.'\n    };\n    this.isExclusiveView = void 0;\n    this.__info_of__isExclusiveView = {\n      isGlobal: true,\n      type: ShortAttribETypes.EBoolean,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"If not exclusive, the view is meant to add a functional outline of tools to a primary View, or css.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 5\n        }, this), \"A non-exclusive view cannot be applied alone and needs an exclusive view to render the main graphical content.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 94\n      }, this)\n    };\n    this.constants = void 0;\n    this.__info_of__constants = {\n      todo: true,\n      isGlobal: true,\n      type: \"Function():Object\",\n      label: \"constants declaration\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Data used in the visual representation, meant to be static values evaluated only once when the view is first applied.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 135\n        }, this), \"Check default value view for an example.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 49\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 13\n      }, this)\n    };\n    this.preRenderFunc = void 0;\n    this.__info_of__preRenderFunc = {\n      isGlobal: true,\n      obsolete: true,\n      type: \"Function():Object\",\n      label: \"pre-render function\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Data used in the visual representation, meant to be dynamic values evaluated every time the visual representation is updated.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 143\n        }, this), \"Replaced by usageDeclarations.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 13\n      }, this)\n    };\n    this.jsxString = void 0;\n    this.__info_of__jsxString = {\n      isGlobal: true,\n      type: \"text\",\n      label: \"JSX template\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"The main ingredient, a \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://react.dev/learn/writing-markup-with-jsx\",\n          children: \"JSX template\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 41\n        }, this), \" that will be visualized in the graph.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 13\n      }, this)\n    };\n    this.usageDeclarations = void 0;\n    this.__info_of__usageDeclarations = {\n      todo: false,\n      isGlobal: true,\n      type: \"Function():Object\",\n      label: \"usage declarations\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Subset of the global or elements's data state that is graphically used.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this), \"If specified the element will only update when one of those has changed.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), \"Can optimize performance and ensure the node is updated even when navigating remote properties that\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this), \"    don\\\\'t belong to this element, like visualizing the name of an object pointed by a reference.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), \"Context: it has the usual variables present in a JSX template (data, view, node...)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this), \"    plus a special variable \\\"ret\\\" where dependencies are registered.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this), \"Usage Example: see the default view for value.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 14\n      }, this)\n    };\n    this.oclUpdateCondition = void 0;\n    this.__info_of__oclUpdateCondition = {\n      readType: '(view: LViewElement)=>boolean',\n      writeType: 'function string',\n      txt: \"[Optionally] Declare variables that are used in OCL condition, so that OCL will be re-checked only when those values have changed.\"\n    };\n    this.css_MUST_RECOMPILE = void 0;\n    this.cssIsGlobal = void 0;\n    this.__info_of__cssIsGlobal = {\n      type: ShortAttribETypes.EBoolean,\n      txt: \"Use with caution!\\nIf true, custom css can affect even elements not matched with this view, or outside the graph.\"\n    };\n    this.css = void 0;\n    this.__info_of__css = {\n      type: \"css string\",\n      txt: \"Inject custom css that cannot be inserted inline like :hover or css variables.\\nSupport LESS syntax.\"\n    };\n    this.compiled_css = void 0;\n    this.__info_of__compiled_css = {\n      hidden: true,\n      txt: 'css + palettes compiled from less in css'\n    };\n    this.palette = void 0;\n    this.__info_of__palette = {\n      type: \"Dictionary<prefix, colors[]>\",\n      txt: \"Specify a set of colors, numbers or text variables to be used in the graphical syntax through css variables.\"\n    };\n    this.forceNodeType = void 0;\n    this.__info_of__forceNodeType = {\n      isGlobal: true,\n      type: \"EGraphElements\",\n      enum: EGraphElements,\n      label: \"force node type\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Forces this element to be rendered with your component of choice instead of automatic selection when generated by a <DefaultNode> tag.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 13\n      }, this)\n    };\n    this.zoom = void 0;\n    this.__info_of__zoom = {\n      todo: true,\n      isNode: true,\n      type: GraphPoint.cname,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Zooms in or out the element using css scale.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 84\n      }, this)\n    };\n    this.appliableToClasses = void 0;\n    this.__info_of__appliableToClasses = {\n      isGlobal: true,\n      type: \"EModelElements | EGraphElements\",\n      enum: {\n        ...EModelElements,\n        ...EGraphElements,\n        cname: \"EModelElements | EGraphElements\"\n      },\n      label: \"applicable to\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Do a low priority match with elements of this type.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this), \"This is just a shortcut with a lower priority than a OCL match.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 13\n        }, this), \"The same result can be obtained through OCL.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 14\n      }, this)\n    };\n    this.appliableTo = void 0;\n    this.subViews = void 0;\n    this.__info_of__subViews = {\n      isGlobal: true,\n      hidden: true,\n      type: \"DViewElement[]\",\n      label: \"sub-views\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Views that are suggested to render elements contained in the current one with a higher match priority.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 13\n        }, this), \"Like a package view giving priority to a specific Class or Enum view to render his contained Classifiers in a common theme.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this), \"If you wish to see the subview weight attached to the collection, access view.__raw.subviews instead.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 13\n      }, this)\n    };\n    this.setSubViewScore = void 0;\n    this.__info_of__setSubViewScore = {\n      isGlobal: true,\n      hidden: true,\n      type: \"function(ViewElement, numeric_score): void\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Adds, updates or unsets (if boost = null) a subview with his score.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 127\n      }, this)\n    };\n    this.allSubViews = void 0;\n    this.__info_of__allSubViews = {\n      type: \"ViewElement[]\",\n      txt: \"recursively get this.subViews.\"\n    };\n    this.defaultVSize = void 0;\n    this.__info_of__defaultVSize = {\n      isNode: true,\n      type: \"GraphSize\",\n      label: \"default size\",\n      txt: 'starting size of the node'\n    };\n    this.adaptWidth = void 0;\n    this.__info_of__adaptWidth = {\n      isNode: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"adapt width\",\n      txt: 'Whether the element should expand his width to accomodate his own contents.'\n    };\n    this.adaptHeight = void 0;\n    this.__info_of__adaptHeight = {\n      isNode: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"adapt height\",\n      txt: 'Whether the element should expand his height to accomodate his own contents.'\n    };\n    this.draggable = void 0;\n    this.__info_of__draggable = {\n      isNode: true,\n      type: ShortAttribETypes.EBoolean,\n      txt: 'if the element can be dragged'\n    };\n    this.resizable = void 0;\n    this.__info_of__resizable = {\n      isNode: true,\n      type: ShortAttribETypes.EBoolean,\n      txt: 'if the element can be resized'\n    };\n    this.oclCondition = void 0;\n    this.__info_of__oclCondition = {\n      isGlobal: true,\n      hidden: true,\n      label: \"OCL apply condition\",\n      type: \"text\",\n      // TODO: what's the difference with this.query?\n      txt: 'OCL Query selector to determine which nodes or model elements should apply this view'\n    };\n    this.jsCondition = void 0;\n    this.__info_of__jsCondition = {\n      isGlobal: true,\n      hidden: true,\n      label: \"js apply condition\",\n      type: \"text\",\n      txt: 'js Query selector to determine which nodes or model elements should apply this view'\n    };\n    this.viewpoint = void 0;\n    this.__info_of__viewpoint = {\n      hidden: true,\n      type: LViewPoint.cname,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"The collection of views containing this one, useful to activate multiple views at once.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 733,\n        columnNumber: 78\n      }, this)\n    };\n    this.display = void 0;\n    this.__info_of__display = {\n      obsolete: true,\n      isNode: true,\n      type: ShortAttribETypes.EString,\n      txt: 'complete css injection instead'\n    };\n    this.onDragStart = void 0;\n    this.__info_of__onDragStart = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated when a node begins being dragged.'\n    };\n    this.onDragEnd = void 0;\n    this.__info_of__onDragEnd = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated when a node finishes being dragged.'\n    };\n    this.whileDragging = void 0;\n    this.__info_of__whileDragging = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated multiple times when mouse is moved while a node is being dragged.'\n    };\n    this.onResizeStart = void 0;\n    this.__info_of__onResizeStart = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated when a node begins being resized.'\n    };\n    this.onResizeEnd = void 0;\n    this.__info_of__onResizeEnd = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated when a node finishes being resized.'\n    };\n    this.whileResizing = void 0;\n    this.__info_of__whileResizing = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated multiple times when mouse is moved while a node is being resized.'\n    };\n    this.onRotationStart = void 0;\n    this.__info_of__onRotationStart = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated when a node begins being rotated.'\n    };\n    this.onRotationEnd = void 0;\n    this.__info_of__onRotationEnd = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated when a node finishes being rotated.'\n    };\n    this.whileRotating = void 0;\n    this.__info_of__whileRotating = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated multiple times when mouse is moved while a node is being rotated.'\n    };\n    this.onDataUpdate = void 0;\n    this.__info_of__onDataUpdate = {\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'Custom event activated every time a property of his model, node or view is changed while the element is visibly rendered in a graph.\\n<br>Caution! this might cause loops.'\n    };\n    this.events = void 0;\n    this.event = void 0;\n    this.__info_of__events = {\n      todo: true,\n      isGlobal: true,\n      type: \"Dictionary<name, function>\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Custom events callable through JSX user interaction\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 882,\n          columnNumber: 70\n        }, this), \"eg: <div onClick={()=>view.eventname()} />\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 882,\n        columnNumber: 14\n      }, this)\n    };\n    this.__info_of__event = {\n      todo: true,\n      isGlobal: true,\n      type: \"Dictionary<name, function>\",\n      txt: 'Alias for this.events'\n    };\n    this.constraints = void 0;\n    this.__info_of__constraints = {\n      todo: true,\n      isNode: true,\n      type: \"Function():void\",\n      txt: 'not supported yet'\n    };\n    this.bendingMode = void 0;\n    this.__info_of__bendingMode = {\n      isEdge: true,\n      enum: EdgeBendingMode,\n      type: '\"L\" | \"Q\" | \"C\" | \"T\" | \"S\" | \"A\" | \"QT\" | \"CS\"',\n      label: \"path mode\",\n      txt: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"How Svg path should use the EdgePoints to bend his shape\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 932,\n          columnNumber: 16\n        }, this)\n      }, void 0, false)\n    };\n    this.edgeGapMode = void 0;\n    this.__info_of__edgeGapMode = {\n      isEdge: true,\n      enum: EdgeGapMode,\n      type: '\"gap\" | \"average\" | \"autoFill\" | \"lineFill\" | \"arcFill\"',\n      label: \"gap mode\",\n      txt: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"How the segment should treat the EdgePoint interruptions.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 937,\n            columnNumber: 78\n          }, this), \"\\\"gap\\\" leaves an empty space to not overlap the EdgePoint,\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 938,\n            columnNumber: 13\n          }, this), \"\\\"linefill\\\" makes the edge stop at the EdgePoint borders, but then connects the gap with a line.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 937,\n          columnNumber: 16\n        }, this)\n      }, void 0, false)\n    };\n    this.storeSize = void 0;\n    this.__info_of__storeSize = {\n      isNode: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"bind sizes to view\",\n      txt: \"Active: the node position depends from the view currently displayed.Inactive: it depends from the graph.\"\n    };\n    this.lazySizeUpdate = void 0;\n    this.__info_of__lazySizeUpdate = {\n      isNode: true,\n      type: ShortAttribETypes.EBoolean,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"If true updates the node position only when the drag action is finished. (best performance)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 950,\n        columnNumber: 93\n      }, this)\n    };\n    this.edgeStartOffset = void 0;\n    this.__info_of__edgeStartOffset = {\n      isEdge: true,\n      type: GraphPoint.cname,\n      label: \"start offset\",\n      txt: \"Location where outgoing edges should start their path, relative to top-upper corner of the element.\"\n    };\n    this.edgeEndOffset = void 0;\n    this.__info_of__edgeEndOffset = {\n      isEdge: true,\n      type: GraphPoint.cname,\n      label: \"end offset\",\n      txt: 'Same as this.edgeStartOffset'\n    };\n    this.edgeStartOffset_isPercentage = void 0;\n    this.__info_of__edgeStartOffset_isPercentage = {\n      isEdge: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"start offset is a %\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Whether edgeStartOffset is an absolute value or a percentage.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 963,\n          columnNumber: 80\n        }, this), \"(eg: 50% of element width, vs 50 pixels flat).\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 963,\n        columnNumber: 14\n      }, this)\n    };\n    this.edgeEndOffset_isPercentage = void 0;\n    this.__info_of__edgeEndOffset_isPercentage = {\n      isEdge: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"end offset is a %\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Whether edgeStartOffset is an absolute value or a percentage.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 967,\n          columnNumber: 80\n        }, this), \"(eg: 50% of element width, vs 50 pixels flat).\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 967,\n        columnNumber: 14\n      }, this)\n    };\n    this.edgeStartStopAtBoundaries = void 0;\n    this.__info_of__edgeStartStopAtBoundaries = {\n      isEdge: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"start cannot cross boundaries\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Whether outgoing edges should cross the node boundaries overlapping the node\\\\'s html or stop at them.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 972,\n          columnNumber: 120\n        }, this), \"Edge arrows might enter the node if this is on.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 972,\n        columnNumber: 14\n      }, this)\n    };\n    this.edgeEndStopAtBoundaries = void 0;\n    this.__info_of__edgeEndStopAtBoundaries = {\n      isEdge: true,\n      type: ShortAttribETypes.EBoolean,\n      label: \"end cannot cross boundaries\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Whether incoming edges should cross the node boundaries overlapping the node\\\\'s html or stop at them.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 976,\n          columnNumber: 120\n        }, this), \"Edge arrows might enter the node if this is on.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 976,\n        columnNumber: 14\n      }, this)\n    };\n    this.edgePointCoordMode = void 0;\n    this.__info_of__edgePointCoordMode = {\n      isEdgePoint: true,\n      type: \"CoordinateMode\",\n      enum: CoordinateMode,\n      label: \"coordinate mode\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Store coordinates as absolute coordinates or relative to start/end nodes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 981,\n        columnNumber: 13\n      }, this)\n    };\n    this.edgeHeadSize = void 0;\n    this.__info_of__edgeHeadSize = {\n      isEdge: true,\n      type: GraphPoint.cname,\n      label: \"head decorator size\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Size of the edge head decorator if present.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1000,\n        columnNumber: 108\n      }, this)\n    };\n    this.edgeTailSize = void 0;\n    this.__info_of__edgeTailSize = {\n      isEdge: true,\n      type: GraphPoint.cname,\n      label: \"tail decorator size\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Size of the tail head decorator if present.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 108\n      }, this)\n    };\n    this.size = void 0;\n    this.__info_of__size = {\n      isNode: true,\n      hidden: true,\n      type: ShortAttribETypes.EInt,\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Do not use directly, contains all the sizes stored in this view. use getSize, updateSize instead.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 13\n      }, this)\n    };\n    this.__info_of__updateSize = {\n      isNode: true,\n      hidden: true,\n      type: \"Function(Pointer<GraphElement | ModelElement>, GraphSize) => GraphSize\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Updates the size stored in this view for target element.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1011,\n          columnNumber: 74\n        }, this), \"@returns: the delta of the change between old value and new value.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1011,\n        columnNumber: 13\n      }, this)\n    };\n    this.__info_of__getSize = {\n      isNode: true,\n      hidden: true,\n      type: \"Function(Pointer<GraphElement | ModelElement>) => GraphSize\",\n      txt: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Gets the size stored in this view for target element.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1013,\n        columnNumber: 13\n      }, this)\n    };\n  } // MixOnlyFuncs(DViewElement, LPointerTargetable)\n  // static singleton: LViewElement;\n  // static logic: typeof LViewElement;\n  // static structure: typeof DViewElement;\n  // inherited redefine\n  // own properties\n  // only for root views (ex viewpoints) to group views semantically.\n  get_isOverlay(c) {\n    return this.get_isExclusiveView(c);\n  }\n  set_isOverlay(val, c) {\n    return this.set_isExclusiveView(val, c);\n  }\n\n  // priority of the view, if a node have multiple applicable views, the view with highest priority is applied.\n\n  get_explicitApplicationPriority(c) {\n    var _c$data$jsCondition, _c$data$oclCondition;\n    if (c.data.explicitApplicationPriority !== undefined) return c.data.explicitApplicationPriority;else return (((_c$data$jsCondition = c.data.jsCondition) === null || _c$data$jsCondition === void 0 ? void 0 : _c$data$jsCondition.length) || 1) + (((_c$data$oclCondition = c.data.oclCondition) === null || _c$data$oclCondition === void 0 ? void 0 : _c$data$oclCondition.length) || 1);\n  }\n  set_explicitApplicationPriority(val, c) {\n    SetFieldAction.new(c.data, \"explicitApplicationPriority\", val, '', false);\n    return true;\n  }\n  get_isExclusiveView(c) {\n    return c.data.isExclusiveView;\n  }\n  set_isExclusiveView(val, c) {\n    if (Defaults.check(c.data.id)) return true; // cannot delete or \"demote\" to decorations the main views, to make sure there is always at least 1 appliable view.\n    return SetFieldAction.new(c.data, \"isExclusiveView\", !!val, '', false);\n  }\n\n  // Example 1: <code>{'{color:\"red\", background: \"gray\"}'}</code><br/>\n  // Example 2: <code>{'function(){\\n    let fib = [1,1]; for (let i = 2; i < 100) { fib[i] = fib[i-2]+fib[i-1]; }\\n    return fib; }'}</code><br/>\n  // evalutate tutte le volte che l'elemento viene aggiornato (il model o la view cambia)\n  _defaultGetter(c, k) {\n    return this.__defaultGetter(c, k);\n  }\n  _defaultSetter(v, c, k) {\n    return this.__defaultSetter(v, c, k);\n  }\n  get_jsxString(context) {\n    return context.data.jsxString;\n  }\n  set_jsxString(val, context) {\n    TRANSACTION(() => {\n      // const jsx = DSL.parser(val);\n      SetFieldAction.new(context.data, 'jsxString', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_jsxString', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_usageDeclarations(c) {\n    return c.data.usageDeclarations || \"(ret)=>{ // scope contains: data, node, view, constants, state\\n\" + \"// ** preparations and default behaviour here ** //\\n\" + \"ret.data = data\\n\" + \"ret.node = node\\n\" + \"ret.view = view\\n\" + \"// data, node, view are dependencies by default. delete them above if you want to remove them.\\n\" +\n    // if you want your node re-rendered every time, add a dependency to ret.state = state; or ret.update = Math.random();\n    \"// add preparation code here (like for loops to count something), then list the dependencies below.\\n\" + \"// ** declarations here ** //\\n\" + \"}\";\n  }\n  set_usageDeclarations(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'usageDeclarations', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_usageDeclarations', context.data.id, '+=', false);\n    });\n    return true;\n  }\n\n  // format should be array of (usedPaths: string[]) starting with \"data.\" AUTOMATICALLY inefered from the ocl editor.\n\n  get_oclUpdateCondition(c) {\n    return transientProperties.view[c.data.id].oclUpdateCondition_PARSED;\n  }\n  set_oclUpdateCondition(val, c) {\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data, \"oclUpdateCondition\", val || '', '', false);\n      // not recalculated right now because the change needs to be sent to collaborative editor users\n      // it is pointer, but i don't want to set pointedby's, it is very short lived.\n      SetRootFieldAction.new(\"OCL_UPDATE_NEEDS_RECALCULATION\", c.data.id, '+=', false);\n    });\n    return true;\n  }\n  /* moved it as setrootfield action and as array. check it after every reducer. update im same style the color palette too?\r\n      OCL_NEEDS_RECALCULATION!: boolean;\r\n      __info_of__OCL_NEEDS_RECALCULATION: Info = {hidden: true, type: ShortAttribETypes.EBoolean,\r\n          txt: \"if only the oclCondition needs to be reapplied to all model elements\"}\r\n      get_OCL_NEEDS_RECALCULATION(c: Context): this[\"OCL_NEEDS_RECALCULATION\"] { return c.data.OCL_NEEDS_RECALCULATION; }\r\n      set_OCL_NEEDS_RECALCULATION(val: this[\"OCL_NEEDS_RECALCULATION\"], c: Context): boolean { return this.cannotSet('OCL_NEEDS_RECALCULATION'); }\r\n  \r\n      OCL_UPDATE_NEEDS_RECALCULATION!: boolean;\r\n      __info_of__OCL_UPDATE_NEEDS_RECALCULATION: Info = {hidden: true, type: ShortAttribETypes.EBoolean,\r\n          txt: \"if both ocl needsto be reapplied and the oclUpdateCondition -> transient.view[v.id].oclUpdateCondition_PARSED needs to be remade\"}\r\n      get_OCL_UPDATE_NEEDS_RECALCULATION(c: Context): this[\"OCL_UPDATE_NEEDS_RECALCULATION\"] { return c.data.OCL_UPDATE_NEEDS_RECALCULATION; }\r\n      set_OCL_UPDATE_NEEDS_RECALCULATION(val: this[\"OCL_UPDATE_NEEDS_RECALCULATION\"], c: Context): boolean { return this.cannotSet('OCL_UPDATE_NEEDS_RECALCULATION'); }*/\n\n  get_cssIsGlobal(c) {\n    return c.data.cssIsGlobal;\n  }\n  set_cssIsGlobal(val, c) {\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data, \"cssIsGlobal\", !!val, '', false);\n      // compile only when accessed, to prevent color inputs to do a mess of compilations\n      SetFieldAction.new(c.data, \"css_MUST_RECOMPILE\", true, '', false);\n    });\n    return true;\n  }\n  get_css(c) {\n    return c.data.css;\n  }\n  set_css(val, c) {\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data, \"css\", val, '', false);\n      // compile only when accessed, to prevent color inputs to do a mess of compilations\n      SetFieldAction.new(c.data, \"css_MUST_RECOMPILE\", true, '', false);\n    });\n    return true;\n  }\n  get_compiled_css(c) {\n    if (!c.data.css_MUST_RECOMPILE) return c.data.compiled_css; // return c.proxyObject.r.__raw.compiled_css;\n    let s = '';\n    const allowLESS = false;\n    let shortPaletteName;\n    let cc = c;\n    function rgbastring(c) {\n      Log.exDev(!c, \"invalid color:\", {\n        id: cc.data.id,\n        c,\n        shortPaletteName,\n        p: cc.data.palette\n      });\n      return \"rgba(\" + c.r + \",\" + c.g + \",\" + c.b + \",\" + c.a + \")\";\n    }\n    //let palettes = U.paletteSplit(c.data.palette);\n    for (let paletteName in c.data.palette) {\n      let palette0 = c.data.palette[paletteName];\n      if (palette0.type === \"color\") {\n        let palette = palette0;\n        let colors = palette.value;\n        if (!colors.length) continue;\n        if (['-', '_'].includes(paletteName[paletteName.length - 1])) shortPaletteName = paletteName.substring(0, paletteName.length - 1);else shortPaletteName = paletteName;\n        let rgba = rgbastring(colors[0]);\n        // set prefixed name without number\n        if (allowLESS) s += \"\\t@\" + shortPaletteName + \": \" + rgba + ';\\n';\n        s += \"\\t--\" + shortPaletteName + \": \" + rgba + ';\\n';\n        // set prefixed-0 name\n        if (allowLESS) s += \"\\t@\" + paletteName + '0: ' + rgba + ';\\n';\n        s += \"\\t--\" + paletteName + '0: ' + rgba + ';\\n';\n        // set prefixed-1 to prefixed-...n names\n        for (let i = 0; i < colors.length; i++) {\n          rgba = rgbastring(colors[i]);\n          if (allowLESS) s += \"\\t@\" + paletteName + (i + 1) + \": \" + rgba + ';\\n';\n          s += \"\\t--\" + paletteName + (i + 1) + \": \" + rgba + ';\\n';\n        }\n      } else if (palette0.type === 'path') {\n        let palette = palette0;\n        let val = U.replaceAll(palette.value, 'view.', '');\n        val = U.replaceAll(val, 'this.', '');\n        val = U.replaceAll(val, 'x', palette.x);\n        val = U.replaceAll(val, 'y', palette.y);\n        val = U.replaceAll(val, '+', ' +');\n        val = U.replaceAll(val, '-', ' -'); // important: cannot add space post-dash or it's harder to distinguish unary and binary -\n        val = U.replaceAll(val, '/', ' / ');\n        val = U.replaceAll(val, '*', ' * ');\n        let valarr = val.split(/[,\\s]/);\n        // [] not allowed\n        valarr = valarr.map(val => {\n          if (!isNaN(+val)) return val;\n          let patharr = val.split('.');\n          let curr = c.data;\n          for (let pathseg of patharr) {\n            curr = curr[pathseg];\n            Log.e(!curr && (val.length > 1 || patharr.length > 1), \"invalid variable path in css path control\", {\n              token: val,\n              view: c.data.name\n            });\n            if (!curr) break;\n          }\n          if (typeof curr === \"object\" || typeof curr === \"undefined\" && (val.length > 1 || patharr.length > 1)) Log.ee(\"invalid variable path in css path control\", {\n            token: val,\n            view: c.data.name\n          });else val = curr || val;\n          return val;\n        }).filter(p => !!p);\n        for (let i = 0; i < valarr.length; i++) {\n          let val = valarr[i];\n          switch (val) {\n            // i avoid subtracting L 1 -1 with spaces. it's unary if doesn't have a postfix space.\n            default:\n              continue;\n            case '*':\n              valarr[i] = +valarr[i - 1] * +valarr[i + 1];\n              valarr[i - 1] = valarr[i + 1] = '';\n              break;\n            case '/':\n              valarr[i] = +valarr[i - 1] / +valarr[i + 1];\n              valarr[i - 1] = valarr[i + 1] = '';\n              break;\n            case '+':\n              valarr[i] = +valarr[i - 1] + +valarr[i + 1];\n              valarr[i - 1] = valarr[i + 1] = '';\n              break;\n            case '-':\n              valarr[i] = +valarr[i - 1] - +valarr[i + 1];\n              valarr[i - 1] = valarr[i + 1] = '';\n              break;\n          }\n        }\n        val = valarr.filter(p => !!p).join(' ');\n        val = \"'\" + val + \"'\";\n        if (allowLESS) s += \"\\t@\" + paletteName + \": \" + val + ';\\n';\n        s += \"\\t--\" + paletteName + ': ' + val + ';\\n';\n      } else {\n        // number or text\n        let palette = palette0;\n        let val = palette.value + (palette.unit || '');\n        if (!val) val = \"''\";\n        if (allowLESS) s += \"\\t@\" + paletteName + \": \" + val + ';\\n';\n        s += \"\\t--\" + paletteName + ': ' + val + ';\\n';\n      }\n    }\n    s += '\\n\\t' + U.replaceAll(c.data.css, '\\n', '\\n\\t');\n    const localViewSelector = '.' + c.data.id; // '[data-viewid=\"'+c.data.id+'\"]';\n    s = (!c.data.cssIsGlobal ? localViewSelector : 'body') + ' {\\n' + s + '\\n}';\n    // not an error, i'm updating directly d-view that is usually wrong, this is to prevent multiple nodes with same view to trigger compile and redux actions\n    // count as if it's a derived attribute not really part of the store.\n    c.data.css_MUST_RECOMPILE = false;\n    return c.data.compiled_css = s;\n  }\n  set_compiled_css(val, c) {\n    Log.exx(\"Do not use setter for this, set it directly in d-object, along with compiled_css.\" + \"\\nOtherwise multiple nodes of the same view will start compiling together.\\n\");\n    return false;\n  }\n  get_palette(c) {\n    return c.data.palette;\n  }\n  set_palette(val, c) {\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data, \"palette\", val, '', false);\n      SetFieldAction.new(c.data, \"css_MUST_RECOMPILE\", true, '', false);\n    });\n    return true;\n  }\n\n  /*\r\n  scalezoomx!: boolean; // whether to resize the element normally using width-height or resize it using zoom-scale css\r\n  __info_of__scalezoomx: Info = {isNode: true, isEdge: false, isEdgePoint: false, txt:<div></div>}\r\n    scalezoomy!: boolean;\r\n  __info_of__scalezoomy: Info = {isNode: true, isEdge: false, isEdgePoint: false, txt:<div></div>}*/\n\n  // not persistent, some not shared. deve essere diverso da utente ad utente perchè dipende dal pan e zoom nel grafo dell'utente attuale.\n  // facendo pan su grafo html sposti gli elementi, per simulare uno spostamento del grafo e farlo sembrare illimitato.\n  // __transient: DViewTransientProperties;\n  // class names: DModel, DPackage, DAttribute...\n  get_SubViews(c) {\n    delete c.data.subViews.clonedCounter;\n    return Object.keys(c.data.subViews).map(vid => LPointerTargetable.fromPointer(vid));\n  }\n  set_SubViews(val, c) {\n    let subviewsmap;\n    if (Array.isArray(val)) {\n      let ptrsArr = Pointers.fromArr(val);\n      subviewsmap = U.objectFromArrayValues(ptrsArr, 1.5);\n    } else subviewsmap = val || {};\n    SetFieldAction.new(c.data, \"subViews\", subviewsmap, '', true);\n    return true;\n  }\n  // adds, updates or unsets (if boost = null) a subview with his score.\n  get_setSubViewScore(c) {\n    return function (subview) {\n      let boost = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.5;\n      let subviews = {\n        ...c.data.subViews\n      };\n      let ptr = Pointers.from(subview);\n      if (boost !== null) {\n        // set mode\n        if (subviews[ptr] === boost) return;\n        subviews[ptr] = boost;\n      } else {\n        // set mode\n        if (subviews[ptr] === undefined) return;\n        delete subviews[ptr];\n      }\n      SetFieldAction.new(c.data, 'subViews', subviews, '', true);\n    };\n  }\n  get_allSubViews(c) {\n    delete c.data.subViews.clonedCounter;\n    let arr = Object.keys(c.data.subViews);\n    let nextarr = [];\n    let idmap = {};\n    let s = store.getState();\n    let dview;\n    while (arr.length) {\n      for (let vid of arr) {\n        if (idmap[vid]) continue;\n        dview = DPointerTargetable.fromPointer(vid, s);\n        if (!dview) continue;\n        idmap[vid] = dview;\n        U.arrayMergeInPlace(nextarr, Object.keys(dview.subViews));\n      }\n      arr = nextarr;\n      nextarr = [];\n    }\n    return LPointerTargetable.fromD(Object.values(idmap));\n  }\n  set_allSubViews(val, c) {\n    return this.wrongAccessMessage(\"cannot call set_allSubViews, it is a derived attribute\");\n  }\n\n  // ocl selector\n\n  get_oclCondition(context) {\n    return context.data.oclCondition;\n  }\n  set_oclCondition(val, context) {\n    val = (val || '').trim();\n    if (val === context.data.oclCondition) return true;\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'oclCondition', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_ocl', context.data.id, '+=', false); // it is pointer, but for transient stuff there is no need to set pointedby's\n    });\n\n    return true;\n  }\n\n  // js selector\n\n  get_jsCondition(context) {\n    return context.data.jsCondition;\n  }\n  set_jsCondition(val, context) {\n    val = (val || '').trim();\n    if (val === context.data.jsCondition) return true;\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'jsCondition', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_jsCondition', context.data.id, '+=', false);\n    });\n    return true;\n  }\n\n  // todo: how about allowing a view to be part in multiple vp's? so this reference would be an array or removed, and you navigate only from vp to v.\n\n  get_onDragStart(context) {\n    return context.data.onDragStart;\n  }\n  set_onDragStart(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onDragStart', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onDragStart', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_onDragEnd(context) {\n    return context.data.onDragEnd;\n  }\n  set_onDragEnd(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onDragEnd', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onDragEnd', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_whileDragging(context) {\n    return context.data.whileDragging;\n  }\n  set_whileDragging(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'whileDragging', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_whileDragging', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_onResizeStart(context) {\n    return context.data.onResizeStart;\n  }\n  set_onResizeStart(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onResizeStart', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onResizeStart', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_onResizeEnd(context) {\n    return context.data.onResizeEnd;\n  }\n  set_onResizeEnd(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onResizeEnd', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onResizeEnd', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_whileResizing(context) {\n    return context.data.whileResizing;\n  }\n  set_whileResizing(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'whileResizing', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_whileResizing', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_onRotationStart(context) {\n    return context.data.onRotationStart;\n  }\n  set_onRotationStart(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onRotationStart', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onRotationStart', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_onRotationEnd(context) {\n    return context.data.onRotationEnd;\n  }\n  set_onRotationEnd(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onRotationEnd', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onRotationEnd', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_whileRotating(context) {\n    return context.data.whileRotating;\n  }\n  set_whileRotating(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'whileRotating', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_whileRotating', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_onDataUpdate(context) {\n    return context.data.onDataUpdate;\n  }\n  set_onDataUpdate(val, context) {\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'onDataUpdate', val, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_onDataUpdate', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  get_event(c) {\n    return this.get_events(c);\n  }\n  get_events(c) {\n    Log.exx(\"use node.events instead\", U.getStackTrace());\n    return {};\n    // return transientProperties.view[c.data.id]?.events || {};\n  }\n\n  set_events(val, context) {\n    const addUD = true;\n    TRANSACTION(() => {\n      SetFieldAction.new(context.data, 'events', val, '+=', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_events', {\n        vid: context.data.id,\n        keys: Object.keys(val)\n      }, '+=', false);\n      let udstr = context.data.usageDeclarations;\n      if (!addUD || !udstr) return;\n      let delta = U.objectDelta(context.data.events, val, false);\n      for (let key in delta) {\n        let v = val[key];\n        let autogenstr = 'ret.' + key + ' = node.events.' + key + '; // @autogenerated, do not edit\\n';\n        if (!v) udstr = udstr.split(autogenstr).join('');else {\n          if (!context.data.events[key]) {\n            // insert\n            let findstr = '// ** declarations here ** //\\n';\n            let insertat = udstr.indexOf(findstr);\n            if (insertat === -1) continue; // malformed ud, will skip\n            insertat += findstr.length;\n            udstr = udstr.substring(0, insertat) + autogenstr + udstr.substring(insertat);\n          } else {\n            // just updated func body, no name changed, no need to update UD.\n          }\n        }\n      }\n      if (udstr === context.data.usageDeclarations) return;\n      SetFieldAction.new(context.data, 'usageDeclarations', udstr, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_usageDeclarations', context.data.id, '+=', false);\n    });\n    return true;\n  }\n\n  /*\r\n  bindVertexSizeToView!: boolean;\r\n  __info_of__bindVertexSizeToView: Info = {isNode:true, type:ShortAttribETypes.EBoolean, label:\"bind sizes to view\",\r\n      txt: <div>Store the vertex size inside the view instead of inside the vertex.\r\n          <br/>This causes the vertex to have different positions according to the view currently appied to it.</div>}*/\n\n  set_edgePointCoordMode(val, c) {\n    TRANSACTION(() => {\n      setTimeout(() => {\n        // needs to be done after coordinatemode change is applied\n        let s = store.getState();\n        for (let nid in transientProperties.node) {\n          var _tn$mainView;\n          let tn = transientProperties.node[nid];\n          if (!tn || ((_tn$mainView = tn.mainView) === null || _tn$mainView === void 0 ? void 0 : _tn$mainView.id) !== c.data.id) continue;\n          let lnode = LPointerTargetable.fromPointer(nid, s);\n          let triggerCoordinateModeChange = lnode;\n          triggerCoordinateModeChange.size = lnode.size;\n        }\n      }, 100);\n      SetFieldAction.new(c.data, 'edgePointCoordMode', val, '', false);\n    });\n    return true;\n  }\n\n  // use getSize, updateSize;\n\n  // public _parsedConstants!: GObject;\n  // public get__parsedConstants(c: Context): this['_parsedConstants'] { return c.data._parsedConstants || {}; }\n  get_constants(c) {\n    return c.data.constants;\n  }\n  static parseConstants(funcCode) {\n    if (!funcCode) return {};\n    let parsedConstants = {};\n    let context = {\n      __param: parsedConstants\n    };\n    context.__proto__ = windoww.defaultContext;\n    try {\n      let parsedFunc = U.parseFunctionWithContextAndScope(funcCode, context, context, ['ret']);\n      parsedFunc(context, parsedConstants);\n      // U.evalInContextAndScopeNew( \"(\"+funcCode+\")(this.__param)\", context, true, false, false);\n    } catch (e) {\n      Log.ee(\"Attempted to save an invalid view.constant setup. Cause:\\n\" + e.message.split(\"\\n\")[0], e);\n      return undefined;\n    }\n    return parsedConstants;\n  }\n  set_constants(value, c) {\n    if (value === c.data.constants) return true;\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data.id, 'constants', value, '', false);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_constants', c.data.id, '+=', false);\n      SetFieldAction.new(c.data.id, \"css_MUST_RECOMPILE\", true, '', false);\n    });\n    return true;\n  }\n  get_preRenderFunc(c) {\n    return c.data.preRenderFunc;\n  }\n  set_preRenderFunc(value, c) {\n    const _value = value ? value : '() => {}';\n    return SetFieldAction.new(c.data.id, 'preRenderFunc', _value, '', false);\n  }\n  get_edgeHeadSize(c) {\n    return new GraphPoint(c.data.edgeHeadSize.x, c.data.edgeHeadSize.y);\n  }\n  get_edgeTailSize(c) {\n    return new GraphPoint(c.data.edgeTailSize.x, c.data.edgeTailSize.y);\n  }\n  set_edgeHeadSize(v, c) {\n    let s = c.data.edgeHeadSize || new GraphPoint(0, 0);\n    if (!(\"x\" in v)) v.x = s.x;\n    if (!(\"y\" in v)) v.y = s.y;\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data.id, \"css_MUST_RECOMPILE\", true, '', false);\n      SetFieldAction.new(c.data.id, \"edgeHeadSize\", v, '', false);\n    });\n    return true;\n  }\n  set_edgeTailSize(v, c) {\n    let s = c.data.edgeTailSize || new GraphPoint(0, 0);\n    if (!(\"x\" in v)) v.x = s.x;\n    if (!(\"y\" in v)) v.y = s.y;\n    TRANSACTION(() => {\n      SetFieldAction.new(c.data.id, \"css_MUST_RECOMPILE\", true, '', false);\n      SetFieldAction.new(c.data.id, \"edgeTailSize\", v, '', false);\n    });\n    return true;\n  }\n  get_viewpoint(context) {\n    return LViewPoint.fromPointer(context.data.viewpoint);\n  }\n  // public set_subViews(v: Pointer<DViewPoint>[], context: Context): boolean { return this.cannotSet('subViews, call set_viewpoint on the sub-elements instead.'); }\n\n  // WARNING!! if there are mass vp assignments, preserveOrder=true will cause a vp to \"lose\" subviews and keep only the last assigned.\n  set_viewpoint(v, context, manualDview) {\n    let preserveOrder = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    let ret = false;\n    let vpid = v && Pointers.from(v);\n    const data = manualDview || context.data;\n    let id = data.id;\n    let oldvpid = data.viewpoint;\n    if (vpid === oldvpid) return true;\n    TRANSACTION(() => {\n      ret = SetFieldAction.new(id, \"viewpoint\", vpid, '', true);\n      if (oldvpid) {\n        let subViews = {\n          ...DPointerTargetable.fromPointer(oldvpid).subViews\n        };\n        delete subViews[id];\n        SetFieldAction.new(oldvpid, \"subViews\", subViews, '', true);\n      }\n      if (vpid) {\n        let name = data.name;\n        let copyPos = name.indexOf(\"Copy\");\n        let oldSubViews = DPointerTargetable.fromPointer(vpid).subViews;\n        let insertBefore = '';\n        let subViews = {};\n        if (copyPos) {\n          let copiedFromName = copyPos ? name.substring(0, copyPos).trim() : '';\n          if (copiedFromName in oldSubViews) insertBefore = copiedFromName;else {\n            for (let key in oldSubViews) if (key.indexOf(copiedFromName) === 0) {\n              insertBefore = key;\n              break;\n            }\n          }\n        }\n\n        // WARNING!! if there are mass vp assignments, this will cause a vp to \"lose\" subviews and keep only the last assigned.\n        if (preserveOrder && insertBefore) {\n          subViews = {};\n          for (let key in oldSubViews) {\n            subViews[key] = oldSubViews[key];\n            // just to reinsert subviews **in order** so Object.keys() fits the new subview near the cloned one.\n            if (key === insertBefore) subViews[id] = subViews[insertBefore];\n          }\n        } else {\n          subViews = {\n            ...oldSubViews\n          };\n          subViews[id] = 1.5;\n        }\n        subViews[id] = insertBefore ? subViews[insertBefore] : 1.5;\n        SetFieldAction.new(vpid, \"subViews\", subViews, '+=', true);\n      }\n    });\n    return ret;\n  }\n  get_subViews(context, key) {\n    let subViewsPointers = context.data.subViews;\n    let subViews = [];\n    for (let pointer in subViewsPointers) {\n      let item = MyProxyHandler.wrap(pointer);\n      if (item !== undefined) subViews.push(item);\n    }\n    return subViews;\n  }\n\n  // returns the delta of change\n  updateSize(id, size) {\n    return this.wrongAccessMessage(\"updateSize\");\n  }\n  get_updateSize(context) {\n    return (id, size0) => {\n      let size = size0;\n      let vp = context.proxyObject.viewpoint;\n      if (!context.data.storeSize) {\n        if (vp === null || vp === void 0 ? void 0 : vp.storeSize) return vp.updateSize(id, size);\n        return false;\n      }\n      let vsize = context.data.size[id] || (vp === null || vp === void 0 ? void 0 : vp.__raw.size[id]);\n      let newSize = new GraphSize();\n      if (size.currentCoordType === vsize.currentCoordType) {\n        // if samecoord system mix them.\n        newSize.x = (size === null || size === void 0 ? void 0 : size.x) !== undefined ? size.x : vsize.x;\n        newSize.y = (size === null || size === void 0 ? void 0 : size.y) !== undefined ? size.y : vsize.y;\n      } else if (size.x !== undefined && size.y !== undefined) {\n        // if different coord system pick all of size\n        newSize.x = size.x;\n        newSize.y = size.y;\n        newSize.currentCoordType = size.currentCoordType || CoordinateMode.absolute;\n      } else if (vsize.x !== undefined && vsize.y !== undefined) {\n        // or all of vsize if size was invalid\n        newSize.x = vsize.x;\n        newSize.y = vsize.y;\n        newSize.currentCoordType = vsize.currentCoordType || CoordinateMode.absolute;\n      }\n      let defaultsize = context.data.defaultVSize || (vp === null || vp === void 0 ? void 0 : vp.__raw.defaultVSize);\n      if (newSize.x === undefined || newSize.y === undefined) {\n        // only if pos is invalid, i take defaultvsize and force to use coord absolute.\n        newSize = new GraphSize().clone(defaultsize);\n        newSize.currentCoordType = CoordinateMode.absolute;\n      }\n      // w and h are always absolute so they can be mixed to whathever coordinate mode indipendently from the rest.\n      newSize.w = (size === null || size === void 0 ? void 0 : size.w) !== undefined ? size.w : vsize.w;\n      newSize.h = (size === null || size === void 0 ? void 0 : size.h) !== undefined ? size.h : vsize.h;\n      if (newSize.h === undefined) newSize.h = defaultsize.h || 10;\n      if (newSize.w === undefined) newSize.w = defaultsize.w || 10;\n      if (!newSize.equals(vsize)) SetFieldAction.new(context.data.id, \"size.\" + id, newSize);\n      return true;\n    };\n  }\n  get_defaultVSize(context) {\n    return context.data.defaultVSize;\n  }\n  getSize(id) {\n    return this.wrongAccessMessage(\"getSize\");\n  }\n  get_getSize(context) {\n    function impl_getSize(id) {\n      if (typeof id === \"object\") id = id.id;\n      let view = context.data;\n      let ret;\n      if (view.storeSize) {\n        ret = view.size[id];\n        if (ret) return ret;\n      }\n      let vp = context.proxyObject.viewpoint;\n      if (vp && view.id !== vp.id && vp.storeSize) {\n        ret = vp.size[id];\n        if (ret) return ret;\n      }\n      return undefined;\n    }\n    return impl_getSize;\n  }\n  set_generic_entry(context, key, val) {\n    console.log('set_generic_entry', {\n      context,\n      key,\n      val\n    });\n    SetFieldAction.new(context.data, key, val);\n    return true;\n  }\n  get_children(context) {\n    return [];\n  }\n  get_lazySizeUpdate(context) {\n    return Debug.lightMode || context.data.lazySizeUpdate;\n  }\n  set_lazySizeUpdate(val, context) {\n    return Debug.lightMode || this.set_generic_entry(context, 'lazySizeUpdate', val);\n  }\n  get_bendingMode(context) {\n    return context.data.bendingMode;\n  }\n  set_bendingMode(val, context) {\n    return this.set_generic_entry(context, 'bendingMode', val);\n  }\n  set_appliableTo(val, c) {\n    // appliableTo >= forcenodetype\n    if (!val) val = 'Any';\n    let forceNodeType = c.data.forceNodeType;\n    if (forceNodeType !== val) switch (val) {\n      // case \"Any\": break;\n      default:\n        forceNodeType = val;\n    }\n    console.log(\"set_appliableTo\", {\n      forceNodeType,\n      val\n    });\n    BEGIN();\n    if (forceNodeType !== c.data.forceNodeType) SetFieldAction.new(c.data, \"forceNodeType\", forceNodeType, '', false);\n    SetFieldAction.new(c.data, \"appliableTo\", val, '', false);\n    END();\n    return true;\n  }\n  set_forceNodeType(val, c) {\n    if (!val) val = 'Any';\n    /*let appliableTo: string = c.data.appliableTo as string;\r\n    if (appliableTo !== val) switch (appliableTo){\r\n        case undefined: case 'Any': break;\r\n        //case 'GraphVertex': if ((appliableTo as any) !== 'Graph' && (appliableTo as any) !== 'Vertex') appliableTo = val; break;\r\n        default: appliableTo = val; break;\r\n    }*/\n    BEGIN();\n    // if (appliableTo !== c.data.appliableTo) SetFieldAction.new(c.data, \"appliableTo\", appliableTo, '', false);\n    SetFieldAction.new(c.data, \"forceNodeType\", val, '', false);\n    END();\n    return true;\n  }\n  get_appliableToClasses(context) {\n    return context.data.appliableToClasses || [];\n  }\n  set_appliableToClasses(val, context) {\n    var _context$data$appliab;\n    if (!val) val = [];else if (!Array.isArray(val)) val = [val];\n    val.sort();\n    let hasChanged;\n    if (val.length === ((_context$data$appliab = context.data.appliableToClasses) === null || _context$data$appliab === void 0 ? void 0 : _context$data$appliab.length)) {\n      hasChanged = false;\n      for (let i = 0; i < val.length; i++) if (val[i] !== context.data.appliableToClasses[i]) {\n        hasChanged = true;\n        break;\n      }\n    } else hasChanged = true;\n    if (!hasChanged) return true;\n    TRANSACTION(() => {\n      this.set_generic_entry(context, \"appliableToClasses\", val);\n      SetRootFieldAction.new('VIEWS_RECOMPILE_preconditions', context.data.id, '+=', false);\n    });\n    return true;\n  }\n  set_defaultVSize(val, c) {\n    var _val$x, _val$y, _val$w, _val$h;\n    if (!val || typeof val !== \"object\") return true;\n    let x = (_val$x = val.x) !== null && _val$x !== void 0 ? _val$x : +val.x;\n    let y = (_val$y = val.y) !== null && _val$y !== void 0 ? _val$y : +val.y;\n    let w = (_val$w = val.w) !== null && _val$w !== void 0 ? _val$w : +val.w;\n    let h = (_val$h = val.h) !== null && _val$h !== void 0 ? _val$h : +val.h;\n    if (isNaN(x)) x = c.data.defaultVSize.x;\n    if (isNaN(y)) y = c.data.defaultVSize.y;\n    if (isNaN(w)) w = c.data.defaultVSize.w;\n    if (isNaN(h)) h = c.data.defaultVSize.h;\n    if (x === c.data.defaultVSize.x && y === c.data.defaultVSize.y && w === c.data.defaultVSize.w && h === c.data.defaultVSize.h) return true;\n    SetFieldAction.new(c.data, 'defaultVSize', {\n      x,\n      y,\n      w,\n      h\n    }, '', false);\n    return true;\n  }\n  duplicate() {\n    let deep = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    let new_vp = arguments.length > 1 ? arguments[1] : undefined;\n    return this.wrongAccessMessage(this.constructor.cname + \"duplicate()\");\n  }\n  get_duplicate(c) {\n    var _this = this;\n    return function () {\n      let deep = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      let new_vp0 = arguments.length > 1 ? arguments[1] : undefined;\n      console.log(\"DViewelement.duplicate\", {\n        cn: c.data.className,\n        n: c.data.name,\n        deep,\n        new_vp0\n      });\n      let lview = undefined;\n      let state = store.getState();\n      TRANSACTION(() => {\n        let pvid = c.data.viewpoint;\n        const dclone = c.data.className === 'DViewPoint' ? DViewPoint.new2(`${c.data.name} Copy`, '', undefined, true) : DViewElement.new2(`${c.data.name} Copy`, '', undefined, true, 'skip');\n        lview = LPointerTargetable.fromD(dclone);\n        const new_vp = new_vp0 || {\n          pvid\n        };\n        // || {pvid,  score: (DPointerTargetable.from(pvid, state) as DViewElement).subViews[c.data.id]}\n\n        for (let key in c.data) {\n          switch (key) {\n            case 'subViews':\n              // duplicate childrens only if deep\n              if (!deep) break;\n              // let subviews: Dictionary<Pointer, number> = {}\n              for (const oldvid in c.data.subViews) {\n                const oldScore = c.data.subViews[oldvid];\n                LPointerTargetable.fromPointer(oldvid, state).duplicate(deep, {\n                  pvid: dclone.id /*, score:oldScore*/\n                });\n                // then everything is set inside case 'viewpoint' of subviews cloning\n              }\n              //lview.subViews = subviews as any;\n              break;\n            case 'father':\n            case 'viewpoint':\n              // update parent view\n              /*\r\n              let subviews: Dictionary<Pointer, number> = {};\r\n              subviews[dclone.id] = new_vp.score;\r\n              SetFieldAction.new(new_vp.pvid, 'subViews', subviews, '+=', true);\r\n              SetFieldAction.new(dclone.id, 'viewpoint', new_vp.pvid, '+=', true);*/\n              // insert in-place right after the cloned view, with old score.\n              _this.set_viewpoint(new_vp.pvid, undefined, dclone, !deep);\n              // SetFieldAction.new(dclone.id, 'father', new_vp.vpid, '+=', true);\n              break;\n            case '':\n            case 'id':\n            case 'name':\n            case 'className':\n            case 'pointedBy':\n            case '_storePath':\n            case '_subMaps':\n            case 'clonedCounter':\n              break;\n            case 'css_MUST_RECOMPILE':\n              break;\n            case 'isValidation':\n              console.log(\"duplicate \" + c.data.name + \" set isvalidation\", {\n                data: c.data,\n                iv: c.data.isValidation\n              });\n              lview[key] = c.data[key];\n              break;\n            default:\n              try {\n                lview[key] = c.data[key];\n              } catch (e) {\n                //    Log.ee('Error on duplicate view:', e);\n              }\n          }\n        }\n\n        // insert in viewpoint.subview\n        //let defaultViews: Dictionary<Pointer, boolean> = Defaults.defaultViewsMap;\n        let vp = c.proxyObject.viewpoint;\n        // let oldViews: Pointer<DViewElement>[] = Object.keys(vp.__raw.subViews);\n        // if (Defaults.viewpoints.indexOf(vpid)) oldViews = oldViews.filter( vid => !defaultViews[vid]);\n        // let i: number = oldViews.indexOf(c.data.id);\n        /*\r\n        if (i === -1) oldViews.push(dclone.id);\r\n        else oldViews.splice(i+1, 0, dclone.id); // insert in-place right after the cloned view\r\n        vp.subViews = oldViews as any;*/\n        // SetRootFieldAction.new('stackViews', dview.id, '+=', true);\n\n        const isVP = c.data.className === 'DViewPoint';\n        if (isVP) SetRootFieldAction.new(`viewpoints`, c.data.id, '+=', true);else SetRootFieldAction.new(`viewelements`, c.data.id, '+=', true);\n        for (let key of DViewElement.RecompileKeys) SetRootFieldAction.new(`VIEWS_RECOMPILE_${key}`, c.data.id, '+=', false);\n      });\n      return lview;\n    };\n  }\n}, _class4.subclasses = [], _class4._extends = [], _class4)) || _class3);\nRuntimeAccessibleClass.set_extend(DPointerTargetable, DViewElement);\nRuntimeAccessibleClass.set_extend(LPointerTargetable, LViewElement);\nexport let DViewTransientProperties = (_dec3 = RuntimeAccessible('DViewTransientProperties'), _dec3(_class5 = (_class6 = class DViewTransientProperties extends RuntimeAccessibleClass {\n  constructor() {\n    super(...arguments);\n    this._isDViewTransientProperties = void 0;\n  } // isSelected: Dictionary<DocString<Pointer<DUser>>, boolean> = {};\n  // private: DViewPrivateTransientProperties;\n}, _class6.logic = void 0, _class6)) || _class5);\nRuntimeAccessibleClass.set_extend(RuntimeAccessibleClass, DViewTransientProperties);\nexport let LViewTransientProperties = (_dec4 = RuntimeAccessible('LViewTransientProperties'), _dec4(_class7 = (_class8 = class LViewTransientProperties extends LPointerTargetable {\n  constructor() {\n    super(...arguments);\n    this._isLViewTransientProperties = void 0;\n  } // isSelected: Dictionary<DocString<Pointer<DUser>>, boolean> = {};\n  // private!: LViewPrivateTransientProperties;\n  /*\r\n      get_private(context: LogicContext<DViewTransientProperties>): LViewPrivateTransientProperties {\r\n          return LViewTransientProperties.wrap(context.data.private, context.proxy.baseObjInLookup, context.proxy.additionalPath + '.private'); }*/\n  /*\r\n      get_isSelected(logicContext: LogicContext<TargetableProxyHandler<DViewTransientProperties>, DViewTransientProperties>): Proxyfied<Dictionary> {\r\n          // @ts-ignore for $ at end of getpath\r\n          console.log('GET_ISSELECTED handler func');\r\n          return TargetableProxyHandler.getMap(logicContext.data.isSelected, logicContext, logicContext.proxy.additionalPath + '.' + (getPath as this).isSelected.$);\r\n      }*/\n}, _class8.structure = void 0, _class8.singleton = void 0, _class8)) || _class7);\nRuntimeAccessibleClass.set_extend(DPointerTargetable, DViewTransientProperties);\nRuntimeAccessibleClass.set_extend(LPointerTargetable, LViewTransientProperties);\n\n/*\r\n\r\n@RuntimeAccessible\r\nexport class DViewPrivateTransientProperties extends DPointerTargetable{\r\n    static logic: typeof LViewPrivateTransientProperties;\r\n\r\n    public size: GraphSize\r\n    constructor(size?: GraphSize) {\r\n        super();\r\n        this.size = size || defaultVSize;\r\n    }\r\n}\r\n\r\n@RuntimeAccessible\r\nexport class LViewPrivateTransientProperties extends DViewPrivateTransientProperties{\r\n    static structure: typeof DViewPrivateTransientProperties;\r\n    static singleton: LViewPrivateTransientProperties;\r\n\r\n}*/\n// shapeless component, receive jsx from redux\n// can access any of the redux state, but will usually access 1-2 var among many,\n// how can i dynamically mapStateToProps to map only the required ones?","map":{"version":3,"names":["BEGIN","Constructors","CoordinateMode","Debug","Defaults","DPointerTargetable","DViewPoint","EdgeBendingMode","EdgeGapMode","EGraphElements","EModelElements","END","GraphPoint","GraphSize","Log","LPointerTargetable","LUser","LViewPoint","MyProxyHandler","Pointers","RuntimeAccessible","RuntimeAccessibleClass","SetFieldAction","SetRootFieldAction","ShortAttribETypes","store","TRANSACTION","U","windoww","DUser","transientProperties","jsxDEV","_jsxDEV","Fragment","_Fragment","CSS_Units","DViewElement","_dec","_class","_class2","constructor","arguments","id","isValidation","name","isExclusiveView","constants","preRenderFunc","jsxString","usageDeclarations","forceNodeType","appliableToClasses","appliableTo","subViews","oclCondition","jsCondition","oclUpdateCondition","OCL_NEEDS_RECALCULATION","OCL_UPDATE_NEEDS_RECALCULATION","explicitApplicationPriority","defaultVSize","adaptHeight","adaptWidth","draggable","resizable","viewpoint","onDataUpdate","onDragStart","onDragEnd","whileDragging","onResizeStart","onResizeEnd","whileResizing","onRotationStart","onRotationEnd","whileRotating","events","bendingMode","edgeGapMode","storeSize","size","lazySizeUpdate","edgeStartOffset","edgeEndOffset","edgeStartOffset_isPercentage","edgeEndOffset_isPercentage","edgeStartStopAtBoundaries","edgeEndStopAtBoundaries","edgePointCoordMode","edgeHeadSize","edgeTailSize","palette","css","cssIsGlobal","compiled_css","css_MUST_RECOMPILE","new","length","undefined","priority","persist","isDefaultView","vp","end","new2","callback","newDefault","forData","jsx","palettes","type","value","r","g","b","a","query","className","user","fromPointer","current","_user$project","project","activeViewpoint","viewpoints","names","map","v","increaseEndingNumber","newName","indexOf","d","subclasses","_extends","MeasurableKeys","RecompileKeys","LViewElement","_dec2","_class3","_class4","__raw","__info_of__name","isGlobal","EString","txt","children","fileName","_jsxFileName","lineNumber","columnNumber","isOverlay","__info_of__isOverlay","EBoolean","__info_of__explicitApplicationPriority","EByte","label","__info_of__isExclusiveView","__info_of__constants","todo","__info_of__preRenderFunc","obsolete","__info_of__jsxString","href","__info_of__usageDeclarations","__info_of__oclUpdateCondition","readType","writeType","__info_of__cssIsGlobal","__info_of__css","__info_of__compiled_css","hidden","__info_of__palette","__info_of__forceNodeType","enum","zoom","__info_of__zoom","isNode","cname","__info_of__appliableToClasses","__info_of__subViews","setSubViewScore","__info_of__setSubViewScore","allSubViews","__info_of__allSubViews","__info_of__defaultVSize","__info_of__adaptWidth","__info_of__adaptHeight","__info_of__draggable","__info_of__resizable","__info_of__oclCondition","__info_of__jsCondition","__info_of__viewpoint","display","__info_of__display","__info_of__onDragStart","__info_of__onDragEnd","__info_of__whileDragging","__info_of__onResizeStart","__info_of__onResizeEnd","__info_of__whileResizing","__info_of__onRotationStart","__info_of__onRotationEnd","__info_of__whileRotating","__info_of__onDataUpdate","event","__info_of__events","__info_of__event","constraints","__info_of__constraints","__info_of__bendingMode","isEdge","__info_of__edgeGapMode","__info_of__storeSize","__info_of__lazySizeUpdate","__info_of__edgeStartOffset","__info_of__edgeEndOffset","__info_of__edgeStartOffset_isPercentage","__info_of__edgeEndOffset_isPercentage","__info_of__edgeStartStopAtBoundaries","__info_of__edgeEndStopAtBoundaries","__info_of__edgePointCoordMode","isEdgePoint","__info_of__edgeHeadSize","__info_of__edgeTailSize","__info_of__size","EInt","__info_of__updateSize","__info_of__getSize","get_isOverlay","c","get_isExclusiveView","set_isOverlay","val","set_isExclusiveView","get_explicitApplicationPriority","_c$data$jsCondition","_c$data$oclCondition","data","set_explicitApplicationPriority","check","_defaultGetter","k","__defaultGetter","_defaultSetter","__defaultSetter","get_jsxString","context","set_jsxString","get_usageDeclarations","set_usageDeclarations","get_oclUpdateCondition","view","oclUpdateCondition_PARSED","set_oclUpdateCondition","get_cssIsGlobal","set_cssIsGlobal","get_css","set_css","get_compiled_css","s","allowLESS","shortPaletteName","cc","rgbastring","exDev","p","paletteName","palette0","colors","includes","substring","rgba","i","replaceAll","x","y","valarr","split","isNaN","patharr","curr","pathseg","e","token","ee","filter","join","unit","localViewSelector","set_compiled_css","exx","get_palette","set_palette","get_SubViews","clonedCounter","Object","keys","vid","set_SubViews","subviewsmap","Array","isArray","ptrsArr","fromArr","objectFromArrayValues","get_setSubViewScore","subview","boost","subviews","ptr","from","get_allSubViews","arr","nextarr","idmap","getState","dview","arrayMergeInPlace","fromD","values","set_allSubViews","wrongAccessMessage","get_oclCondition","set_oclCondition","trim","get_jsCondition","set_jsCondition","get_onDragStart","set_onDragStart","get_onDragEnd","set_onDragEnd","get_whileDragging","set_whileDragging","get_onResizeStart","set_onResizeStart","get_onResizeEnd","set_onResizeEnd","get_whileResizing","set_whileResizing","get_onRotationStart","set_onRotationStart","get_onRotationEnd","set_onRotationEnd","get_whileRotating","set_whileRotating","get_onDataUpdate","set_onDataUpdate","get_event","get_events","getStackTrace","set_events","addUD","udstr","delta","objectDelta","key","autogenstr","findstr","insertat","set_edgePointCoordMode","setTimeout","nid","node","_tn$mainView","tn","mainView","lnode","triggerCoordinateModeChange","get_constants","parseConstants","funcCode","parsedConstants","__param","__proto__","defaultContext","parsedFunc","parseFunctionWithContextAndScope","message","set_constants","get_preRenderFunc","set_preRenderFunc","_value","get_edgeHeadSize","get_edgeTailSize","set_edgeHeadSize","set_edgeTailSize","get_viewpoint","set_viewpoint","manualDview","preserveOrder","ret","vpid","oldvpid","copyPos","oldSubViews","insertBefore","copiedFromName","get_subViews","subViewsPointers","pointer","item","wrap","push","updateSize","get_updateSize","size0","proxyObject","vsize","newSize","currentCoordType","absolute","defaultsize","clone","w","h","equals","get_defaultVSize","getSize","get_getSize","impl_getSize","set_generic_entry","console","log","get_children","get_lazySizeUpdate","lightMode","set_lazySizeUpdate","get_bendingMode","set_bendingMode","set_appliableTo","set_forceNodeType","get_appliableToClasses","set_appliableToClasses","_context$data$appliab","sort","hasChanged","set_defaultVSize","_val$x","_val$y","_val$w","_val$h","duplicate","deep","new_vp","get_duplicate","_this","new_vp0","cn","n","lview","state","pvid","dclone","oldvid","oldScore","iv","isVP","set_extend","DViewTransientProperties","_dec3","_class5","_class6","_isDViewTransientProperties","logic","LViewTransientProperties","_dec4","_class7","_class8","_isLViewTransientProperties","structure","singleton"],"sources":["C:/d/Programming/web/jodel-mde/src/view/viewElement/view.tsx"],"sourcesContent":["import {\r\n    BEGIN,\r\n    Constructors,\r\n    CoordinateMode,\r\n    Debug, DEdgePoint,\r\n    Defaults,\r\n    DGraphElement,\r\n    Dictionary,\r\n    DModelElement,\r\n    DNamedElement,\r\n    DocString,\r\n    DPointerTargetable,\r\n    DState,\r\n    DViewPoint,\r\n    EdgeBendingMode,\r\n    EdgeGapMode,\r\n    EGraphElements,\r\n    EModelElements,\r\n    END,\r\n    getWParams,\r\n    GObject,\r\n    GraphPoint,\r\n    GraphSize,\r\n    Info, LEdgePoint, LModelElement,\r\n    Log,\r\n    LogicContext,\r\n    LPointerTargetable, LUser,\r\n    LViewPoint,\r\n    MyProxyHandler,\r\n    Pointer,\r\n    Pointers,\r\n    RuntimeAccessible,\r\n    RuntimeAccessibleClass,\r\n    SetFieldAction, SetRootFieldAction,\r\n    ShortAttribETypes,\r\n    store,\r\n    TRANSACTION,\r\n    U, ViewEClassMatch,\r\n    windoww\r\n} from \"../../joiner\";\r\nimport {DUser, EPSize, Pack1, transientProperties } from \"../../joiner/classes\";\r\nimport subViewsData from \"../../components/rightbar/viewsEditor/data/SubViewsData\";\r\nimport DSL from \"../../DSL/DSL\";\r\n\r\nexport const CSS_Units = {'Local-font relative':{\r\n        'cap':     'cap - (Cap height) the nominal height of capital letters of the element\\'s font.',\r\n        'ch':      'ch - Average character advance of a narrow glyph in the element\\'s font, as represented by the \"0\" (ZERO, U+0030) glyph.',\r\n        'em':      'em - Font size of the element\\'s font.',\r\n        'ex':      'ex - x-height of the element\\'s font.',\r\n        'ic':      'ic - Average character advance of a full-width glyph in the element\\'s font, as represented by the \"水\" (CJK water ideograph, U+6C34) glyph.',\r\n        'lh':      'lh - Line height of the element.',\r\n    },\r\n\r\n    'Root-font relative':{\r\n        'rcap':    'rcap - Cap height (the nominal height of capital letters) of the root element\\'s font.',\r\n        'rch':     'rch - Average character advance of a narrow glyph in the root element\\'s font, as represented by the \"0\" (ZERO, U+0030) glyph.',\r\n        'rem':     'rem - Font size of the root element\\'s font.',\r\n        'rex':     'rex - x-height of the root element\\'s font.',\r\n        'ric':     'ric - Average character advance of a full-width glyph in the root element\\'s font, as represented by the \"水\" (CJK water ideograph, U+6C34) glyph.',\r\n        'rlh':     'rlh - Line height of the root element.',\r\n    },\r\n\r\n    'Relative':{\r\n        'dvh':      'dvh - 1% of the dynamic viewport\\'s height.',\r\n        'dvw':      'dvw - 1% of the dynamic viewport\\'s width.',\r\n        'lvh':      'lvh - 1% of the large viewport\\'s height.',\r\n        'lvw':      'lvw - 1% of the large viewport\\'s width.',\r\n        'svh':      'svh - 1% of the small viewport\\'s height.',\r\n        'svw':      'svw - 1% of the small viewport\\'s width.',\r\n        'vb':       'vb - 1% of viewport\\'s size in the root element\\'s block axis.',\r\n        'vh':       'vh - 1% of viewport\\'s height.',\r\n        'vi':       'vi - 1% of viewport\\'s size in the root element\\'s inline axis.',\r\n        'vmax':     'vmax - 1% of viewport\\'s larger dimension.',\r\n        'vmin':     'vmin - 1% of viewport\\'s smaller dimension.',\r\n        'vw':       'vw - 1% of viewport\\'s width.',\r\n        'fr':       'fr - (Flex) Represents a flexible length within a grid container',\r\n        '%':        '% - Percentage',\r\n    },\r\n\r\n    'Container @Query relative':{\r\n        'cqb':      'cqb - 1% of a query container\\'s block size',\r\n        'cqh':      'cqh - 1% of a query container\\'s height',\r\n        'cqi':      'cqi - 1% of a query container\\'s inline size',\r\n        'cqmax':    'cqmax - The larger value of cqi or cqb',\r\n        'cqmin':    'cqmin - The smaller value of cqi or cqb',\r\n        'cqw':      'cqw - 1% of a query container\\'s width',\r\n    },\r\n\r\n    'Absolute lengths':{\r\n        'cm':      'cm - (Centimeters) 1cm = 96px/2.54',\r\n        'in':      'in - (Inches) 1in = 2.54cm = 96px',\r\n        'mm':      'mm - (Millimeters) 1mm = 1/10th of 1cm',\r\n        'pc':      'pc - (Picas) 1pc = 1/6th of 1in',\r\n        'pt':      'pt - (Points) 1pt = 1/72th of 1in',\r\n        'px':      'px - (Pixels) 1px = 1/96th of 1in',\r\n        'Q':       'Q - (Quarter-millimeters) 1Q = 1/40th of 1cm',\r\n    },\r\n\r\n    'Angles':{\r\n        'deg':      'deg - (Degrees) There are 360 degrees in a full circle.',\r\n        'grad':     'grad - (Gradians) There are 400 gradians in a full circle.',\r\n        'rad':      'rad - (Radians) There are 2π radians in a full circle.',\r\n        'turn':     'turn - (Turns) There is 1 turn in a full circle.',\r\n    },\r\n\r\n    'Time':{\r\n        'ms':     'ms - Milliseconds',\r\n        's':      's - (Seconds) There are 1,000 milliseconds in a second.',\r\n    },\r\n\r\n    'Frequency':{\r\n        'Hz':      'Hz - (Hertz) Represents the number of occurrences per second.',\r\n        'kHz':     'kHz - (KiloHertz) A kiloHertz is 1000 Hertz.',\r\n    },\r\n\r\n    'Resolution':{\r\n        'dpcm':     'dpcm - Dots per centimeter.',\r\n        'dpi':      'dpi - Dots per inch.',\r\n        'dppx':     'dppx - Dots per px unit.',\r\n    },\r\n};\r\n/*\r\nexport type CSS_AbsoluteUnit = 'px' | 'cm' | 'mm' | 'pt' | 'pc' | 'in' | '';\r\nexport type CSS_RelativeDomUnit = '%' | 'fr' | 'vw' | 'vh' | 'vmin' | 'vmax';\r\nexport type CSS_RelativeFontUnit =  'em' | 'rem' | 'ex' | 'ch';\r\nexport type CSSUnit = CSS_AbsoluteUnit | CSS_RelativeFontUnit | CSS_RelativeDomUnit;*/\r\n\r\nexport type StringControl = {type:'text', value: string};\r\nexport type NumberControl = {type:'number', value: number, unit: DocString<\"css unit\">};\r\nexport type PaletteControl = {type:'color', value: tinycolor.ColorFormats.RGBA[]}; // array of rgba: red, green, blue, alpha\r\nexport type PathControl = {type:'path', value: string, x: string, y: string, options: {k: string, v:string}[]}; // array of rgba: red, green, blue, alpha\r\nexport type PaletteType = Dictionary<string, PaletteControl | NumberControl | StringControl | PathControl>;\r\n\r\n\r\n@RuntimeAccessible('DViewElement')\r\nexport class DViewElement extends DPointerTargetable {\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LViewElement;\r\n    // static logic: typeof LViewDViewElementElement;\r\n    // static structure: typeof DViewElement;\r\n    public static MeasurableKeys: string[] = ['onDataUpdate', 'onDragStart', 'onDragEnd', 'whileDragging', 'onResizeStart',\r\n        'onResizeEnd', 'whileResizing', 'onRotationStart', 'onRotationEnd', 'whileRotating'];\r\n    public static RecompileKeys: string[] = ['onDataUpdate', 'onDragStart', 'onDragEnd', 'whileDragging', 'onResizeStart',\r\n        'onResizeEnd', 'whileResizing', 'onRotationStart', 'onRotationEnd', 'whileRotating',\r\n        'constants', 'usageDeclarations', 'jsxString', 'preconditions', 'jsCondition', 'ocl', 'events'];\r\n\r\n    // inherited redefine\r\n    // public __raw!: DViewElement;\r\n    id!: Pointer<DViewElement, 1, 1, LViewElement>;\r\n\r\n\r\n    // own properties\r\n    isValidation!: boolean; // only for root views (ex viewpoints) to group views semantically.\r\n    name!: string;\r\n    isExclusiveView!: boolean;\r\n\r\n    // processate 1 sola volta all'applicazione della vista o all'editing del campo\r\n    constants?: string;\r\n    // _parsedConstants?: GObject; // should be protected but LView is not subclass\r\n\r\n    // evaluate tutte le volte che l'elemento viene aggiornato (il model o la view cambia).\r\n    preRenderFunc!: string;\r\n\r\n    jsxString!: string; // l'html template\r\n    usageDeclarations?: string;\r\n\r\n    forceNodeType?: DocString<'component name (Vertex, Field, GraphVertex, Graph)'>; // used in DefaultNode\r\n    // scalezoomx: boolean = false; // whether to resize the element normally using width-height or resize it using zoom-scale css\r\n    // scalezoomy: boolean = false;\r\n    // not persistent, some not shared. deve essere diverso da utente ad utente perchè dipende dal pan e zoom nel grafo dell'utente attuale.\r\n    // facendo pan su grafo html sposti gli elementi, per simulare uno spostamento del grafo e farlo sembrare illimitato.\r\n    // __transient: DViewTransientProperties;\r\n    appliableToClasses!: string[]; // class names: DModel, DPackage, DAttribute...\r\n    appliableTo!: 'Any'|'Graph'|'GraphVertex'|'Vertex'|'Edge'|'EdgePoint'|'Field';\r\n    subViews!: Dictionary<Pointer<DViewElement>, number/* priority boost */>;\r\n    oclCondition!: string; // ocl selector\r\n    jsCondition!: string; // js selector\r\n    oclUpdateCondition!: DocString<(view: LViewElement)=>boolean>;\r\n    //oclUpdateCondition_PARSED!: undefined | ((view: LViewElement)=>boolean); moved in transient\r\n    OCL_NEEDS_RECALCULATION!: boolean; // if only the oclCondition needs to be reapplied to all model elements\r\n    OCL_UPDATE_NEEDS_RECALCULATION!: boolean; // if both ocl needsto be reapplied and the oclUpdateCondition -> transient.view[v.id].oclUpdateCondition_PARSED needs to be remade\r\n    explicitApplicationPriority!: number; // priority of the view, if a node have multiple applicable views, the view with highest priority is applied.\r\n    defaultVSize!: GraphSize;\r\n    adaptHeight!: boolean;// | 'fit-content' | '-webkit-fill-available';\r\n    adaptWidth!: boolean;\r\n    /*width!: number;\r\n    height!: number;*/\r\n    draggable!: boolean;\r\n    resizable!: boolean;\r\n    viewpoint!: Pointer<DViewPoint>;\r\n    //display!: 'block'|'contents'|'flex'|string;\r\n    //constraints!: GObject<\"obsolete, used in Vertex. they are triggered by events (view.onDragStart....) and can bound the size of the vertex\">[];\r\n    onDataUpdate!: string;\r\n    onDragStart!: string;\r\n    onDragEnd!: string;\r\n    whileDragging!: string;\r\n    onResizeStart!: string;\r\n    onResizeEnd!: string;\r\n    whileResizing!: string;\r\n    onRotationStart!: string;\r\n    onRotationEnd!: string;\r\n    whileRotating!: string;\r\n    events!: Dictionary<DocString<\"functionName\">, DocString<\"functionBody\">>;\r\n    bendingMode!: EdgeBendingMode;\r\n    edgeGapMode!: EdgeGapMode;\r\n    //useSizeFrom!: EuseSizeFrom;\r\n    storeSize!: boolean;\r\n    size!: Dictionary<Pointer<DModelElement> | Pointer<DGraphElement>, GraphSize>;\r\n    lazySizeUpdate!: boolean; // if true updates it once when the vertex is released. if false updates vertex position every X millisecond while dragging.\r\n    edgeStartOffset!: GraphPoint;\r\n    edgeEndOffset!: GraphPoint;\r\n    edgeStartOffset_isPercentage!: boolean;\r\n    edgeEndOffset_isPercentage!: boolean;\r\n    edgeStartStopAtBoundaries!: boolean;\r\n    edgeEndStopAtBoundaries!: boolean;\r\n    edgePointCoordMode!: CoordinateMode;\r\n    edgeHeadSize!: GraphPoint;\r\n    edgeTailSize!: GraphPoint;\r\n    palette!: Readonly<PaletteType>;\r\n    css!: string;\r\n    cssIsGlobal!: boolean;\r\n    /* private */ compiled_css!: string;\r\n    /* private */ css_MUST_RECOMPILE!: boolean;\r\n\r\n    public static new(name: string, jsxString: string, defaultVSize?: GraphSize, usageDeclarations: string = '', constants: string = '',\r\n                      preRenderFunc: string = '', appliableToClasses: string[] = [], oclCondition: string = '',\r\n                      priority?: number, persist: boolean = true, isDefaultView: boolean = false, vp?: Pointer<DViewPoint> | 'skip'): DViewElement {\r\n        let id = isDefaultView ? 'Pointer_View' + name : undefined;\r\n        return new Constructors(new DViewElement('dwc'), undefined, persist, undefined, id).DPointerTargetable().DViewElement(name, jsxString, vp, defaultVSize, usageDeclarations, constants,\r\n            preRenderFunc, appliableToClasses, oclCondition, priority).end();\r\n\r\n    }\r\n    public static new2(name: string, jsxString: string, callback?: (d:DViewElement)=>void, persist: boolean = true, vp?: Pointer<DViewPoint> | 'skip', id?: string): DViewElement {\r\n        // let id = isDefaultView ? 'Pointer_View' + name : undefined;\r\n        return new Constructors(new DViewElement('dwc'), undefined, persist, undefined, id)\r\n            .DPointerTargetable().DViewElement(name, jsxString, vp).end(callback);\r\n    }\r\n\r\n    static newDefault(forData?: DNamedElement): DViewElement{\r\n        const jsx = `<div className={'root'}>\r\n    <div className={'header'}>\r\n        <Input\r\n            placeholder={\"?\"}\r\n            autosize={\"true\"}\r\n            hidden={true}\r\n            data={data}\r\n            field={\"name\"}\r\n        />\r\n    </div>\r\n    <div className={'body'}>To add information here,<br/> edit the view<br/><i>\"{view.name}\"</i></div>\r\n</div>`;\r\n        const palettes: PaletteType = {\r\n            \"border-color-\": {type:\"color\", value: [{r:187, g:187, b:187, a:1}]},\r\n            \"background-\": {type:\"color\", value: [{r:238, g:242, b:243, a:1}]},\r\n            \"color-\": {type:\"color\", value: [{r:3, g:54, b:86, a:1}]},\r\n        }\r\n            const css = `.root {\r\n    border: 1px solid var(--border-color-1);\r\n    border-radius: 4px;\r\n    background-color: var(--background-1);\r\n    \r\n    font-family: Verdana, sans-serif;\r\n    color: var(--color-1);\r\n    font-size: 11px;\r\n}\r\n \r\n.root div.header {\r\n    text-align: center;\r\n    border-bottom: 1px solid var(--border-color-1);\r\n    padding: 0px;\r\n    margin: 0px;\r\n}\r\n \r\n.root div.header {\r\n    font-size: 5px;\r\n}\r\n \r\n.root div.header input:empty {\r\n    margin-left: 0px;\r\n}\r\n.root div.body {\r\n    text-align: center;\r\n    font-weight: normal;  \r\n    height: auto;\r\n    padding: 5px;\r\n}\r\n `;\r\n        let query = '';\r\n        if (forData) switch(forData.className) {\r\n            case 'DClass':\r\n                query = `context DObject inv: self.instanceof.id = '${forData.id}'`;\r\n                break;\r\n            case 'DAttribute':\r\n            case 'DReference':\r\n                query = `context DValue inv: self.instanceof.id = '${forData.id}'`;\r\n                break;\r\n            default:\r\n                query = `context ${forData.className} inv: self.id = '${forData.id}'`;\r\n                break;\r\n        }\r\n        const user = LUser.fromPointer(DUser.current);\r\n        // const project = user?.project; if(!project) return this;\r\n        let name: string;\r\n        if (forData?.name) {\r\n            name = forData.name + 'View';\r\n        } else {\r\n            const vp: LViewPoint = user?.project?.activeViewpoint || LPointerTargetable.fromPointer(Defaults.viewpoints[0]);\r\n            let names: string[] = vp.subViews.map(v => v && v.name);\r\n            name = U.increaseEndingNumber( 'view_' + 0, false, false, newName => names.indexOf(newName) >= 0);\r\n        }\r\n        return DViewElement.new2(name, jsx, (d)=>{\r\n            d.css = css;\r\n            d.palette = palettes;\r\n            d.css_MUST_RECOMPILE = true;\r\n            d.oclCondition = query;\r\n        }, true);\r\n    }\r\n}\r\n\r\n@RuntimeAccessible('LViewElement')\r\nexport class LViewElement<Context extends LogicContext<DViewElement, LViewElement> = any, D extends DViewElement = any>\r\n    extends LPointerTargetable { // MixOnlyFuncs(DViewElement, LPointerTargetable)\r\n\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LViewElement;\r\n    // static logic: typeof LViewElement;\r\n    // static structure: typeof DViewElement;\r\n\r\n    // inherited redefine\r\n    public __raw!: DViewElement;\r\n    id!: Pointer<DViewElement, 1, 1, LViewElement>;\r\n    public r!: this;\r\n\r\n\r\n\r\n    // own properties\r\n    isValidation!: boolean; // only for root views (ex viewpoints) to group views semantically.\r\n    name!: string;\r\n    __info_of__name: Info = {isGlobal: true, type: ShortAttribETypes.EString, txt:<div>Name of the view</div>}\r\n    isOverlay!:boolean;\r\n    __info_of__isOverlay: Info = {isGlobal:true, type: ShortAttribETypes.EBoolean, txt:<div>If not exclusive, the view is meant to add a functional outline of tools to a primary View, or css.\r\n            <br/>A non-exclusive view cannot be applied alone and needs an exclusive view to render the main graphical content.</div>};\r\n    get_isOverlay(c: Context): this[\"isOverlay\"] { return this.get_isExclusiveView(c); }\r\n    set_isOverlay(val: this[\"isOverlay\"], c: Context): boolean { return this.set_isExclusiveView(val, c); }\r\n\r\n\r\n\r\n    explicitApplicationPriority!: number; // priority of the view, if a node have multiple applicable views, the view with highest priority is applied.\r\n    __info_of__explicitApplicationPriority: Info = {isGlobal: true, type: ShortAttribETypes.EByte, label:\"explicit priority\",\r\n        txt: 'Application priority of view. If multiple views match an element, the highest priority will render the main jsx.' }\r\n    get_explicitApplicationPriority(c: Context): this[\"explicitApplicationPriority\"] {\r\n        if (c.data.explicitApplicationPriority !== undefined) return c.data.explicitApplicationPriority;\r\n        else return (c.data.jsCondition?.length || 1) + (c.data.oclCondition?.length || 1); }\r\n    set_explicitApplicationPriority(val: this[\"explicitApplicationPriority\"] | undefined, c: Context): boolean {\r\n        SetFieldAction.new(c.data, \"explicitApplicationPriority\", val as number, '', false);\r\n        return true;\r\n    }\r\n\r\n    isExclusiveView!: boolean;\r\n    __info_of__isExclusiveView: Info = {isGlobal:true, type: ShortAttribETypes.EBoolean, txt:<div>If not exclusive, the view is meant to add a functional outline of tools to a primary View, or css.\r\n    <br/>A non-exclusive view cannot be applied alone and needs an exclusive view to render the main graphical content.</div>};\r\n    get_isExclusiveView(c: Context): this[\"isExclusiveView\"] { return c.data.isExclusiveView; }\r\n    set_isExclusiveView(val: this[\"isExclusiveView\"], c: Context): boolean {\r\n        if (Defaults.check(c.data.id)) return true; // cannot delete or \"demote\" to decorations the main views, to make sure there is always at least 1 appliable view.\r\n        return SetFieldAction.new(c.data, \"isExclusiveView\", !!val, '', false);\r\n    }\r\n\r\n    constants?: string;\r\n    __info_of__constants: Info = {todo:true, isGlobal: true, type: \"Function():Object\", label:\"constants declaration\",\r\n        txt:<div>Data used in the visual representation, meant to be static values evaluated only once when the view is first applied.<br/>\r\n        Check default value view for an example.<br/>\r\n    </div>};\r\n    // Example 1: <code>{'{color:\"red\", background: \"gray\"}'}</code><br/>\r\n    // Example 2: <code>{'function(){\\n    let fib = [1,1]; for (let i = 2; i < 100) { fib[i] = fib[i-2]+fib[i-1]; }\\n    return fib; }'}</code><br/>\r\n\r\n    preRenderFunc?: string; // evalutate tutte le volte che l'elemento viene aggiornato (il model o la view cambia)\r\n    __info_of__preRenderFunc: Info = {isGlobal: true, obsolete: true, type: \"Function():Object\", label:\"pre-render function\",\r\n        txt:<div>Data used in the visual representation, meant to be dynamic values evaluated every time the visual representation is updated.<br/>Replaced by usageDeclarations.</div>}\r\n\r\n    protected _defaultGetter(c: Context, k: keyof Context[\"data\"]): any { return this.__defaultGetter(c, k); }\r\n\r\n    protected _defaultSetter(v: any, c: Context, k: keyof Context[\"data\"]): any { return this.__defaultSetter(v, c, k); }\r\n\r\n    jsxString!: string;\r\n    __info_of__jsxString: Info = {isGlobal: true, type: \"text\", label:\"JSX template\",\r\n        txt:<div>The main ingredient, a <a href={\"https://react.dev/learn/writing-markup-with-jsx\"}>JSX template</a> that will be visualized in the graph.</div>}\r\n    protected get_jsxString(context: Context): this['jsxString'] {\r\n        return context.data.jsxString;\r\n    }\r\n    protected set_jsxString(val: this['jsxString'], context: Context): boolean {\r\n        TRANSACTION(() => {\r\n            // const jsx = DSL.parser(val);\r\n            SetFieldAction.new(context.data, 'jsxString', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_jsxString', context.data.id, '+=', false);\r\n        });\r\n        return true;\r\n    }\r\n\r\n    usageDeclarations?: string;\r\n    __info_of__usageDeclarations: Info = {todo: false, isGlobal: true, type: \"Function():Object\", label:\"usage declarations\",\r\n        txt: <div>Subset of the global or elements's data state that is graphically used.\r\n            <br/>If specified the element will only update when one of those has changed.\r\n            <br/>Can optimize performance and ensure the node is updated even when navigating remote properties that\r\n            <br/>    don\\'t belong to this element, like visualizing the name of an object pointed by a reference.\r\n            <br/>Context: it has the usual variables present in a JSX template (data, view, node...)\r\n            <br/>    plus a special variable \"ret\" where dependencies are registered.{/*and a \"state\" variable containing the entire application state.*/}\r\n            <br/>Usage Example: see the default view for value.\r\n    </div>}\r\n    protected get_usageDeclarations(c: Context): this[\"usageDeclarations\"]{\r\n        return c.data.usageDeclarations || \"(ret)=>{ // scope contains: data, node, view, constants, state\\n\" +\r\n            \"// ** preparations and default behaviour here ** //\\n\" +\r\n            \"ret.data = data\\n\" +\r\n            \"ret.node = node\\n\" +\r\n            \"ret.view = view\\n\" +\r\n            \"// data, node, view are dependencies by default. delete them above if you want to remove them.\\n\" +\r\n            // if you want your node re-rendered every time, add a dependency to ret.state = state; or ret.update = Math.random();\r\n            \"// add preparation code here (like for loops to count something), then list the dependencies below.\\n\" +\r\n            \"// ** declarations here ** //\\n\" +\r\n            \"}\";\r\n    }\r\n    protected set_usageDeclarations(val: this['usageDeclarations'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'usageDeclarations', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_usageDeclarations', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    // format should be array of (usedPaths: string[]) starting with \"data.\" AUTOMATICALLY inefered from the ocl editor.\r\n    oclUpdateCondition!: (oldData: LModelElement, newData:LModelElement) => boolean;\r\n    __info_of__oclUpdateCondition: Info = {readType: '(view: LViewElement)=>boolean', writeType: 'function string',\r\n        txt: \"[Optionally] Declare variables that are used in OCL condition, so that OCL will be re-checked only when those values have changed.\"}\r\n    get_oclUpdateCondition(c: Context): this[\"oclUpdateCondition\"] { return transientProperties.view[c.data.id].oclUpdateCondition_PARSED; }\r\n    set_oclUpdateCondition(val: DocString<\"function\">, c: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(c.data, \"oclUpdateCondition\", val || '', '', false);\r\n            // not recalculated right now because the change needs to be sent to collaborative editor users\r\n            // it is pointer, but i don't want to set pointedby's, it is very short lived.\r\n            SetRootFieldAction.new(\"OCL_UPDATE_NEEDS_RECALCULATION\", c.data.id, '+=', false);\r\n        });\r\n        return true;\r\n    }\r\n/* moved it as setrootfield action and as array. check it after every reducer. update im same style the color palette too?\r\n    OCL_NEEDS_RECALCULATION!: boolean;\r\n    __info_of__OCL_NEEDS_RECALCULATION: Info = {hidden: true, type: ShortAttribETypes.EBoolean,\r\n        txt: \"if only the oclCondition needs to be reapplied to all model elements\"}\r\n    get_OCL_NEEDS_RECALCULATION(c: Context): this[\"OCL_NEEDS_RECALCULATION\"] { return c.data.OCL_NEEDS_RECALCULATION; }\r\n    set_OCL_NEEDS_RECALCULATION(val: this[\"OCL_NEEDS_RECALCULATION\"], c: Context): boolean { return this.cannotSet('OCL_NEEDS_RECALCULATION'); }\r\n\r\n    OCL_UPDATE_NEEDS_RECALCULATION!: boolean;\r\n    __info_of__OCL_UPDATE_NEEDS_RECALCULATION: Info = {hidden: true, type: ShortAttribETypes.EBoolean,\r\n        txt: \"if both ocl needsto be reapplied and the oclUpdateCondition -> transient.view[v.id].oclUpdateCondition_PARSED needs to be remade\"}\r\n    get_OCL_UPDATE_NEEDS_RECALCULATION(c: Context): this[\"OCL_UPDATE_NEEDS_RECALCULATION\"] { return c.data.OCL_UPDATE_NEEDS_RECALCULATION; }\r\n    set_OCL_UPDATE_NEEDS_RECALCULATION(val: this[\"OCL_UPDATE_NEEDS_RECALCULATION\"], c: Context): boolean { return this.cannotSet('OCL_UPDATE_NEEDS_RECALCULATION'); }*/\r\n\r\n    private css_MUST_RECOMPILE!: boolean;\r\n    public cssIsGlobal!: boolean;\r\n    __info_of__cssIsGlobal: Info = {type: ShortAttribETypes.EBoolean, txt: \"Use with caution!\\nIf true, custom css can affect even elements not matched with this view, or outside the graph.\"}\r\n    get_cssIsGlobal(c: Context): this[\"cssIsGlobal\"] { return c.data.cssIsGlobal; }\r\n    set_cssIsGlobal(val: this[\"cssIsGlobal\"], c: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(c.data, \"cssIsGlobal\", !!val, '', false);\r\n            // compile only when accessed, to prevent color inputs to do a mess of compilations\r\n            SetFieldAction.new(c.data, \"css_MUST_RECOMPILE\", true, '', false);\r\n        });\r\n        return true;\r\n    }\r\n    public css!: string;\r\n    __info_of__css: Info = {type: \"css string\", txt: \"Inject custom css that cannot be inserted inline like :hover or css variables.\\nSupport LESS syntax.\"}\r\n    get_css(c: Context): this[\"css\"] { return c.data.css; }\r\n    set_css(val:this[\"css\"], c: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(c.data, \"css\", val, '', false);\r\n            // compile only when accessed, to prevent color inputs to do a mess of compilations\r\n            SetFieldAction.new(c.data, \"css_MUST_RECOMPILE\", true, '', false);\r\n        });\r\n        return true;\r\n    }\r\n\r\n    compiled_css!: string;\r\n    __info_of__compiled_css: Info = { hidden: true, txt:'css + palettes compiled from less in css'};\r\n    get_compiled_css(c: Context): this[\"compiled_css\"] {\r\n        if (!c.data.css_MUST_RECOMPILE) return c.data.compiled_css; // return c.proxyObject.r.__raw.compiled_css;\r\n        let s = '';\r\n        const allowLESS = false;\r\n        let shortPaletteName: string;\r\n        let cc = c;\r\n        function rgbastring(c: tinycolor.ColorFormats.RGBA): string{\r\n            Log.exDev(!c, \"invalid color:\", {id: cc.data.id, c, shortPaletteName, p:cc.data.palette});\r\n            return \"rgba(\"+c.r+\",\"+c.g+\",\"+c.b+\",\"+c.a+\")\";\r\n        }\r\n        //let palettes = U.paletteSplit(c.data.palette);\r\n        for (let paletteName in c.data.palette) {\r\n            let palette0 = c.data.palette[paletteName] as any;\r\n            if (palette0.type === \"color\") {\r\n                let palette = palette0 as PaletteControl;\r\n                let colors = palette.value;\r\n                if (!colors.length) continue;\r\n                if (['-', '_'].includes(paletteName[paletteName.length-1])) shortPaletteName = paletteName.substring(0, paletteName.length - 1);\r\n                else shortPaletteName = paletteName;\r\n                let rgba = rgbastring(colors[0]);\r\n                // set prefixed name without number\r\n                if (allowLESS) s += \"\\t@\" + shortPaletteName + \": \" + rgba + ';\\n';\r\n                s += \"\\t--\" + shortPaletteName + \": \" + rgba + ';\\n';\r\n                // set prefixed-0 name\r\n                if (allowLESS) s += \"\\t@\" + paletteName + '0: ' + rgba + ';\\n';\r\n                s += \"\\t--\" + paletteName + '0: ' + rgba + ';\\n';\r\n                // set prefixed-1 to prefixed-...n names\r\n                for (let i = 0 ; i < colors.length; i++) {\r\n                    rgba = rgbastring(colors[i]);\r\n                    if (allowLESS) s += \"\\t@\" + paletteName + (i+1) + \": \" + rgba + ';\\n';\r\n                    s += \"\\t--\" + paletteName + (i+1) + \": \" + rgba + ';\\n';\r\n                }\r\n            } else if (palette0.type === 'path'){\r\n                let palette: PathControl = palette0;\r\n                let val = U.replaceAll(palette.value, 'view.', '');\r\n                val = U.replaceAll(val, 'this.', '');\r\n                val = U.replaceAll(val, 'x', palette.x);\r\n                val = U.replaceAll(val, 'y', palette.y);\r\n                val = U.replaceAll(val, '+', ' +');\r\n                val = U.replaceAll(val, '-', ' -'); // important: cannot add space post-dash or it's harder to distinguish unary and binary -\r\n                val = U.replaceAll(val, '/', ' / ');\r\n                val = U.replaceAll(val, '*', ' * ');\r\n                let valarr: (string | number)[] = val.split(/[,\\s]/);\r\n                // [] not allowed\r\n                valarr = (valarr as string[]).map(val => {\r\n                    if (!isNaN(+val)) return val;\r\n                    let patharr: string[] = val.split('.');\r\n                    let curr: GObject = c.data;\r\n                    for (let pathseg of patharr) {\r\n                        curr = curr[pathseg];\r\n                        Log.e(!curr && (val.length > 1 || patharr.length > 1), \"invalid variable path in css path control\", {token:val, view:c.data.name});\r\n                        if (!curr) break;\r\n                    }\r\n                    if (typeof curr === \"object\" || (typeof curr === \"undefined\" && (val.length > 1 || patharr.length > 1)))\r\n                        Log.ee( \"invalid variable path in css path control\", {token:val, view:c.data.name});\r\n                    else val = curr || val;\r\n                    return val;\r\n                }).filter(p=>!!p);\r\n\r\n                for (let i = 0 ; i < valarr.length; i++) {\r\n                    let val = valarr[i];\r\n                    switch (val) { // i avoid subtracting L 1 -1 with spaces. it's unary if doesn't have a postfix space.\r\n                        default: continue;\r\n                        case '*': valarr[i] = +valarr[i-1] * +valarr[i+1]; valarr[i-1] = valarr[i+1] = ''; break;\r\n                        case '/': valarr[i] = +valarr[i-1] / +valarr[i+1]; valarr[i-1] = valarr[i+1] = ''; break;\r\n                        case '+': valarr[i] = +valarr[i-1] + +valarr[i+1]; valarr[i-1] = valarr[i+1] = ''; break;\r\n                        case '-': valarr[i] = +valarr[i-1] - +valarr[i+1]; valarr[i-1] = valarr[i+1] = ''; break;\r\n                    }\r\n                }\r\n                val = valarr.filter(p=>!!p).join(' ');\r\n                val = \"'\"+val+\"'\";\r\n                if (allowLESS) s += \"\\t@\" + paletteName + \": \" + val + ';\\n';\r\n                s += \"\\t--\" + paletteName + ': ' + val + ';\\n';\r\n            }\r\n            else {\r\n                // number or text\r\n                let palette: NumberControl | StringControl = palette0;\r\n                let val = palette.value + ((palette as NumberControl).unit || '');\r\n                if (!val) val = \"''\";\r\n                if (allowLESS) s += \"\\t@\" + paletteName + \": \" + val + ';\\n';\r\n                s += \"\\t--\" + paletteName + ': ' + val + ';\\n';\r\n            }\r\n        }\r\n        s += '\\n\\t' + U.replaceAll(c.data.css, '\\n', '\\n\\t');\r\n        const localViewSelector = '.'+c.data.id; // '[data-viewid=\"'+c.data.id+'\"]';\r\n        s = (!c.data.cssIsGlobal ? localViewSelector : 'body') +' {\\n' + s + '\\n}';\r\n        // not an error, i'm updating directly d-view that is usually wrong, this is to prevent multiple nodes with same view to trigger compile and redux actions\r\n        // count as if it's a derived attribute not really part of the store.\r\n        c.data.css_MUST_RECOMPILE = false;\r\n        return c.data.compiled_css = s;\r\n    }\r\n    set_compiled_css(val: this[\"compiled_css\"], c: Context): boolean {\r\n        Log.exx(\"Do not use setter for this, set it directly in d-object, along with compiled_css.\" +\r\n        \"\\nOtherwise multiple nodes of the same view will start compiling together.\\n\" as any);\r\n        return false;\r\n    }\r\n\r\n    public palette!: PaletteType;\r\n    __info_of__palette: Info = {type: \"Dictionary<prefix, colors[]>\", txt:\"Specify a set of colors, numbers or text variables to be used in the graphical syntax through css variables.\"}\r\n    get_palette(c: Context): this[\"palette\"] { return c.data.palette; }\r\n    set_palette(val:this[\"palette\"], c: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(c.data, \"palette\", val, '', false);\r\n            SetFieldAction.new(c.data, \"css_MUST_RECOMPILE\", true, '', false);\r\n        });\r\n    return true; }\r\n\r\n    forceNodeType?: DocString<'component name'>;\r\n    __info_of__forceNodeType: Info = {isGlobal:true, type: \"EGraphElements\", enum: EGraphElements, label:\"force node type\",\r\n        txt:<div>Forces this element to be rendered with your component of choice instead of automatic selection when generated by a &lt;DefaultNode&gt; tag.</div>}\r\n\r\n    zoom!: GraphPoint;\r\n    __info_of__zoom: Info = {todo: true, isNode: true, type: GraphPoint.cname, txt:<div>Zooms in or out the element using css scale.</div>}\r\n    /*\r\n    scalezoomx!: boolean; // whether to resize the element normally using width-height or resize it using zoom-scale css\r\n    __info_of__scalezoomx: Info = {isNode: true, isEdge: false, isEdgePoint: false, txt:<div></div>}\r\n\r\n    scalezoomy!: boolean;\r\n    __info_of__scalezoomy: Info = {isNode: true, isEdge: false, isEdgePoint: false, txt:<div></div>}*/\r\n\r\n    // not persistent, some not shared. deve essere diverso da utente ad utente perchè dipende dal pan e zoom nel grafo dell'utente attuale.\r\n    // facendo pan su grafo html sposti gli elementi, per simulare uno spostamento del grafo e farlo sembrare illimitato.\r\n    // __transient: DViewTransientProperties;\r\n\r\n    appliableToClasses!: string[]; // class names: DModel, DPackage, DAttribute...\r\n    __info_of__appliableToClasses: Info = {isGlobal: true, type: \"EModelElements | EGraphElements\",\r\n        enum: {...EModelElements, ...EGraphElements, cname:\"EModelElements | EGraphElements\"}, label:\"applicable to\",\r\n        txt: <div>Do a low priority match with elements of this type.\r\n            <br/>This is just a shortcut with a lower priority than a OCL match.\r\n            <br/>The same result can be obtained through OCL.</div>}\r\n\r\n    appliableTo!: 'Any'|'Graph'|'GraphVertex'|'Vertex'|'Edge'|'EdgePoint'|'Field';\r\n\r\n    subViews!: LViewElement[];\r\n    __info_of__subViews: Info = {isGlobal: true, hidden: true, type: \"DViewElement[]\", label:\"sub-views\",\r\n        txt:<div>Views that are suggested to render elements contained in the current one with a higher match priority.\r\n            <br/>Like a package view giving priority to a specific Class or Enum view to render his contained Classifiers in a common theme.\r\n            <br/>If you wish to see the subview weight attached to the collection, access view.__raw.subviews instead.</div>}\r\n    get_SubViews(c: Context): this[\"subViews\"] {\r\n        delete c.data.subViews.clonedCounter;\r\n        return Object.keys(c.data.subViews).map( vid => LPointerTargetable.fromPointer(vid) as LViewElement);\r\n    }\r\n    set_SubViews(val: this[\"subViews\"] | GObject, c: Context): boolean {\r\n        let subviewsmap: GObject;\r\n        if (Array.isArray(val)) {\r\n            let ptrsArr = Pointers.fromArr(val);\r\n            subviewsmap = U.objectFromArrayValues(ptrsArr, 1.5);\r\n        } else subviewsmap = val || {};\r\n        SetFieldAction.new(c.data, \"subViews\", subviewsmap, '', true);\r\n        return true; }\r\n\r\n\r\n    setSubViewScore!: (subview: Pack1<LViewElement>, boost?: number | null) => void;\r\n    __info_of__setSubViewScore: Info = {isGlobal: true, hidden: true, type: \"function(ViewElement, numeric_score): void\", txt:<div>Adds, updates or unsets (if boost = null) a subview with his score.</div>}\r\n\r\n    // adds, updates or unsets (if boost = null) a subview with his score.\r\n    get_setSubViewScore(c: Context): ((subview: Pack1<LViewElement>, boost?: number | null) => void) {\r\n        return (subview: Pack1<LViewElement>, boost: number| null = 1.5 ) => {\r\n            let subviews = {...c.data.subViews};\r\n            let ptr = Pointers.from(subview) as Pointer<DViewElement>;\r\n            if (boost !== null) { // set mode\r\n                if (subviews[ptr] === boost) return;\r\n                subviews[ptr] = boost;\r\n            } else {// set mode\r\n                if (subviews[ptr] === undefined) return;\r\n                delete subviews[ptr];\r\n            }\r\n            SetFieldAction.new(c.data, 'subViews',  subviews, '', true);\r\n        };\r\n    }\r\n\r\n\r\n    allSubViews!: LViewElement[];\r\n    __info_of__allSubViews: Info = {type: \"ViewElement[]\", txt: \"recursively get this.subViews.\"}\r\n    get_allSubViews(c: Context): this[\"allSubViews\"] {\r\n        delete c.data.subViews.clonedCounter;\r\n        let arr: Pointer<DViewElement>[] = Object.keys(c.data.subViews);\r\n        let nextarr: Pointer<DViewElement>[] = [];\r\n        let idmap: Dictionary<Pointer, DViewElement> = {};\r\n        let s: DState = store.getState();\r\n        let dview: DViewElement;\r\n        while (arr.length) {\r\n            for (let vid of arr) {\r\n                if (idmap[vid]) continue;\r\n                dview = DPointerTargetable.fromPointer(vid, s);\r\n                if (!dview) continue;\r\n                idmap[vid] = dview;\r\n                U.arrayMergeInPlace(nextarr, Object.keys(dview.subViews));\r\n            }\r\n            arr = nextarr;\r\n            nextarr = [];\r\n        }\r\n        return LPointerTargetable.fromD(Object.values(idmap));\r\n    }\r\n    set_allSubViews(val: this[\"allSubViews\"], c: Context): boolean { return this.wrongAccessMessage(\"cannot call set_allSubViews, it is a derived attribute\"); }\r\n\r\n\r\n    defaultVSize!: GraphSize;\r\n    __info_of__defaultVSize: Info = {isNode:true, type: \"GraphSize\", label:\"default size\", txt: 'starting size of the node'}\r\n\r\n\r\n    adaptWidth!: boolean;\r\n    __info_of__adaptWidth: Info = {isNode:true, type: ShortAttribETypes.EBoolean, label:\"adapt width\",\r\n        txt: 'Whether the element should expand his width to accomodate his own contents.'}\r\n\r\n    adaptHeight!: boolean;\r\n    __info_of__adaptHeight: Info = {isNode:true, type: ShortAttribETypes.EBoolean, label:\"adapt height\",\r\n        txt: 'Whether the element should expand his height to accomodate his own contents.'}\r\n\r\n    draggable!: boolean;\r\n    __info_of__draggable: Info = {isNode: true, type: ShortAttribETypes.EBoolean, txt: 'if the element can be dragged'}\r\n\r\n    resizable!: boolean;\r\n    __info_of__resizable: Info = {isNode: true, type: ShortAttribETypes.EBoolean, txt: 'if the element can be resized'}\r\n\r\n    oclCondition!: string; // ocl selector\r\n    __info_of__oclCondition: Info = {isGlobal: true, hidden:true, label:\"OCL apply condition\", type: \"text\", // TODO: what's the difference with this.query?\r\n        txt: 'OCL Query selector to determine which nodes or model elements should apply this view'}\r\n    protected get_oclCondition(context: Context): this['oclCondition'] {\r\n        return context.data.oclCondition;\r\n    }\r\n    set_oclCondition(val: string, context: Context): boolean {\r\n        val = (val || '').trim();\r\n        if (val === context.data.oclCondition) return true;\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'oclCondition', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_ocl', context.data.id, '+=', false); // it is pointer, but for transient stuff there is no need to set pointedby's\r\n        })\r\n        return true;\r\n    }\r\n\r\n    jsCondition!: string; // js selector\r\n    __info_of__jsCondition: Info = {isGlobal: true, hidden:true, label:\"js apply condition\", type: \"text\",\r\n        txt: 'js Query selector to determine which nodes or model elements should apply this view'}\r\n    protected get_jsCondition(context: Context): this['jsCondition'] {\r\n        return context.data.jsCondition;\r\n    }\r\n    set_jsCondition(val: string, context: Context): boolean {\r\n        val = (val || '').trim();\r\n        if (val === context.data.jsCondition) return true;\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'jsCondition', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_jsCondition', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    // todo: how about allowing a view to be part in multiple vp's? so this reference would be an array or removed, and you navigate only from vp to v.\r\n    viewpoint!: LViewPoint;\r\n    __info_of__viewpoint: Info = {hidden: true, type: LViewPoint.cname, txt: <div>The collection of views containing this one, useful to activate multiple views at once.</div>}\r\n\r\n    display!: 'block'|'contents';\r\n    __info_of__display: Info = {obsolete: true, isNode: true, type: ShortAttribETypes.EString,\r\n        txt: 'complete css injection instead'}\r\n\r\n    onDragStart!: string;\r\n    __info_of__onDragStart: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated when a node begins being dragged.'}\r\n    protected get_onDragStart(context: Context): this['onDragStart'] {\r\n        return context.data.onDragStart;\r\n    }\r\n    protected set_onDragStart(val: this['onDragStart'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'onDragStart', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_onDragStart', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    onDragEnd!: string;\r\n    __info_of__onDragEnd: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated when a node finishes being dragged.'}\r\n    protected get_onDragEnd(context: Context): this['onDragEnd'] {\r\n        return context.data.onDragEnd;\r\n    }\r\n    protected set_onDragEnd(val: this['onDragEnd'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'onDragEnd', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_onDragEnd', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    whileDragging!: string;\r\n    __info_of__whileDragging: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated multiple times when mouse is moved while a node is being dragged.'}\r\n    protected get_whileDragging(context: Context): this['whileDragging'] {\r\n        return context.data.whileDragging;\r\n    }\r\n    protected set_whileDragging(val: this['whileDragging'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'whileDragging', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_whileDragging', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    onResizeStart!: string;\r\n    __info_of__onResizeStart: Info = {isNode: true, type: \"Function():void\",\r\n    txt: 'Custom event activated when a node begins being resized.'}\r\n    protected get_onResizeStart(context: Context): this['onResizeStart'] {\r\n        return context.data.onResizeStart;\r\n    }\r\n    protected set_onResizeStart(val: this['onResizeStart'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'onResizeStart', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_onResizeStart', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    onResizeEnd!: string;\r\n    __info_of__onResizeEnd: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated when a node finishes being resized.'}\r\n    protected get_onResizeEnd(context: Context): this['onResizeEnd'] {\r\n        return context.data.onResizeEnd;\r\n    }\r\n    protected set_onResizeEnd(val: this['onResizeEnd'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'onResizeEnd', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_onResizeEnd', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    whileResizing!: string;\r\n    __info_of__whileResizing: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated multiple times when mouse is moved while a node is being resized.'}\r\n    protected get_whileResizing(context: Context): this['whileResizing'] {\r\n        return context.data.whileResizing;\r\n    }\r\n    protected set_whileResizing(val: this['whileResizing'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'whileResizing', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_whileResizing', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    onRotationStart!: string;\r\n    __info_of__onRotationStart: Info = {isNode: true, type: \"Function():void\",\r\n    txt: 'Custom event activated when a node begins being rotated.'}\r\n    protected get_onRotationStart(context: Context): this['onRotationStart'] {\r\n        return context.data.onRotationStart;\r\n    }\r\n    protected set_onRotationStart(val: this['onRotationStart'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'onRotationStart', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_onRotationStart', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    onRotationEnd!: string;\r\n    __info_of__onRotationEnd: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated when a node finishes being rotated.'}\r\n    protected get_onRotationEnd(context: Context): this['onRotationEnd'] {\r\n        return context.data.onRotationEnd;\r\n    }\r\n    protected set_onRotationEnd(val: this['onRotationEnd'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n        SetFieldAction.new(context.data, 'onRotationEnd', val, '', false);\r\n        SetRootFieldAction.new('VIEWS_RECOMPILE_onRotationEnd', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    whileRotating!: string;\r\n    __info_of__whileRotating: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated multiple times when mouse is moved while a node is being rotated.'}\r\n    protected get_whileRotating(context: Context): this['whileRotating'] {\r\n        return context.data.whileRotating;\r\n    }\r\n    protected set_whileRotating(val: this['whileRotating'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'whileRotating', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_whileRotating', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    onDataUpdate!: string;\r\n    __info_of__onDataUpdate: Info = {isNode: true, type: \"Function():void\",\r\n        txt: 'Custom event activated every time a property of his model, node or view is changed while the element is visibly rendered in a graph.\\n<br>Caution! this might cause loops.'}\r\n    protected get_onDataUpdate(context: Context): this['onDataUpdate'] {\r\n        return context.data.onDataUpdate;\r\n    }\r\n    protected set_onDataUpdate(val: this['onDataUpdate'], context: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(context.data, 'onDataUpdate', val, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_onDataUpdate', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    events!: Dictionary<DocString<\"functionName\">, ((...a:any)=>any)>;\r\n    event!:  Dictionary<DocString<\"functionName\">, ((...a:any)=>any)>;\r\n    __info_of__events: Info = {todo: true, isGlobal: true, type: \"Dictionary<name, function>\",\r\n        txt: <div>Custom events callable through JSX user interaction<br/>eg: &lt;div onClick=&#123;()=&gt;view.eventname()&#125; /&gt;</div>}\r\n    __info_of__event: Info = {todo: true, isGlobal: true, type: \"Dictionary<name, function>\", txt: 'Alias for this.events'}\r\n    protected get_event(c: Context): this['events'] { return this.get_events(c); }\r\n    protected get_events(c: Context): this['events'] {\r\n        Log.exx(\"use node.events instead\", U.getStackTrace());\r\n        return {};\r\n        // return transientProperties.view[c.data.id]?.events || {};\r\n    }\r\n    protected set_events(val: DViewElement[\"events\"], context: Context): boolean {\r\n        const addUD = true;\r\n        TRANSACTION(()=> {\r\n            SetFieldAction.new(context.data, 'events', val, '+=', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_events', {\r\n                vid: context.data.id,\r\n                keys: Object.keys(val)\r\n            }, '+=', false);\r\n            let udstr = context.data.usageDeclarations;\r\n            if (!addUD || !udstr) return;\r\n            let delta = U.objectDelta(context.data.events, val, false);\r\n            for (let key in delta) {\r\n                let v = val[key];\r\n                let autogenstr = 'ret.' + key + ' = node.events.'+key+'; // @autogenerated, do not edit\\n';\r\n                if (!v) udstr = udstr.split(autogenstr).join('');\r\n                else {\r\n                    if (!context.data.events[key]) { // insert\r\n                        let findstr = '// ** declarations here ** //\\n';\r\n                        let insertat = udstr.indexOf(findstr);\r\n                        if (insertat === -1) continue; // malformed ud, will skip\r\n                        insertat += findstr.length;\r\n                        udstr = udstr.substring(0, insertat) + autogenstr + udstr.substring(insertat);\r\n                    } else {\r\n                        // just updated func body, no name changed, no need to update UD.\r\n                    }\r\n                }\r\n            }\r\n            if (udstr === context.data.usageDeclarations) return;\r\n            SetFieldAction.new(context.data, 'usageDeclarations', udstr, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_usageDeclarations', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    constraints!: GObject<\"todo, used in Vertex. they are triggered by events (view.onDragStart....) and can bound the size of the vertex\">[];\r\n    __info_of__constraints: Info = {todo: true, isNode: true, type: \"Function():void\",\r\n        txt: 'not supported yet'}\r\n\r\n\r\n    bendingMode!: EdgeBendingMode;\r\n    __info_of__bendingMode: Info = {isEdge: true, enum: EdgeBendingMode, type: '\"L\" | \"Q\" | \"C\" | \"T\" | \"S\" | \"A\" | \"QT\" | \"CS\"',\r\n        label:\"path mode\",\r\n        txt: <><div>How Svg path should use the EdgePoints to bend his shape{/*<a href={\"https://css-tricks.com/svg-path-syntax-illustrated-guide/\"}>to bend his shape</a>*/}</div></>}\r\n\r\n    edgeGapMode!: EdgeGapMode;\r\n    __info_of__edgeGapMode: Info = {isEdge: true, enum: EdgeGapMode, type: '\"gap\" | \"average\" | \"autoFill\" | \"lineFill\" | \"arcFill\"',\r\n        label:\"gap mode\",\r\n        txt: <><div>How the segment should treat the EdgePoint interruptions.<br/>\"gap\" leaves an empty space to not overlap the EdgePoint,\r\n            <br/>\"linefill\" makes the edge stop at the EdgePoint borders, but then connects the gap with a line.</div></>}\r\n\r\n    /*\r\n    bindVertexSizeToView!: boolean;\r\n    __info_of__bindVertexSizeToView: Info = {isNode:true, type:ShortAttribETypes.EBoolean, label:\"bind sizes to view\",\r\n        txt: <div>Store the vertex size inside the view instead of inside the vertex.\r\n            <br/>This causes the vertex to have different positions according to the view currently appied to it.</div>}*/\r\n    storeSize!: boolean;\r\n    __info_of__storeSize: Info = {isNode: true, type: ShortAttribETypes.EBoolean, label:\"bind sizes to view\",\r\n        txt: \"Active: the node position depends from the view currently displayed.Inactive: it depends from the graph.\"}\r\n\r\n    lazySizeUpdate!: boolean;\r\n    __info_of__lazySizeUpdate: Info = {isNode: true, type: ShortAttribETypes.EBoolean, txt: <div>If true updates the node position only when the drag action is finished. (best performance)</div>}\r\n\r\n    edgeStartOffset!: GraphPoint;\r\n    __info_of__edgeStartOffset: Info = {isEdge: true, type: GraphPoint.cname, label:\"start offset\",\r\n        txt: \"Location where outgoing edges should start their path, relative to top-upper corner of the element.\"}\r\n\r\n    edgeEndOffset!: GraphPoint;\r\n    __info_of__edgeEndOffset: Info = {isEdge: true,  type: GraphPoint.cname, label:\"end offset\",\r\n        txt: 'Same as this.edgeStartOffset'}\r\n\r\n\r\n    edgeStartOffset_isPercentage!: boolean;\r\n    __info_of__edgeStartOffset_isPercentage: Info = {isEdge: true, type:ShortAttribETypes.EBoolean, label:\"start offset is a %\",\r\n        txt: <div>Whether edgeStartOffset is an absolute value or a percentage.<br/>(eg: 50% of element width, vs 50 pixels flat).</div>}\r\n\r\n    edgeEndOffset_isPercentage!: boolean;\r\n    __info_of__edgeEndOffset_isPercentage: Info = {isEdge: true, type:ShortAttribETypes.EBoolean, label:\"end offset is a %\",\r\n        txt: <div>Whether edgeStartOffset is an absolute value or a percentage.<br/>(eg: 50% of element width, vs 50 pixels flat).</div>}\r\n\r\n\r\n    edgeStartStopAtBoundaries!: boolean;\r\n    __info_of__edgeStartStopAtBoundaries: Info = {isEdge: true, type:ShortAttribETypes.EBoolean, label:\"start cannot cross boundaries\",\r\n        txt: <div>Whether outgoing edges should cross the node boundaries overlapping the node\\'s html or stop at them.<br/>Edge arrows might enter the node if this is on.</div>}\r\n\r\n    edgeEndStopAtBoundaries!: boolean;\r\n    __info_of__edgeEndStopAtBoundaries: Info = {isEdge: true, type: ShortAttribETypes.EBoolean, label:\"end cannot cross boundaries\",\r\n        txt: <div>Whether incoming edges should cross the node boundaries overlapping the node\\'s html or stop at them.<br/>Edge arrows might enter the node if this is on.</div>}\r\n\r\n\r\n    edgePointCoordMode!: CoordinateMode;\r\n    __info_of__edgePointCoordMode: Info = {isEdgePoint: true, type: \"CoordinateMode\", enum: CoordinateMode, label:\"coordinate mode\",\r\n        txt:<div>Store coordinates as absolute coordinates or relative to start/end nodes.</div>}\r\n    set_edgePointCoordMode(val: CoordinateMode, c: Context): boolean {\r\n        TRANSACTION(()=>{\r\n            setTimeout(()=>{ // needs to be done after coordinatemode change is applied\r\n                let s: DState = store.getState();\r\n                for (let nid in transientProperties.node) {\r\n                    let tn = transientProperties.node[nid];\r\n                    if (!tn || tn.mainView?.id !== c.data.id) continue;\r\n                    let lnode: LEdgePoint = LPointerTargetable.fromPointer(nid, s);\r\n                    let triggerCoordinateModeChange = lnode as any;\r\n                    triggerCoordinateModeChange.size = lnode.size;\r\n                }\r\n            }, 100);\r\n            SetFieldAction.new(c.data, 'edgePointCoordMode', val, '', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    edgeHeadSize!: GraphPoint;\r\n    __info_of__edgeHeadSize: Info = {isEdge: true, type:GraphPoint.cname, label:\"head decorator size\", txt:<div>Size of the edge head decorator if present.</div>}\r\n\r\n    edgeTailSize!: GraphPoint;\r\n    __info_of__edgeTailSize: Info = {isEdge: true, type:GraphPoint.cname, label:\"tail decorator size\", txt:<div>Size of the tail head decorator if present.</div>}\r\n\r\n    protected size!: Dictionary<Pointer<DModelElement> | Pointer<DGraphElement>, GraphSize>; // use getSize, updateSize;\r\n    __info_of__size: Info = {isNode: true, hidden:true, type: ShortAttribETypes.EInt,\r\n        txt:<div>Do not use directly, contains all the sizes stored in this view. use getSize, updateSize instead.</div>}\r\n\r\n\r\n    __info_of__updateSize: Info = {isNode:true, hidden:true, type:\"Function(Pointer<GraphElement | ModelElement>, GraphSize) => GraphSize\",\r\n        txt:<div>Updates the size stored in this view for target element.<br/>@returns: the delta of the change between old value and new value.</div>}\r\n    __info_of__getSize: Info = {isNode:true, hidden:true, type:\"Function(Pointer<GraphElement | ModelElement>) => GraphSize\",\r\n        txt:<div>Gets the size stored in this view for target element.</div>}\r\n\r\n    // public _parsedConstants!: GObject;\r\n    // public get__parsedConstants(c: Context): this['_parsedConstants'] { return c.data._parsedConstants || {}; }\r\n\r\n    public get_constants(c: Context): this['constants'] {\r\n        return c.data.constants;\r\n    }\r\n\r\n\r\n    public static parseConstants(funcCode?: string): GObject | undefined {\r\n        if (!funcCode) return {};\r\n        let parsedConstants: GObject = {};\r\n        let context: GObject = {__param: parsedConstants};\r\n        context.__proto__ = windoww.defaultContext;\r\n        try{\r\n            let parsedFunc = U.parseFunctionWithContextAndScope(funcCode, context, context, ['ret']);\r\n            parsedFunc(context, parsedConstants);\r\n            // U.evalInContextAndScopeNew( \"(\"+funcCode+\")(this.__param)\", context, true, false, false);\r\n        } catch (e: any) {\r\n            Log.ee(\"Attempted to save an invalid view.constant setup. Cause:\\n\" + e.message.split(\"\\n\")[0], e)\r\n            return undefined;\r\n        }\r\n        return parsedConstants;\r\n    }\r\n\r\n    public set_constants(value: this['constants'], c: Context): boolean {\r\n        if (value === c.data.constants) return true;\r\n        TRANSACTION(()=> {\r\n            SetFieldAction.new(c.data.id, 'constants', value, '', false);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_constants', c.data.id, '+=', false);\r\n            SetFieldAction.new(c.data.id, \"css_MUST_RECOMPILE\", true, '', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    public get_preRenderFunc(c: Context): this['preRenderFunc'] {\r\n        return c.data.preRenderFunc;\r\n    }\r\n    public set_preRenderFunc(value: this['preRenderFunc'], c: Context): boolean {\r\n        const _value = value ? value : '() => {}';\r\n        return SetFieldAction.new(c.data.id, 'preRenderFunc', _value, '', false);\r\n    }\r\n\r\n    public get_edgeHeadSize(c: Context): this[\"edgeHeadSize\"] { return new GraphPoint(c.data.edgeHeadSize.x, c.data.edgeHeadSize.y); }\r\n    public get_edgeTailSize(c: Context): this[\"edgeTailSize\"] { return new GraphPoint(c.data.edgeTailSize.x, c.data.edgeTailSize.y); }\r\n    public set_edgeHeadSize(v: Partial<this[\"edgeHeadSize\"]>, c: Context): boolean {\r\n        let s = c.data.edgeHeadSize || new GraphPoint(0, 0);\r\n        if (!(\"x\" in v)) v.x = s.x;\r\n        if (!(\"y\" in v)) v.y = s.y;\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(c.data.id, \"css_MUST_RECOMPILE\", true, '', false);\r\n            SetFieldAction.new(c.data.id, \"edgeHeadSize\", v as GraphPoint, '', false);\r\n        });\r\n        return true; }\r\n    public set_edgeTailSize(v: Partial<this[\"edgeTailSize\"]>, c: Context): boolean {\r\n        let s = c.data.edgeTailSize || new GraphPoint(0, 0);\r\n        if (!(\"x\" in v)) v.x = s.x;\r\n        if (!(\"y\" in v)) v.y = s.y;\r\n        TRANSACTION(()=>{\r\n            SetFieldAction.new(c.data.id, \"css_MUST_RECOMPILE\", true, '', false);\r\n            SetFieldAction.new(c.data.id, \"edgeTailSize\", v as GraphPoint, '', false);\r\n        });\r\n        return true;\r\n    }\r\n\r\n    public get_viewpoint(context: Context): this[\"viewpoint\"] {\r\n        return (LViewPoint.fromPointer(context.data.viewpoint as Pointer<DViewPoint>));\r\n    }\r\n    // public set_subViews(v: Pointer<DViewPoint>[], context: Context): boolean { return this.cannotSet('subViews, call set_viewpoint on the sub-elements instead.'); }\r\n\r\n    // WARNING!! if there are mass vp assignments, preserveOrder=true will cause a vp to \"lose\" subviews and keep only the last assigned.\r\n    public set_viewpoint(v: Pointer<DViewPoint>, context: Context, manualDview?: DViewElement, preserveOrder: boolean = false): boolean {\r\n        let ret = false;\r\n        let vpid: Pointer<DViewPoint> = v && Pointers.from(v);\r\n        const data =  (manualDview || context.data);\r\n        let id = data.id;\r\n        let oldvpid: Pointer<DViewPoint> = data.viewpoint;\r\n        if (vpid === oldvpid) return true;\r\n\r\n        TRANSACTION(()=>{\r\n            ret = SetFieldAction.new(id, \"viewpoint\", vpid, '', true);\r\n            if (oldvpid) {\r\n                let subViews = {...DPointerTargetable.fromPointer(oldvpid).subViews};\r\n                delete subViews[id];\r\n                SetFieldAction.new(oldvpid, \"subViews\", subViews, '', true);\r\n            }\r\n            if (vpid) {\r\n                let name = data.name;\r\n                let copyPos = name.indexOf(\"Copy\");\r\n                let oldSubViews = DPointerTargetable.fromPointer(vpid).subViews;\r\n                let insertBefore: string = '';\r\n                let subViews: GObject = {};\r\n                if (copyPos) {\r\n                    let copiedFromName: string = copyPos ? name.substring(0, copyPos).trim() : '';\r\n                    if (copiedFromName in oldSubViews) insertBefore = copiedFromName;\r\n                    else {\r\n                        for (let key in oldSubViews) if (key.indexOf(copiedFromName) === 0) { insertBefore = key; break; }\r\n                    }\r\n                }\r\n\r\n\r\n                // WARNING!! if there are mass vp assignments, this will cause a vp to \"lose\" subviews and keep only the last assigned.\r\n                if (preserveOrder && insertBefore) {\r\n                    subViews = {};\r\n                    for (let key in oldSubViews) {\r\n                        subViews[key] = oldSubViews[key];\r\n                        // just to reinsert subviews **in order** so Object.keys() fits the new subview near the cloned one.\r\n                        if (key === insertBefore) subViews[id] = subViews[insertBefore];\r\n                    }\r\n                } else { subViews = {...oldSubViews}; subViews[id] = 1.5; }\r\n                subViews[id] = insertBefore ? subViews[insertBefore] : 1.5;\r\n                SetFieldAction.new(vpid, \"subViews\", subViews, '+=', true);\r\n            }\r\n        })\r\n        return ret;\r\n    }\r\n\r\n\r\n    public get_subViews(context: Context, key: string): LViewElement[]{\r\n        let subViewsPointers = context.data.subViews;\r\n        let subViews: LViewElement[] = [];\r\n        for (let pointer in subViewsPointers) {\r\n            let item: LViewElement = MyProxyHandler.wrap(pointer);\r\n            if (item !== undefined) subViews.push(item);\r\n        }\r\n        return subViews;\r\n    }\r\n\r\n    // returns the delta of change\r\n    public updateSize(id: Pointer<DModelElement> | Pointer<DGraphElement>, size: Partial<GraphSize>): boolean { return this.wrongAccessMessage(\"updateSize\"); }\r\n    public get_updateSize(context: Context): this[\"updateSize\"] {\r\n        return (id: Pointer<DModelElement> | Pointer<DGraphElement>, size0: Partial<GraphSize>) => {\r\n            let size: EPSize = size0 as any;\r\n            let vp = context.proxyObject.viewpoint;\r\n            if (!context.data.storeSize) {\r\n                if (vp?.storeSize) return vp.updateSize(id, size);\r\n                return false;\r\n            }\r\n            let vsize: EPSize = (context.data.size[id] || vp?.__raw.size[id]) as EPSize;\r\n            let newSize: EPSize = new GraphSize() as EPSize;\r\n            if (size.currentCoordType === vsize.currentCoordType) { // if samecoord system mix them.\r\n                newSize.x = size?.x !== undefined ? size.x : vsize.x;\r\n                newSize.y = size?.y !== undefined ? size.y : vsize.y;\r\n            } else if (size.x !== undefined && size.y !== undefined) { // if different coord system pick all of size\r\n                newSize.x = size.x;\r\n                newSize.y = size.y;\r\n                newSize.currentCoordType = size.currentCoordType || CoordinateMode.absolute;\r\n            } else if (vsize.x !== undefined && vsize.y !== undefined) { // or all of vsize if size was invalid\r\n                newSize.x = vsize.x;\r\n                newSize.y = vsize.y;\r\n                newSize.currentCoordType = vsize.currentCoordType || CoordinateMode.absolute;\r\n            }\r\n            let defaultsize = context.data.defaultVSize || vp?.__raw.defaultVSize;\r\n            if (newSize.x === undefined || newSize.y === undefined) { // only if pos is invalid, i take defaultvsize and force to use coord absolute.\r\n                newSize = new GraphSize().clone(defaultsize) as EPSize;\r\n                newSize.currentCoordType = CoordinateMode.absolute;\r\n            }\r\n            // w and h are always absolute so they can be mixed to whathever coordinate mode indipendently from the rest.\r\n            newSize.w = size?.w !== undefined ? size.w : vsize.w;\r\n            newSize.h = size?.h !== undefined ? size.h : vsize.h;\r\n            if (newSize.h === undefined) newSize.h = defaultsize.h || 10;\r\n            if (newSize.w === undefined) newSize.w = defaultsize.w || 10;\r\n\r\n            if (!newSize.equals(vsize)) SetFieldAction.new(context.data.id, \"size.\" + id as any, newSize);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public get_defaultVSize(context: Context): this[\"defaultVSize\"]{ return context.data.defaultVSize; }\r\n    public getSize(id: Pointer<DModelElement> | Pointer<DGraphElement>): GraphSize | undefined{ return this.wrongAccessMessage(\"getSize\"); }\r\n    public get_getSize(context: Context): ((...a:Parameters<this[\"getSize\"]>)=>ReturnType<LViewElement[\"getSize\"]>) {\r\n        function impl_getSize(id: Pointer<DModelElement> | Pointer<DGraphElement>): ReturnType<LViewElement[\"getSize\"]> {\r\n            if (typeof id === \"object\") id = (id as any).id;\r\n            let view = context.data;\r\n            let ret: GraphSize;\r\n            if (view.storeSize){\r\n                ret = view.size[id];\r\n                if(ret) return ret; }\r\n            let vp = context.proxyObject.viewpoint;\r\n            if (vp && view.id !== vp.id && vp.storeSize){\r\n                ret = vp.size[id];\r\n                if (ret) return ret; }\r\n            return undefined;\r\n        }\r\n\r\n        return impl_getSize; }\r\n\r\n    set_generic_entry(context: Context, key: keyof DViewElement, val: any): boolean {\r\n        console.log('set_generic_entry', {context, key, val});\r\n        SetFieldAction.new(context.data, key, val);\r\n        return true;\r\n    }\r\n\r\n    get_children(context: Context): never[] { return []; }\r\n\r\n\r\n    get_lazySizeUpdate(context: Context): D[\"lazySizeUpdate\"] { return Debug.lightMode || context.data.lazySizeUpdate; }\r\n    set_lazySizeUpdate(val: D[\"lazySizeUpdate\"], context: Context): boolean {\r\n        return Debug.lightMode || this.set_generic_entry(context, 'lazySizeUpdate', val);\r\n    }\r\n\r\n    get_bendingMode(context: Context): D[\"bendingMode\"] { return context.data.bendingMode; }\r\n    set_bendingMode(val: D[\"bendingMode\"], context: Context): boolean {\r\n        return this.set_generic_entry(context, 'bendingMode', val);\r\n    }\r\n\r\n    set_appliableTo(val: this[\"appliableTo\"], c: Context): boolean { // appliableTo >= forcenodetype\r\n        if (!val) val = 'Any';\r\n        let forceNodeType: string = c.data.forceNodeType as string;\r\n        if (forceNodeType !== val) switch(val) {\r\n            // case \"Any\": break;\r\n            default: forceNodeType = val;\r\n        }\r\n\r\n        console.log(\"set_appliableTo\", {forceNodeType, val});\r\n        BEGIN()\r\n        if (forceNodeType !== c.data.forceNodeType) SetFieldAction.new(c.data, \"forceNodeType\", forceNodeType, '', false);\r\n        SetFieldAction.new(c.data, \"appliableTo\", val, '', false);\r\n        END();\r\n        return true;\r\n    }\r\n    set_forceNodeType(val: this[\"forceNodeType\"], c: Context): boolean {\r\n        if (!val) val = 'Any';\r\n        /*let appliableTo: string = c.data.appliableTo as string;\r\n        if (appliableTo !== val) switch (appliableTo){\r\n            case undefined: case 'Any': break;\r\n            //case 'GraphVertex': if ((appliableTo as any) !== 'Graph' && (appliableTo as any) !== 'Vertex') appliableTo = val; break;\r\n            default: appliableTo = val; break;\r\n        }*/\r\n        BEGIN()\r\n        // if (appliableTo !== c.data.appliableTo) SetFieldAction.new(c.data, \"appliableTo\", appliableTo, '', false);\r\n        SetFieldAction.new(c.data, \"forceNodeType\", val, '', false);\r\n        END();\r\n        return true;\r\n    }\r\n    get_appliableToClasses(context: Context): this[\"appliableToClasses\"] { return context.data.appliableToClasses || []; }\r\n    set_appliableToClasses(val: this[\"appliableToClasses\"], context: Context): boolean {\r\n        if (!val) val = [];\r\n        else if (!Array.isArray(val)) val = [val];\r\n        val.sort();\r\n        let hasChanged: boolean;\r\n        if (val.length === context.data.appliableToClasses?.length) {\r\n            hasChanged = false;\r\n            for (let i = 0; i < val.length; i++) if (val[i] !== context.data.appliableToClasses[i]) { hasChanged = true; break; }\r\n        } else hasChanged = true;\r\n\r\n        if (!hasChanged) return true;\r\n        TRANSACTION(()=>{\r\n            this.set_generic_entry(context, \"appliableToClasses\", val);\r\n            SetRootFieldAction.new('VIEWS_RECOMPILE_preconditions', context.data.id, '+=', false);\r\n        })\r\n        return true;\r\n    }\r\n\r\n    set_defaultVSize(val: GraphSize, c: Context): boolean{\r\n        if (!val || typeof val !== \"object\") return true;\r\n        let x = val.x ?? +val.x;\r\n        let y = val.y ?? +val.y;\r\n        let w = val.w ?? +val.w;\r\n        let h = val.h ?? +val.h;\r\n        if (isNaN(x)) x = c.data.defaultVSize.x;\r\n        if (isNaN(y)) y = c.data.defaultVSize.y;\r\n        if (isNaN(w)) w = c.data.defaultVSize.w;\r\n        if (isNaN(h)) h = c.data.defaultVSize.h;\r\n        if (x === c.data.defaultVSize.x && y === c.data.defaultVSize.y && w === c.data.defaultVSize.w && h === c.data.defaultVSize.h) return true;\r\n        SetFieldAction.new(c.data, 'defaultVSize', {x, y, w, h} as any, '', false);\r\n        return true\r\n    }\r\n\r\n\r\n    public duplicate(deep: boolean = true, new_vp?: DuplicateVPChange): this {\r\n        return this.wrongAccessMessage( (this.constructor as typeof RuntimeAccessibleClass).cname + \"duplicate()\"); }\r\n    protected get_duplicate(c: Context): ((deep?: boolean, new_vp?: DuplicateVPChange) => LViewElement) {\r\n        return (deep: boolean = false, new_vp0?: DuplicateVPChange) => {\r\n            console.log(\"DViewelement.duplicate\", {cn: c.data.className, n:c.data.name, deep, new_vp0});\r\n            let lview: LViewElement = undefined as any;\r\n            let state: DState = store.getState();\r\n            TRANSACTION( () => {\r\n                let pvid: Pointer<DViewPoint> = c.data.viewpoint as Pointer<DViewPoint>;\r\n                const dclone: DViewElement = c.data.className === 'DViewPoint' ?\r\n                    DViewPoint.new2(`${c.data.name} Copy`, '', undefined, true) :\r\n                    DViewElement.new2(`${c.data.name} Copy`, '', undefined, true, 'skip');\r\n                lview = LPointerTargetable.fromD(dclone);\r\n                const new_vp: DuplicateVPChange = new_vp0 || {pvid};\r\n                // || {pvid,  score: (DPointerTargetable.from(pvid, state) as DViewElement).subViews[c.data.id]}\r\n\r\n                for (let key in c.data) {\r\n                    switch(key) {\r\n                        case 'subViews':\r\n                            // duplicate childrens only if deep\r\n                            if (!deep) break;\r\n                            // let subviews: Dictionary<Pointer, number> = {}\r\n                            for (const oldvid in c.data.subViews) {\r\n                                const oldScore = c.data.subViews[oldvid];\r\n                                (LPointerTargetable.fromPointer(oldvid, state) as LViewElement).duplicate(deep, {pvid:dclone.id/*, score:oldScore*/});\r\n                                // then everything is set inside case 'viewpoint' of subviews cloning\r\n                            }\r\n                            //lview.subViews = subviews as any;\r\n                            break;\r\n                        case 'father':\r\n                        case 'viewpoint':\r\n                            // update parent view\r\n                            /*\r\n                            let subviews: Dictionary<Pointer, number> = {};\r\n                            subviews[dclone.id] = new_vp.score;\r\n                            SetFieldAction.new(new_vp.pvid, 'subViews', subviews, '+=', true);\r\n                            SetFieldAction.new(dclone.id, 'viewpoint', new_vp.pvid, '+=', true);*/\r\n                            // insert in-place right after the cloned view, with old score.\r\n                            this.set_viewpoint(new_vp.pvid, undefined as any, dclone, !deep);\r\n                            // SetFieldAction.new(dclone.id, 'father', new_vp.vpid, '+=', true);\r\n                            break;\r\n                        case '':\r\n                        case 'id':\r\n                        case 'name':\r\n                        case 'className':\r\n                        case 'pointedBy':\r\n                        case '_storePath':\r\n                        case '_subMaps':\r\n                        case 'clonedCounter': break;\r\n                        case 'css_MUST_RECOMPILE': break;\r\n\r\n                        case 'isValidation':\r\n                            console.log(\"duplicate \" + c.data.name + \" set isvalidation\", {data:c.data, iv:c.data.isValidation});\r\n                            (lview as any)[key] = (c.data as any)[key];\r\n                            break;\r\n                        default:\r\n                            try {\r\n                                (lview as any)[key] = (c.data as any)[key];\r\n                            } catch(e) {\r\n                            //    Log.ee('Error on duplicate view:', e);\r\n                            }\r\n                    }\r\n                }\r\n\r\n                // insert in viewpoint.subview\r\n                //let defaultViews: Dictionary<Pointer, boolean> = Defaults.defaultViewsMap;\r\n                let vp: LViewPoint = c.proxyObject.viewpoint;\r\n                // let oldViews: Pointer<DViewElement>[] = Object.keys(vp.__raw.subViews);\r\n                // if (Defaults.viewpoints.indexOf(vpid)) oldViews = oldViews.filter( vid => !defaultViews[vid]);\r\n                // let i: number = oldViews.indexOf(c.data.id);\r\n                /*\r\n                if (i === -1) oldViews.push(dclone.id);\r\n                else oldViews.splice(i+1, 0, dclone.id); // insert in-place right after the cloned view\r\n                vp.subViews = oldViews as any;*/\r\n                // SetRootFieldAction.new('stackViews', dview.id, '+=', true);\r\n\r\n\r\n                const isVP = c.data.className === 'DViewPoint';\r\n                if (isVP) SetRootFieldAction.new(`viewpoints`, c.data.id, '+=', true);\r\n                else SetRootFieldAction.new(`viewelements`, c.data.id, '+=', true);\r\n                for (let key of DViewElement.RecompileKeys) SetRootFieldAction.new(`VIEWS_RECOMPILE_${key}`, c.data.id, '+=', false);\r\n            })\r\n            return lview;\r\n        }\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DPointerTargetable, DViewElement);\r\nRuntimeAccessibleClass.set_extend(LPointerTargetable, LViewElement);\r\n\r\ntype DuplicateVPChange = {\r\n    pvid: Pointer<DViewElement>,\r\n    // score: number //unused\r\n}\r\nexport type WViewElement = getWParams<LViewElement, DPointerTargetable>;\r\n\r\n@RuntimeAccessible('DViewTransientProperties')\r\nexport class DViewTransientProperties extends RuntimeAccessibleClass{\r\n    static logic: typeof LPointerTargetable;\r\n    _isDViewTransientProperties!: true;\r\n    // isSelected: Dictionary<DocString<Pointer<DUser>>, boolean> = {};\r\n    // private: DViewPrivateTransientProperties;\r\n}\r\n\r\nRuntimeAccessibleClass.set_extend(RuntimeAccessibleClass, DViewTransientProperties);\r\n@RuntimeAccessible('LViewTransientProperties')\r\nexport class LViewTransientProperties extends LPointerTargetable{\r\n    static structure: typeof DPointerTargetable;\r\n    static singleton: LViewTransientProperties;\r\n    _isLViewTransientProperties!: true;\r\n\r\n    // isSelected: Dictionary<DocString<Pointer<DUser>>, boolean> = {};\r\n    // private!: LViewPrivateTransientProperties;\r\n    /*\r\n        get_private(context: LogicContext<DViewTransientProperties>): LViewPrivateTransientProperties {\r\n            return LViewTransientProperties.wrap(context.data.private, context.proxy.baseObjInLookup, context.proxy.additionalPath + '.private'); }*/\r\n    /*\r\n        get_isSelected(logicContext: LogicContext<TargetableProxyHandler<DViewTransientProperties>, DViewTransientProperties>): Proxyfied<Dictionary> {\r\n            // @ts-ignore for $ at end of getpath\r\n            console.log('GET_ISSELECTED handler func');\r\n            return TargetableProxyHandler.getMap(logicContext.data.isSelected, logicContext, logicContext.proxy.additionalPath + '.' + (getPath as this).isSelected.$);\r\n        }*/\r\n}\r\n\r\nRuntimeAccessibleClass.set_extend(DPointerTargetable, DViewTransientProperties);\r\nRuntimeAccessibleClass.set_extend(LPointerTargetable, LViewTransientProperties);\r\nexport type WViewTransientProperties = getWParams<LViewTransientProperties, DViewTransientProperties>;\r\n\r\n/*\r\n\r\n@RuntimeAccessible\r\nexport class DViewPrivateTransientProperties extends DPointerTargetable{\r\n    static logic: typeof LViewPrivateTransientProperties;\r\n\r\n    public size: GraphSize\r\n    constructor(size?: GraphSize) {\r\n        super();\r\n        this.size = size || defaultVSize;\r\n    }\r\n}\r\n\r\n@RuntimeAccessible\r\nexport class LViewPrivateTransientProperties extends DViewPrivateTransientProperties{\r\n    static structure: typeof DViewPrivateTransientProperties;\r\n    static singleton: LViewPrivateTransientProperties;\r\n\r\n}*/\r\n// shapeless component, receive jsx from redux\r\n// can access any of the redux state, but will usually access 1-2 var among many,\r\n// how can i dynamically mapStateToProps to map only the required ones?\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}