{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\rightbar\\\\viewpointsEditor\\\\ViewEditorNestedVersion.tsx\",\n  _this = this;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Input, TRANSACTION, windoww } from '../../../joiner';\nimport { DUser, DViewPoint, LUser, U } from '../../../joiner';\nimport { GenericTree } from \"../../forEndUser/Tree\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NestedViewComponent(props) {\n  const project = props.project;\n  const viewpoints = props.viewpoints;\n  const active = props.active;\n  const editName = (evt, vp) => {\n    vp.name = evt.target.value;\n  };\n  const addVP = () => {\n    let name = 'viewpoint_' + 0;\n    let viewpointNames = viewpoints.map(vp => vp && vp.name);\n    name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\n    DViewPoint.new2(name, '', d => {/*d.isExclusiveView = !(d.isValidation = props.validation); */});\n  };\n  const deleteV = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n\n  const deleteVP = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n\n  const activateVP = viewPoint => {\n    project.activeViewpoint = viewPoint;\n  };\n  const clone = v => {\n    v.duplicate(true);\n  };\n  const getSubElements = v => v.subViews;\n  function renderEntry(e, childrens, isExpanded, depth, path) {\n    var _data$children, _data$children2;\n    let d = e.__raw;\n    let appliableTo;\n    if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0];else appliableTo = \"Mixed\";\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"p-2\",\n      children: [((_data$children = data.children) === null || _data$children === void 0 ? void 0 : _data$children.length) >= 1 ? ((_data$children2 = data.children) === null || _data$children2 === void 0 ? void 0 : _data$children2.length) && isExpanded ? /*#__PURE__*/_jsxDEV(\"i\", {\n        style: {\n          fontSize: '0.7em',\n          color: 'gray'\n        },\n        className: 'bi bi-chevron-right cursor-pointer d-block my-auto',\n        onClick: setFilter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n        style: {\n          fontSize: '0.7em',\n          color: 'gray'\n        },\n        className: 'bi bi-chevron-down cursor-pointer d-block my-auto',\n        onClick: setFilter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n        style: {\n          fontSize: '0.75em',\n          color: 'whitesmoke'\n        },\n        className: 'bi bi-caret-right-fill d-block my-auto'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `type tree-${appliableTo}`,\n        children: appliableTo === \"Mixed\" ? \"*\" : appliableTo.slice(1, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [d.name, \" depth: \", depth]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: childrens.map((v, i) => /*#__PURE__*/_jsxDEV(GenericTree, {\n          data: v,\n          getSubElements: getSubElements,\n          renderEntry: renderEntry,\n          depth: depth + 1,\n          path: [...path, i]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 43\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, this);\n  }\n  let test = windoww;\n  if (test) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'd-flex p-2',\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        className: 'ms-1 my-auto',\n        children: \"Views\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'btn btn-primary ms-auto',\n        onClick: addVP,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: 'p-1 bi bi-plus'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"p-2\",\n      children: viewpoints.map(vp => /*#__PURE__*/_jsxDEV(GenericTree, {\n        data: vp,\n        getSubElements: getSubElements,\n        renderEntry: renderEntry\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 29\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 22\n  }, this);\n  let hoverID = '';\n  function setHoverID(a) {}\n  function select(a) {}\n  let validation; // props.validation\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [viewpoints.map((viewpoint, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'd-flex p-1 mt-1 border round mx-1',\n        onMouseEnter: e => setHoverID(viewpoint.id),\n        onMouseLeave: e => setHoverID(''),\n        style: {\n          backgroundColor: active.id === viewpoint.id ? 'white' : hoverID === viewpoint.id ? '#E0E0E0' : 'transparent'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: 'p-0 input hidden-input',\n          value: viewpoint.name,\n          type: 'text',\n          onChange: evt => {\n            editName(evt, viewpoint);\n          },\n          disabled: index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          className: \"ms-auto\",\n          data: viewpoint,\n          field: \"isExclusiveView\",\n          type: \"checkbox\",\n          label: \"Is exclusive\",\n          readonly: validation || index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), (!validation || true) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          disabled: active.id === viewpoint.id,\n          onClick: evt => {\n            select(viewpoint);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-check2'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 43\n        }, this)\n        // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\n        , /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          onClick: evt => {\n            clone(viewpoint);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-clipboard2-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-danger ms-1',\n          disabled: index <= 0 || active.id === viewpoint.id,\n          onClick: e => deleteV(e, viewpoint),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-trash3-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 20\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: 'p-1',\n      children: \"*To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 13\n  }, this);\n}\n_c = NestedViewComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  const user = LUser.fromPointer(DUser.current);\n  const project = U.wrapper(user.project);\n  ret.project = project;\n  ret.viewpoints = project.viewpoints.filter(vp => !!vp /* && vp.isValidation === ownProps.validation*/);\n  ret.active = project.activeViewpoint;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const NestedViewConnected = connect(mapStateToProps, mapDispatchToProps)(NestedViewComponent);\nexport const NestedView = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(NestedViewConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = NestedView;\nexport default NestedView;\nvar _c, _c2;\n$RefreshReg$(_c, \"NestedViewComponent\");\n$RefreshReg$(_c2, \"NestedView\");","map":{"version":3,"names":["React","connect","Input","TRANSACTION","windoww","DUser","DViewPoint","LUser","U","GenericTree","jsxDEV","_jsxDEV","NestedViewComponent","props","project","viewpoints","active","editName","evt","vp","name","target","value","addVP","viewpointNames","map","increaseEndingNumber","newName","indexOf","new2","d","deleteV","e","viewPoint","stopPropagation","delete","deleteVP","activateVP","activeViewpoint","clone","v","duplicate","getSubElements","subViews","renderEntry","childrens","isExpanded","depth","path","_data$children","_data$children2","__raw","appliableTo","appliableToClasses","length","className","children","data","style","fontSize","color","onClick","setFilter","fileName","_jsxFileName","lineNumber","columnNumber","slice","i","test","hoverID","setHoverID","a","select","validation","viewpoint","index","onMouseEnter","id","onMouseLeave","backgroundColor","type","onChange","disabled","field","label","readonly","_c","mapStateToProps","state","ownProps","ret","user","fromPointer","current","wrapper","filter","mapDispatchToProps","dispatch","NestedViewConnected","NestedView","arguments","undefined","_this","_c2","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/viewpointsEditor/ViewEditorNestedVersion.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DState, Input, LViewElement, TRANSACTION, windoww} from '../../../joiner';\r\nimport {DUser, DViewPoint, LProject, LUser, LViewPoint, U, SetFieldAction} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\nimport {add} from \"lodash\";\r\nimport Tree, {GenericTree} from \"../../forEndUser/Tree\";\r\n\r\n\r\nfunction NestedViewComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const viewpoints = props.viewpoints;\r\n    const active = props.active;\r\n\r\n    const editName = (evt: React.ChangeEvent<HTMLInputElement>, vp: LViewElement) => { vp.name = evt.target.value; }\r\n    const addVP = () => {\r\n        let name = 'viewpoint_' + 0;\r\n        let viewpointNames: string[] = viewpoints.map(vp => vp && vp.name);\r\n        name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\r\n        DViewPoint.new2(name, '', (d) => { /*d.isExclusiveView = !(d.isValidation = props.validation); */} );\r\n    }\r\n    const deleteV = (e: React.MouseEvent, viewPoint: LViewElement) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n    const deleteVP = (e: React.MouseEvent, viewPoint: LViewPoint) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n\r\n    const activateVP = (viewPoint: LViewPoint) => { project.activeViewpoint = viewPoint; }\r\n    const clone = (v: LViewElement) => { v.duplicate(true); }\r\n    const getSubElements = (v: LViewElement) => v.subViews;\r\n\r\n    function renderEntry(e: LViewElement, childrens: LViewElement[], isExpanded: boolean, depth: number, path: number[]): JSX.Element{\r\n        let d = e.__raw;\r\n        let appliableTo: string;\r\n        if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0];\r\n        else appliableTo = \"Mixed\";\r\n\r\n        return <li className={\"p-2\"}>\r\n            {data.children?.length >= 1 ? ((data.children?.length && isExpanded) ?\r\n                        <i style={{fontSize: '0.7em', color: 'gray'}} className={'bi bi-chevron-right cursor-pointer d-block my-auto'} onClick={setFilter} /> :\r\n                        <i style={{fontSize: '0.7em', color: 'gray'}} className={'bi bi-chevron-down cursor-pointer d-block my-auto'} onClick={setFilter} />\r\n                ) :\r\n                <i style={{fontSize: '0.75em', color: 'whitesmoke'}} className={'bi bi-caret-right-fill d-block my-auto'} />\r\n            }\r\n            <div className={`type tree-${appliableTo}`}>{appliableTo === \"Mixed\" ? \"*\" : appliableTo.slice(1, 2)}</div>\r\n            <div>{d.name} depth: {depth}</div>\r\n            <ul>{childrens.map( (v, i) => <GenericTree data={v} getSubElements={getSubElements} renderEntry={renderEntry} depth={depth + 1} path={[...path, i]}/>)}</ul>\r\n        </li>;\r\n    }\r\n    let test = windoww;\r\n    if (test) return(<div>\r\n        <div className={'d-flex p-2'}>\r\n            <b className={'ms-1 my-auto'}>Views</b>\r\n            <button className={'btn btn-primary ms-auto'} onClick={addVP}>\r\n                <i className={'p-1 bi bi-plus'}></i>\r\n            </button>\r\n        </div>\r\n        <ul className={\"p-2\"}>\r\n        {viewpoints.map(vp=><GenericTree data={vp} getSubElements={getSubElements} renderEntry={renderEntry} />)}\r\n        </ul>\r\n    </div>);\r\n\r\n    let hoverID: any = '';\r\n    function setHoverID(a:any){}\r\n    function select(a: any){}\r\n    let validation: false;// props.validation\r\n    return (<div>\r\n        {viewpoints.map((viewpoint, index) => {\r\n            return <div key={index} className={'d-flex p-1 mt-1 border round mx-1'}\r\n                        onMouseEnter={(e) => setHoverID(viewpoint.id)}\r\n                        onMouseLeave={(e) => setHoverID('')}\r\n                        style={{backgroundColor: (active.id === viewpoint.id) ? 'white' :\r\n                                (hoverID === viewpoint.id ? '#E0E0E0' : 'transparent')}}>\r\n                <input className={'p-0 input hidden-input'} value={viewpoint.name} type={'text'}\r\n                       onChange={(evt) => {editName(evt, viewpoint)}} disabled={index <= 0} />\r\n                <Input className={\"ms-auto\"} data={viewpoint} field={\"isExclusiveView\"} type={\"checkbox\"}\r\n                       label={\"Is exclusive\"} readonly={validation || index <= 0} />\r\n                {(!validation || true) && <button className={'btn btn-success ms-1'} disabled={active.id === viewpoint.id}\r\n                                                        onClick={(evt) => {select(viewpoint)}}>\r\n                    <i className={'p-1 bi bi-check2'}></i>\r\n                </button>\r\n                    // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\r\n                }\r\n                <button className={'btn btn-success ms-1'}\r\n                        onClick={(evt) => {clone(viewpoint)}}>\r\n                    <i className={'p-1 bi bi-clipboard2-fill'}></i>\r\n                </button>\r\n                <button className={'btn btn-danger ms-1'} disabled={index <= 0 || active.id === viewpoint.id}\r\n                        onClick={(e) => deleteV(e, viewpoint)}>\r\n                    <i className={'p-1 bi bi-trash3-fill'}></i>\r\n                </button>\r\n            </div>\r\n        })}\r\n        <label className={'p-1'}>\r\n            *To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\r\n        </label>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n}\r\ninterface StateProps {\r\n    project: LProject;\r\n    viewpoints: LViewPoint[];\r\n    active: LViewPoint;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user: LUser = LUser.fromPointer(DUser.current);\r\n    const project = U.wrapper<LProject>(user.project);\r\n    ret.project = project;\r\n    ret.viewpoints = project.viewpoints.filter( (vp) => !!vp/* && vp.isValidation === ownProps.validation*/);\r\n    ret.active = project.activeViewpoint;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const NestedViewConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NestedViewComponent);\r\n\r\nexport const NestedView = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <NestedViewConnected {...{...props, children}} />;\r\n}\r\nexport default NestedView;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}