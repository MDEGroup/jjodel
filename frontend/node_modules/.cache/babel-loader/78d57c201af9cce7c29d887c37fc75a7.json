{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import{connect}from'react-redux';import{L,Input,GenericInput,SetRootFieldAction}from'../../../joiner';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NodeEditorComponent(props){var _node$father,_node$father2;var selected=props.selected;var editable=true;if(!(selected===null||selected===void 0?void 0:selected.node))return/*#__PURE__*/_jsx(_Fragment,{});var node=selected.node;var dnode=node.__raw||node;var cname=dnode.className;var isGraph=['DGraph','DGraphVertex'].includes(cname);// RuntimeAccessibleClass.extends(cname, 'DGraph');\nvar isVertex=['DVoidVertex','DVertex','DEdgePoint'].includes(cname);// RuntimeAccessibleClass.extends(cname, 'DVoidVertex');\nvar isEdge=['DVoidEdge','DEdge'].includes(cname);// RuntimeAccessibleClass.extends(cname, 'DVoidEdge');\nvar isField=!isGraph&&!isVertex&&!isEdge;console.log('Style editor',{cname:cname,isVertex:isVertex,isGraph:isGraph,isEdge:isEdge,selected:selected});var asGraph=isGraph&&node;var asVertex=isVertex&&node;var asEdge=isEdge&&node;var asField=isField&&node;function openNode(id){SetRootFieldAction.new('_lastSelected.node',id,'',false);}function getNodeLabel(node){var _node$model;if(!node)return'error';var model=(_node$model=node.model)===null||_node$model===void 0?void 0:_node$model.__raw;if(!model)return node.className;return node.className+' - '+(model.name||model.className);}function getEdgeLabel(edge){var _edge$start,_edge$start$model,_edge$end,_edge$end$model;var s=edge===null||edge===void 0?void 0:(_edge$start=edge.start)===null||_edge$start===void 0?void 0:(_edge$start$model=_edge$start.model)===null||_edge$start$model===void 0?void 0:_edge$start$model.__raw;var e=edge===null||edge===void 0?void 0:(_edge$end=edge.end)===null||_edge$end===void 0?void 0:(_edge$end$model=_edge$end.model)===null||_edge$end$model===void 0?void 0:_edge$end$model.__raw;return[s?s.name||s.className:/*#__PURE__*/_jsx(\"i\",{style:{color:'orange'},children:\"empty\"}),/*#__PURE__*/_jsx(\"i\",{className:'bi bi-arrow-right ms-1 me-1'}),e?e.name||e.className:/*#__PURE__*/_jsx(\"i\",{style:{color:'orange'},children:\"empty\"})];}var clickableStyle={cursor:'pointer',color:'gray'};var headerStyle={marginBottom:0,marginTop:'0.5em'};var edgeStart=asEdge&&asEdge.start;var edgeEnd=asEdge&&asEdge.end;var notFoundStyle={color:'orange',cursor:'not-allowed'};var subElements=node.subElements;var edgesIn=!isEdge&&node.edgesIn||[];var edgesOut=!isEdge&&node.edgesOut||[];var stackingOrder=/*#__PURE__*/_jsx(Input,{data:node,field:'zIndex',label:'Stacking order',type:'number',readonly:!editable});return/*#__PURE__*/_jsxs(\"div\",{className:'p-3',children:[asGraph&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Graph\"}),/*#__PURE__*/_jsx(GenericInput,{data:asGraph,field:'zoom'}),/*#__PURE__*/_jsx(GenericInput,{data:asGraph,field:'offset'})]}),asVertex&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Vertex\"}),stackingOrder,/*#__PURE__*/_jsx(Input,{data:asVertex,field:'x',label:'X Position',type:'number',readonly:!editable}),/*#__PURE__*/_jsx(Input,{data:asVertex,field:'y',label:'Y Position',type:'number',readonly:!editable}),/*#__PURE__*/_jsx(Input,{data:asVertex,field:'width',label:'Width',type:'number',readonly:!editable}),/*#__PURE__*/_jsx(Input,{data:asVertex,field:'height',label:'Height',type:'number',readonly:!editable})]}),asEdge&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edge\"}),stackingOrder,/*#__PURE__*/_jsx(GenericInput,{data:asEdge,field:'longestLabel',placeholder:'(edge/*LEdge*/, segment/*EdgeSegment*/, subNodes/*LGraphElement[]*/, allSegments/*EdgeSegment[]*/) => {'+'\\n\\t// a complex example. The label can be either a function like this or a simple string.'+'\\n\\t return (edge.start.model)?.name + \\' ~ \\' + (e.end.model)?.name + \\'(\\' + segment.length.toFixed(1) + \\')\\';'+'\\n}'}),/*#__PURE__*/_jsx(GenericInput,{data:asEdge,field:'labels',placeholder:'(edge/*LEdge*/, segment/*EdgeSegment*/, subNodes/*LGraphElement[]*/, allSegments/*EdgeSegment[]*/) => {'+'\\n\\t// a complex example. The label can be either a function like this or a simple string.'+'\\n\\t return (edge.start.model)?.name + \\' ~ \\' + (e.end.model)?.name + \\'(\\' + segment.length.toFixed(1) + \\')\\';'+'\\n}'}),/*#__PURE__*/_jsx(GenericInput,{data:asEdge,field:\"anchorStart\"}),/*#__PURE__*/_jsx(GenericInput,{data:asEdge,field:\"anchorEnd\"})]}),asField&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Field\"}),stackingOrder]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'1em',marginBottom:'1em',borderBottom:'1px solid gray'}}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h6\",{children:[\"Super element: \",((_node$father=node.father)===null||_node$father===void 0?void 0:_node$father.className)?/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){return dnode.father&&openNode(dnode.father);},style:clickableStyle,children:[(_node$father2=node.father)===null||_node$father2===void 0?void 0:_node$father2.className,/*#__PURE__*/_jsx(\"i\",{className:'ms-1 bi bi-arrow-up'})]}):/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\"Not contained\"})]})}),asEdge&&[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h6\",{style:headerStyle,children:[\"Edge start:\",edgeStart?/*#__PURE__*/_jsxs(\"span\",{className:'ms-2',onClick:function onClick(e){return openNode(edgeStart.id);},style:clickableStyle,children:[getNodeLabel(edgeStart),/*#__PURE__*/_jsx(\"i\",{className:'ms-1 bi bi-arrow-right'})]}):/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\"Missing\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h6\",{style:headerStyle,children:[\"Edge End:\",edgeEnd?/*#__PURE__*/_jsxs(\"span\",{className:'ms-2',onClick:function onClick(e){return openNode(edgeEnd.id);},style:clickableStyle,children:[getNodeLabel(edgeEnd),/*#__PURE__*/_jsx(\"i\",{className:'ms-1 bi bi-arrow-left'})]}):/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\"Missing\"})]})})],/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{style:headerStyle,children:[\"Sub elements\",subElements.length?/*#__PURE__*/_jsx(\"i\",{className:'ms-1 bi bi-arrow-down'}):[': ',/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\"None\"})]]}),subElements.map(function(n){return/*#__PURE__*/_jsx(\"div\",{className:'w-100 ms-2',onClick:function onClick(e){return openNode(n.id);},style:clickableStyle,children:getNodeLabel(n)});})]}),!asEdge&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{style:headerStyle,children:[\"Outgoing Edges\",edgesOut.length===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[\": \",/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\"None\"})]})]}),edgesOut.length&&edgesOut.map(function(n){return/*#__PURE__*/_jsx(\"div\",{className:'w-100 ms-2',onClick:function onClick(e){return openNode(n.id);},style:clickableStyle,children:getEdgeLabel(n)});})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h6\",{style:headerStyle,children:[\"Incoming Edges\",edgesIn.length===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[\": \",/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\"None\"})]})]}),edgesIn.map(function(n){return/*#__PURE__*/_jsx(\"div\",{className:'w-100 ms-2',onClick:function onClick(e){return openNode(n.id);},style:clickableStyle,children:getEdgeLabel(n)});})]})]}),/*#__PURE__*/_jsxs(\"h6\",{style:headerStyle,children:[\"Node state:\",Object.keys(dnode._state).length===0&&/*#__PURE__*/_jsx(\"span\",{style:notFoundStyle,children:\" Empty\"})]}),/*#__PURE__*/_jsx(\"pre\",{children:Object.keys(dnode._state).length?JSON.stringify(dnode._state,null,'\\t'):undefined})]});}function mapStateToProps(state,ownProps){var ret={};var selected=state._lastSelected;if(selected){var _state$_lastSelected,_state$_lastSelected2,_state$_lastSelected3;var modelElement=(_state$_lastSelected=state._lastSelected)===null||_state$_lastSelected===void 0?void 0:_state$_lastSelected.modelElement;var node=(_state$_lastSelected2=state._lastSelected)===null||_state$_lastSelected2===void 0?void 0:_state$_lastSelected2.node;var view=(_state$_lastSelected3=state._lastSelected)===null||_state$_lastSelected3===void 0?void 0:_state$_lastSelected3.view;if(node&&view){ret.selected={node:L.fromPointer(node),view:L.fromPointer(node),modelElement:modelElement?L.fromPointer(modelElement):undefined};}}return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var NodeEditorConnected=connect(mapStateToProps,mapDispatchToProps)(NodeEditorComponent);export var NodeEditor=function NodeEditor(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(NodeEditorConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export default NodeEditor;","map":{"version":3,"names":["React","connect","L","Input","GenericInput","SetRootFieldAction","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","NodeEditorComponent","props","_node$father","_node$father2","selected","editable","node","dnode","__raw","cname","className","isGraph","includes","isVertex","isEdge","isField","console","log","asGraph","asVertex","asEdge","asField","openNode","id","new","getNodeLabel","_node$model","model","name","getEdgeLabel","edge","_edge$start","_edge$start$model","_edge$end","_edge$end$model","s","start","e","end","style","color","children","clickableStyle","cursor","headerStyle","marginBottom","marginTop","edgeStart","edgeEnd","notFoundStyle","subElements","edgesIn","edgesOut","stackingOrder","data","field","label","type","readonly","placeholder","borderBottom","father","onClick","length","map","n","Object","keys","_state","JSON","stringify","undefined","mapStateToProps","state","ownProps","ret","_lastSelected","_state$_lastSelected","_state$_lastSelected2","_state$_lastSelected3","modelElement","view","fromPointer","mapDispatchToProps","dispatch","NodeEditorConnected","NodeEditor","arguments","_objectSpread"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/styleEditor/StyleEditor.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DState} from '../../../redux/store';\r\nimport type {\r\n    LModelElement,\r\n    LViewElement,\r\n    LGraphElement,\r\n    LVoidVertex,\r\n    LVoidEdge, LGraph,Pointer, DGraphElement,\r\n    DNamedElement, LNamedElement} from '../../../joiner';\r\nimport {\r\n    LPointerTargetable,\r\n    L,\r\n    Input,\r\n    GenericInput,\r\n    TextArea,\r\n    RuntimeAccessibleClass,\r\n    SetRootFieldAction,\r\n} from '../../../joiner';\r\n\r\nfunction NodeEditorComponent(props: AllProps) {\r\n    const selected = props.selected;\r\n    const editable = true;\r\n    if (!selected?.node) return(<></>);\r\n    const node = selected.node;\r\n    const dnode = (node.__raw || node) as DGraphElement\r\n    let cname = dnode.className;\r\n    let isGraph = ['DGraph', 'DGraphVertex'].includes(cname); // RuntimeAccessibleClass.extends(cname, 'DGraph');\r\n    let isVertex = ['DVoidVertex', 'DVertex', 'DEdgePoint'].includes(cname); // RuntimeAccessibleClass.extends(cname, 'DVoidVertex');\r\n    let isEdge = ['DVoidEdge', 'DEdge'].includes(cname); // RuntimeAccessibleClass.extends(cname, 'DVoidEdge');\r\n    let isField = (!isGraph && !isVertex && !isEdge);\r\n    console.log('Style editor', {cname, isVertex, isGraph, isEdge, selected});\r\n    let asGraph: LGraph | undefined = isGraph && node as any;\r\n    let asVertex: LVoidVertex | undefined  = isVertex && node as any;\r\n    let asEdge: LVoidEdge | undefined = isEdge && node as any;\r\n    let asField: LVoidEdge | undefined = isField && node as any;\r\n    function openNode(id: Pointer<DGraphElement>) {\r\n        SetRootFieldAction.new('_lastSelected.node', id, '', false);\r\n    }\r\n\r\n    function getNodeLabel(node: LGraphElement){\r\n        if (!node) return 'error';\r\n        let model: DNamedElement | undefined = node.model?.__raw as any;\r\n        if (!model) return node.className;\r\n        return node.className + ' - ' +(model.name || model.className)\r\n    }\r\n    function getEdgeLabel(edge: LVoidEdge){\r\n        let s: DNamedElement | undefined = edge?.start?.model?.__raw as any;\r\n        let e: DNamedElement | undefined = edge?.end?.model?.__raw as any;\r\n        return [\r\n            (s ? s.name || s.className : <i style={{color: 'orange'}}>empty</i>),\r\n            <i className={'bi bi-arrow-right ms-1 me-1'} />,\r\n            (e ? e.name || e.className : <i style={{color: 'orange'}}>empty</i>)\r\n        ];\r\n\r\n    }\r\n    const clickableStyle = {cursor:'pointer', color: 'gray'};\r\n    const headerStyle = {marginBottom:0, marginTop: '0.5em'};\r\n    const edgeStart: LGraphElement | undefined = asEdge && asEdge.start;\r\n    const edgeEnd: LGraphElement | undefined = asEdge && asEdge.end;\r\n    const notFoundStyle = {color: 'orange', cursor:'not-allowed'};\r\n    const subElements = node.subElements;\r\n    let edgesIn = !isEdge && node.edgesIn || [];\r\n    let edgesOut = !isEdge && node.edgesOut || [];\r\n    let stackingOrder = <Input data={node} field={'zIndex'} label={'Stacking order'} type={'number'} readonly={!editable} />;\r\n    return(<div className={'p-3'}>\r\n        {/*<Input obj={selected.node} field={'id'} label={'ID'} type={'text'} readonly={true}/>*/}\r\n        {asGraph && <><h3>Graph</h3>\r\n            <GenericInput data={asGraph} field={'zoom'} />\r\n            <GenericInput data={asGraph} field={'offset'} />\r\n            {/*graphSize readonly on LGraph but not on DGraph, = internal graph size. put it for info.*/ }\r\n        </>}\r\n        {asVertex && <><h3>Vertex</h3>\r\n            {stackingOrder}\r\n            <Input data={asVertex} field={'x'} label={'X Position'} type={'number'} readonly={!editable} />\r\n            <Input data={asVertex} field={'y'} label={'Y Position'} type={'number'} readonly={!editable} />\r\n            <Input data={asVertex} field={'width'} label={'Width'} type={'number'} readonly={!editable} />\r\n            <Input data={asVertex} field={'height'} label={'Height'} type={'number'} readonly={!editable} />\r\n        </>}\r\n        {asEdge && <><h3>Edge</h3>\r\n            {stackingOrder}\r\n            <GenericInput data={asEdge} field={'longestLabel'}\r\n                          placeholder={'(edge/*LEdge*/, segment/*EdgeSegment*/, subNodes/*LGraphElement[]*/, allSegments/*EdgeSegment[]*/) => {' +\r\n                              '\\n\\t// a complex example. The label can be either a function like this or a simple string.' +\r\n                              '\\n\\t return (edge.start.model)?.name + \\' ~ \\' + (e.end.model)?.name + \\'(\\' + segment.length.toFixed(1) + \\')\\';' +\r\n                              '\\n}'}/>\r\n            <GenericInput data={asEdge} field={'labels'}\r\n                          placeholder={'(edge/*LEdge*/, segment/*EdgeSegment*/, subNodes/*LGraphElement[]*/, allSegments/*EdgeSegment[]*/) => {' +\r\n                            '\\n\\t// a complex example. The label can be either a function like this or a simple string.' +\r\n                            '\\n\\t return (edge.start.model)?.name + \\' ~ \\' + (e.end.model)?.name + \\'(\\' + segment.length.toFixed(1) + \\')\\';' +\r\n                            '\\n}'}/>\r\n            <GenericInput data={asEdge} field={\"anchorStart\"}/>\r\n            <GenericInput data={asEdge} field={\"anchorEnd\"}/>\r\n        </>}\r\n        {asField && <><h3>Field</h3>\r\n            {stackingOrder}\r\n        </>}\r\n\r\n        <div style={{marginTop:'1em', marginBottom:'1em', borderBottom:'1px solid gray'}}/>\r\n        <div><h6>Super element: {\r\n            node.father?.className ?\r\n                <span onClick={(e)=> dnode.father && openNode(dnode.father)} style={clickableStyle}>\r\n                    {[node.father?.className, <i className={'ms-1 bi bi-arrow-up'}/>]}\r\n                </span>\r\n                :\r\n                <span style={notFoundStyle}>Not contained</span>\r\n        }\r\n        </h6></div>\r\n\r\n        {asEdge && [\r\n            <div><h6 style={headerStyle}>Edge start:{\r\n                edgeStart ?\r\n                    <span className={'ms-2'} onClick={(e)=> openNode(edgeStart.id)} style={clickableStyle}>\r\n                        {getNodeLabel(edgeStart)}<i className={'ms-1 bi bi-arrow-right'}/>\r\n                    </span>\r\n                    : <span style={notFoundStyle}>Missing</span>\r\n            }</h6></div>,\r\n            <div><h6 style={headerStyle}>Edge End:{\r\n                edgeEnd ?\r\n                    <span className={'ms-2'} onClick={(e)=> openNode(edgeEnd.id)} style={clickableStyle}>\r\n                        {getNodeLabel(edgeEnd)}<i className={'ms-1 bi bi-arrow-left'}/>\r\n                    </span>\r\n                    : <span style={notFoundStyle}>Missing</span>\r\n            }</h6></div>\r\n        ]}\r\n        <div><h6 style={headerStyle}>\r\n            Sub elements{subElements.length ? <i className={'ms-1 bi bi-arrow-down'}/> : [': ', <span style={notFoundStyle}>None</span>]}\r\n        </h6>{subElements.map(\r\n            n => <div className={'w-100 ms-2'} onClick={(e)=> openNode(n.id)} style={clickableStyle}>{getNodeLabel(n)}</div>\r\n        )}</div>\r\n        {!asEdge && <>\r\n            <div><h6 style={headerStyle}>Outgoing Edges{edgesOut.length === 0 && <>: <span style={notFoundStyle}>None</span></>}</h6>{edgesOut.length && edgesOut.map(\r\n                n => <div className={'w-100 ms-2'} onClick={(e)=> openNode(n.id)} style={clickableStyle}>{getEdgeLabel(n)}</div>\r\n            )}</div>\r\n            <div><h6 style={headerStyle}>Incoming Edges{edgesIn.length === 0 && <>: <span style={notFoundStyle}>None</span></>}</h6>{edgesIn.map(\r\n                n => <div className={'w-100 ms-2'} onClick={(e)=> openNode(n.id)} style={clickableStyle}>{getEdgeLabel(n)}</div>\r\n            )}</div>\r\n        </>}\r\n\r\n\r\n        <h6 style={headerStyle}>Node state:{Object.keys(dnode._state).length === 0 && <span style={notFoundStyle}> Empty</span>}</h6>\r\n        <pre>{Object.keys(dnode._state).length ? JSON.stringify(dnode._state, null, '\\t') : undefined}</pre>\r\n\r\n    </div>);\r\n\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    selected?: {\r\n        node: LGraphElement;\r\n        view: LViewElement;\r\n        modelElement?: LModelElement;\r\n    };\r\n}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    let ret: StateProps = {};\r\n    const selected = state._lastSelected;\r\n    if(selected) {\r\n        const modelElement = state._lastSelected?.modelElement;\r\n        const node = state._lastSelected?.node;\r\n        const view = state._lastSelected?.view;\r\n        if(node && view) {\r\n            ret.selected = {\r\n                node: L.fromPointer(node),\r\n                view: L.fromPointer(node),\r\n                modelElement: (modelElement) ? L.fromPointer(modelElement) : undefined\r\n            }\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const NodeEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NodeEditorComponent);\r\n\r\nexport const NodeEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <NodeEditorConnected {...{...props, children}} />;\r\n}\r\nexport default NodeEditor;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}