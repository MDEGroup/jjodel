{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\rightbar\\\\collaboratorsEditor\\\\CollaboratorsEditor.tsx\",\n  _this = this;\nimport { connect } from 'react-redux';\nimport { DUser, LUser } from '../../../joiner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CollaboratorsEditorComponent(props) {\n  const project = props.project;\n  const author = props.author;\n  const collaborators = props.collaborators;\n  const addCollaborator = async () => {\n    /*\r\n    const email = ($('#collaborator-email')[0] as GObject).value;\r\n    if(!email) {alert('User not found!'); return;}\r\n    const user = await PersistanceApi.getUserByEmail(email);\r\n    SetRootFieldAction.new('isLoading', false);\r\n    if(!user) {alert('User not found!'); return;}\r\n    if(project.collaborators.map(c => c.id).includes(user.id)) return;\r\n    project.collaborators = [...project.collaborators, user];\r\n    await PersistanceApi.saveProject();\r\n    */\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'p-2',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'p-1 w-100 border d-flex',\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Author\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'ms-auto',\n        children: author.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }, this), project.author.id === DUser.current && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'mt-2 p-1 w-100 border d-flex',\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'input w-25',\n        id: 'collaborator-email'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'ms-1 btn btn-success px-2',\n        onClick: addCollaborator,\n        children: \"+ Collaborator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 51\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'mt-2 p-1 w-100 border d-flex',\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Collaborators\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'ms-auto',\n        children: collaborators.map((collaborator, index) => {\n          return /*#__PURE__*/_jsxDEV(\"label\", {\n            className: 'ms-1',\n            children: collaborator.username\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 28\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 13\n  }, this);\n}\n_c = CollaboratorsEditorComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  const user = LUser.fromPointer(DUser.current);\n  const project = user.project;\n  ret.project = project;\n  ret.author = project.author;\n  ret.collaborators = project.collaborators;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const CollaboratorsEditorConnected = connect(mapStateToProps, mapDispatchToProps)(CollaboratorsEditorComponent);\nconst CollaboratorsEditor = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(CollaboratorsEditorConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = CollaboratorsEditor;\nexport default CollaboratorsEditor;\nvar _c, _c2;\n$RefreshReg$(_c, \"CollaboratorsEditorComponent\");\n$RefreshReg$(_c2, \"CollaboratorsEditor\");","map":{"version":3,"names":["connect","DUser","LUser","jsxDEV","_jsxDEV","CollaboratorsEditorComponent","props","project","author","collaborators","addCollaborator","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","id","current","onClick","map","collaborator","index","_c","mapStateToProps","state","ownProps","ret","user","fromPointer","mapDispatchToProps","dispatch","CollaboratorsEditorConnected","CollaboratorsEditor","arguments","length","undefined","_this","_c2","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/collaboratorsEditor/CollaboratorsEditor.tsx"],"sourcesContent":["import {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DUser, GObject, LUser, SetRootFieldAction, U} from '../../../joiner';\r\nimport type {DState, LProject} from '../../../joiner';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\n\r\nfunction CollaboratorsEditorComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const author = props.author;\r\n    const collaborators = props.collaborators;\r\n\r\n    const addCollaborator = async() => {\r\n        /*\r\n        const email = ($('#collaborator-email')[0] as GObject).value;\r\n        if(!email) {alert('User not found!'); return;}\r\n        const user = await PersistanceApi.getUserByEmail(email);\r\n        SetRootFieldAction.new('isLoading', false);\r\n        if(!user) {alert('User not found!'); return;}\r\n        if(project.collaborators.map(c => c.id).includes(user.id)) return;\r\n        project.collaborators = [...project.collaborators, user];\r\n        await PersistanceApi.saveProject();\r\n        */\r\n    }\r\n\r\n    return (<div className={'p-2'}>\r\n        <div className={'p-1 w-100 border d-flex'}>\r\n            <b>Author</b>\r\n            <label className={'ms-auto'}>{author.username}</label>\r\n        </div>\r\n        {(project.author.id === DUser.current) && <div className={'mt-2 p-1 w-100 border d-flex'}>\r\n            <input className={'input w-25'} id={'collaborator-email'} />\r\n            <button className={'ms-1 btn btn-success px-2'} onClick={addCollaborator}>\r\n                + Collaborator\r\n            </button>\r\n        </div>}\r\n        <div className={'mt-2 p-1 w-100 border d-flex'}>\r\n            <b>Collaborators</b>\r\n            <div className={'ms-auto'}>\r\n                {collaborators.map((collaborator, index) => {\r\n                    return(<label className={'ms-1'} key={index}>{collaborator.username}</label>);\r\n                })}\r\n            </div>\r\n        </div>\r\n    </div>);\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {project: LProject, author: LUser, collaborators: LUser[]}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user = LUser.fromPointer(DUser.current);\r\n    const project = user.project as LProject;\r\n    ret.project = project;\r\n    ret.author = project.author;\r\n    ret.collaborators = project.collaborators;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nexport const CollaboratorsEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(CollaboratorsEditorComponent);\r\n\r\nconst CollaboratorsEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <CollaboratorsEditorConnected {...{...props, children}} />;\r\n}\r\n\r\nexport default CollaboratorsEditor;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}