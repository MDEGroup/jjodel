{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _inherits from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import{Log,DModel,DValue,DObject,DEnumerator,DEnumLiteral,DAttribute,DReference,DClass,DParameter,DOperation,DPackage,DAnnotation,AttribETypes,U,Selectors,PointedBy,LPointerTargetable,windoww,SetRootFieldAction,Constructors,store,SetFieldAction,DPointerTargetable,ShortAttribETypes,toLongEType}from\"../joiner\";import{ShortDefaultEClasses,toLongEClass}from\"../common/U\";var SavePack=function SavePack(){var model=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var vertexpos=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var view=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';_classCallCheck(this,SavePack);this.model=void 0;this.vertexpos=void 0;this.view=void 0;this.model=model;this.vertexpos=vertexpos;this.view=view;};export var IStorage=/*#__PURE__*/function(){function IStorage(prefix,autosave){_classCallCheck(this,IStorage);this.prefix=void 0;this.autosave=void 0;this.prefix=prefix;this.autosave=autosave;}_createClass(IStorage,[{key:\"del\",value:function del(key){var isOverwrite=this.get(key)!==null;this.set(key,'');return isOverwrite;}},{key:\"get\",value:function get(key){var parse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return Log.exx(\"IStorage.get should be overridden\");}},{key:\"serialize\",value:function serialize(val){// serialize\ntry{return JSON.stringify(val);}catch(e){return\"\"+val;}}},{key:\"deserialize\",value:function deserialize(val){// de-serialize\ntry{return JSON.parse(val);}catch(e){return val;}}},{key:\"set0\",value:function set0(val){return this.serialize(val);}},{key:\"get0\",value:function get0(val){return this.deserialize(val);}},{key:\"parse\",value:function parse(val){return this.deserialize(val);}}],[{key:\"get\",value:function get(){return Log.exx(\"IStorage.get (static) should be overridden\");}}]);return IStorage;}();export var LocalStorage=/*#__PURE__*/function(_IStorage){_inherits(LocalStorage,_IStorage);var _super=_createSuper(LocalStorage);function LocalStorage(prefix,autosave){_classCallCheck(this,LocalStorage);return _super.call(this,prefix,autosave);}_createClass(LocalStorage,[{key:\"get\",value:function get(key){var parse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var val=localStorage.getItem(this.prefix+key);return parse?this.parse(val):val;}},{key:\"set\",value:function set(key,val){val=this.serialize(val);// let isOverwrite = localStorage.getItem(this.prefix+key);\nlocalStorage.set(this.prefix+key,val);return true;}},{key:\"getLastOpened\",value:function getLastOpened(modelNumber){var modelname=\"m\"+modelNumber+\"_\";var ret=new SavePack();ret.model=this.get(modelname+LocalStorage.KeyList.lastOpenedModel,false)||'';ret.view=this.get(modelNumber+LocalStorage.KeyList.lastOpenedView,false)||'';ret.vertexpos=this.get(modelNumber+LocalStorage.KeyList.lastOpenedPosition,false)||'';return ret;}},{key:\"deleteLastOpened\",value:function deleteLastOpened(modelNumber){this.setLastOpened(modelNumber,'','','');}},{key:\"setLastOpened\",value:function setLastOpened(modelNumber){var model=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var view=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var vertex=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var modelname=\"m\"+modelNumber+\"_\";if(model)this.set(modelname+LocalStorage.KeyList.lastOpenedModel,model);else this.del(modelname+LocalStorage.KeyList.lastOpenedModel);if(view)this.set(modelname+LocalStorage.KeyList.lastOpenedView,view);else this.del(modelname+LocalStorage.KeyList.lastOpenedView);if(vertex)this.set(modelname+LocalStorage.KeyList.lastOpenedPosition,vertex);else this.del(modelname+LocalStorage.KeyList.lastOpenedPosition);}}],[{key:\"get\",value:function get(){return new LocalStorage(\"_j\",true);}}]);return LocalStorage;}(IStorage);LocalStorage.KeyList={lastOpenedModel:\"lastOpenedModel\",lastOpenedView:\"lastOpenedView\",lastOpenedPosition:\"lastOpenedPosition\"};export var EcoreParser=/*#__PURE__*/function(){function EcoreParser(){_classCallCheck(this,EcoreParser);}_createClass(EcoreParser,null,[{key:\"parse\",value:function parse(ecorejson,isMetamodel,filename){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!ecorejson)return[];var parsedjson;if(typeof ecorejson===\"string\")try{parsedjson=JSON.parse(ecorejson);}catch(e){windoww.temp=ecorejson;Log.exx(\"error while parsing json:\",e,ecorejson.substring(0,1000));throw e;}else parsedjson=ecorejson;console.log(\"root parse\",{ecorejson:ecorejson,parsedjson:parsedjson});// isMetamodel = !!parsedjson[ECoreRoot.ecoreEPackage];\nConstructors.paused=true;var parsedElements=isMetamodel?EcoreParser.parseM2Model(parsedjson,filename):EcoreParser.parseM1Model(parsedjson,undefined,filename);console.warn(\"parse.result D\",parsedElements);this.LinkAllNamesToIDs(parsedElements);this.fixNamingConflicts(parsedElements);Constructors.paused=false;// if (persist) CreateElementAction.newBatch(parsedElements);\n// update m1 object pointers (need them to be persistent to navigate .fathers and get ecore pointer strings using LObject)\nthis.fixObjectPointers(parsedElements);// updates dvalue.values from ecore reference to pointers.\nConstructors.persist(parsedElements);windoww.tmpparse=function(){return LPointerTargetable.wrapAll(parsedElements);};this.tempfix_untilopennewtabisdone(parsedElements,isMetamodel);console.log('parsedElem',parsedElements);return parsedElements;}},{key:\"fixObjectPointers\",value:function fixObjectPointers(parsedElements){var dobjects=parsedElements.filter(function(e){return e.className===DObject.cname;});var values=parsedElements.filter(function(e){return e.className===DValue.cname;});var lobjects=LPointerTargetable.fromArr(dobjects);var m1pointermap={};//    \"//@rootrefname.index@/refname.index/@....etc\"\nvar _iterator=_createForOfIteratorHelper(lobjects),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var o=_step.value;m1pointermap[o.ecorePointer()]=o;}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(values),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var v=_step2.value;if(v.isMirage)continue;var modified=false;var newvalues=v.values.map(function(e){if(!m1pointermap[e])return e;modified=true;console.log(\"m1 pointer resolved:\",{from:e,to:m1pointermap[e].id});return m1pointermap[e].id;});if(!modified)continue;//let lv: LValue = LPointerTargetable.from(v);\nv.values=newvalues;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:\"tempfix_untilopennewtabisdone\",value:function tempfix_untilopennewtabisdone(parsedElements,isMetamodel){// replaces current model with parsed model. this needs to be removed to open a new tab later on.\nvar model=null;var _iterator3=_createForOfIteratorHelper(parsedElements),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var elem=_step3.value;if(elem.className===DModel.cname){model=elem;break;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}SetRootFieldAction.new(isMetamodel?\"m2models\":\"m1models\",model.id,'+=',false);// it is pointer but no need to update pointedby's this time\n}// resolve eCore pointers to Jodel pointers and set the PointedBy\n},{key:\"LinkAllNamesToIDs\",value:function LinkAllNamesToIDs(parsedElements){// todo: Ã¨ post-parse che legga i nomi e assegni gli id aggiustando le references e extends settati by name. trova i campi temporanei cercando i @ts-ignore\n// update mref, attribute, parameter type\n// update operation exception\n// replace those names with id's\nvar idMap={};var nameMap={};var replacePrimitiveMap={};var d_Estring=Selectors.getAllPrimitiveTypes()[1];replacePrimitiveMap[AttribETypes.EString]=d_Estring;// todo: do the same for all other primitives\nvar state=store.getState();// let longprefixlength = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore'.length;\nvar typeprefix=\"#//\";for(var shortkey in ShortAttribETypes){if(shortkey===ShortAttribETypes.EVoid)continue;var shortetype=ShortAttribETypes[shortkey];var longetype=toLongEType(shortetype);var dClassType=Selectors.getPrimitiveType(shortetype,state);Log.exDev(!dClassType,\"missing primitive type: \"+shortkey,{shortkey:shortkey,shortetype:shortetype,longetype:longetype,dClassType:dClassType,state:state});// the correct one\nreplacePrimitiveMap[typeprefix+shortkey]=dClassType;// like \"#//EChar\"\n// fallbacks for missing type instead of crash\nif(!replacePrimitiveMap[shortkey])replacePrimitiveMap[shortkey]=dClassType;if(!replacePrimitiveMap[shortetype])replacePrimitiveMap[shortetype]=dClassType;if(!replacePrimitiveMap[longetype])replacePrimitiveMap[longetype]=dClassType;}for(var _shortkey in ShortDefaultEClasses){var _shortetype=ShortDefaultEClasses[_shortkey];var _longetype=toLongEClass(_shortetype);var _dClassType=Selectors.getDefaultEcoreClass(_shortetype,state);Log.exDev(!_dClassType,\"missing ecore native class: \"+_shortkey,{shortkey:_shortkey,shortetype:_shortetype,longetype:_longetype,dClassType:_dClassType,state:state});// the correct one\nreplacePrimitiveMap[_longetype]=_dClassType;// fallbacks for missing type instead of crash\nif(!replacePrimitiveMap[_shortkey])replacePrimitiveMap[_shortkey]=_dClassType;if(!replacePrimitiveMap[_shortetype])replacePrimitiveMap[_shortetype]=_dClassType;if(!replacePrimitiveMap[_longetype])replacePrimitiveMap[typeprefix+_shortkey]=_dClassType;// like \"#//EObject\"\n}for(var ecorename in replacePrimitiveMap){// duplicates are very likely becuase of fallback alias like \"EChar\", but they shouldn't override user-defined class EChar if it exist, so don't throw error.\nif(idMap[replacePrimitiveMap[ecorename].id])continue;idMap[replacePrimitiveMap[ecorename].id]=replacePrimitiveMap[ecorename];}// let prereplace = (name: string) => name.replaceAll(\"#//\", \"\");\nvar replaceRules=[\"extends\",/*\"extendedBy\",*/\"exceptions\",\"type\",\"values\"];var dobj;var _iterator4=_createForOfIteratorHelper(parsedElements),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){dobj=_step4.value;idMap[dobj.id]=dobj;if(!dobj.name||dobj.className===DModel.cname)continue;// Model name can be reused internally\nvar name=dobj.__fullname;delete dobj.__fullname;if(dobj.className===DOperation.cname||dobj.className===DParameter.cname){// operation overload, in this case i create N separate operations, but all references will point to the last operation.\n// empty on purpose, just avoid naming check\n}// todo: problem, uml.ecore have \"isComposite\" operation and attribute on sme class \"property\", so who is referenced by \"#//property/isComposite\" ??\n// else Log.exDev(nameMap[typeprefix + name], \"found 2 elements with same name\", {nameMap, dobj, name, shortname: dobj.name, typeprefix});\nelse Log.w(nameMap[typeprefix+name],\"found 2 elements with same name\",{nameMap:nameMap,new:dobj,old:nameMap[typeprefix+name],name:name,shortname:dobj.name,typeprefix:typeprefix});nameMap[typeprefix+name]=dobj;// nameMap[typeprefix + dobj.name] = dobj; // <eAnnotations source=\"subsets\" references=\"#//Activity/group\"/>\n}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}for(var _i=0,_replaceRules=replaceRules;_i<_replaceRules.length;_i++){var replacekey=_replaceRules[_i];var _iterator5=_createForOfIteratorHelper(parsedElements),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){dobj=_step5.value;var valtmp=dobj[replacekey];if(valtmp===undefined)continue;// for missing properties in a d-object like looking for extends on a dmodel.\nvar values=void 0;var isArray=Array.isArray(valtmp);if(isArray){values=valtmp;dobj[replacekey]=[];}else{values=[valtmp];}var _iterator6=_createForOfIteratorHelper(values),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var value=_step6.value;if(!value)continue;// console.log(\"fixalltypes\", {replacekey, dobj, value, values});\nvar target=replacePrimitiveMap[value];if(!target)target=nameMap[value];if(!target&&value.indexOf(\"ecore:EDataType\")===0){Log.ww('found unknown EDataType \"'+value+'\", remapping it to string');target=replacePrimitiveMap[AttribETypes.EString];}/*\r\n                    if (!target && value === \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EObject\"){\r\n                        Log.ww('found type Object is not supported yet in metamodel, remapped to EString');\r\n                        target = replacePrimitiveMap[AttribETypes.EString];\r\n                    }*/ // if (Pointers.isPointer(value)) { target = value;  if it happen to be a pointer it's a mistake in parser }\n// (value.indexOf(\"#//\") == 0) && console.log(\"attempt to replace primitive type to his id\", {target, dobj, replacekey, value, replacePrimitiveMap, nameMap, idMap, parsedElements});\nif(replacekey===\"extends\"){if(!target)continue;Log.ex(target.className!==DClass.cname,\"found a class attempting to extend an object that is not a class\",{target:target,dobj:dobj,replacePrimitiveMap:replacePrimitiveMap,nameMap:nameMap,idMap:idMap});target.extendedBy.push(dobj.id);}Log.ex(!target,\"LinkAllNames() can't find type target:\",{value:value,nameMap:nameMap,replacePrimitiveMap:replacePrimitiveMap,dobj:dobj,replacekey:replacekey});if(isArray)dobj[replacekey].push(target.id);else dobj[replacekey]=target.id;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}// fix from ordinals to Pointer<DEnumLiteral>\nfunction DfromPtr(id){return!id?undefined:DPointerTargetable.fromPointer(id,state);}function getLiteral(id,ordinal){var _LPointerTargetable$f,_LPointerTargetable$f2;return(_LPointerTargetable$f=LPointerTargetable.fromD(DfromPtr(id)))===null||_LPointerTargetable$f===void 0?void 0:(_LPointerTargetable$f2=_LPointerTargetable$f.ordinals[ordinal])===null||_LPointerTargetable$f2===void 0?void 0:_LPointerTargetable$f2.__raw;}var _iterator7=_createForOfIteratorHelper(parsedElements),_step7;try{var _loop=function _loop(){var elem=_step7.value;if(elem.className!==DValue.cname)return\"continue\";var dval=elem;var meta=DfromPtr(dval.instanceof);if(!meta)return\"continue\";var type=DfromPtr(meta.type);if(!type||type.className!==DEnumLiteral.cname)return\"continue\";var mapper=function mapper(v){if(typeof v!==\"number\"){Log.e(\"found non-numeric value in a literal value.\",v,dval);return v;}var l=getLiteral(type.id,v);return l?l.id:v;};dval.values=dval.values.map(mapper);};for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _ret=_loop();if(_ret===\"continue\")continue;}// finally: set all pointedby\n}catch(err){_iterator7.e(err);}finally{_iterator7.f();}var _iterator8=_createForOfIteratorHelper(PointedBy.list),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var ptrkey=_step8.value;var _iterator9=_createForOfIteratorHelper(parsedElements),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){dobj=_step9.value;var _valtmp=dobj[ptrkey];var _values=void 0;if(Array.isArray(_valtmp)){_values=_valtmp;}else{if(_valtmp===undefined)_values=[];// if (valtmp === \"modeltmp\") { dobj[ptrkey] = null; values = []; } // because model.father is null, but i want to error check others and let them crash if missing father\nelse _values=[_valtmp];}var _iterator10=_createForOfIteratorHelper(_values),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _value=_step10.value;if(!_value)continue;// errore: per operazione.type l'import mi restituisce puntatore a oggetto stringa, ma non Ã¨ tra gli oggetti parsed\nvar _target=idMap[_value];if(_target){_target.pointedBy.push(PointedBy.new(\"idlookup.\"+dobj.id+\".\"+ptrkey));}else{_target=DfromPtr(_value);console.log(\"fixalltypes\",{ptrkey:ptrkey,valtmp:_valtmp,dobj:dobj,value:_value,values:_values,target:_target,idMap:idMap});if(!_target)throw new Error(\"target undefined\");SetFieldAction.new(_target,\"pointedBy\",PointedBy.new(\"idlookup.\"+dobj.id+\".\"+ptrkey),'+=',false);}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}// update superclasses\n}catch(err){_iterator8.e(err);}finally{_iterator8.f();}this.updateSuperClasses(parsedElements);}},{key:\"todoGetPrimitiveTypenope\",value:function todoGetPrimitiveTypenope(type){// akready fixed in LinkAllNamesToID\nreturn'todoGetPrimitiveType from parser';}},{key:\"updateSuperClasses\",value:function updateSuperClasses(parsedElements){// todo:3\n}},{key:\"fixNamingConflicts\",value:function fixNamingConflicts(parsedElements){// todo:4 final\n}},{key:\"parseM2Model\",value:function parseM2Model(json,filename){var generated=[];if(!json){json={};}var modelname=json[ECoreNamed.namee];if(!modelname&&filename){var pos=filename.indexOf(\".\");modelname=pos===-1?filename:filename.substring(0,pos);}var dObject=DModel.new(modelname||\"imported_metamodel_1\",undefined,true,true);console.log(\"made model\",json);generated.push(dObject);// dObject.father = 'modeltmp' as any;\n// const annotations: Json[] = this.getAnnotations(json); i set them on root package\n// for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\n/// *** specific  *** ///\n// let defPackage: DPackage = DPackage.new(json)\nEcoreParser.parseRootPackage(dObject,json,generated);return generated;}},{key:\"parseM2Model_old\",value:function parseM2Model_old(json,filename){var generated=[];if(!json){json={};}var modelname=json[ECoreNamed.namee];if(!modelname&&filename){var pos=filename.indexOf(\".\");modelname=pos===-1?filename:filename.substring(0,pos);}var dObject=DModel.new(modelname||\"imported_metamodel_1\",undefined,true,true);console.log(\"made model\",json);generated.push(dObject);// dObject.father = 'modeltmp' as any;\n/// *** specific  *** ///\nvar children=EcoreParser.getChildren(json);var annotations=EcoreParser.getAnnotations(json);// dObject.name = json[ECoreNamed.namee] as string || \"imported_metamodel_1\";\nconsole.log(\"made model 2\",children,annotations);var _iterator11=_createForOfIteratorHelper(annotations),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var child=_step11.value;EcoreParser.parseDAnnotation(dObject,child,generated,'aaaaaaaaaaaaaaaaaaaaaaaaaaaa');}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}console.log(\"made annotations\");var _iterator12=_createForOfIteratorHelper(children),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _child=_step12.value;EcoreParser.parseRootPackage(dObject,_child,generated);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}console.log(\"made packages\");return generated;}},{key:\"parseM1Model\",value:function parseM1Model(json,meta,filename){var _meta;var generated=[];if(!json){json={};}/// *** specific  *** ///\n// this.parseDObject(json, dObject, DModel,undefined, generated);\nvar allmodels;if(!meta&&filename){allmodels=Selectors.getAll(DModel);allmodels=allmodels.filter(function(m){return m.name===filename;});meta=LPointerTargetable.fromD(allmodels[0]);}else allmodels=[];var xmlns=EcoreParser.XMLinlineMarker+\"xmlns:\";var ns=undefined;function findns(key){var pos=key.indexOf(\":\");if(pos<=0)return false;return ns=key.substring(0,pos);// through namespace before the name of the root objects;\n// additional method: through xmlns key\n// if (key.indexOf(xmlns)) continue; // \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\",\n// ns = key.substring(xmlns.length); break;\n}outerloop:for(var key0 in json){// ns can be at most in sublevel 3, this is annoying but i need it at beginning of parsing\nif(findns(key0))break;var val0=json[key0];if(typeof val0===\"object\")for(var key1 in val0){if(findns(key0))break outerloop;}}if(ns&&!meta){var _matchpkg$;var allpkgs=Selectors.getAll(DPackage,undefined,undefined,true,true);var matchpkg=allpkgs.filter(function(d){return d.uri===ns;});meta=(_matchpkg$=matchpkg[0])===null||_matchpkg$===void 0?void 0:_matchpkg$.model;// Log.exDev(!meta, \"metamodel not found: \", {ns, json, filename, allmodels, allpkgs, matchpkg}) // todo: after tests remove this check and allow shapeless models.\n}var modelname='';if(!modelname&&filename){var pos=filename.indexOf(\".\");modelname=pos===-1?filename:filename.substring(0,pos);}var dObject=DModel.new(modelname||\"imported_model_1\",(_meta=meta)===null||_meta===void 0?void 0:_meta.id,false,true);console.log(\"made model\",json);generated.push(dObject);for(var _key in json){switch(_key){case ECoreObject.xmi_version:// this is only on roots\nLog.ex(json[_key]!==\"2.0\",\"The only supported ecore version is \\\"2.0\\\", found instead: \\\"\"+json[_key]+\"\\\"\");break;// case ECoreObject.xmlnsecore:\ncase ECoreObject.xmlns_xmi:var expected=\"http://www.omg.org/XMI\";Log.ex(json[_key]!==expected,\"Unexpected XMI schema. Should be \\\"\"+expected+\"\\\", found instead: \\\"\"+json[_key]+\"\\\"\");break;default:// a feature name\nvar _val=json[_key];if(!_val)continue;if(_key.indexOf(xmlns)===0)continue;// \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\",\nif(_key[0]===EcoreParser.XMLinlineMarker)_key=_key.substring(EcoreParser.XMLinlineMarker.length);var namespacedclass=_key;var mmclass=meta&&meta.getClassByNameSpace(namespacedclass);if(!mmclass)console.log(\"failed to get mmclass\",{meta:meta,key:_key,mmclass:mmclass});var roots_for_this_metaclass=Array.isArray(_val)?_val:[_val];// there might be N roots of class A, M of type B...\nvar _iterator13=_createForOfIteratorHelper(roots_for_this_metaclass),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var rootjson=_step13.value;// DObject.new(mmclass.id, dObject.id, DModel, undefined, true)\nEcoreParser.parseDObject(rootjson,dObject,DModel,mmclass,generated);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}}return generated;}/*\r\n    {\r\n      \"org.eclipse.example.bowling:League\": { <-- :classroot\r\n        \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n        \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n        \"-xmi:version\": \"2.0\",\r\n        \"Players\": [\r\n          { \"-name\": \"tizio\" },\r\n          { \"-name\": \"asd\" }\r\n        ]\r\n      }\r\n    }\r\n    */ /// In Ecore parsing when you find a value list, it is possible to recover only the type for the meta-feature,<br>\n/// but an array of Mammals might have some Whales, Pigs, etc mixed in. and you have to get the correct subclass for each\n},{key:\"getobjectmetaclass\",value:function getobjectmetaclass(json,metaSuperClass){return metaSuperClass;// todo: comment this and execute below\nvar subclasses=!metaSuperClass?[]:[metaSuperClass];var subclasseshapes={};for(var _i2=0,_subclasses=subclasses;_i2<_subclasses.length;_i2++){var sc=_subclasses[_i2];subclasseshapes[sc.id]={l:sc};var row=subclasseshapes[sc.id];var _iterator14=_createForOfIteratorHelper(sc.children),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var feat=_step14.value;var lfeat=feat;var dfeat=lfeat.__raw;if(!dfeat.name||!dfeat.type)continue;row[dfeat.name]=lfeat.type;}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}}return this.findBestMatch(subclasseshapes,json);}},{key:\"findBestMatch\",value:function findBestMatch(m2classes,json){throw new Error(\"todo\");return null;}},{key:\"parseDObject\",value:function parseDObject(json,parent,parentType,meta,generated){var _meta2,_meta3;if(!json){json={};}meta=meta&&this.getobjectmetaclass(json,meta);// let dObject: DObject = DObject.new(meta?.id, parent.id, parentType, json[\"name\"] as string || \"obj_1\");\n// let data: Partial<DObject> = {};\nvar dObject=DObject.new((_meta2=meta)===null||_meta2===void 0?void 0:_meta2.id,parent.id,parentType,json[\"name\"]||\"obj_1\");generated.push(dObject);dObject.father=parent.id;if(parent){if(parentType===DModel)parent.objects.push(dObject.id);else parent.values.push(dObject.id);}console.log(\"made dobject\",{json:json,dObject:dObject,meta:meta,metaname:(_meta3=meta)===null||_meta3===void 0?void 0:_meta3.name});/// *** specific  *** ///\nfor(var _key2 in json){switch(_key2){case ECoreObject.xmi_version:// this is only on roots\nLog.ex(json[_key2]!==\"2.0\",\"The only supported ecore version is \\\"2.0\\\", found instead: \\\"\"+json[_key2]+\"\\\"\");break;// case ECoreObject.xmlnsecore:\ncase ECoreObject.xmlns_xmi:var expected=\"http://www.omg.org/XMI\";Log.ex(json[_key2]!==expected,\"Unexpected XMI schema. Should be \\\"\"+expected+\"\\\", found instead: \\\"\"+json[_key2]+\"\\\"\");break;default:// a feature name\nvar _val2=json[_key2];if(!_val2)continue;if(_key2[0]===EcoreParser.XMLinlineMarker)_key2=_key2.substring(1);if(_key2.indexOf(\"xmlns:\")===0)continue;// \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\",\nvar metafeature=meta&&meta[\"@\"+_key2];console.log(\"feature meta\",{json:json,dObject:dObject,key:_key2,val:_val2,metafeature:metafeature,classmeta:meta});var values=void 0;if(Array.isArray(_val2))values=_val2;else if(_val2===undefined)values=[];else values=[_val2];EcoreParser.parseDValue(_key2,values,dObject/*father*/,metafeature/*meta*/,generated);// DValue.new(key, metafeature?.id, values, dObject, true, false);\n}}return generated;}},{key:\"parseDValue\",value:function parseDValue(name,jsonvalues,parent,meta,generated){if(!jsonvalues){jsonvalues=[];}// let dObject: DObject = DObject.new(meta?.id, parent.id, parentType, json[\"name\"] as string || \"obj_1\");\nconsole.log(\"DValue.new(meta ? undefined : name, meta?.id, jsonvalues, parent.id, true, false)\");console.log(\"DValue.new(\",meta?undefined:name,\",\",meta===null||meta===void 0?void 0:meta.id,\",\",jsonvalues,\",\",parent.id);var dValue=DValue.new(meta?undefined:name,meta===null||meta===void 0?void 0:meta.id,[],parent.id,true,false);generated.push(dValue);dValue.father=parent.id;parent.features.push(dValue.id);console.log(\"made dValue\",{jsonvalues:jsonvalues,dValue:dValue,meta:meta,metaname:meta===null||meta===void 0?void 0:meta.name});if(meta&&meta.className===DAttribute.cname){dValue.values=jsonvalues;return generated;}var _iterator15=_createForOfIteratorHelper(jsonvalues),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var v=_step15.value;if(typeof v!==\"object\"){dValue.values.push(v);continue;}// let subdObject: DObject = DObject.new((meta as LReference)?.type.id, parent.id, DValue, undefined);\n// generated.push(subdObject);\nEcoreParser.parseDObject(v,dValue,DValue,meta===null||meta===void 0?void 0:meta.type,generated);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}return generated;}},{key:\"parseDAnnotation\",value:function parseDAnnotation(parent,json,generated,fullnamePrefix){return[];// todo\nif(!generated)generated=[];if(!json){json={};}var dObject=DAnnotation.new();generated.push(dObject);dObject.father=parent.id;dObject.name=this.read(json,ECoreNamed.namee,undefined);dObject.father=parent.id;if(parent)parent.annotations.push(dObject.id);var annotations=this.getAnnotations(json);var _iterator16=_createForOfIteratorHelper(annotations),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var child=_step16.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}dObject.__fullname=undefined;// fullnamePrefix + \"/\" + (dObject as any).name; // if annotation is not named (and it shouldn't) i don't wanna override container name\n/// *** specific  *** ///\nvar key;for(key in json){var value=json[key];switch(key){//todo\ndefault:Log.exx('unexpected field in EAnnotation:  '+key+' => |'+value+'|',{key:key,value:value,json:json});break;// case ECoreAnnotation.annotations: break; // todo: enable, yes annotations can have annotations\ncase ECoreAnnotation.details:break;case ECoreAnnotation.references:break;case ECoreAnnotation.source:break;}}// annotation.referencesStr = this.read(json, ECoreAnnotation.source, '#/');\n// annotation.name = this.read(json, ECoreAnnotation.name, 'EAnnotation_1');\n// const details: Json[] = this.getDetails(json);\n// for (let i = 0; i < details.length; i++) { new EAnnotationDetail(this, details[i]); }\nreturn generated;}},{key:\"parseRootPackage\",value:function parseRootPackage(parent,json,generated){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DPackage.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.packages.push(dObject.id);var version=json[EcoreParser.prefix+\"xmlns:ecore\"]||'';// model.xmi = json[EcoreParser.prefix+\"xmlns:xmi\"]; // http://www.omg.org/XMI\n// model.xsi = json[EcoreParser.prefix+\"xmlns:xsi\"]; // http://www.w3.org/2001/XMLSchema-instance\nLog.ex(!EcoreParser.supportedEcoreVersions.includes(version),\"unsupported ecore version, must be one of:\"+EcoreParser.supportedEcoreVersions+\" found instead: \"+version);dObject.name=this.read(json,ECoreNamed.namee,'default');// root package name is \"transparent\" and not applied in \"#//reference/paths/...\", if referenced i guess his name is \"#//\"\ndObject.__fullname='';// fullnamePrefix + \"/\" + dObject.name;\nvar annotations=this.getAnnotations(json);var _iterator17=_createForOfIteratorHelper(annotations),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var child=_step17.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator17.e(err);}finally{_iterator17.f();}var subPackages=this.getSubPackages(json);dObject.uri=this.read(json,ECorePackage.nsURI,null);dObject.prefix=this.read(json,ECorePackage.nsPrefix,null);console.warn(\"parseRootPackage.children\",{childs:childs,annotations:annotations,subPackages:subPackages,dObject:dObject,generated:generated});// if (!parent.uri) parent.uri = dObject.uri;\n// if (!parent.prefix) parent.prefix = dObject.prefix; // namespace\nvar _iterator18=_createForOfIteratorHelper(childs),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _child2=_step18.value;switch(_child2[ECoreClass.xsitype]){default:Log.exx('unexpected xsitype:',_child2[ECoreClass.xsitype],' found in jsonfragment:',_child2,', in json:',json,' package:',dObject);break;case'ecore:EClass':this.parseDClass(dObject,_child2,generated,'');break;case'ecore:EEnum':this.parseDEnum(dObject,_child2,generated,'');break;}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}var _iterator19=_createForOfIteratorHelper(subPackages),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var _child3=_step19.value;EcoreParser.parseSubPackage(dObject,_child3,generated,'');}/// *** specific end *** ///\n}catch(err){_iterator19.e(err);}finally{_iterator19.f();}return generated;}},{key:\"parseSubPackage\",value:function parseSubPackage(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DPackage.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.subpackages.push(dObject.id);dObject.name=this.read(json,ECoreNamed.namee,'subPackage_1');dObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator20=_createForOfIteratorHelper(annotations),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var child=_step20.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator20.e(err);}finally{_iterator20.f();}dObject.uri=this.read(json,ECoreSubPackage.nsURI,null);dObject.prefix=this.read(json,ECoreSubPackage.nsPrefix,null);var subPackages=this.getSubPackages(json);console.warn(\"parseSubPackage.children\",{childs:childs,annotations:annotations,subPackages:subPackages,dObject:dObject,generated:generated});// if (!dObject.uri) dObject.uri = dObject.name + \".\" + parent.uri;\n// if (!dObject.prefix) dObject.prefix = dObject.name + \".\" + parent.prefix; // namespace\nvar _iterator21=_createForOfIteratorHelper(childs),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _child4=_step21.value;switch(_child4[ECoreClass.xsitype]){default:Log.exx('unexpected xsitype:',_child4[ECoreClass.xsitype],' found in jsonfragment:',_child4,', in json:',json,' package:',dObject);break;case'ecore:EClass':this.parseDClass(dObject,_child4,generated,dObject.__fullname+\"/\");break;case'ecore:EEnum':this.parseDEnum(dObject,_child4,generated,dObject.__fullname+\"/\");break;}}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}var _iterator22=_createForOfIteratorHelper(subPackages),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _child5=_step22.value;EcoreParser.parseSubPackage(dObject,_child5,generated,dObject.__fullname+\"/\");}/// *** specific end *** ///\n}catch(err){_iterator22.e(err);}finally{_iterator22.f();}return generated;}},{key:\"parseDClass\",value:function parseDClass(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var dObject=DClass.new(this.read(json,ECoreNamed.namee,'Concept 1'),undefined,undefined,undefined,undefined,undefined,parent.id);generated.push(dObject);// dObject.father = parent.id;\n//if (parent) parent.classifiers.push(dObject.id);\n//dObject.name = this.read(json, ECoreNamed.namee, 'Class_1');\ndObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator23=_createForOfIteratorHelper(annotations),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var child=_step23.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator23.e(err);}finally{_iterator23.f();}for(var _key3 in json){switch(_key3){default:Log.exx('unexpected field in parseDClass() |'+_key3+'|',json);break;case ECoreClass.eAnnotations:case ECoreClass.instanceTypeName:case ECoreClass.eSuperTypes:case ECoreClass.xsitype:case ECoreClass.eOperations:case ECoreClass.eStructuralFeatures:case ECoreClass.abstract:case ECoreClass.interface:case ECoreClass.namee:break;}}dObject.instanceClassName=this.read(json,ECoreClass.instanceTypeName,'');dObject.interface=this.read(json,ECoreClass.interface,'false')==='true';dObject.abstract=this.read(json,ECoreClass.abstract,'false')==='true';var tmps=this.read(json,ECoreClass.eSuperTypes,'');dObject.extends=tmps.split(' ');var features=this.getChildren(json);var functions=this.getChildren(json,false,true);var _iterator24=_createForOfIteratorHelper(functions),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var _child6=_step24.value;this.parseDOperation(dObject,_child6,generated,dObject.__fullname+\"/\");}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}var _iterator25=_createForOfIteratorHelper(features),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _child7=_step25.value;var xsiType=this.read(_child7,ECoreAttribute.xsitype);switch(xsiType){default:Log.exx('unexpected xsi:type: ',xsiType,' in feature:',_child7);break;case'ecore:EAttribute':this.parseDAttribute(dObject,_child7,generated,dObject.__fullname+\"/\");break;case'ecore:EReference':this.parseDReference(dObject,_child7,generated,dObject.__fullname+\"/\");break;}}/// *** specific end *** ///\n}catch(err){_iterator25.e(err);}finally{_iterator25.f();}return generated;}},{key:\"parseDEnum\",value:function parseDEnum(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DEnumerator.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.classifiers.push(dObject.id);dObject.name=this.read(json,ECoreNamed.namee,'Enum_1');dObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator26=_createForOfIteratorHelper(annotations),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var child=_step26.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator26.e(err);}finally{_iterator26.f();}for(var _key4 in json){var value=json[_key4];switch(_key4){default:Log.exx('Enum.parse() unexpected key:',_key4,'in json:',json);break;case ECoreEnum.eAnnotations:case ECoreEnum.xsitype:case ECoreNamed.namee:break;case ECoreEnum.eLiterals:break;case ECoreEnum.serializable:dObject.serializable=value==='true';break;case ECoreEnum.instanceTypeName:dObject.instanceClassName=value+'';break;}}var _iterator27=_createForOfIteratorHelper(childs),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _child8=_step27.value;this.parseDEnumLiteral(dObject,_child8,generated,dObject.__fullname+\"/\");}/// *** specific end *** ///\n}catch(err){_iterator27.e(err);}finally{_iterator27.f();}return generated;}},{key:\"parseDEnumLiteral\",value:function parseDEnumLiteral(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DEnumLiteral.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.literals.push(dObject.id);var annotations=this.getAnnotations(json);var _iterator28=_createForOfIteratorHelper(annotations),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var child=_step28.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator28.e(err);}finally{_iterator28.f();}dObject.value=+this.read(json,EcoreLiteral.value,Number.NEGATIVE_INFINITY);//vv4\ndObject.literal=this.read(json,EcoreLiteral.literal,'');dObject.name=this.read(json,ECoreNamed.namee,dObject.literal||'literal_1');dObject.__fullname=fullnamePrefix+dObject.name;/// *** specific end *** ///\nreturn generated;}},{key:\"parseDAttribute\",value:function parseDAttribute(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);// done: old approach does not set pointedBy, i should set father and all pointers in .new() parameters\nvar dObject=DAttribute.new(this.read(json,ECoreNamed.namee,'attr_1'),this.read(json,ECoreAttribute.eType,AttribETypes.EString),parent.id);generated.push(dObject);// dObject.father = parent.id;\n// if (parent) parent.attributes.push(dObject.id);\n//dObject.name = this.read(json, ECoreNamed.namee, 'attr_1');\ndObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator29=_createForOfIteratorHelper(annotations),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var child=_step29.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator29.e(err);}finally{_iterator29.f();}dObject.lowerBound=+this.read(json,ECoreAttribute.lowerbound,0);dObject.upperBound=+this.read(json,ECoreAttribute.upperbound,1);//dObject.type = this.read(json, ECoreAttribute.eType, AttribETypes.EString);\n/// *** specific end *** ///\nreturn generated;}},{key:\"parseDReference\",value:function parseDReference(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DReference.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.references.push(dObject.id);dObject.name=this.read(json,ECorePackage.namee,'Ref_1');dObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator30=_createForOfIteratorHelper(annotations),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var child=_step30.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator30.e(err);}finally{_iterator30.f();}dObject.containment=U.fromBoolString(this.read(json,ECoreReference.containment,false),false);dObject.lowerBound=+this.read(json,ECoreAttribute.lowerbound,0);dObject.upperBound=+this.read(json,ECoreAttribute.upperbound,1);dObject.type=this.read(json,ECoreReference.eType,this.getEcoreTypeName(parent));/// *** specific end *** ///\nreturn generated;}},{key:\"parseDParameter\",value:function parseDParameter(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DParameter.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.parameters.push(dObject.id);dObject.name=this.read(json,ECoreNamed.namee,'arg1');dObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator31=_createForOfIteratorHelper(annotations),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var child=_step31.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator31.e(err);}finally{_iterator31.f();}dObject.lowerBound=+this.read(json,ECoreAttribute.lowerbound,0);dObject.upperBound=+this.read(json,ECoreAttribute.upperbound,1);dObject.type=this.read(json,ECoreAttribute.eType,AttribETypes.EString);dObject.ordered=U.fromBoolString(this.read(json,ECoreOperation.ordered,'false'),false);dObject.unique=U.fromBoolString(this.read(json,ECoreOperation.unique,'false'),false);/// *** specific end *** ///\nreturn generated;}},{key:\"parseDOperation\",value:function parseDOperation(parent,json,generated,fullnamePrefix){if(!generated)generated=[];if(!json){json={};}var childs=this.getChildren(json);var dObject=DOperation.new();generated.push(dObject);dObject.father=parent.id;if(parent)parent.operations.push(dObject.id);dObject.name=this.read(json,ECoreNamed.namee,'operation_1');dObject.__fullname=fullnamePrefix+dObject.name;var annotations=this.getAnnotations(json);var _iterator32=_createForOfIteratorHelper(annotations),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var child=_step32.value;EcoreParser.parseDAnnotation(dObject,child,generated,dObject.__fullname+\"/\");}/// *** specific start *** ///\n}catch(err){_iterator32.e(err);}finally{_iterator32.f();}dObject.lowerBound=+this.read(json,ECoreAttribute.lowerbound,1);dObject.upperBound=+this.read(json,ECoreAttribute.upperbound,1);dObject.type=this.read(json,ECoreAttribute.eType,AttribETypes.EString);dObject.exceptions=[this.read(json,ECoreOperation.eexceptions,'')];dObject.ordered=U.fromBoolString(this.read(json,ECoreOperation.ordered,'false'));dObject.unique=U.fromBoolString(this.read(json,ECoreOperation.unique,'false'));dObject.visibility=AccessModifier.package;var _iterator33=_createForOfIteratorHelper(childs),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var _child9=_step33.value;this.parseDParameter(dObject,_child9,generated,dObject.__fullname+\"/\");}/// *** specific end *** ///\n}catch(err){_iterator33.e(err);}finally{_iterator33.f();}return generated;}/*\r\n    static parseTEMPLATE(parent: DSomething, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DSomething = DSomething.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.CHILDCOLLECTION.push(dObject.id);\r\n        dObject.name = this.read(json, ECoreNamed.namee, defaultNameTODO);\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        for (let child of childs) {\r\n            this.parseDSOMETHING(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        }\r\n        /// *** specific end *** ///\r\n        return generated; }*/ /////////////////////////////////// generic\n},{key:\"getSubPackages\",value:function getSubPackages(thiss){var ret=thiss[ECoreSubPackage.eSubpackages];if(!ret||U.isEmptyObject(ret)){return[];}if(Array.isArray(ret)){return ret;}else{return[ret];}}},{key:\"getAnnotations\",value:function getAnnotations(thiss){var ret=thiss[ECorePackage.eAnnotations];if(!ret||U.isEmptyObject(ret)){return[];}if(Array.isArray(ret)){return ret;}else{return[ret];}}},{key:\"getDetails\",value:function getDetails(thiss){var ret=thiss[ECoreAnnotation.details];if(!ret||U.isEmptyObject(ret)){return[];}if(Array.isArray(ret)){return ret;}else{return[ret];}}},{key:\"getChildren\",value:function getChildren(thiss){var throwError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var functions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!thiss&&!throwError){return[];}var mod=thiss[ECoreRoot.ecoreEPackage];var pkg=thiss[ECorePackage.eClassifiers];var cla=thiss[functions?ECoreClass.eOperations:ECoreClass.eStructuralFeatures];var fun=thiss[ECoreOperation.eParameters];var lit=thiss[ECoreEnum.eLiterals];var ret=mod||pkg||cla||fun||lit;/*if ( ret === undefined || ret === null ) {\r\n          if (thiss['@name'] !== undefined) { ret = thiss; } // if it's the root with only 1 child arrayless\r\n        }*/Log.ex(throwError&&!ret,'getChildren() Failed: ',thiss,ret);// console.log('ret = ', ret, ' === ', {}, ' ? ', (U.isEmptyObject(ret) ? [] : [ret]));\nif(!ret||U.isEmptyObject(ret)){return[];}if(Array.isArray(ret)){return ret;}else{return[ret];}}},{key:\"read\",value:function read(json,field){var valueIfNotFound=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'read<T>()CanThrowError';var ret=json?json[field]:null;if(ret!==null&&ret!==undefined&&field.indexOf(this.XMLinlineMarker)!==-1){Log.ex(U.isObject(ret,false,false,true),'inline value |'+field+'| must be primitive.',ret);ret=U.multiReplaceAll(''+ret,['&amp;','&#38;','&quot;'],['&','\\'','\"']);}if(ret===null||ret===undefined){Log.ex(valueIfNotFound==='read<T>()CanThrowError','this.read<','> failed: field['+field+'], json: ',json);return valueIfNotFound;}return ret;}},{key:\"write\",value:function write(json,field,val){if(val!==null&&field.indexOf(EcoreParser.XMLinlineMarker)!==-1){Log.ex(val!==''+val,'inline value |'+field+'| must be a string.',val);val=U.multiReplaceAll(val,['&','\\'','\"'],['&amp;','&#38;','&quot;']);}else Log.ex(val!==''+val||!U.isObject(val,true),'primitive values should be inserted only inline in the xml:',field,val);json[field]=val;return val;}},{key:\"getEcoreTypeName\",value:function getEcoreTypeName(parent){if(parent.className===DEnumerator.cname||parent.className===DClass.cname)return this.classTypePrefix+this.name;// return Type.classTypePrefix + parent.parent.name; problem: need L-object to navigate\nreturn Log.ex(\"getEcoreTypeName failed\",parent);}}]);return EcoreParser;}();EcoreParser.supportedEcoreVersions=[\"http://www.eclipse.org/emf/2002/Ecore\"];EcoreParser.prefix='@';EcoreParser.XMLinlineMarker='@';EcoreParser.classTypePrefix='#//';export var AccessModifier;(function(AccessModifier){AccessModifier[\"public\"]=\"public\";AccessModifier[\"private\"]=\"private\";AccessModifier[\"protected\"]=\"protected\";AccessModifier[\"internal\"]=\"internal\";AccessModifier[\"package\"]=\"package\";AccessModifier[\"protectedinternal\"]=\"protected internal\";AccessModifier[\"protectedprivate\"]=\"protected private\";})(AccessModifier||(AccessModifier={}));export var ECoreRoot=function ECoreRoot(){_classCallCheck(this,ECoreRoot);};ECoreRoot.ecoreEPackage=void 0;export var ECoreAnnotation=function ECoreAnnotation(){_classCallCheck(this,ECoreAnnotation);};ECoreAnnotation.source=void 0;ECoreAnnotation.references=void 0;ECoreAnnotation.details=void 0;export var ECoreNamed=function ECoreNamed(){_classCallCheck(this,ECoreNamed);};ECoreNamed.namee=void 0;export var ECoreDetail=function ECoreDetail(){_classCallCheck(this,ECoreDetail);};ECoreDetail.key=void 0;ECoreDetail.value=void 0;export var ECoreSubPackage=function ECoreSubPackage(){_classCallCheck(this,ECoreSubPackage);};ECoreSubPackage.eSubpackages=void 0;ECoreSubPackage.eAnnotations=void 0;ECoreSubPackage.eClassifiers=void 0;ECoreSubPackage.nsURI=void 0;ECoreSubPackage.nsPrefix=void 0;ECoreSubPackage.namee=void 0;export var ECorePackage=/*#__PURE__*/function(_ECoreSubPackage){_inherits(ECorePackage,_ECoreSubPackage);var _super2=_createSuper(ECorePackage);function ECorePackage(){_classCallCheck(this,ECorePackage);return _super2.apply(this,arguments);}return ECorePackage;}(ECoreSubPackage);ECorePackage.eAnnotations=void 0;ECorePackage.eSubpackages=void 0;ECorePackage.eClassifiers=void 0;ECorePackage.xmlnsxmi=void 0;ECorePackage.xmlnsxsi=void 0;ECorePackage.xmiversion=void 0;ECorePackage.xmlnsecore=void 0;ECorePackage.nsURI=void 0;ECorePackage.nsPrefix=void 0;ECorePackage.namee=void 0;export var ECoreClass=function ECoreClass(){_classCallCheck(this,ECoreClass);};ECoreClass.eAnnotations=void 0;ECoreClass.eStructuralFeatures=void 0;ECoreClass.xsitype=void 0;ECoreClass.namee=void 0;ECoreClass.eOperations=void 0;ECoreClass.instanceTypeName=void 0;ECoreClass.eSuperTypes=void 0;ECoreClass.abstract=void 0;ECoreClass.interface=void 0;export var ECoreEnum=function ECoreEnum(){_classCallCheck(this,ECoreEnum);};ECoreEnum.eAnnotations=void 0;ECoreEnum.xsitype=void 0;ECoreEnum.namee=void 0;ECoreEnum.instanceTypeName=void 0;ECoreEnum.serializable=void 0;ECoreEnum.eLiterals=void 0;export var EcoreLiteral=function EcoreLiteral(){_classCallCheck(this,EcoreLiteral);};EcoreLiteral.eAnnotations=void 0;EcoreLiteral.namee=void 0;EcoreLiteral.value=void 0;EcoreLiteral.literal=void 0;export var ECoreReference=function ECoreReference(){_classCallCheck(this,ECoreReference);};ECoreReference.eAnnotations=void 0;ECoreReference.xsitype=void 0;ECoreReference.eType=void 0;ECoreReference.containment=void 0;ECoreReference.upperbound=void 0;ECoreReference.lowerbound=void 0;ECoreReference.namee=void 0;export var ECoreAttribute=function ECoreAttribute(){_classCallCheck(this,ECoreAttribute);};ECoreAttribute.eAnnotations=void 0;ECoreAttribute.xsitype=void 0;ECoreAttribute.eType=void 0;ECoreAttribute.namee=void 0;ECoreAttribute.lowerbound=void 0;ECoreAttribute.upperbound=void 0;export var ECoreOperation=function ECoreOperation(){_classCallCheck(this,ECoreOperation);};ECoreOperation.eAnnotations=void 0;ECoreOperation.eType=void 0;ECoreOperation.eexceptions=void 0;ECoreOperation.upperBound=void 0;ECoreOperation.lowerBound=void 0;ECoreOperation.unique=void 0;ECoreOperation.ordered=void 0;ECoreOperation.namee=void 0;ECoreOperation.eParameters=void 0;export var ECoreParameter=function ECoreParameter(){_classCallCheck(this,ECoreParameter);};ECoreParameter.eAnnotations=void 0;ECoreParameter.namee=void 0;ECoreParameter.ordered=void 0;ECoreParameter.unique=void 0;ECoreParameter.lowerBound=void 0;ECoreParameter.upperBound=void 0;ECoreParameter.eType=void 0;export var ECoreObject=function ECoreObject(){_classCallCheck(this,ECoreObject);};ECoreObject.xmlns_xmi=void 0;ECoreObject.xmlns_uri=void 0;ECoreObject.xmi_version=void 0;export var XMIModel=function XMIModel(){_classCallCheck(this,XMIModel);};///////////////\nXMIModel.type=void 0;XMIModel.namee=void 0;ECoreRoot.ecoreEPackage='ecore:EPackage';// this is root tag but not in xml->json, just his attributes/childrens\nECoreNamed.namee=EcoreParser.XMLinlineMarker+'name';ECorePackage.eAnnotations=ECoreSubPackage.eAnnotations=ECoreClass.eAnnotations=ECoreEnum.eAnnotations=EcoreLiteral.eAnnotations=ECoreReference.eAnnotations=ECoreAttribute.eAnnotations=ECoreOperation.eAnnotations=ECoreParameter.eAnnotations='eAnnotations';ECoreAnnotation.source=EcoreParser.XMLinlineMarker+'source';ECoreAnnotation.references=EcoreParser.XMLinlineMarker+'references';// \"#/\" for target = package.\nECoreAnnotation.details='details';// arr\nECoreDetail.key=EcoreParser.XMLinlineMarker+'key';// can have spaces\nECoreDetail.value=EcoreParser.XMLinlineMarker+'value';ECorePackage.eSubpackages='eSubpackages';ECorePackage.eClassifiers='eClassifiers';ECorePackage.xmlnsxmi=EcoreParser.XMLinlineMarker+'xmlns:xmi';// typical value: http://www.omg.org/XMI\nECorePackage.xmlnsxsi=EcoreParser.XMLinlineMarker+'xmlns:xsi';// typical value: http://www.w3.org/2001/XMLSchema-instance\nECorePackage.xmiversion=EcoreParser.XMLinlineMarker+'xmi:version';// typical value: \"2.0\"\nECorePackage.xmlnsecore=EcoreParser.XMLinlineMarker+'xmlns:ecore';ECorePackage.nsURI=EcoreParser.XMLinlineMarker+'nsURI';// typical value: \"http://org/eclipse/example/modelname\"\nECorePackage.nsPrefix=EcoreParser.XMLinlineMarker+'nsPrefix';// typical value: org.eclipse.example.modelname\nECorePackage.namee=EcoreParser.XMLinlineMarker+'name';ECoreSubPackage.eSubpackages='eSubpackages';ECoreSubPackage.eClassifiers='eClassifiers';ECoreSubPackage.nsURI=EcoreParser.XMLinlineMarker+'nsURI';// typical value: \"http://org/eclipse/example/modelname\"\nECoreSubPackage.nsPrefix=EcoreParser.XMLinlineMarker+'nsPrefix';// typical value: org.eclipse.example.modelname\nECoreSubPackage.namee=EcoreParser.XMLinlineMarker+'name';ECoreClass.eStructuralFeatures='eStructuralFeatures';ECoreClass.eOperations='eOperations';ECoreClass.xsitype=EcoreParser.XMLinlineMarker+'xsi:type';// \"ecore:EClass\"\nECoreClass.namee=ECorePackage.namee;ECoreClass.eSuperTypes=EcoreParser.XMLinlineMarker+'eSuperTypes';// space separated: \"#name1 #name2\"...\nECoreClass.instanceTypeName=EcoreParser.XMLinlineMarker+'instanceTypeName';// raw str\nECoreClass.instanceTypeName=EcoreParser.XMLinlineMarker+'instanceTypeName';ECoreClass.abstract=EcoreParser.XMLinlineMarker+'abstract';// bool\nECoreClass.interface=EcoreParser.XMLinlineMarker+'interface';// bool\nECoreEnum.instanceTypeName=ECoreClass.instanceTypeName;ECoreEnum.serializable='serializable';// \"false\", \"true\"\nECoreEnum.xsitype=ECoreClass.xsitype;// \"ecore:EEnum\"\nECoreEnum.eLiterals='eLiterals';ECoreEnum.namee=ECorePackage.namee;EcoreLiteral.literal='literal';EcoreLiteral.namee=ECorePackage.namee;EcoreLiteral.value='value';// any integer (-inf, +inf), not null. limiti = a type int 32 bit? vv4\nECoreReference.xsitype=EcoreParser.XMLinlineMarker+'xsi:type';// \"ecore:EReference\"\nECoreReference.eType=EcoreParser.XMLinlineMarker+'eType';// \"#//Player\"\nECoreReference.containment=EcoreParser.XMLinlineMarker+'containment';// \"true\"\nECoreReference.upperbound=EcoreParser.XMLinlineMarker+'upperBound';// \"@1\"\nECoreReference.lowerbound=EcoreParser.XMLinlineMarker+'lowerBound';// does even exists?\nECoreReference.namee=EcoreParser.XMLinlineMarker+'name';ECoreAttribute.xsitype=EcoreParser.XMLinlineMarker+'xsi:type';// \"ecore:EAttribute\",\nECoreAttribute.eType=EcoreParser.XMLinlineMarker+'eType';// \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\"\nECoreAttribute.namee=EcoreParser.XMLinlineMarker+'name';ECoreAttribute.lowerbound=EcoreParser.XMLinlineMarker+'lowerBound';ECoreAttribute.upperbound=EcoreParser.XMLinlineMarker+'upperBound';ECoreOperation.eParameters='eParameters';ECoreOperation.namee=EcoreParser.XMLinlineMarker+'name';// \"EExceptionNameCustom\",\nECoreOperation.ordered=EcoreParser.XMLinlineMarker+'ordered';// \"false\",\nECoreOperation.unique=EcoreParser.XMLinlineMarker+'unique';// \"false\",\nECoreOperation.lowerBound=EcoreParser.XMLinlineMarker+'lowerBound';// \"5\", ma che senso ha su una funzione?? Ã¨ il return?\nECoreOperation.upperBound=EcoreParser.XMLinlineMarker+'upperBound';ECoreOperation.eType=EcoreParser.XMLinlineMarker+'eType';// \"#//Classname\",\nECoreOperation.eexceptions=EcoreParser.XMLinlineMarker+'eExceptions';// \"#//ClassnameException1 #//ClassNameException2 (also custom classes) ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\nECoreParameter.namee=EcoreParser.XMLinlineMarker+'name';ECoreParameter.ordered=EcoreParser.XMLinlineMarker+'ordered';// \"false\";\nECoreParameter.unique=EcoreParser.XMLinlineMarker+'unique';// \"false\"\nECoreParameter.lowerBound=EcoreParser.XMLinlineMarker+'lowerBound';// \"1\"\nECoreParameter.upperBound=EcoreParser.XMLinlineMarker+'upperBound';// \"2\"\nECoreParameter.eType=EcoreParser.XMLinlineMarker+'eType';// \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubl\nECoreObject.xmlns_xmi=EcoreParser.XMLinlineMarker+'xmlns:xmi';// \"http://www.omg.org/XMI\"\n// ECoreObject.xmlns_uri = EcoreParser.XMLinlineMarker + 'xmlns:org.eclipse.example.modelname'; // \"https://org/eclipse/example/modelname\"\nECoreObject.xmi_version=EcoreParser.XMLinlineMarker+'xmi:version';// \"2.0\"\nXMIModel.type=EcoreParser.XMLinlineMarker+'type';XMIModel.namee=EcoreParser.XMLinlineMarker+'name';","map":{"version":3,"names":["Log","DModel","DValue","DObject","DEnumerator","DEnumLiteral","DAttribute","DReference","DClass","DParameter","DOperation","DPackage","DAnnotation","AttribETypes","U","Selectors","PointedBy","LPointerTargetable","windoww","SetRootFieldAction","Constructors","store","SetFieldAction","DPointerTargetable","ShortAttribETypes","toLongEType","ShortDefaultEClasses","toLongEClass","SavePack","model","arguments","length","undefined","vertexpos","view","_classCallCheck","IStorage","prefix","autosave","_createClass","key","value","del","isOverwrite","get","set","parse","exx","serialize","val","JSON","stringify","e","deserialize","set0","get0","LocalStorage","_IStorage","_inherits","_super","_createSuper","call","localStorage","getItem","getLastOpened","modelNumber","modelname","ret","KeyList","lastOpenedModel","lastOpenedView","lastOpenedPosition","deleteLastOpened","setLastOpened","vertex","EcoreParser","ecorejson","isMetamodel","filename","persist","parsedjson","temp","substring","console","log","paused","parsedElements","parseM2Model","parseM1Model","warn","LinkAllNamesToIDs","fixNamingConflicts","fixObjectPointers","tmpparse","wrapAll","tempfix_untilopennewtabisdone","dobjects","filter","className","cname","values","lobjects","fromArr","m1pointermap","_iterator","_createForOfIteratorHelper","_step","s","n","done","o","ecorePointer","err","f","_iterator2","_step2","v","isMirage","modified","newvalues","map","from","to","id","_iterator3","_step3","elem","new","idMap","nameMap","replacePrimitiveMap","d_Estring","getAllPrimitiveTypes","EString","state","getState","typeprefix","shortkey","EVoid","shortetype","longetype","dClassType","getPrimitiveType","exDev","getDefaultEcoreClass","ecorename","replaceRules","dobj","_iterator4","_step4","name","__fullname","w","old","shortname","_i","_replaceRules","replacekey","_iterator5","_step5","valtmp","isArray","Array","_iterator6","_step6","target","indexOf","ww","ex","extendedBy","push","DfromPtr","fromPointer","getLiteral","ordinal","_LPointerTargetable$f","_LPointerTargetable$f2","fromD","ordinals","__raw","_iterator7","_step7","_loop","dval","meta","instanceof","type","mapper","l","_ret","_iterator8","list","_step8","ptrkey","_iterator9","_step9","_iterator10","_step10","pointedBy","Error","updateSuperClasses","todoGetPrimitiveTypenope","json","generated","ECoreNamed","namee","pos","dObject","parseRootPackage","parseM2Model_old","children","getChildren","annotations","getAnnotations","_iterator11","_step11","child","parseDAnnotation","_iterator12","_step12","_meta","allmodels","getAll","m","xmlns","XMLinlineMarker","ns","findns","outerloop","key0","val0","key1","_matchpkg$","allpkgs","matchpkg","d","uri","ECoreObject","xmi_version","xmlns_xmi","expected","namespacedclass","mmclass","getClassByNameSpace","roots_for_this_metaclass","_iterator13","_step13","rootjson","parseDObject","getobjectmetaclass","metaSuperClass","subclasses","subclasseshapes","_i2","_subclasses","sc","row","_iterator14","_step14","feat","lfeat","dfeat","findBestMatch","m2classes","parent","parentType","_meta2","_meta3","father","objects","metaname","metafeature","classmeta","parseDValue","jsonvalues","dValue","features","_iterator15","_step15","fullnamePrefix","read","_iterator16","_step16","ECoreAnnotation","details","references","source","childs","packages","version","supportedEcoreVersions","includes","_iterator17","_step17","subPackages","getSubPackages","ECorePackage","nsURI","nsPrefix","_iterator18","_step18","ECoreClass","xsitype","parseDClass","parseDEnum","_iterator19","_step19","parseSubPackage","subpackages","_iterator20","_step20","ECoreSubPackage","_iterator21","_step21","_iterator22","_step22","_iterator23","_step23","eAnnotations","instanceTypeName","eSuperTypes","eOperations","eStructuralFeatures","abstract","interface","instanceClassName","tmps","extends","split","functions","_iterator24","_step24","parseDOperation","_iterator25","_step25","xsiType","ECoreAttribute","parseDAttribute","parseDReference","classifiers","_iterator26","_step26","ECoreEnum","eLiterals","serializable","_iterator27","_step27","parseDEnumLiteral","literals","_iterator28","_step28","EcoreLiteral","Number","NEGATIVE_INFINITY","literal","eType","_iterator29","_step29","lowerBound","lowerbound","upperBound","upperbound","_iterator30","_step30","containment","fromBoolString","ECoreReference","getEcoreTypeName","parseDParameter","parameters","_iterator31","_step31","ordered","ECoreOperation","unique","operations","_iterator32","_step32","exceptions","eexceptions","visibility","AccessModifier","package","_iterator33","_step33","thiss","eSubpackages","isEmptyObject","getDetails","throwError","mod","ECoreRoot","ecoreEPackage","pkg","eClassifiers","cla","fun","eParameters","lit","field","valueIfNotFound","isObject","multiReplaceAll","write","classTypePrefix","ECoreDetail","_ECoreSubPackage","_super2","apply","xmlnsxmi","xmlnsxsi","xmiversion","xmlnsecore","ECoreParameter","xmlns_uri","XMIModel"],"sources":["C:/d/Programming/web/jodel-mde/src/api/data.ts"],"sourcesContent":["import type {\r\n    Json,\r\n    Pointer,\r\n    GObject,\r\n    Dictionary,\r\n    DocString} from \"../joiner\";\r\nimport {\r\n    Log,\r\n    DModelElement,\r\n    DModel,\r\n    LModel,\r\n    DValue,\r\n    LValue,\r\n    DObject,\r\n    LObject,\r\n    DEnumerator,\r\n    DEnumLiteral,\r\n    DAttribute,\r\n    LAttribute,\r\n    DReference,\r\n    LReference,\r\n    DClassifier,\r\n    DClass,\r\n    LClass,\r\n    DParameter,\r\n    DOperation,\r\n    DPackage,\r\n    LPackage,\r\n    DTypedElement,\r\n    LTypedElement,\r\n    DAnnotation,\r\n    AttribETypes,\r\n    U,\r\n    CreateElementAction,\r\n    Selectors,\r\n    PointedBy,\r\n    LPointerTargetable,\r\n    windoww,\r\n    SetRootFieldAction,\r\n    Constructors,\r\n    store,\r\n    SetFieldAction,\r\n    DPointerTargetable, ShortAttribETypes, toLongEType, DState, Debug\r\n} from \"../joiner\";\r\nimport {DefaultEClasses, ShortDefaultEClasses, toLongEClass} from \"../common/U\";\r\n\r\ntype RET<T = boolean> = T | Promise<T>;\r\ntype Ret = RET;\r\n\r\nclass SavePack{\r\n    model: string;\r\n    vertexpos: string;\r\n    view: string;\r\n    constructor(model: string='', vertexpos: string='', view:string='') {\r\n        this.model = model;\r\n        this.vertexpos = vertexpos;\r\n        this.view = view;\r\n    }\r\n}\r\n\r\ntype JsonSavePack = {[key in keyof SavePack]: Json | null }\r\n\r\n\r\nexport abstract class IStorage{\r\n    static get():IStorage { return Log.exx(\"IStorage.get (static) should be overridden\"); }\r\n    public prefix: string;\r\n    public autosave: boolean;\r\n    constructor(prefix: string, autosave: boolean) {\r\n        this.prefix = prefix;\r\n        this.autosave = autosave;\r\n    }\r\n\r\n\r\n    public del(key: string | number): boolean{\r\n        let isOverwrite = this.get(key) !== null;\r\n        this.set(key, '');\r\n        return isOverwrite; }\r\n    public abstract set(key: string | number, val: string | any): RET;\r\n    get<T extends boolean>(key: string | number, parse: T = false as any): T extends false ? null | string : null | any{ return Log.exx(\"IStorage.get should be overridden\"); }\r\n\r\n    protected serialize(val: any): string { // serialize\r\n        try { return JSON.stringify(val); } catch(e){ return \"\"+val; }\r\n    }\r\n    protected deserialize(val: string): any{ // de-serialize\r\n        try { return JSON.parse(val); } catch(e){ return val; }\r\n    }\r\n    protected set0(val: any): string { return this.serialize(val); }\r\n    protected get0(val: any): string { return this.deserialize(val); }\r\n    protected parse(val: any): string { return this.deserialize(val); }\r\n}\r\n\r\nexport class LocalStorage extends IStorage{\r\n    public static get():LocalStorage {return new LocalStorage(\"_j\", true); }\r\n    private constructor (prefix: string, autosave: boolean) { super(prefix, autosave); }\r\n\r\n    private static KeyList= {lastOpenedModel: \"lastOpenedModel\",lastOpenedView: \"lastOpenedView\",lastOpenedPosition: \"lastOpenedPosition\",}\r\n\r\n\r\n    get<T extends boolean>(key: string | number, parse: T = false as any): T extends false ? null | string : null | any{\r\n        let val = localStorage.getItem(this.prefix+key);\r\n        return parse ? this.parse(val) : val;\r\n    }\r\n\r\n    set(key?: string | number, val?: string | any): boolean {\r\n        val = this.serialize(val);\r\n        // let isOverwrite = localStorage.getItem(this.prefix+key);\r\n        localStorage.set(this.prefix+key, val);\r\n        return true;\r\n    }\r\n\r\n\r\n    public getLastOpened(modelNumber: 1 | 2): SavePack {\r\n        let modelname = \"m\" + modelNumber + \"_\";\r\n        const ret: SavePack = new SavePack();\r\n        ret.model = this.get(modelname + LocalStorage.KeyList.lastOpenedModel, false) || '';\r\n        ret.view = this.get(modelNumber + LocalStorage.KeyList.lastOpenedView, false) || '';\r\n        ret.vertexpos = this.get(modelNumber + LocalStorage.KeyList.lastOpenedPosition, false) || '';\r\n        return ret; }\r\n\r\n    public deleteLastOpened(modelNumber: 1 | 2): void { this.setLastOpened(modelNumber, '', '', ''); }\r\n\r\n    public setLastOpened(modelNumber: 1 | 2, model: string = '', view: string = '', vertex: string = ''): void {\r\n        let modelname = \"m\" + modelNumber + \"_\";\r\n        if (model) this.set(modelname + LocalStorage.KeyList.lastOpenedModel, model);\r\n        else this.del(modelname +  LocalStorage.KeyList.lastOpenedModel);\r\n        if (view) this.set(modelname + LocalStorage.KeyList.lastOpenedView, view);\r\n        else this.del(modelname +  LocalStorage.KeyList.lastOpenedView);\r\n        if (vertex) this.set(modelname + LocalStorage.KeyList.lastOpenedPosition, vertex);\r\n        else this.del(modelname +  LocalStorage.KeyList.lastOpenedPosition); }\r\n\r\n\r\n}\r\n\r\nexport class EcoreParser{\r\n    static supportedEcoreVersions = [\"http://www.eclipse.org/emf/2002/Ecore\"];\r\n    static prefix:string = '@';\r\n\r\n    static parse(ecorejson: GObject | string | null, isMetamodel: boolean, filename: string | undefined, persist: boolean = true): DModelElement[]{\r\n        if (!ecorejson) return [];\r\n        let parsedjson: GObject;\r\n        if (typeof ecorejson === \"string\") try { parsedjson = JSON.parse(ecorejson); } catch(e) { windoww.temp = ecorejson; Log.exx(\"error while parsing json:\", e, ecorejson.substring(0, 1000)); throw e; }\r\n        else parsedjson = ecorejson;\r\n        console.log(\"root parse\", {ecorejson, parsedjson});\r\n        // isMetamodel = !!parsedjson[ECoreRoot.ecoreEPackage];\r\n\r\n        Constructors.paused = true;\r\n        let parsedElements: DModelElement[] = isMetamodel ? EcoreParser.parseM2Model(parsedjson, filename) : EcoreParser.parseM1Model(parsedjson, undefined, filename);\r\n        console.warn(\"parse.result D\", parsedElements);\r\n        this.LinkAllNamesToIDs(parsedElements);\r\n        this.fixNamingConflicts(parsedElements);\r\n        Constructors.paused = false;\r\n        // if (persist) CreateElementAction.newBatch(parsedElements);\r\n        // update m1 object pointers (need them to be persistent to navigate .fathers and get ecore pointer strings using LObject)\r\n        this.fixObjectPointers(parsedElements); // updates dvalue.values from ecore reference to pointers.\r\n        Constructors.persist(parsedElements);\r\n\r\n        windoww.tmpparse = () => LPointerTargetable.wrapAll(parsedElements);\r\n\r\n        this.tempfix_untilopennewtabisdone(parsedElements, isMetamodel);\r\n\r\n        console.log('parsedElem', parsedElements)\r\n        return parsedElements;\r\n    }\r\n\r\n    private static fixObjectPointers(parsedElements: DModelElement[]): void {\r\n        let dobjects: DObject[] = parsedElements.filter(e=>e.className === DObject.cname) as any[];\r\n        let values: DValue[] = parsedElements.filter(e=>e.className === DValue.cname) as any[];\r\n        let lobjects: LObject[] = LPointerTargetable.fromArr(dobjects);\r\n        let m1pointermap: Dictionary<string, LObject> = { }; //    \"//@rootrefname.index@/refname.index/@....etc\"\r\n        for (let o of lobjects){ m1pointermap[o.ecorePointer()] = o; }\r\n        for (let v of values) {\r\n            if (v.isMirage) continue;\r\n            let modified = false;\r\n            let newvalues = v.values.map((e) => {\r\n                if (!m1pointermap[e as any]) return e;\r\n                modified = true;\r\n                console.log(\"m1 pointer resolved:\", {from:e, to:m1pointermap[e as any].id});\r\n                return m1pointermap[e as any].id;\r\n            });\r\n            if (!modified) continue;\r\n            //let lv: LValue = LPointerTargetable.from(v);\r\n            v.values = newvalues;\r\n        }\r\n\r\n    }\r\n    private static tempfix_untilopennewtabisdone(parsedElements: DModelElement[], isMetamodel: boolean) {\r\n        // replaces current model with parsed model. this needs to be removed to open a new tab later on.\r\n        let model: DModel = null as any;\r\n        for (let elem of parsedElements) { if (elem.className === DModel.cname) { model = elem as any; break; } }\r\n        SetRootFieldAction.new(isMetamodel ? \"m2models\" : \"m1models\", model.id, '+=', false); // it is pointer but no need to update pointedby's this time\r\n    }\r\n\r\n    // resolve eCore pointers to Jodel pointers and set the PointedBy\r\n    private static LinkAllNamesToIDs(parsedElements: DModelElement[]): void {\r\n        // todo: Ã¨ post-parse che legga i nomi e assegni gli id aggiustando le references e extends settati by name. trova i campi temporanei cercando i @ts-ignore\r\n        // update mref, attribute, parameter type\r\n        // update operation exception\r\n        // replace those names with id's\r\n\r\n        let idMap: Dictionary<Pointer, DModelElement> = {};\r\n        let nameMap: Dictionary<string, DModelElement> = {};\r\n        let replacePrimitiveMap: Dictionary<string, DClassifier> = {};\r\n        let d_Estring: DClassifier = Selectors.getAllPrimitiveTypes()[1];\r\n        replacePrimitiveMap[AttribETypes.EString] = d_Estring;\r\n        // todo: do the same for all other primitives\r\n        let state: DState = store.getState();\r\n\r\n        // let longprefixlength = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore'.length;\r\n        const typeprefix = \"#//\";\r\n        for (let shortkey in ShortAttribETypes) {\r\n            if (shortkey === ShortAttribETypes.EVoid) continue;\r\n            let shortetype: ShortAttribETypes = (ShortAttribETypes as GObject)[shortkey];\r\n            let longetype: AttribETypes = toLongEType(shortetype);\r\n            let dClassType: DClassifier = Selectors.getPrimitiveType(shortetype, state);\r\n            Log.exDev(!dClassType, \"missing primitive type: \" + shortkey, {shortkey, shortetype, longetype, dClassType, state});\r\n            // the correct one\r\n            replacePrimitiveMap[typeprefix + shortkey] = dClassType; // like \"#//EChar\"\r\n            // fallbacks for missing type instead of crash\r\n            if (!replacePrimitiveMap[shortkey]) replacePrimitiveMap[shortkey] = dClassType;\r\n            if (!replacePrimitiveMap[shortetype]) replacePrimitiveMap[shortetype] = dClassType;\r\n            if (!replacePrimitiveMap[longetype]) replacePrimitiveMap[longetype] = dClassType;\r\n        }\r\n        for (let shortkey in ShortDefaultEClasses) {\r\n            let shortetype: ShortDefaultEClasses = (ShortDefaultEClasses as GObject)[shortkey];\r\n            let longetype: DefaultEClasses = toLongEClass(shortetype);\r\n            let dClassType: DClassifier = Selectors.getDefaultEcoreClass(shortetype, state);\r\n            Log.exDev(!dClassType, \"missing ecore native class: \" + shortkey, {shortkey, shortetype, longetype, dClassType, state});\r\n\r\n            // the correct one\r\n            replacePrimitiveMap[longetype] = dClassType;\r\n            // fallbacks for missing type instead of crash\r\n            if (!replacePrimitiveMap[shortkey]) replacePrimitiveMap[shortkey] = dClassType;\r\n            if (!replacePrimitiveMap[shortetype]) replacePrimitiveMap[shortetype] = dClassType;\r\n            if (!replacePrimitiveMap[longetype]) replacePrimitiveMap[typeprefix + shortkey] = dClassType; // like \"#//EObject\"\r\n        }\r\n\r\n\r\n        for (let ecorename in replacePrimitiveMap) {\r\n            // duplicates are very likely becuase of fallback alias like \"EChar\", but they shouldn't override user-defined class EChar if it exist, so don't throw error.\r\n            if (idMap[replacePrimitiveMap[ecorename].id]) continue;\r\n            idMap[replacePrimitiveMap[ecorename].id] = replacePrimitiveMap[ecorename];\r\n        }\r\n\r\n        // let prereplace = (name: string) => name.replaceAll(\"#//\", \"\");\r\n        let replaceRules = [\"extends\", /*\"extendedBy\",*/ \"exceptions\", \"type\", \"values\"];\r\n        let dobj: GObject & DModelElement;\r\n\r\n        for (dobj of parsedElements) {\r\n            idMap[dobj.id] = dobj;\r\n            if (!dobj.name || dobj.className === DModel.cname) continue; // Model name can be reused internally\r\n            let name = (dobj as GObject).__fullname;\r\n            delete (dobj as GObject).__fullname;\r\n            if (dobj.className === DOperation.cname || dobj.className === DParameter.cname) {\r\n                // operation overload, in this case i create N separate operations, but all references will point to the last operation.\r\n                // empty on purpose, just avoid naming check\r\n            }\r\n                // todo: problem, uml.ecore have \"isComposite\" operation and attribute on sme class \"property\", so who is referenced by \"#//property/isComposite\" ??\r\n            // else Log.exDev(nameMap[typeprefix + name], \"found 2 elements with same name\", {nameMap, dobj, name, shortname: dobj.name, typeprefix});\r\n            else Log.w(nameMap[typeprefix + name], \"found 2 elements with same name\", {nameMap, new:dobj, old:nameMap[typeprefix + name], name, shortname: dobj.name, typeprefix});\r\n            nameMap[typeprefix + name] = dobj;\r\n            // nameMap[typeprefix + dobj.name] = dobj; // <eAnnotations source=\"subsets\" references=\"#//Activity/group\"/>\r\n        }\r\n\r\n        for (let replacekey of replaceRules){\r\n            for (dobj of parsedElements) {\r\n                let valtmp: string | string[] = dobj[replacekey] as string | string[];\r\n                if (valtmp === undefined) continue; // for missing properties in a d-object like looking for extends on a dmodel.\r\n                let values: string[]\r\n                let isArray = Array.isArray(valtmp);\r\n                if (isArray) {\r\n                    values = valtmp as string[];\r\n                    dobj[replacekey] = [];\r\n                }\r\n                else {\r\n                    values = [valtmp as string];\r\n                }\r\n                for (let value of values) {\r\n                    if (!value) continue;\r\n                    // console.log(\"fixalltypes\", {replacekey, dobj, value, values});\r\n                    let target: DModelElement = replacePrimitiveMap[value];\r\n                    if (!target) target = nameMap[value];\r\n                    if (!target && value.indexOf(\"ecore:EDataType\") === 0) {\r\n                        Log.ww('found unknown EDataType \"' + value + '\", remapping it to string');\r\n                        target = replacePrimitiveMap[AttribETypes.EString];\r\n                    }\r\n                    /*\r\n                    if (!target && value === \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EObject\"){\r\n                        Log.ww('found type Object is not supported yet in metamodel, remapped to EString');\r\n                        target = replacePrimitiveMap[AttribETypes.EString];\r\n                    }*/\r\n                    // if (Pointers.isPointer(value)) { target = value;  if it happen to be a pointer it's a mistake in parser }\r\n                    // (value.indexOf(\"#//\") == 0) && console.log(\"attempt to replace primitive type to his id\", {target, dobj, replacekey, value, replacePrimitiveMap, nameMap, idMap, parsedElements});\r\n\r\n                    if (replacekey === \"extends\") {\r\n                        if (!target) continue;\r\n                        Log.ex(target.className !== DClass.cname, \"found a class attempting to extend an object that is not a class\", {target, dobj, replacePrimitiveMap, nameMap, idMap});\r\n                        (target as DClass).extendedBy.push((dobj as DClass).id);\r\n                    }\r\n                    Log.ex(!target, \"LinkAllNames() can't find type target:\", {value, nameMap, replacePrimitiveMap, dobj, replacekey});\r\n                    if (isArray) dobj[replacekey].push(target.id);\r\n                    else dobj[replacekey] = target.id;\r\n                }\r\n            }\r\n        }\r\n\r\n        // fix from ordinals to Pointer<DEnumLiteral>\r\n        function DfromPtr<T extends DPointerTargetable>(id: Pointer<T>|null|undefined): T{ return !id ? undefined as any : (DPointerTargetable.fromPointer(id, state)); }\r\n        function getLiteral(id: Pointer<DEnumerator>, ordinal: number): DEnumLiteral { return LPointerTargetable.fromD(DfromPtr(id))?.ordinals[ordinal]?.__raw; }\r\n        for (let elem of parsedElements) {\r\n            if (elem.className !== DValue.cname) continue;\r\n            let dval: DValue = elem as DValue;\r\n            let meta: DAttribute | DReference = DfromPtr(dval.instanceof as Pointer<DAttribute|DReference>);\r\n            if (!meta) continue;\r\n            let type: DEnumerator = DfromPtr(meta.type) as DEnumerator;\r\n            if (!type || type.className !== DEnumLiteral.cname) continue;\r\n            let mapper = (v: unknown): Pointer<DEnumLiteral> => {\r\n                if (typeof v !== \"number\") { Log.e(\"found non-numeric value in a literal value.\", v, dval); return v as any; }\r\n                let l = getLiteral(type.id, v);\r\n                return l ? l.id : v as any;\r\n            }\r\n            dval.values = dval.values.map( mapper );\r\n        }\r\n\r\n        // finally: set all pointedby\r\n        for (let ptrkey of PointedBy.list) for(dobj of parsedElements) {\r\n            let valtmp: string | string[] = dobj[ptrkey] as string | string[];\r\n            let values: string[];\r\n            if (Array.isArray(valtmp)) {\r\n                values = valtmp as string[];\r\n            }\r\n            else {\r\n                if (valtmp === undefined) values = [];\r\n                // if (valtmp === \"modeltmp\") { dobj[ptrkey] = null; values = []; } // because model.father is null, but i want to error check others and let them crash if missing father\r\n                else values = [valtmp as string];\r\n            }\r\n            for (let value of values) {\r\n                if (!value) continue;\r\n                // errore: per operazione.type l'import mi restituisce puntatore a oggetto stringa, ma non Ã¨ tra gli oggetti parsed\r\n                let target: DModelElement = idMap[value];\r\n                if (target) {\r\n                    target.pointedBy.push(PointedBy.new(\"idlookup.\" + dobj.id + \".\" + ptrkey));\r\n                } else {\r\n                    target = DfromPtr(value);\r\n                    console.log(\"fixalltypes\", {ptrkey, valtmp, dobj, value, values, target, idMap});\r\n                    if (!target) throw new Error(\"target undefined\");\r\n                    SetFieldAction.new(target, \"pointedBy\", PointedBy.new(\"idlookup.\" + dobj.id + \".\" + ptrkey),'+=', false);\r\n                }\r\n            }\r\n        }\r\n        // update superclasses\r\n        this.updateSuperClasses(parsedElements);\r\n    }\r\n\r\n    private static todoGetPrimitiveTypenope(type: AttribETypes.EString | string): Pointer<DClass, 1, 1, LClass> {\r\n        // akready fixed in LinkAllNamesToID\r\n        return 'todoGetPrimitiveType from parser';\r\n    }\r\n\r\n    private static updateSuperClasses(parsedElements: DModelElement[]): void {\r\n        // todo:3\r\n\r\n    }\r\n    private static fixNamingConflicts(parsedElements: DModelElement[]): void {\r\n        // todo:4 final\r\n    }\r\n\r\n    static parseM2Model(json: Json, filename: string | undefined): DModelElement[] {\r\n        let generated: DModelElement[] = [];\r\n        if (!json) { json = {}; }\r\n        let modelname = json[ECoreNamed.namee] as string;\r\n        if (!modelname && filename) {\r\n            let pos = filename.indexOf(\".\");\r\n            modelname = pos === -1 ? filename : filename.substring(0, pos); }\r\n        let dObject: DModel = DModel.new( modelname || \"imported_metamodel_1\", undefined, true, true);\r\n        console.log(\"made model\", json);\r\n        generated.push(dObject); // dObject.father = 'modeltmp' as any;\r\n        // const annotations: Json[] = this.getAnnotations(json); i set them on root package\r\n        // for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific  *** ///\r\n        // let defPackage: DPackage = DPackage.new(json)\r\n        EcoreParser.parseRootPackage(dObject, json, generated);\r\n        return generated;\r\n    }\r\n\r\n    static parseM2Model_old(json: Json, filename: string | undefined): DModelElement[] {\r\n        let generated: DModelElement[] = [];\r\n        if (!json) { json = {}; }\r\n        let modelname = json[ECoreNamed.namee] as string;\r\n        if (!modelname && filename) {\r\n            let pos = filename.indexOf(\".\");\r\n            modelname = pos === -1 ? filename : filename.substring(0, pos); }\r\n        let dObject: DModel = DModel.new( modelname || \"imported_metamodel_1\", undefined, true, true);\r\n        console.log(\"made model\", json);\r\n        generated.push(dObject); // dObject.father = 'modeltmp' as any;\r\n        /// *** specific  *** ///\r\n        const children = EcoreParser.getChildren(json);\r\n        const annotations = EcoreParser.getAnnotations(json);\r\n        // dObject.name = json[ECoreNamed.namee] as string || \"imported_metamodel_1\";\r\n        console.log(\"made model 2\", children, annotations);\r\n        for (let child of annotations) {\r\n            EcoreParser.parseDAnnotation(dObject, child, generated, 'aaaaaaaaaaaaaaaaaaaaaaaaaaaa');\r\n        }\r\n        console.log(\"made annotations\");\r\n        for (let child of children) {\r\n            EcoreParser.parseRootPackage(dObject, child, generated);\r\n        }\r\n        console.log(\"made packages\");\r\n        return generated;\r\n    }\r\n\r\n    static parseM1Model(json: Json, meta?: LModel, filename?: string): DModelElement[] {\r\n        let generated: DModelElement[] = [];\r\n        if (!json) { json = {}; }\r\n        /// *** specific  *** ///\r\n        // this.parseDObject(json, dObject, DModel,undefined, generated);\r\n        let allmodels: DModel[];\r\n        if (!meta && filename) {\r\n            allmodels = Selectors.getAll(DModel);\r\n            allmodels = allmodels.filter( (m) => m.name === filename);\r\n            meta = LPointerTargetable.fromD(allmodels[0]);\r\n        } else allmodels = [];\r\n\r\n        let xmlns =  EcoreParser.XMLinlineMarker + \"xmlns:\";\r\n        let ns: string | undefined = undefined as any;\r\n        function findns(key: string): false | string {\r\n            let pos = key.indexOf(\":\");\r\n            if (pos <= 0) return false;\r\n            return ns = key.substring(0, pos); // through namespace before the name of the root objects;\r\n            // additional method: through xmlns key\r\n            // if (key.indexOf(xmlns)) continue; // \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\",\r\n            // ns = key.substring(xmlns.length); break;\r\n        }\r\n        outerloop: for (let key0 in json) { // ns can be at most in sublevel 3, this is annoying but i need it at beginning of parsing\r\n            if (findns(key0)) break;\r\n            let val0 = json[key0];\r\n            if (typeof val0 === \"object\") for (let key1 in val0) {\r\n                if (findns(key0)) break outerloop;\r\n            }\r\n        }\r\n        if (ns && !meta) {\r\n            let allpkgs: LPackage[] = Selectors.getAll(DPackage, undefined, undefined, true, true);\r\n            let matchpkg: LPackage[] = allpkgs.filter( (d) => d.uri === ns);\r\n            meta = matchpkg[0]?.model;\r\n            // Log.exDev(!meta, \"metamodel not found: \", {ns, json, filename, allmodels, allpkgs, matchpkg}) // todo: after tests remove this check and allow shapeless models.\r\n        }\r\n\r\n        let modelname = '';\r\n        if (!modelname && filename) {\r\n            let pos = filename.indexOf(\".\");\r\n            modelname = (pos === -1 ? filename : filename.substring(0, pos)); }\r\n        let dObject: DModel = DModel.new( modelname || \"imported_model_1\", meta?.id, false, true);\r\n        console.log(\"made model\", json);\r\n        generated.push(dObject);\r\n\r\n        for (let key in json) {\r\n            switch(key) {\r\n                case ECoreObject.xmi_version: // this is only on roots\r\n                    Log.ex(json[key] !== \"2.0\",\"The only supported ecore version is \\\"2.0\\\", found instead: \\\"\"+json[key] +\"\\\"\");\r\n                    break;\r\n                // case ECoreObject.xmlnsecore:\r\n                case ECoreObject.xmlns_xmi:\r\n                    let expected = \"http://www.omg.org/XMI\";\r\n                    Log.ex(json[key] !== expected,\"Unexpected XMI schema. Should be \\\"\"+expected+\"\\\", found instead: \\\"\"+json[key] +\"\\\"\");\r\n                    break;\r\n                default: // a feature name\r\n                    let val = json[key];\r\n                    if (!val) continue;\r\n                    if (key.indexOf(xmlns) === 0) continue; // \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\",\r\n                    if (key[0] === EcoreParser.XMLinlineMarker) key = key.substring(EcoreParser.XMLinlineMarker.length);\r\n\r\n                    const namespacedclass: string = key;\r\n                    const mmclass: LClass | undefined = meta && meta.getClassByNameSpace(namespacedclass);\r\n                    if (!mmclass) console.log(\"failed to get mmclass\", {meta, key, mmclass})\r\n                    const roots_for_this_metaclass: Json[] = Array.isArray(val) ? val : [val]; // there might be N roots of class A, M of type B...\r\n                    for(let rootjson of roots_for_this_metaclass) {\r\n                        // DObject.new(mmclass.id, dObject.id, DModel, undefined, true)\r\n                        EcoreParser.parseDObject(rootjson, dObject, DModel, mmclass, generated);\r\n                    }\r\n            }\r\n        }\r\n        return generated;\r\n    }\r\n    /*\r\n    {\r\n      \"org.eclipse.example.bowling:League\": { <-- :classroot\r\n        \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n        \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n        \"-xmi:version\": \"2.0\",\r\n        \"Players\": [\r\n          { \"-name\": \"tizio\" },\r\n          { \"-name\": \"asd\" }\r\n        ]\r\n      }\r\n    }\r\n    */\r\n\r\n\r\n    /// In Ecore parsing when you find a value list, it is possible to recover only the type for the meta-feature,<br>\r\n    /// but an array of Mammals might have some Whales, Pigs, etc mixed in. and you have to get the correct subclass for each\r\n    static getobjectmetaclass(json: Json, metaSuperClass: LClass): LClass {\r\n        return metaSuperClass; // todo: comment this and execute below\r\n        let subclasses: LClass[] | [] = !metaSuperClass ? [] : [metaSuperClass];\r\n        let subclasseshapes: Dictionary<Pointer<DClass>, {l: LClass } & Dictionary<DocString<\"feature name\">,  LTypedElement[\"type\"]/*feature type*/>> = {}\r\n        for (let sc of subclasses) {\r\n            subclasseshapes[sc.id] = {l: sc};\r\n            let row = subclasseshapes[sc.id];\r\n            for (let feat of sc.children) {\r\n                let lfeat: LTypedElement = feat as any;\r\n                let dfeat: DTypedElement = lfeat.__raw as any;\r\n                if (!dfeat.name || !dfeat.type) continue;\r\n                row[dfeat.name] = lfeat.type;\r\n            }\r\n        }\r\n        return this.findBestMatch(subclasseshapes, json);\r\n    }\r\n    static findBestMatch(\r\n        m2classes: Dictionary<Pointer<DClass>,  {l: LClass } & Dictionary<DocString<\"feature name\">, LTypedElement[\"type\"]>>,\r\n        json: Dictionary<DocString<\"feature name\">, any/*actual val instead of type*/>): LClass{\r\n        throw new Error(\"todo\");\r\n        return null as any;\r\n    }\r\n    static parseDObject(json: Json, parent: DModel | DValue, parentType: typeof DModel | typeof DValue, meta: LClass | undefined, generated: DModelElement[]): DModelElement[]{\r\n        if (!json) { json = {}; }\r\n        meta = meta && this.getobjectmetaclass(json, meta);\r\n        // let dObject: DObject = DObject.new(meta?.id, parent.id, parentType, json[\"name\"] as string || \"obj_1\");\r\n        // let data: Partial<DObject> = {};\r\n        let dObject: DObject = DObject.new(meta?.id, parent.id, parentType, json[\"name\"] as string || \"obj_1\");\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) {\r\n            if (parentType === DModel) (parent as DModel).objects.push(dObject.id);\r\n            else (parent as DValue).values.push(dObject.id);\r\n        }\r\n        console.log(\"made dobject\", {json, dObject, meta, metaname: meta?.name});\r\n        /// *** specific  *** ///\r\n        for (let key in json) {\r\n            switch(key) {\r\n                case ECoreObject.xmi_version: // this is only on roots\r\n                    Log.ex(json[key] !== \"2.0\",\"The only supported ecore version is \\\"2.0\\\", found instead: \\\"\"+json[key] +\"\\\"\");\r\n                    break;\r\n                // case ECoreObject.xmlnsecore:\r\n                case ECoreObject.xmlns_xmi:\r\n                    let expected = \"http://www.omg.org/XMI\";\r\n                    Log.ex(json[key] !== expected,\"Unexpected XMI schema. Should be \\\"\"+expected+\"\\\", found instead: \\\"\"+json[key] +\"\\\"\");\r\n                    break;\r\n                default: // a feature name\r\n                    let val = json[key];\r\n                    if (!val) continue;\r\n                    if (key[0] === EcoreParser.XMLinlineMarker) key = key.substring(1);\r\n                    if (key.indexOf(\"xmlns:\") === 0) continue; // \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\",\r\n                    let metafeature: LAttribute | LReference | undefined = meta && (meta as any)[\"@\"+key];\r\n                    console.log(\"feature meta\", {json, dObject, key, val, metafeature, classmeta: meta});\r\n                    let values: any[];\r\n                    if (Array.isArray(val)) values = val;\r\n                    else if (val as unknown === undefined) values = [];\r\n                    else values = [val];\r\n                    EcoreParser.parseDValue(key, values, dObject/*father*/, metafeature/*meta*/, generated);\r\n                // DValue.new(key, metafeature?.id, values, dObject, true, false);\r\n            }\r\n        }\r\n        return generated;\r\n    }\r\n\r\n    private static parseDValue(name:string | undefined, jsonvalues: any[], parent: DObject, meta: LAttribute | LReference | undefined, generated: DModelElement[]): DModelElement[] {\r\n        if (!jsonvalues) { jsonvalues = []; }\r\n        // let dObject: DObject = DObject.new(meta?.id, parent.id, parentType, json[\"name\"] as string || \"obj_1\");\r\n        console.log(\"DValue.new(meta ? undefined : name, meta?.id, jsonvalues, parent.id, true, false)\")\r\n        console.log(\"DValue.new(\", meta ? undefined : name, \",\",meta?.id, \",\",jsonvalues, \",\",parent.id);\r\n        let dValue: DValue = DValue.new(meta ? undefined : name, meta?.id, [], parent.id, true, false);\r\n        generated.push(dValue); dValue.father = parent.id;\r\n        parent.features.push(dValue.id);\r\n        console.log(\"made dValue\", {jsonvalues, dValue, meta, metaname: meta?.name});\r\n        if (meta && meta.className === DAttribute.cname) { dValue.values = jsonvalues; return generated; }\r\n\r\n        for (let v of jsonvalues) {\r\n            if (typeof v !== \"object\") { dValue.values.push(v); continue; }\r\n            // let subdObject: DObject = DObject.new((meta as LReference)?.type.id, parent.id, DValue, undefined);\r\n            // generated.push(subdObject);\r\n            EcoreParser.parseDObject(v, dValue, DValue, (meta as LReference)?.type, generated);\r\n        }\r\n        return generated;\r\n    }\r\n\r\n    static parseDAnnotation(parent: DModelElement, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        return []; // todo\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        let dObject: DAnnotation = DAnnotation.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        (dObject as any).name = this.read(json, ECoreNamed.namee, undefined);\r\n        dObject.father = parent.id;\r\n        if (parent) parent.annotations.push(dObject.id);\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        (dObject as GObject).__fullname = undefined; // fullnamePrefix + \"/\" + (dObject as any).name; // if annotation is not named (and it shouldn't) i don't wanna override container name\r\n        /// *** specific  *** ///\r\n        let key: string;\r\n        for (key in json){\r\n            const value = json[key];\r\n            switch (key) { //todo\r\n                default: Log.exx('unexpected field in EAnnotation:  ' + key + ' => |' + value + '|', {key, value, json}); break;\r\n                // case ECoreAnnotation.annotations: break; // todo: enable, yes annotations can have annotations\r\n                case ECoreAnnotation.details: break;\r\n                case ECoreAnnotation.references: break;\r\n                case ECoreAnnotation.source: break;\r\n            }\r\n        }\r\n        // annotation.referencesStr = this.read(json, ECoreAnnotation.source, '#/');\r\n        // annotation.name = this.read(json, ECoreAnnotation.name, 'EAnnotation_1');\r\n        // const details: Json[] = this.getDetails(json);\r\n        // for (let i = 0; i < details.length; i++) { new EAnnotationDetail(this, details[i]); }\r\n        return generated; }\r\n\r\n    static parseRootPackage(parent: DModel, json: Json, generated: DModelElement[]): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n\r\n        let dObject: DPackage = DPackage.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.packages.push(dObject.id);\r\n\r\n        let version = (json[EcoreParser.prefix+\"xmlns:ecore\"] || '') as string;\r\n        // model.xmi = json[EcoreParser.prefix+\"xmlns:xmi\"]; // http://www.omg.org/XMI\r\n        // model.xsi = json[EcoreParser.prefix+\"xmlns:xsi\"]; // http://www.w3.org/2001/XMLSchema-instance\r\n        Log.ex(!EcoreParser.supportedEcoreVersions.includes(version), \"unsupported ecore version, must be one of:\" + EcoreParser.supportedEcoreVersions + \" found instead: \"+version);\r\n        dObject.name = this.read(json, ECoreNamed.namee, 'default');\r\n        // root package name is \"transparent\" and not applied in \"#//reference/paths/...\", if referenced i guess his name is \"#//\"\r\n        (dObject as GObject).__fullname = ''; // fullnamePrefix + \"/\" + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        const subPackages: Json[] = this.getSubPackages(json);\r\n        dObject.uri = this.read(json, ECorePackage.nsURI, null);\r\n        dObject.prefix = this.read(json, ECorePackage.nsPrefix, null);\r\n        console.warn(\"parseRootPackage.children\", {childs, annotations, subPackages, dObject, generated});\r\n        // if (!parent.uri) parent.uri = dObject.uri;\r\n        // if (!parent.prefix) parent.prefix = dObject.prefix; // namespace\r\n        for (let child of childs) {\r\n            switch (child[ECoreClass.xsitype]) {\r\n                default: Log.exx('unexpected xsitype:', child[ECoreClass.xsitype], ' found in jsonfragment:', child, ', in json:', json, ' package:', dObject); break;\r\n                case 'ecore:EClass': this.parseDClass(dObject, child, generated, ''); break;\r\n                case 'ecore:EEnum': this.parseDEnum(dObject, child, generated, ''); break;\r\n            }\r\n        }\r\n        for (let child of subPackages) EcoreParser.parseSubPackage(dObject, child, generated, '');\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseSubPackage(parent: DPackage, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DPackage = DPackage.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.subpackages.push(dObject.id);\r\n        dObject.name = this.read(json, ECoreNamed.namee, 'subPackage_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        dObject.uri = this.read(json, ECoreSubPackage.nsURI, null);\r\n        dObject.prefix = this.read(json, ECoreSubPackage.nsPrefix, null);\r\n        const subPackages: Json[] = this.getSubPackages(json);\r\n        console.warn(\"parseSubPackage.children\", {childs, annotations, subPackages, dObject, generated});\r\n        // if (!dObject.uri) dObject.uri = dObject.name + \".\" + parent.uri;\r\n        // if (!dObject.prefix) dObject.prefix = dObject.name + \".\" + parent.prefix; // namespace\r\n        for (let child of childs) {\r\n            switch (child[ECoreClass.xsitype]) {\r\n                default: Log.exx('unexpected xsitype:', child[ECoreClass.xsitype], ' found in jsonfragment:', child, ', in json:', json, ' package:', dObject); break;\r\n                case 'ecore:EClass': this.parseDClass(dObject, child, generated, (dObject as GObject).__fullname + \"/\"); break;\r\n                case 'ecore:EEnum': this.parseDEnum(dObject, child, generated, (dObject as GObject).__fullname + \"/\"); break;\r\n            }\r\n        }\r\n        for (let child of subPackages) EcoreParser.parseSubPackage(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseDClass(parent: DPackage, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        let dObject: DClass = DClass.new(\r\n            this.read(json, ECoreNamed.namee, 'Concept 1'),\r\n            undefined as any, undefined as any, undefined as any, undefined as any, undefined, parent.id,\r\n        );\r\n        generated.push(dObject);// dObject.father = parent.id;\r\n        //if (parent) parent.classifiers.push(dObject.id);\r\n        //dObject.name = this.read(json, ECoreNamed.namee, 'Class_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        for (let key in json) {\r\n            switch (key) {\r\n                default: Log.exx('unexpected field in parseDClass() |' + key + '|', json); break;\r\n                case ECoreClass.eAnnotations:\r\n                case ECoreClass.instanceTypeName:\r\n                case ECoreClass.eSuperTypes:\r\n                case ECoreClass.xsitype:\r\n                case ECoreClass.eOperations:\r\n                case ECoreClass.eStructuralFeatures:\r\n                case ECoreClass.abstract:\r\n                case ECoreClass.interface:\r\n                case ECoreClass.namee: break; } }\r\n        dObject.instanceClassName = this.read(json, ECoreClass.instanceTypeName, '');\r\n        dObject.interface = this.read(json, ECoreClass.interface, 'false') === 'true';\r\n        dObject.abstract = this.read(json, ECoreClass.abstract, 'false') === 'true';\r\n        let tmps: string = this.read(json, ECoreClass.eSuperTypes, '');\r\n        dObject.extends = tmps.split(' ');\r\n        const features: Json[] = this.getChildren(json);\r\n        const functions: Json[] = this.getChildren(json, false, true);\r\n\r\n        for (let child of functions) this.parseDOperation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        for (let child of features) {\r\n            const xsiType = this.read(child, ECoreAttribute.xsitype);\r\n            switch (xsiType) {\r\n                default: Log.exx( 'unexpected xsi:type: ', xsiType, ' in feature:', child); break;\r\n                case 'ecore:EAttribute':\r\n                    this.parseDAttribute(dObject, child, generated, (dObject as GObject).__fullname + \"/\"); break;\r\n                case 'ecore:EReference':\r\n                    this.parseDReference(dObject, child, generated, (dObject as GObject).__fullname + \"/\"); break;\r\n            }\r\n        }\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseDEnum(parent: DPackage, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DEnumerator = DEnumerator.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.classifiers.push(dObject.id);\r\n        dObject.name = this.read(json, ECoreNamed.namee, 'Enum_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        for (let key in json) {\r\n            const value = json[key];\r\n            switch (key) {\r\n                default: Log.exx('Enum.parse() unexpected key:', key, 'in json:', json); break;\r\n                case ECoreEnum.eAnnotations:\r\n                case ECoreEnum.xsitype: case ECoreNamed.namee: break;\r\n                case ECoreEnum.eLiterals: break;\r\n                case ECoreEnum.serializable: dObject.serializable = value === 'true'; break;\r\n                case ECoreEnum.instanceTypeName: dObject.instanceClassName = value + ''; break;\r\n            }\r\n        }\r\n        for (let child of childs) {\r\n            this.parseDEnumLiteral(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        }\r\n\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n\r\n\r\n    static parseDEnumLiteral(parent: DEnumerator, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DEnumLiteral = DEnumLiteral.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.literals.push(dObject.id);\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        dObject.value = +this.read(json, EcoreLiteral.value, Number.NEGATIVE_INFINITY);//vv4\r\n        dObject.literal = this.read(json, EcoreLiteral.literal, '');\r\n        dObject.name = this.read(json, ECoreNamed.namee,  dObject.literal || 'literal_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseDAttribute(parent: DClass, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        // done: old approach does not set pointedBy, i should set father and all pointers in .new() parameters\r\n        let dObject: DAttribute = DAttribute.new(\r\n            this.read(json, ECoreNamed.namee, 'attr_1'),\r\n            this.read(json, ECoreAttribute.eType, AttribETypes.EString),\r\n            parent.id,\r\n        );\r\n        generated.push(dObject);// dObject.father = parent.id;\r\n        // if (parent) parent.attributes.push(dObject.id);\r\n        //dObject.name = this.read(json, ECoreNamed.namee, 'attr_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        dObject.lowerBound = +this.read(json, ECoreAttribute.lowerbound, 0);\r\n        dObject.upperBound = +this.read(json, ECoreAttribute.upperbound, 1);\r\n        //dObject.type = this.read(json, ECoreAttribute.eType, AttribETypes.EString);\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseDReference(parent: DClass, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DReference = DReference.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.references.push(dObject.id);\r\n        dObject.name = this.read(json, ECorePackage.namee, 'Ref_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        dObject.containment = U.fromBoolString(this.read(json, ECoreReference.containment, false), false);\r\n        dObject.lowerBound = +this.read(json, ECoreAttribute.lowerbound, 0);\r\n        dObject.upperBound = +this.read(json, ECoreAttribute.upperbound, 1);\r\n        dObject.type = this.read(json, ECoreReference.eType, this.getEcoreTypeName(parent));\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseDParameter(parent: DOperation, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DParameter = DParameter.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.parameters.push(dObject.id);\r\n        dObject.name = this.read(json, ECoreNamed.namee, 'arg1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        dObject.lowerBound = +this.read(json, ECoreAttribute.lowerbound, 0);\r\n        dObject.upperBound = +this.read(json, ECoreAttribute.upperbound, 1);\r\n        dObject.type = this.read(json, ECoreAttribute.eType, AttribETypes.EString);\r\n        dObject.ordered = U.fromBoolString(this.read(json, ECoreOperation.ordered, 'false'), false);\r\n        dObject.unique = U.fromBoolString(this.read(json, ECoreOperation.unique, 'false'), false);\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n    static parseDOperation(parent: DClass, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DOperation = DOperation.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.operations.push(dObject.id);\r\n        dObject.name = this.read(json, ECoreNamed.namee, 'operation_1');\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        dObject.lowerBound = +this.read(json, ECoreAttribute.lowerbound, 1);\r\n        dObject.upperBound = +this.read(json, ECoreAttribute.upperbound, 1);\r\n        dObject.type = this.read(json, ECoreAttribute.eType, AttribETypes.EString);\r\n        dObject.exceptions = [this.read(json, ECoreOperation.eexceptions, '')];\r\n        dObject.ordered = U.fromBoolString(this.read(json, ECoreOperation.ordered, 'false'));\r\n        dObject.unique = U.fromBoolString(this.read(json, ECoreOperation.unique, 'false'));\r\n        dObject.visibility = AccessModifier.package;\r\n        for (let child of childs) {\r\n            this.parseDParameter(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        }\r\n        /// *** specific end *** ///\r\n        return generated; }\r\n\r\n\r\n    /*\r\n    static parseTEMPLATE(parent: DSomething, json: Json, generated: DModelElement[], fullnamePrefix: string): DModelElement[] {\r\n        if (!generated) generated = [];\r\n        if (!json) { json = {}; }\r\n        const childs = this.getChildren(json);\r\n        let dObject: DSomething = DSomething.new();\r\n        generated.push(dObject); dObject.father = parent.id;\r\n        if (parent) parent.CHILDCOLLECTION.push(dObject.id);\r\n        dObject.name = this.read(json, ECoreNamed.namee, defaultNameTODO);\r\n        (dObject as GObject).__fullname = fullnamePrefix + dObject.name;\r\n        const annotations: Json[] = this.getAnnotations(json);\r\n        for (let child of annotations) EcoreParser.parseDAnnotation(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        /// *** specific start *** ///\r\n        for (let child of childs) {\r\n            this.parseDSOMETHING(dObject, child, generated, (dObject as GObject).__fullname + \"/\");\r\n        }\r\n        /// *** specific end *** ///\r\n        return generated; }*/\r\n\r\n\r\n\r\n\r\n\r\n    /////////////////////////////////// generic\r\n    static XMLinlineMarker: string = '@';\r\n    static classTypePrefix: string = '#//'\r\n    private static getSubPackages(thiss: Json): Json[] {\r\n        const ret: any = thiss[ECoreSubPackage.eSubpackages];\r\n        if (!ret || U.isEmptyObject(ret)) { return []; }\r\n        if (Array.isArray(ret)) { return ret; } else { return [ret]; } }\r\n\r\n    private static getAnnotations(thiss: Json): Json[] {\r\n        const ret: any = thiss[ECorePackage.eAnnotations];\r\n        if (!ret || U.isEmptyObject(ret)) { return []; }\r\n        if (Array.isArray(ret)) { return ret; } else { return [ret]; } }\r\n\r\n    private static getDetails(thiss: Json): Json[] {\r\n        const ret: any = thiss[ECoreAnnotation.details];\r\n        if (!ret || U.isEmptyObject(ret)) { return []; }\r\n        if (Array.isArray(ret)) { return ret; } else { return [ret]; } }\r\n\r\n    private static getChildren(thiss: Json, throwError: boolean = false, functions: boolean = false): Json[] {\r\n        if (!thiss && !throwError) { return []; }\r\n        const mod = thiss[ECoreRoot.ecoreEPackage];\r\n        const pkg = thiss[ECorePackage.eClassifiers];\r\n        const cla = thiss[functions ? ECoreClass.eOperations : ECoreClass.eStructuralFeatures];\r\n        const fun = thiss[ECoreOperation.eParameters];\r\n        const lit = thiss[ECoreEnum.eLiterals];\r\n\r\n        const ret: any = mod || pkg || cla || fun || lit;\r\n        /*if ( ret === undefined || ret === null ) {\r\n          if (thiss['@name'] !== undefined) { ret = thiss; } // if it's the root with only 1 child arrayless\r\n        }*/\r\n        Log.ex( throwError && !ret, 'getChildren() Failed: ', thiss, ret);\r\n        // console.log('ret = ', ret, ' === ', {}, ' ? ', (U.isEmptyObject(ret) ? [] : [ret]));\r\n        if (!ret || U.isEmptyObject(ret)) { return []; }\r\n        if (Array.isArray(ret)) { return ret; } else { return [ret]; }\r\n    }\r\n\r\n    private static read(json: Json, field: string, valueIfNotFound: any = 'read<T>()CanThrowError'): string {\r\n        let ret: any = json ? json[field] : null;\r\n        if (ret !== null && ret !== undefined && field.indexOf(this.XMLinlineMarker) !== -1) {\r\n            Log.ex(U.isObject(ret, false, false, true), 'inline value |' + field + '| must be primitive.', ret);\r\n            ret = U.multiReplaceAll('' + ret, ['&amp;', '&#38;', '&quot;'], ['&', '\\'', '\"']);\r\n        }\r\n        if ((ret === null || ret === undefined)) {\r\n            Log.ex(valueIfNotFound === 'read<T>()CanThrowError', 'this.read<',  '> failed: field[' + field + '], json: ', json);\r\n            return valueIfNotFound; }\r\n        return ret; }\r\n\r\n    static write(json: Json, field: string, val: string | any[]): string | any[] {\r\n        if (val !== null && field.indexOf(EcoreParser.XMLinlineMarker) !== -1) {\r\n            Log.ex(val !== '' + val, 'inline value |' + field + '| must be a string.', val);\r\n            val = U.multiReplaceAll(val as string, ['&', '\\'', '\"'], ['&amp;', '&#38;', '&quot;']);\r\n        }\r\n        else Log.ex(val !== '' + val || !U.isObject(val, true), 'primitive values should be inserted only inline in the xml:', field, val);\r\n        json[field] = val;\r\n        return val; }\r\n\r\n    private static getEcoreTypeName(parent: DClassifier): string {\r\n        if (parent.className === DEnumerator.cname || parent.className === DClass.cname) return this.classTypePrefix + this.name;\r\n        // return Type.classTypePrefix + parent.parent.name; problem: need L-object to navigate\r\n        return Log.ex(\"getEcoreTypeName failed\", parent);\r\n    }\r\n\r\n}\r\n\r\nexport enum AccessModifier {\r\n    public = 'public',\r\n    private = 'private',\r\n    protected = 'protected',\r\n    internal = 'internal',\r\n    package = 'package',\r\n    protectedinternal = 'protected internal',\r\n    protectedprivate = 'protected private', }\r\n\r\nexport class ECoreRoot {\r\n    static ecoreEPackage: string;\r\n}\r\n\r\nexport class ECoreAnnotation {\r\n    static source: string;\r\n    static references: string;\r\n    static details: string;}\r\n\r\nexport class ECoreNamed {\r\n    static namee: string; }\r\n\r\nexport class ECoreDetail {\r\n    static key: string;\r\n    static value: string; }\r\n\r\nexport class ECoreSubPackage { // <eSubpackages\r\n    static eSubpackages: string;\r\n    static eAnnotations: string;\r\n    static eClassifiers: string;\r\n    static nsURI: string;\r\n    static nsPrefix: string;\r\n    static namee: string;\r\n}\r\n\r\nexport class ECorePackage extends ECoreSubPackage {\r\n    static eAnnotations: string;\r\n    static eSubpackages: string;\r\n    static eClassifiers: string;\r\n    static xmlnsxmi: string;\r\n    static xmlnsxsi: string;\r\n    static xmiversion: string;\r\n    static xmlnsecore: string;\r\n    static nsURI: string;\r\n    static nsPrefix: string;\r\n    static namee: string;\r\n}\r\n\r\nexport class ECoreClass {\r\n    static eAnnotations: string;\r\n    static eStructuralFeatures: string;\r\n    static xsitype: string;\r\n    static namee: string;\r\n    static eOperations: string;\r\n    static instanceTypeName: string;\r\n    static eSuperTypes: string;\r\n    static abstract: string;\r\n    static interface: string;\r\n\r\n    // static defaultValue = EcoreParser.XMLinlineMarker + 'defaultValue';  // visualizzato in ecore ma mai salvato dentro il file. inutilizzato\r\n    // nelle classi, assume il valore di \"[name] = [NumericValue]\" senza le [] negli enum.\r\n}\r\n\r\nexport class ECoreEnum {\r\n    static eAnnotations: string;\r\n    static xsitype: string;\r\n    static namee: string;\r\n    static instanceTypeName: string;\r\n    static serializable: string;\r\n    static eLiterals: string;\r\n}\r\n\r\nexport class EcoreLiteral {\r\n    static eAnnotations: string;\r\n    static namee: string;\r\n    static value: string;\r\n    static literal: string;\r\n}\r\n\r\n\r\nexport class ECoreReference {\r\n    static eAnnotations: string;\r\n    static xsitype: string;\r\n    static eType: string;\r\n    static containment: string;\r\n    static upperbound: string;\r\n    static lowerbound: string;\r\n    static namee: string; }\r\n\r\nexport class ECoreAttribute {\r\n    static eAnnotations: string;\r\n    static xsitype: string;\r\n    static eType: string;\r\n    static namee: string;\r\n    static lowerbound: string;\r\n    static upperbound: string;\r\n}\r\n\r\nexport class ECoreOperation {\r\n    static eAnnotations: string;\r\n    static eType: string;\r\n    static eexceptions: string;\r\n    static upperBound: string;\r\n    static lowerBound: string;\r\n    static unique: string;\r\n    static ordered: string;\r\n    static namee: string;\r\n    static eParameters: string; }\r\n\r\nexport class ECoreParameter {\r\n    static eAnnotations: string;\r\n    static namee: string;\r\n    static ordered: string;\r\n    static unique: string;\r\n    static lowerBound: string;\r\n    static upperBound: string;\r\n    static eType: string;\r\n}\r\n\r\nexport class ECoreObject{\r\n    static xmlns_xmi: string;\r\n    static xmlns_uri: never; // \"-xmlns:org.eclipse.example.modelname\": \"https://org/eclipse/example/modelname\", <b>key is dynamic</b>\r\n    static xmi_version: string;\r\n}\r\nexport class XMIModel {\r\n    static type: string;\r\n    static namee: string; }\r\n\r\n\r\n///////////////\r\n\r\nECoreRoot.ecoreEPackage = 'ecore:EPackage'; // this is root tag but not in xml->json, just his attributes/childrens\r\nECoreNamed.namee = EcoreParser.XMLinlineMarker + 'name';\r\n\r\nECorePackage.eAnnotations = ECoreSubPackage.eAnnotations = ECoreClass.eAnnotations =\r\n    ECoreEnum.eAnnotations = EcoreLiteral.eAnnotations =  ECoreReference.eAnnotations =\r\n        ECoreAttribute.eAnnotations = ECoreOperation.eAnnotations = ECoreParameter.eAnnotations = 'eAnnotations';\r\n\r\nECoreAnnotation.source = EcoreParser.XMLinlineMarker + 'source';\r\nECoreAnnotation.references = EcoreParser.XMLinlineMarker + 'references'; // \"#/\" for target = package.\r\nECoreAnnotation.details = 'details'; // arr\r\nECoreDetail.key = EcoreParser.XMLinlineMarker + 'key'; // can have spaces\r\nECoreDetail.value = EcoreParser.XMLinlineMarker + 'value';\r\n\r\nECorePackage.eSubpackages = 'eSubpackages';\r\nECorePackage.eClassifiers = 'eClassifiers';\r\nECorePackage.xmlnsxmi = EcoreParser.XMLinlineMarker + 'xmlns:xmi'; // typical value: http://www.omg.org/XMI\r\nECorePackage.xmlnsxsi = EcoreParser.XMLinlineMarker + 'xmlns:xsi'; // typical value: http://www.w3.org/2001/XMLSchema-instance\r\nECorePackage.xmiversion = EcoreParser.XMLinlineMarker + 'xmi:version'; // typical value: \"2.0\"\r\nECorePackage.xmlnsecore = EcoreParser.XMLinlineMarker + 'xmlns:ecore';\r\nECorePackage.nsURI = EcoreParser.XMLinlineMarker + 'nsURI'; // typical value: \"http://org/eclipse/example/modelname\"\r\nECorePackage.nsPrefix = EcoreParser.XMLinlineMarker + 'nsPrefix'; // typical value: org.eclipse.example.modelname\r\nECorePackage.namee = EcoreParser.XMLinlineMarker + 'name';\r\n\r\nECoreSubPackage.eSubpackages = 'eSubpackages';\r\nECoreSubPackage.eClassifiers = 'eClassifiers';\r\nECoreSubPackage.nsURI = EcoreParser.XMLinlineMarker + 'nsURI'; // typical value: \"http://org/eclipse/example/modelname\"\r\nECoreSubPackage.nsPrefix = EcoreParser.XMLinlineMarker + 'nsPrefix'; // typical value: org.eclipse.example.modelname\r\nECoreSubPackage.namee = EcoreParser.XMLinlineMarker + 'name';\r\n\r\n\r\nECoreClass.eStructuralFeatures = 'eStructuralFeatures';\r\nECoreClass.eOperations = 'eOperations';\r\nECoreClass.xsitype = EcoreParser.XMLinlineMarker + 'xsi:type'; // \"ecore:EClass\"\r\nECoreClass.namee = ECorePackage.namee;\r\nECoreClass.eSuperTypes = EcoreParser.XMLinlineMarker + 'eSuperTypes'; // space separated: \"#name1 #name2\"...\r\nECoreClass.instanceTypeName = EcoreParser.XMLinlineMarker + 'instanceTypeName';  // raw str\r\nECoreClass.instanceTypeName = EcoreParser.XMLinlineMarker + 'instanceTypeName';\r\nECoreClass.abstract = EcoreParser.XMLinlineMarker + 'abstract'; // bool\r\nECoreClass.interface = EcoreParser.XMLinlineMarker + 'interface'; // bool\r\n\r\nECoreEnum.instanceTypeName = ECoreClass.instanceTypeName;\r\nECoreEnum.serializable = 'serializable'; // \"false\", \"true\"\r\nECoreEnum.xsitype = ECoreClass.xsitype; // \"ecore:EEnum\"\r\nECoreEnum.eLiterals = 'eLiterals';\r\nECoreEnum.namee = ECorePackage.namee;\r\n\r\nEcoreLiteral.literal = 'literal';\r\nEcoreLiteral.namee = ECorePackage.namee;\r\nEcoreLiteral.value = 'value'; // any integer (-inf, +inf), not null. limiti = a type int 32 bit? vv4\r\n\r\nECoreReference.xsitype = EcoreParser.XMLinlineMarker + 'xsi:type'; // \"ecore:EReference\"\r\nECoreReference.eType = EcoreParser.XMLinlineMarker + 'eType'; // \"#//Player\"\r\nECoreReference.containment = EcoreParser.XMLinlineMarker + 'containment'; // \"true\"\r\nECoreReference.upperbound = EcoreParser.XMLinlineMarker + 'upperBound'; // \"@1\"\r\nECoreReference.lowerbound = EcoreParser.XMLinlineMarker + 'lowerBound'; // does even exists?\r\nECoreReference.namee = EcoreParser.XMLinlineMarker + 'name';\r\n\r\nECoreAttribute.xsitype = EcoreParser.XMLinlineMarker + 'xsi:type'; // \"ecore:EAttribute\",\r\nECoreAttribute.eType = EcoreParser.XMLinlineMarker + 'eType'; // \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\"\r\nECoreAttribute.namee = EcoreParser.XMLinlineMarker + 'name';\r\nECoreAttribute.lowerbound = EcoreParser.XMLinlineMarker + 'lowerBound';\r\nECoreAttribute.upperbound = EcoreParser.XMLinlineMarker + 'upperBound';\r\n\r\n\r\nECoreOperation.eParameters = 'eParameters';\r\nECoreOperation.namee = EcoreParser.XMLinlineMarker + 'name'; // \"EExceptionNameCustom\",\r\nECoreOperation.ordered = EcoreParser.XMLinlineMarker + 'ordered'; // \"false\",\r\nECoreOperation.unique = EcoreParser.XMLinlineMarker + 'unique'; // \"false\",\r\nECoreOperation.lowerBound = EcoreParser.XMLinlineMarker + 'lowerBound'; // \"5\", ma che senso ha su una funzione?? Ã¨ il return?\r\nECoreOperation.upperBound = EcoreParser.XMLinlineMarker + 'upperBound';\r\nECoreOperation.eType = EcoreParser.XMLinlineMarker + 'eType'; // \"#//Classname\",\r\nECoreOperation.eexceptions = EcoreParser.XMLinlineMarker + 'eExceptions';\r\n// \"#//ClassnameException1 #//ClassNameException2 (also custom classes) ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\r\n\r\nECoreParameter.namee = EcoreParser.XMLinlineMarker + 'name';\r\nECoreParameter.ordered = EcoreParser.XMLinlineMarker + 'ordered'; // \"false\";\r\nECoreParameter.unique = EcoreParser.XMLinlineMarker + 'unique'; // \"false\"\r\nECoreParameter.lowerBound = EcoreParser.XMLinlineMarker + 'lowerBound'; // \"1\"\r\nECoreParameter.upperBound = EcoreParser.XMLinlineMarker + 'upperBound'; // \"2\"\r\nECoreParameter.eType = EcoreParser.XMLinlineMarker + 'eType'; // \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubl\r\n\r\nECoreObject.xmlns_xmi = EcoreParser.XMLinlineMarker + 'xmlns:xmi'; // \"http://www.omg.org/XMI\"\r\n// ECoreObject.xmlns_uri = EcoreParser.XMLinlineMarker + 'xmlns:org.eclipse.example.modelname'; // \"https://org/eclipse/example/modelname\"\r\nECoreObject.xmi_version = EcoreParser.XMLinlineMarker + 'xmi:version'; // \"2.0\"\r\n\r\nXMIModel.type = EcoreParser.XMLinlineMarker + 'type';\r\nXMIModel.namee = EcoreParser.XMLinlineMarker + 'name';\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}