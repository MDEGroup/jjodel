{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\components\\\\abstract\\\\tabs\\\\MetamodelTab.tsx\",\n  _this = this;\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { DGraph, LGraph, LModel, SetRootFieldAction } from \"../../../joiner\";\nimport { DefaultNode } from \"../../../joiner/components\";\nimport ToolBar from \"../../toolbar/ToolBar\";\nimport ContextMenu from \"../../contextMenu/ContextMenu\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PendingEdge(props) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n}\n_c = PendingEdge;\nfunction MetamodelTabComponent(props) {\n  const model = props.model;\n  const graph = props.graph;\n  const isEdgePending = props.isEdgePending;\n  if (!model) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"closed tab\"\n  }, void 0, false);\n  if (!graph) {\n    DGraph.new(0, model.id);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          margin: \"auto\"\n        },\n        children: \"Building the Graph...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'w-100 h-100',\n    children: [/*#__PURE__*/_jsxDEV(ContextMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), isEdgePending.source && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: 15,\n        right: 15,\n        zIndex: 999\n      },\n      className: 'w-fit bg-white rounded border p-2',\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'd-block text-center',\n        children: \"Pending Edge...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        tabIndex: -1,\n        onClick: e => SetRootFieldAction.new('isEdgePending', {\n          user: '',\n          source: ''\n        }),\n        className: 'cursor-pointer text-decoration-none d-block text-danger text-center',\n        children: \"close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 34\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'd-flex h-100',\n      children: [/*#__PURE__*/_jsxDEV(ToolBar, {\n        model: model.id,\n        isMetamodel: model.isMetamodel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"GraphContainer h-100 w-100\",\n        style: {\n          position: \"relative\"\n        },\n        children: graph && /*#__PURE__*/_jsxDEV(DefaultNode, {\n          data: model,\n          nodeid: graph.id,\n          graphid: graph.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 27\n        }, this) || /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Error: missing DGraph prop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 95\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 12\n  }, this);\n}\n_c2 = MetamodelTabComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.model = LModel.fromPointer(ownProps.modelid);\n  const graphs = DGraph.fromPointer(state.graphs);\n  const pointers = graphs.filter(graph => {\n    var _ret$model;\n    return graph.model === ((_ret$model = ret.model) === null || _ret$model === void 0 ? void 0 : _ret$model.id);\n  });\n  if (pointers.length > 0) ret.graph = LGraph.fromPointer(pointers[0].id);\n  ret.isEdgePending = state.isEdgePending;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const MetamodelTabConnected = connect(mapStateToProps, mapDispatchToProps)(MetamodelTabComponent);\nexport const MetamodelTab = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(MetamodelTabConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 12\n  }, _this);\n};\n_c3 = MetamodelTab;\nexport default MetamodelTab;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"PendingEdge\");\n$RefreshReg$(_c2, \"MetamodelTabComponent\");\n$RefreshReg$(_c3, \"MetamodelTab\");","map":{"version":3,"names":["React","connect","DGraph","LGraph","LModel","SetRootFieldAction","DefaultNode","ToolBar","ContextMenu","Fragment","_Fragment","jsxDEV","_jsxDEV","PendingEdge","props","_c","MetamodelTabComponent","model","graph","isEdgePending","children","new","id","style","width","height","display","margin","fileName","_jsxFileName","lineNumber","columnNumber","className","source","position","top","right","zIndex","tabIndex","onClick","e","user","isMetamodel","data","nodeid","graphid","_c2","mapStateToProps","state","ownProps","ret","fromPointer","modelid","graphs","pointers","filter","_ret$model","length","mapDispatchToProps","dispatch","MetamodelTabConnected","MetamodelTab","arguments","undefined","_this","_c3","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/abstract/tabs/MetamodelTab.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport type {DModel, Pointer} from \"../../../joiner\";\r\nimport {\r\n    DState,\r\n    CreateElementAction,\r\n    DGraph,\r\n    LGraph,\r\n    LModel,\r\n    Edge,\r\n    DUser,\r\n    DClass,\r\n    SetRootFieldAction\r\n} from \"../../../joiner\";\r\nimport {DefaultNode} from \"../../../joiner/components\";\r\nimport ToolBar from \"../../toolbar/ToolBar\";\r\nimport ContextMenu from \"../../contextMenu/ContextMenu\";\r\n\r\nfunction PendingEdge(props: any){ return <>{\r\n    /* todo: <DamEdge start={store.getState().pendingEdge.start} end={} />*/}</>\r\n}\r\n\r\nfunction MetamodelTabComponent(props: AllProps) {\r\n    const model = props.model;\r\n    const graph = props.graph;\r\n    const isEdgePending = props.isEdgePending;\r\n\r\n    if (!model) return(<>closed tab</>);\r\n    if (!graph) {\r\n        DGraph.new(0, model.id);\r\n        return(<div style={{width: \"100%\", height: \"100%\", display: \"flex\"}}>\r\n            <span style={{margin: \"auto\"}}>Building the Graph...</span>\r\n        </div>);\r\n    }\r\n\r\n    return(<div className={'w-100 h-100'}>\r\n        <ContextMenu />\r\n        {/*<PendingEdge />*/}\r\n        {/* Temporary Edge Pending Manager */}\r\n        {isEdgePending.source && <div style={{position: 'absolute', top: 15, right: 15, zIndex: 999}}\r\n             className={'w-fit bg-white rounded border p-2'}>\r\n            <label className={'d-block text-center'}>Pending Edge...</label>\r\n            <label tabIndex={-1} onClick={e => SetRootFieldAction.new('isEdgePending', {user: '', source: ''})}\r\n               className={'cursor-pointer text-decoration-none d-block text-danger text-center'}>close</label>\r\n        </div>}\r\n\r\n        <div className={'d-flex h-100'}>\r\n            <ToolBar model={model.id} isMetamodel={model.isMetamodel} />\r\n            <div className={\"GraphContainer h-100 w-100\"} style={{position:\"relative\"}}>\r\n                {graph && <DefaultNode data={model} nodeid={graph.id} graphid={graph.id}/> || <div>Error: missing DGraph prop</div> }\r\n            </div>\r\n        </div>\r\n    </div>);\r\n\r\n}\r\ninterface OwnProps { modelid: Pointer<DModel, 1, 1, LModel> }\r\ninterface StateProps {\r\n    model: LModel,\r\n    graph: LGraph,\r\n    isEdgePending: {user: Pointer<DUser>, source: Pointer<DClass>}\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    ret.model = LModel.fromPointer(ownProps.modelid);\r\n    const graphs: DGraph[] = DGraph.fromPointer(state.graphs);\r\n    const pointers = graphs.filter((graph) => { return graph.model === ret.model?.id });\r\n    if(pointers.length > 0) ret.graph = LGraph.fromPointer(pointers[0].id);\r\n    ret.isEdgePending = state.isEdgePending\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const MetamodelTabConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MetamodelTabComponent);\r\n\r\nexport const MetamodelTab = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <MetamodelTabConnected {...{...props, children}} />;\r\n}\r\nexport default MetamodelTab;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}