{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\pages\\\\Auth.tsx\",\n  _s = $RefreshSig$();\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport { DUser, SetRootFieldAction, U } from '../joiner';\nimport Storage from '../data/storage';\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthApi } from \"../api/persistance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AuthPage() {\n  _s();\n  const [isRegister, setIsRegister] = useStateIfMounted(false);\n  const [username, setUsername] = useStateIfMounted('');\n  const [email, setEmail] = useStateIfMounted('');\n  const [password, setPassword] = useStateIfMounted('');\n  const navigate = useNavigate();\n  const onSubmit = async e => {\n    e.preventDefault();\n    SetRootFieldAction.new('isLoading', true);\n    if (isRegister) await register(username, email, password);else await login(email, password);\n    SetRootFieldAction.new('isLoading', false);\n  };\n  const login = async (email, password) => {\n    const response = await AuthApi.login(email, password);\n    if (response.code !== 200) {\n      alert('Bad Data!');\n      return;\n    }\n    const data = U.wrapper(response.data);\n    Storage.write('token', data.token);\n    const user = DUser.new(data.username, data.id);\n    Storage.write('user', user);\n    navigate('/dashboard');\n    U.refresh();\n  };\n  const register = async (username, email, password) => {\n    const response = await AuthApi.register(username, email, password);\n    if (response.code !== 200) {\n      alert('Bad Data!');\n      return;\n    }\n    const data = U.wrapper(response.data);\n    Storage.write('token', data.token);\n    const user = DUser.new(data.username, data.id);\n    Storage.write('user', user);\n    navigate('/dashboard');\n    U.refresh();\n  };\n  const offline = () => {\n    AuthApi.offline();\n    navigate('/dashboard');\n    U.refresh();\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: 'w-100 h-100',\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: 'd-block bg-white rounded border mx-auto w-fit px-5 py-4 mt-5',\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'fs-1 d-block text-center text-primary',\n        children: isRegister ? 'REGISTER' : 'LOGIN'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'w-100 input w-fit d-block mx-auto mt-3',\n        placeholder: 'Email',\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        type: 'email',\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), isRegister && /*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'w-100 input w-fit d-block mx-auto mt-2',\n        placeholder: 'Username',\n        value: username,\n        onChange: e => setUsername(e.target.value),\n        type: 'text',\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: 'w-100 input w-fit d-block mx-auto  mt-2',\n        placeholder: 'Password',\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        type: 'password',\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'd-block btn btn-primary p-1 mx-auto mt-3',\n        type: 'submit',\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: 'mt-3 d-block text-center',\n        children: [isRegister ? 'Already have an account?' : 'Don\\'t have an account?', /*#__PURE__*/_jsxDEV(\"b\", {\n          tabIndex: -1,\n          onClick: e => setIsRegister(!isRegister),\n          className: 'ms-1 text-primary text-decoration-none cursor-pointer',\n          children: \"click here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this), \"Or start in\", /*#__PURE__*/_jsxDEV(\"b\", {\n          tabIndex: -1,\n          className: 'ms-1 text-primary text-decoration-none cursor-pointer',\n          onClick: e => offline(),\n          children: \"Offline Mode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 12\n  }, this);\n}\n_s(AuthPage, \"QGrjST5wS7mZrg38n01I6AGT7os=\", false, function () {\n  return [useStateIfMounted, useStateIfMounted, useStateIfMounted, useStateIfMounted, useNavigate];\n});\n_c = AuthPage;\nexport { AuthPage };\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["useStateIfMounted","DUser","SetRootFieldAction","U","Storage","useNavigate","AuthApi","jsxDEV","_jsxDEV","AuthPage","_s","isRegister","setIsRegister","username","setUsername","email","setEmail","password","setPassword","navigate","onSubmit","e","preventDefault","new","register","login","response","code","alert","data","wrapper","write","token","user","id","refresh","offline","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","target","type","required","tabIndex","onClick","_c","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/pages/Auth.tsx"],"sourcesContent":["import {FormEvent} from 'react';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {DUser, SetRootFieldAction, U} from '../joiner';\r\nimport Storage from '../data/storage';\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {AuthApi} from \"../api/persistance\";\r\n\r\nfunction AuthPage(): JSX.Element {\r\n    const [isRegister, setIsRegister] = useStateIfMounted(false);\r\n    const [username, setUsername] = useStateIfMounted('');\r\n    const [email, setEmail] = useStateIfMounted('');\r\n    const [password, setPassword] = useStateIfMounted('');\r\n    const navigate = useNavigate();\r\n\r\n    const onSubmit = async(e: FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        SetRootFieldAction.new('isLoading', true);\r\n        if(isRegister) await register(username, email, password);\r\n        else await login(email, password);\r\n        SetRootFieldAction.new('isLoading', false);\r\n    }\r\n    const login = async(email: string, password: string) => {\r\n        const response = await AuthApi.login(email, password);\r\n        if(response.code !== 200) {\r\n            alert('Bad Data!');\r\n            return;\r\n        }\r\n        const data = U.wrapper<DUser>(response.data);\r\n        Storage.write('token', data.token);\r\n        const user = DUser.new(data.username, data.id);\r\n        Storage.write('user', user);\r\n        navigate('/dashboard');\r\n        U.refresh();\r\n    }\r\n    const register = async(username: string, email: string, password: string) => {\r\n        const response = await AuthApi.register(username, email, password);\r\n        if(response.code !== 200) {\r\n            alert('Bad Data!');\r\n            return;\r\n        }\r\n        const data = U.wrapper<DUser>(response.data);\r\n        Storage.write('token', data.token);\r\n        const user = DUser.new(data.username, data.id);\r\n        Storage.write('user', user);\r\n        navigate('/dashboard');\r\n        U.refresh();\r\n    }\r\n    const offline = () => {\r\n        AuthApi.offline();\r\n        navigate('/dashboard');\r\n        U.refresh();\r\n    }\r\n\r\n    return(<section className={'w-100 h-100'}>\r\n        <form className={'d-block bg-white rounded border mx-auto w-fit px-5 py-4 mt-5'} onSubmit={onSubmit}>\r\n            <label className={'fs-1 d-block text-center text-primary'}>\r\n                {isRegister ? 'REGISTER' : 'LOGIN'}\r\n            </label>\r\n            <hr />\r\n            <input className={'w-100 input w-fit d-block mx-auto mt-3'} placeholder={'Email'}\r\n                   value={email} onChange={e => setEmail(e.target.value)} type={'email'}  required={true} />\r\n            {isRegister &&\r\n                <input className={'w-100 input w-fit d-block mx-auto mt-2'} placeholder={'Username'}\r\n                       value={username} onChange={e => setUsername(e.target.value)} type={'text'} required={true} />\r\n            }\r\n            <input className={'w-100 input w-fit d-block mx-auto  mt-2'} placeholder={'Password'}\r\n                   value={password} onChange={e => setPassword(e.target.value)} type={'password'} required={true} />\r\n            <button className={'d-block btn btn-primary p-1 mx-auto mt-3'} type={'submit'}>Submit</button>\r\n            <label className={'mt-3 d-block text-center'}>\r\n                {isRegister ? 'Already have an account?' : 'Don\\'t have an account?'}\r\n                <b tabIndex={-1} onClick={e => setIsRegister(!isRegister)} className={'ms-1 text-primary text-decoration-none cursor-pointer'}>\r\n                    click here\r\n                </b>\r\n                <br/>Or start in\r\n                <b tabIndex={-1} className={'ms-1 text-primary text-decoration-none cursor-pointer'}\r\n                   onClick={e => offline()}\r\n                >\r\n                    Offline Mode\r\n                </b>\r\n            </label>\r\n        </form>\r\n    </section>);\r\n}\r\n\r\nexport {AuthPage};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}