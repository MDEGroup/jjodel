{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\components\\\\contextMenu\\\\ContextMenu.tsx\",\n  _s = $RefreshSig$(),\n  _this2 = this;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport './style.scss';\nimport { SetRootFieldAction } from '../../redux/action/action';\nimport { DUser, DViewElement, LGraphElement, LNamedElement, LUser, U, windoww } from '../../joiner';\nimport MemoRec from '../../api/memorec';\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport ModellingIcon from \"../forEndUser/ModellingIcon\";\nimport { toggleMetrics } from '../metrics/Metrics';\nimport { icon } from '../../pages/components/icons/Icons';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ContextMenuComponent(props) {\n  _s();\n  var _node$model,\n    _this = this;\n  const user = props.user;\n  // const project = user.project as LProject;\n  const display = props.display;\n  const position = props.position;\n  const node = props.node;\n  const [memorec, setMemorec] = useStateIfMounted(null);\n  const [suggestedName, setSuggestedName] = useStateIfMounted('');\n  const [childrenMenu, setChildrenMenu] = useStateIfMounted(false);\n  if (!node || !display) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  const data = LNamedElement.fromPointer(node === null || node === void 0 ? void 0 : (_node$model = node.model) === null || _node$model === void 0 ? void 0 : _node$model.id);\n  let jsxList = [];\n  let ldata = data;\n  let ddata = ldata === null || ldata === void 0 ? void 0 : ldata.__raw;\n  let model = ldata === null || ldata === void 0 ? void 0 : ldata.model;\n  const close = () => {\n    // if (!windoww.ContextMenuVisible) return;\n    windoww.ContextMenuVisible = false;\n    setSuggestedName('');\n    setMemorec(null);\n    SetRootFieldAction.new('contextMenu', {\n      display: false,\n      x: 0,\n      y: 0\n    });\n    setChildrenMenu(false);\n  };\n  const addView = async () => {\n    DViewElement.newDefault(ddata || undefined);\n    close();\n  };\n  const structuralFeature = async () => {\n    setMemorec(await MemoRec.structuralFeature(ldata));\n  };\n  const classifier = async () => {\n    setMemorec(await MemoRec.classifier(ldata));\n  };\n  const suggestOnClass = isAttribute => {\n    const lClass = ldata;\n    if (isAttribute) lClass.addAttribute(suggestedName);else lClass.addReference(suggestedName);\n    close();\n  };\n  const suggestOnPackage = () => {\n    ldata.addClass(suggestedName);\n    close();\n  };\n\n  /* Handling the add of composition children to specific M1 Object */\n\n  const getAddChildren = function (l, model) {\n    let out = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    let d = l.__raw;\n    const lref = l.instanceof;\n    if (!lref) return [];\n    let dref = lref.__raw;\n    if (dref.className !== 'DReference') return [];\n    if (!(dref.aggregation || dref.composition)) return [];\n    let values = l.values;\n    if (dref.upperBound !== -1 && values.filter(o => !!o).length >= dref.upperBound) return [];\n    let type = lref.type;\n    out = [type, ...type.allSubClasses].filter(e => !!e);\n    let jsxret;\n    if (out.length === 1) jsxret = /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        l.addObject({}, out[0]);\n      },\n      className: 'col item',\n      children: [icon['add'], \" Add \", out[0].name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 40\n    }, _this);else jsxret = /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: e => {\n        setChildrenMenu(!childrenMenu);\n      },\n      className: 'col item',\n      children: [icon['add'], \" Add \", icon['submenu'], childrenMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'context-menu round submenu',\n        style: {\n          top: position.y - 216,\n          left: position.x - 333\n        },\n        onContextMenu: e => e.preventDefault(),\n        children: out.map(lc => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            close();\n            setChildrenMenu(false);\n            const child = l.addObject({}, lc);\n            l.values = [...l.values, child];\n          },\n          className: 'col item',\n          children: lc.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, _this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 30\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 23\n    }, _this);\n    return jsxret;\n  };\n  if (display) {\n    if (ddata.name) {\n      jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'mt-1 col',\n        style: {\n          paddingLeft: '12px',\n          fontWeight: '300'\n        },\n        children: [ddata.className, \": \", /*#__PURE__*/_jsxDEV(\"i\", {\n          children: ldata.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 122\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 26\n      }, this));\n      jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: 'my-1'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 26\n      }, this));\n    }\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"cn: \", ddata === null || ddata === void 0 ? void 0 : ddata.className, \", \", ldata.features.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }, this));\n    if ((ddata === null || ddata === void 0 ? void 0 : ddata.className) === 'DObject') {\n      let ret = [];\n      jsxList.push(...ldata.features.map(feat => getAddChildren(feat, model, [])));\n      jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"rett: \", ret.map(e => {\n          var _e$instanceof;\n          return e === null || e === void 0 ? void 0 : (_e$instanceof = e.instanceof) === null || _e$instanceof === void 0 ? void 0 : _e$instanceof.name;\n        }).join(', '), \" \", ret.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 27\n      }, this));\n    }\n\n    /* Memorec */\n    if (ddata && !U.isOffline()) {\n      if (ddata.className === 'DClass') {\n        jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: structuralFeature,\n          className: 'col item',\n          children: [icon['ai'], \" AI Suggest \", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-chevron-right\",\n            style: {\n              fontSize: '0.75em',\n              float: 'right',\n              paddingTop: '2px',\n              fontWeight: '800'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 110\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 30\n        }, this));\n        jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: 'my-1'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 30\n        }, this));\n      }\n      if (ddata.className === 'DPackage') {\n        jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: classifier,\n          className: 'col item',\n          children: [icon['ai'], \" AI Suggest \", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'ms-1 bi bi-chevron-right',\n            style: {\n              fontSize: '0.75em',\n              float: 'right',\n              paddingTop: '2px',\n              fontWeight: '800'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 103\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 30\n        }, this));\n        jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: 'my-1'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 30\n        }, this));\n      }\n    }\n\n    /* Extend */\n    switch (ddata.className) {\n      default:\n      case undefined:\n        break;\n      case 'DValue':\n        if (ldata.instanceof) jsxList.pop();\n        break;\n      case 'DClass':\n        jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            close();\n            SetRootFieldAction.new('isEdgePending', {\n              user: user.id,\n              source: ddata.id\n            });\n          },\n          className: 'col item',\n          children: [icon['extend'], \" Extend\", /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"bi bi-command\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 71\n            }, this), \" E\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 66\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 30\n        }, this));\n        jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: 'my-1'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 30\n        }, this));\n        break;\n    }\n\n    /* Deselect */\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        SetRootFieldAction.new(`selected.${DUser.current}`, '', '', false);\n      },\n      className: 'col item',\n      children: [icon['deselect'], \" Deselect\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 22\n    }, this));\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: 'my-1'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 22\n    }, this));\n\n    /* Delete */\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        console.log('delete ctxmenu', {\n          data,\n          node\n        });\n        if (ldata) ldata.delete();else node.delete(); // if there is data, then the node is indirectly deleted, no need to call it too.\n        //node.delete();\n      },\n      className: 'col item',\n      children: [icon['delete'], \" Delete\", /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-backspace\",\n        style: {\n          fontSize: '1em',\n          float: 'right',\n          paddingTop: '2px',\n          fontWeight: '800'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 58\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 22\n    }, this));\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: 'my-1'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 22\n    }, this));\n    /* Refresh */\n\n    // jsxList.push(<div onClick={() => {alert('refresh')}} className={'col item'}>{icon['refresh']} Refresh</div>);\n    // jsxList.push(<hr className={'my-1'} />);\n\n    /* Up / Down */\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        node.zIndex += 1;\n      },\n      className: 'col item',\n      children: [icon['up'], \" Up\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-command\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-arrow-up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 110\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 22\n    }, this));\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        node.zIndex -= 1;\n      },\n      className: 'col item',\n      children: [icon['down'], \" Down\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-command\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-arrow-down\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 114\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 22\n    }, this));\n    let gn = node;\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: 'my-1'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 22\n    }, this));\n    /* AUTO-SIZING */\n    if (gn.isResized) jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        gn.isResized = false;\n      },\n      className: 'col item',\n      children: [icon['contract'], \" Restore auto-sizing\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-command\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 162\n        }, this), \" T\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 156\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 40\n    }, this));else jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        close();\n        gn.isResized = true;\n      },\n      className: 'col item',\n      children: [icon['expand'], \" Disable auto-sizing\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-command\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 146\n        }, this), \" T\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 140\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 27\n    }, this));\n    // /* LOCK-UNLOCK */\n    // jsxList.push(<div onClick={() => {close(); ldata.delete(); /*node.delete();*/}} className={'col item'}>{icon['lock']} Lock/Unlock<div> <i\n    //     className='bi bi-command'></i> L</div></div>);\n    // /* UNLOCK ALL ELEMENTS */\n    // jsxList.push(<div onClick={() => {close(); ldata.delete(); /* node.delete();*/}} className={'col item'}>{icon['unlock']} Unlock all<div><i className=\"bi bi-alt\"></i> <i\n    //     className='bi bi-command'></i> L</div></div>);\n\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: 'my-1'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 22\n    }, this));\n    /* METRICS */\n    if (ldata && (model === null || model === void 0 ? void 0 : model.isMetamodel)) {\n      jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          close();\n          toggleMetrics();\n        },\n        className: 'col item',\n        children: [icon['metrics'], \" Analytics\", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-command\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 17\n          }, this), \" A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 125\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 26\n      }, this));\n      jsxList.push( /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: 'my-1'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 26\n      }, this));\n    }\n\n    /* ADD VIEW */\n    jsxList.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: async () => {\n        close();\n        addView();\n      },\n      className: 'col item',\n      children: [icon['view'], \" Add View\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-alt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-command\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 41\n        }, this), \" A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 117\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 22\n    }, this));\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'context-menu round',\n      style: {\n        top: position.y - 100,\n        left: position.x - 10\n      },\n      onContextMenu: e => e.preventDefault(),\n      children: jsxList.map((jsx, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: jsx\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 50\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this), data && (memorec === null || memorec === void 0 ? void 0 : memorec.data) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'context-menu round',\n      style: {\n        overflow: 'auto',\n        maxHeight: '12em',\n        top: position.y - 100,\n        left: position.x + 130\n      },\n      children: memorec.data.map((obj, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: 'col item d-block',\n            onClick: e => setSuggestedName(obj.recommendedItem),\n            children: [obj.recommendedItem, \" :\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: 'ms-1 text-primary',\n              children: Math.round(obj.score * 100) / 100\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 21\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 37\n    }, this), memorec && suggestedName && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'memorec-overlay',\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        tabIndex: -1,\n        onBlur: e => close(),\n        className: 'memorec-popup',\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'd-block text-center mb-1',\n          children: [\"Add \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: suggestedName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 65\n          }, this), \" as:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }, this), memorec.type === 'class' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            tabIndex: -1,\n            onClick: e => suggestOnClass(true),\n            className: 'd-flex memorec-button',\n            children: [/*#__PURE__*/_jsxDEV(ModellingIcon, {\n              className: 'my-auto',\n              name: 'attribute'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 29\n            }, this), \" Attribute\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            tabIndex: -1,\n            onClick: e => suggestOnClass(false),\n            className: 'd-flex memorec-button mt-1',\n            children: [/*#__PURE__*/_jsxDEV(ModellingIcon, {\n              className: 'my-auto',\n              name: 'reference'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 29\n            }, this), \" Reference\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          tabIndex: -1,\n          onClick: e => suggestOnPackage(),\n          className: 'd-flex memorec-button mt-1',\n          children: [/*#__PURE__*/_jsxDEV(ModellingIcon, {\n            className: 'my-auto',\n            name: 'class'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 25\n          }, this), \" Class\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'd-flex memorec-button mt-3',\n          tabIndex: -1,\n          onClick: e => close(),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: 'mx-auto text-danger',\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 40\n    }, this)]\n  }, void 0, true);\n}\n_s(ContextMenuComponent, \"fD7m21POlo+l3OB/K7zopiiGb9c=\", false, function () {\n  return [useStateIfMounted, useStateIfMounted, useStateIfMounted];\n});\n_c = ContextMenuComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.user = LUser.fromPointer(DUser.current);\n  ret.display = state.contextMenu.display;\n  ret.position = {\n    x: state.contextMenu.x,\n    y: state.contextMenu.y\n  };\n  const nodeid = state.contextMenu.nodeid; //state._lastSelected?.node;\n  if (nodeid) ret.node = LGraphElement.fromPointer(nodeid);else ret.node = null;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const ContextMenuConnected = connect(mapStateToProps, mapDispatchToProps)(ContextMenuComponent);\nexport const ContextMenu = function (props) {\n  let childrens = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(ContextMenuConnected, {\n    ...props,\n    childrens\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 292,\n    columnNumber: 12\n  }, _this2);\n};\n_c2 = ContextMenu;\nexport default ContextMenu;\nvar _c, _c2;\n$RefreshReg$(_c, \"ContextMenuComponent\");\n$RefreshReg$(_c2, \"ContextMenu\");","map":{"version":3,"names":["React","connect","SetRootFieldAction","DUser","DViewElement","LGraphElement","LNamedElement","LUser","U","windoww","MemoRec","useStateIfMounted","ModellingIcon","toggleMetrics","icon","Fragment","_Fragment","jsxDEV","_jsxDEV","ContextMenuComponent","props","_s","_node$model","_this","user","display","position","node","memorec","setMemorec","suggestedName","setSuggestedName","childrenMenu","setChildrenMenu","data","fromPointer","model","id","jsxList","ldata","ddata","__raw","close","ContextMenuVisible","new","x","y","addView","newDefault","undefined","structuralFeature","classifier","suggestOnClass","isAttribute","lClass","addAttribute","addReference","suggestOnPackage","addClass","getAddChildren","l","out","arguments","length","d","lref","instanceof","dref","className","aggregation","composition","values","upperBound","filter","o","type","allSubClasses","e","jsxret","onClick","addObject","children","name","fileName","_jsxFileName","lineNumber","columnNumber","style","top","left","onContextMenu","preventDefault","map","lc","child","push","paddingLeft","fontWeight","features","ret","feat","_e$instanceof","join","isOffline","fontSize","float","paddingTop","pop","source","current","console","log","delete","zIndex","gn","isResized","isMetamodel","jsx","index","overflow","maxHeight","obj","recommendedItem","Math","round","score","tabIndex","onBlur","_c","mapStateToProps","state","ownProps","contextMenu","nodeid","mapDispatchToProps","dispatch","ContextMenuConnected","ContextMenu","childrens","_this2","_c2","$RefreshReg$"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/contextMenu/ContextMenu.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.scss';\r\nimport {SetRootFieldAction} from '../../redux/action/action';\r\nimport {\r\n    DClass,\r\n    DNamedElement,\r\n    DState,\r\n    DUser,\r\n    DValue,\r\n    DViewElement,\r\n    GObject,\r\n    LClass,\r\n    LGraphElement, LModel,\r\n    LNamedElement,\r\n    LObject,\r\n    LPackage,\r\n    LProject, LReference,\r\n    LUser,\r\n    LValue,\r\n    U,\r\n    windoww,\r\n} from '../../joiner';\r\nimport MemoRec from '../../api/memorec';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport ModellingIcon from \"../forEndUser/ModellingIcon\";\r\nimport {FakeStateProps} from \"../../joiner/types\";\r\nimport {toggleMetrics} from '../metrics/Metrics';\r\nimport {icon} from '../../pages/components/icons/Icons';\r\n\r\nfunction ContextMenuComponent(props: AllProps) {\r\n    const user = props.user;\r\n    // const project = user.project as LProject;\r\n    const display = props.display;\r\n    const position = props.position;\r\n    const node = props.node;\r\n    const [memorec, setMemorec] = useStateIfMounted<{data:GObject[], type:'class'|'package'}|null>(null);\r\n    const [suggestedName, setSuggestedName] = useStateIfMounted('');\r\n    const [childrenMenu, setChildrenMenu] = useStateIfMounted(false);\r\n    if (!node || !display) return(<></>);\r\n    const data: LNamedElement | undefined = LNamedElement.fromPointer(node?.model?.id);\r\n    let jsxList: ReactNode[] = [];\r\n\r\n\r\n    let ldata: LNamedElement = data as LNamedElement;\r\n    let ddata: DNamedElement = ldata?.__raw as DNamedElement;\r\n    let model = ldata?.model;\r\n\r\n    const close = () => {\r\n        // if (!windoww.ContextMenuVisible) return;\r\n        windoww.ContextMenuVisible = false;\r\n        setSuggestedName('');\r\n        setMemorec(null);\r\n        SetRootFieldAction.new('contextMenu', {display: false, x: 0, y: 0});\r\n        setChildrenMenu(false);\r\n    }\r\n\r\n    const addView = async() => {\r\n        DViewElement.newDefault(ddata as DNamedElement || undefined);\r\n        close();\r\n    }\r\n\r\n    const structuralFeature = async () => {\r\n        setMemorec(await MemoRec.structuralFeature(ldata));\r\n    }\r\n\r\n    const classifier = async() => {\r\n        setMemorec(await MemoRec.classifier(ldata));\r\n    }\r\n\r\n    const suggestOnClass = (isAttribute:boolean) => {\r\n        const lClass: LClass = (ldata as LClass);\r\n        if (isAttribute) lClass.addAttribute(suggestedName);\r\n        else lClass.addReference(suggestedName);\r\n        close();\r\n\r\n    }\r\n    const suggestOnPackage = () => { (ldata as LPackage).addClass(suggestedName); close(); }\r\n\r\n    /* Handling the add of composition children to specific M1 Object */\r\n\r\n\r\n    const getAddChildren = (l:LValue, model: LModel, out: LClass[] = []): ReactNode => {\r\n        let d = l.__raw;\r\n        const lref = l.instanceof as LReference;\r\n        if (!lref) return [];\r\n        let dref = lref.__raw;\r\n        if (dref.className !== 'DReference') return [];\r\n        if (!(dref.aggregation || dref.composition)) return [];\r\n        let values: any[] = l.values;\r\n        if (dref.upperBound !== -1 && values.filter(o=>!!o).length >= dref.upperBound) return [];\r\n        let type = lref.type;\r\n        out = [type, ...type.allSubClasses].filter(e=>!!e);\r\n        let jsxret: ReactNode;\r\n        if (out.length === 1) jsxret = <div onClick={() => { close(); l.addObject({}, out[0]); }} className={'col item'}>{icon['add']} Add {out[0].name}</div>\r\n        else jsxret = <div onClick={(e) => { setChildrenMenu(!childrenMenu)}} className={'col item'}>\r\n            {icon['add']} Add {icon['submenu']}\r\n            {childrenMenu && <div className={'context-menu round submenu'} style={{top: position.y - 216, left: position.x - 333}} onContextMenu={(e)=>e.preventDefault()}>\r\n                {out.map(lc =>\r\n                    <div onClick={() => {\r\n                        close();\r\n                        setChildrenMenu(false);\r\n                        const child = l.addObject({}, lc);\r\n                        l.values = [...(l.values as LObject[]), child];\r\n                    }} className={'col item'}>\r\n                        {lc.name}\r\n                    </div>\r\n                )}\r\n            </div>}\r\n        </div>;\r\n        return jsxret;\r\n    }\r\n\r\n    if (display) {\r\n        if (ddata.name) {\r\n            jsxList.push(<div className={'mt-1 col'} style={{paddingLeft: '12px', fontWeight: '300'}}>{ddata.className}: <i>{ldata.name}</i></div>);\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n        jsxList.push( <div>cn: {ddata?.className}, {(ldata as LObject).features.length}</div>);\r\n\r\n        if (ddata?.className === 'DObject') {\r\n            let ret: any[] = [];\r\n            jsxList.push( ...(ldata as LObject).features.map(feat=>getAddChildren(feat, model, [])));\r\n            jsxList.push( <div>rett: {ret.map(e=>e?.instanceof?.name).join(', ')} {ret.length}</div>);\r\n        }\r\n\r\n\r\n        /* Memorec */\r\n        if(ddata && !U.isOffline()) {\r\n            if(ddata.className === 'DClass') {\r\n                jsxList.push(<div onClick={structuralFeature} className={'col item'}>{icon['ai']} AI Suggest <i\r\n                    className='bi bi-chevron-right' style={{fontSize: '0.75em', float: 'right', paddingTop: '2px', fontWeight: '800'}} /></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n            }\r\n            if(ddata.className === 'DPackage') {\r\n                jsxList.push(<div onClick={classifier} className={'col item'}>{icon['ai']} AI Suggest <i\r\n                    className={'ms-1 bi bi-chevron-right'} style={{fontSize: '0.75em', float: 'right', paddingTop: '2px', fontWeight: '800'}} /></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n            }\r\n        }\r\n\r\n        /* Extend */\r\n        switch (ddata.className) {\r\n            default:\r\n            case undefined: break;\r\n            case 'DValue': if ((ldata as any as LValue).instanceof) jsxList.pop(); break;\r\n            case 'DClass':\r\n                jsxList.push(<div onClick={() => {\r\n                    close();\r\n                    SetRootFieldAction.new('isEdgePending', {user: user.id, source: ddata.id});\r\n                }} className={'col item'}>{icon['extend']} Extend<div><i\r\n                    className='bi bi-command'></i> E</div></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n                break;\r\n        }\r\n\r\n        /* Deselect */\r\n        jsxList.push(<div onClick={() => {\r\n            close();\r\n            SetRootFieldAction.new(`selected.${DUser.current}`, '', '', false);\r\n        }} className={'col item'}>{icon['deselect']} Deselect</div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n\r\n        /* Delete */\r\n        jsxList.push(<div onClick={() => {\r\n            close();\r\n            console.log('delete ctxmenu', {data, node});\r\n            if (ldata) ldata.delete();\r\n            else node.delete();// if there is data, then the node is indirectly deleted, no need to call it too.\r\n            //node.delete();\r\n        }} className={'col item'}>{icon['delete']} Delete<i\r\n            className='bi bi-backspace' style={{fontSize: '1em', float: 'right', paddingTop: '2px', fontWeight: '800'}} /></div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* Refresh */\r\n\r\n        // jsxList.push(<div onClick={() => {alert('refresh')}} className={'col item'}>{icon['refresh']} Refresh</div>);\r\n        // jsxList.push(<hr className={'my-1'} />);\r\n\r\n        /* Up / Down */\r\n        jsxList.push(<div onClick={() => {close(); node.zIndex += 1;}} className={'col item'}>{icon['up']} Up<div>\r\n            <i className='bi bi-command' /><i className=\"bi bi-arrow-up\" /></div></div>);\r\n        jsxList.push(<div onClick={() => {close(); node.zIndex -= 1;}} className={'col item'}>{icon['down']} Down<div>\r\n            <i className='bi bi-command' /><i className=\"bi bi-arrow-down\" /></div></div>);\r\n        let gn = node as GObject;\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* AUTO-SIZING */\r\n        if (gn.isResized) jsxList.push(<div onClick={() => {close(); gn.isResized = false; }} className={'col item'}>{icon['contract']} Restore auto-sizing<div> <i\r\n            className='bi bi-command'></i> T</div></div>);\r\n        else jsxList.push(<div onClick={() => {close(); gn.isResized = true; }} className={'col item'}>{icon['expand']} Disable auto-sizing<div> <i\r\n            className='bi bi-command'></i> T</div></div>);\r\n        // /* LOCK-UNLOCK */\r\n        // jsxList.push(<div onClick={() => {close(); ldata.delete(); /*node.delete();*/}} className={'col item'}>{icon['lock']} Lock/Unlock<div> <i\r\n        //     className='bi bi-command'></i> L</div></div>);\r\n        // /* UNLOCK ALL ELEMENTS */\r\n        // jsxList.push(<div onClick={() => {close(); ldata.delete(); /* node.delete();*/}} className={'col item'}>{icon['unlock']} Unlock all<div><i className=\"bi bi-alt\"></i> <i\r\n        //     className='bi bi-command'></i> L</div></div>);\r\n\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* METRICS */\r\n        if (ldata && model?.isMetamodel) {\r\n            jsxList.push(<div onClick={() => {close(); toggleMetrics();}} className={'col item'}>{icon['metrics']} Analytics<div>\r\n                <i className='bi bi-command' /> A</div></div>);\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n\r\n\r\n\r\n        /* ADD VIEW */\r\n        jsxList.push(<div onClick={async () => {close(); addView();}} className={'col item'}>{icon['view']} Add View<div>\r\n            <i className='bi bi-alt' /> <i className='bi bi-command' /> A</div></div>);\r\n    }\r\n\r\n    return(<>\r\n        <div className={'context-menu round'} style={{top: position.y - 100, left: position.x - 10}} onContextMenu={(e)=>e.preventDefault()}>\r\n            {jsxList.map((jsx, index) => {return <div key={index}>{jsx}</div>})}\r\n        </div>\r\n\r\n\r\n        {(data && memorec?.data) && <div className={'context-menu round'} style={{overflow: 'auto', maxHeight: '12em', top: position.y - 100, left: position.x + 130}}>\r\n            {(memorec.data.map((obj, index) => {\r\n                return (<div key={index}>\r\n                    <div className={'col item d-block'} onClick={e => setSuggestedName(obj.recommendedItem)}>\r\n                        {obj.recommendedItem} :\r\n                        <span className={'ms-1 text-primary'}>{Math.round(obj.score * 100) / 100}</span>\r\n                    </div>\r\n                </div>)\r\n            }))}\r\n        </div>}\r\n\r\n        {(memorec && suggestedName) && <div className={'memorec-overlay'}>\r\n            <div tabIndex={-1} onBlur={e => close()} className={'memorec-popup'}>\r\n                <div className={'d-block text-center mb-1'}>Add <b>{suggestedName}</b> as:</div>\r\n                {(memorec.type === 'class') ? <>\r\n                        <div tabIndex={-1} onClick={e =>suggestOnClass(true)} className={'d-flex memorec-button'}>\r\n                            <ModellingIcon className={'my-auto'} name={'attribute'} /> Attribute\r\n                        </div>\r\n                        <div tabIndex={-1} onClick={e =>suggestOnClass(false)} className={'d-flex memorec-button mt-1'}>\r\n                            <ModellingIcon className={'my-auto'} name={'reference'} /> Reference\r\n                        </div>\r\n                    </> :\r\n                    <div tabIndex={-1} onClick={e =>suggestOnPackage()} className={'d-flex memorec-button mt-1'}>\r\n                        <ModellingIcon className={'my-auto'} name={'class'} /> Class\r\n                    </div>\r\n                }\r\n                <div className={'d-flex memorec-button mt-3'} tabIndex={-1} onClick={e => close()}>\r\n                    <span className={'mx-auto text-danger'}>Close</span>\r\n                </div>\r\n            </div>\r\n        </div>}\r\n\r\n\r\n\r\n\r\n    </>);\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    user: LUser,\r\n    display: boolean,\r\n    position: {x: number, y: number},\r\n    node: LGraphElement|null\r\n}\r\n\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.user = LUser.fromPointer(DUser.current);\r\n    ret.display = state.contextMenu.display;\r\n    ret.position = {x: state.contextMenu.x, y: state.contextMenu.y};\r\n\r\n    const nodeid = state.contextMenu.nodeid; //state._lastSelected?.node;\r\n    if (nodeid) ret.node = LGraphElement.fromPointer(nodeid);\r\n    else ret.node = null;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ContextMenuConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ContextMenuComponent);\r\n\r\nexport const ContextMenu = (props: OwnProps, childrens: (string | React.Component)[] = []): ReactElement => {\r\n    return <ContextMenuConnected {...{...props, childrens}} />;\r\n}\r\nexport default ContextMenu;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}