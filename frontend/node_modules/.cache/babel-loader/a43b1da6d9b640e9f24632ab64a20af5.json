{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IsUniqueExpression = void 0;\nvar Expression_1 = require(\"../Expression\");\nvar Utils_1 = require(\"../../Utils\");\n/**\n * Returns true if the given expr evaluated on the body returns only different values.\n *\n * @oclExpression isUnique(expr : oclExpression) : boolean\n * @oclExample self.collection->isUnique(self > 3)\n */\nvar IsUniqueExpression = /** @class */function (_super) {\n  __extends(IsUniqueExpression, _super);\n  function IsUniqueExpression() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  IsUniqueExpression.prototype.evaluate = function (visitor, localVariables) {\n    var _this = this;\n    var collection = this.getSource().evaluate(visitor);\n    var body = this.getBody();\n    var iterators = this.getIterators();\n    if (collection instanceof Array) {\n      var result = collection.map(function (c) {\n        var variables = {};\n        if (iterators) {\n          variables[iterators[0]] = c;\n        } else {\n          var variableName = Utils_1.Utils.getVariableName(_this);\n          variables[variableName.getVariable()] = c;\n        }\n        return body.evaluate(visitor, __assign(__assign({}, localVariables), variables));\n      });\n      return result.length === new Set(result).size;\n    } else {\n      return false;\n    }\n  };\n  return IsUniqueExpression;\n}(Expression_1.IteratorExpression);\nexports.IsUniqueExpression = IsUniqueExpression;","map":{"version":3,"names":["Expression_1","require","Utils_1","IsUniqueExpression","_super","__extends","prototype","evaluate","visitor","localVariables","_this","collection","getSource","body","getBody","iterators","getIterators","Array","result","map","c","variables","variableName","Utils","getVariableName","getVariable","__assign","length","Set","size","IteratorExpression","exports"],"sources":["../../../../lib/components/expressions/collection/IsUniqueExpression.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAEA;;;;;;AAMA,IAAAE,kBAAA,0BAAAC,MAAA;EAAwCC,SAAA,CAAAF,kBAAA,EAAAC,MAAA;EAAxC,SAAAD,mBAAA;;EA0BA;EAzBIA,kBAAA,CAAAG,SAAA,CAAAC,QAAQ,GAAR,UAASC,OAA4B,EAAEC,cAAoB;IAA3D,IAAAC,KAAA;IACI,IAAMC,UAAU,GAAG,IAAI,CAACC,SAAS,EAAE,CAC9BL,QAAQ,CAACC,OAAO,CAAC;IAEtB,IAAMK,IAAI,GAAG,IAAI,CAACC,OAAO,EAAE;IAC3B,IAAMC,SAAS,GAAG,IAAI,CAACC,YAAY,EAAE;IAErC,IAAIL,UAAU,YAAYM,KAAK,EAAE;MAC7B,IAAMC,MAAM,GAAGP,UAAU,CAACQ,GAAG,CAAC,UAAAC,CAAC;QAC3B,IAAMC,SAAS,GAAG,EAAE;QACpB,IAAIN,SAAS,EAAE;UACXM,SAAS,CAACN,SAAS,CAAC,CAAC,CAAC,CAAC,GAAGK,CAAC;SAC9B,MAAM;UACH,IAAME,YAAY,GAAGpB,OAAA,CAAAqB,KAAK,CAACC,eAAe,CAACd,KAAI,CAAC;UAChDW,SAAS,CAACC,YAAY,CAACG,WAAW,EAAE,CAAC,GAAGL,CAAC;;QAG7C,OAAOP,IAAI,CAACN,QAAQ,CAACC,OAAO,EAAAkB,QAAA,CAAAA,QAAA,KAAMjB,cAAc,GAAKY,SAAS,EAAE;MACpE,CAAC,CAAC;MAEF,OAAOH,MAAM,CAACS,MAAM,KAAK,IAAIC,GAAG,CAACV,MAAM,CAAC,CAACW,IAAI;KAChD,MAAM;MACH,OAAO,KAAK;;EAEpB,CAAC;EACL,OAAA1B,kBAAC;AAAD,CAAC,CA1BuCH,YAAA,CAAA8B,kBAAkB;AAA7CC,OAAA,CAAA5B,kBAAA,GAAAA,kBAAA"},"metadata":{},"sourceType":"script"}