{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import'./style.scss';import{SetRootFieldAction}from'../../redux/action/action';import{DUser,DViewElement,LGraphElement,LNamedElement,LUser,U,windoww}from'../../joiner';import MemoRec from'../../api/memorec';import{useStateIfMounted}from'use-state-if-mounted';import ModellingIcon from\"../forEndUser/ModellingIcon\";import{toggleMetrics}from'../metrics/Metrics';import{icon}from'../../pages/components/icons/Icons';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ContextMenuComponent(props){var _node$model;const user=props.user;// const project = user.project as LProject;\nconst display=props.display;const position=props.position;const node=props.node;const[memorec,setMemorec]=useStateIfMounted(null);const[suggestedName,setSuggestedName]=useStateIfMounted('');const[childrenMenu,setChildrenMenu]=useStateIfMounted(false);if(!node||!display)return/*#__PURE__*/_jsx(_Fragment,{});const data=LNamedElement.fromPointer(node===null||node===void 0?void 0:(_node$model=node.model)===null||_node$model===void 0?void 0:_node$model.id);let jsxList=[];let ldata=data;let ddata=ldata===null||ldata===void 0?void 0:ldata.__raw;let model=ldata===null||ldata===void 0?void 0:ldata.model;const close=()=>{// if (!windoww.ContextMenuVisible) return;\nwindoww.ContextMenuVisible=false;setSuggestedName('');setMemorec(null);SetRootFieldAction.new('contextMenu',{display:false,x:0,y:0});setChildrenMenu(false);};const addView=async()=>{DViewElement.newDefault(ddata||undefined);close();};const structuralFeature=async()=>{setMemorec(await MemoRec.structuralFeature(ldata));};const classifier=async()=>{setMemorec(await MemoRec.classifier(ldata));};const suggestOnClass=isAttribute=>{const lClass=ldata;if(isAttribute)lClass.addAttribute(suggestedName);else lClass.addReference(suggestedName);close();};const suggestOnPackage=()=>{ldata.addClass(suggestedName);close();};/* Handling the add of composition children to specific M1 Object */const getAddChildren=function(l,model){let out=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let d=l.__raw;const lref=l.instanceof;if(!lref)return[];let dref=lref.__raw;if(dref.className!=='DReference')return[];if(!(dref.aggregation||dref.composition))return[];let values=l.values;if(dref.upperBound!==-1&&values.filter(o=>!!o).length>=dref.upperBound)return[];let type=lref.type;out=[type,...type.allSubClasses].filter(e=>!!e);let jsxret;if(out.length===1)jsxret=/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();l.addObject({},out[0]);},className:'col item',children:[icon['add'],\" Add \",out[0].name]});else jsxret=/*#__PURE__*/_jsxs(\"div\",{onClick:e=>{setChildrenMenu(!childrenMenu);},className:'col item',children:[icon['add'],\" Add \",icon['submenu'],childrenMenu&&/*#__PURE__*/_jsx(\"div\",{className:'context-menu round submenu',style:{top:position.y-216,left:position.x-333},onContextMenu:e=>e.preventDefault(),children:out.map(lc=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>{close();setChildrenMenu(false);const child=l.addObject({},lc);l.values=[...l.values,child];},className:'col item',children:lc.name}))})]});return jsxret;};if(display){if(ddata===null||ddata===void 0?void 0:ddata.name){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{className:'mt-1 col',style:{paddingLeft:'12px',fontWeight:'300'},children:[ddata.className,\": \",/*#__PURE__*/_jsx(\"i\",{children:ldata.name})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}if((ddata===null||ddata===void 0?void 0:ddata.className)==='DObject'){jsxList.push(...ldata.features.map(feat=>getAddChildren(feat,model,[])));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}if((ddata===null||ddata===void 0?void 0:ddata.className)==='DValue'){jsxList.push(getAddChildren(ldata,model,[]));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}/* Memorec */if(ddata&&!U.isOffline()){if(ddata.className==='DClass'){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:structuralFeature,className:'col item',children:[icon['ai'],\" AI Suggest \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-right\",style:{fontSize:'0.75em',float:'right',paddingTop:'2px',fontWeight:'800'}})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}if(ddata.className==='DPackage'){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:classifier,className:'col item',children:[icon['ai'],\" AI Suggest \",/*#__PURE__*/_jsx(\"i\",{className:'ms-1 bi bi-chevron-right',style:{fontSize:'0.75em',float:'right',paddingTop:'2px',fontWeight:'800'}})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}}/* Extend */switch(ddata.className){default:case undefined:break;case'DValue':if(ldata.instanceof)jsxList.pop();break;case'DClass':jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();SetRootFieldAction.new('isEdgePending',{user:user.id,source:ddata.id});},className:'col item',children:[icon['extend'],\" Extend\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" E\"]})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));break;}/* Deselect */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();SetRootFieldAction.new(\"selected.\".concat(DUser.current),'','',false);},className:'col item',children:[icon['deselect'],\" Deselect\"]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* Delete */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();console.log('delete ctxmenu',{data,node});if(ldata)ldata.delete();else node.delete();// if there is data, then the node is indirectly deleted, no need to call it too.\n//node.delete();\n},className:'col item',children:[icon['delete'],\" Delete\",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-backspace\",style:{fontSize:'1em',float:'right',paddingTop:'2px',fontWeight:'800'}})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* Refresh */ // jsxList.push(<div onClick={() => {alert('refresh')}} className={'col item'}>{icon['refresh']} Refresh</div>);\n// jsxList.push(<hr className={'my-1'} />);\n/* Up / Down */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();node.zIndex+=1;},className:'col item',children:[icon['up'],\" Up\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-up\"})]})]}));jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();node.zIndex-=1;},className:'col item',children:[icon['down'],\" Down\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-down\"})]})]}));let gn=node;jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* AUTO-SIZING */if(gn.isResized)jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();gn.isResized=false;},className:'col item',children:[icon['contract'],\" Restore auto-sizing\",/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" T\"]})]}));else jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();gn.isResized=true;},className:'col item',children:[icon['expand'],\" Disable auto-sizing\",/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" T\"]})]}));// /* LOCK-UNLOCK */\n// jsxList.push(<div onClick={() => {close(); ldata.delete(); /*node.delete();*/}} className={'col item'}>{icon['lock']} Lock/Unlock<div> <i\n//     className='bi bi-command'></i> L</div></div>);\n// /* UNLOCK ALL ELEMENTS */\n// jsxList.push(<div onClick={() => {close(); ldata.delete(); /* node.delete();*/}} className={'col item'}>{icon['unlock']} Unlock all<div><i className=\"bi bi-alt\"></i> <i\n//     className='bi bi-command'></i> L</div></div>);\njsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));/* METRICS */if(ldata&&(model===null||model===void 0?void 0:model.isMetamodel)){jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{close();toggleMetrics();},className:'col item',children:[icon['metrics'],\" Analytics\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" A\"]})]}));jsxList.push(/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}));}/* ADD VIEW */jsxList.push(/*#__PURE__*/_jsxs(\"div\",{onClick:async()=>{close();addView();},className:'col item',children:[icon['view'],\" Add View\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-alt\"}),\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-command\"}),\" A\"]})]}));}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:'context-menu round',style:{top:position.y-100,left:position.x-10},onContextMenu:e=>e.preventDefault(),children:jsxList.map((jsx,index)=>{return/*#__PURE__*/_jsx(\"div\",{children:jsx},index);})}),data&&(memorec===null||memorec===void 0?void 0:memorec.data)&&/*#__PURE__*/_jsx(\"div\",{className:'context-menu round',style:{overflow:'auto',maxHeight:'12em',top:position.y-100,left:position.x+130},children:memorec.data.map((obj,index)=>{return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:'col item d-block',onClick:e=>setSuggestedName(obj.recommendedItem),children:[obj.recommendedItem,\" :\",/*#__PURE__*/_jsx(\"span\",{className:'ms-1 text-primary',children:Math.round(obj.score*100)/100})]})},index);})}),memorec&&suggestedName&&/*#__PURE__*/_jsx(\"div\",{className:'memorec-overlay',children:/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onBlur:e=>close(),className:'memorec-popup',children:[/*#__PURE__*/_jsxs(\"div\",{className:'d-block text-center mb-1',children:[\"Add \",/*#__PURE__*/_jsx(\"b\",{children:suggestedName}),\" as:\"]}),memorec.type==='class'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onClick:e=>suggestOnClass(true),className:'d-flex memorec-button',children:[/*#__PURE__*/_jsx(ModellingIcon,{className:'my-auto',name:'attribute'}),\" Attribute\"]}),/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onClick:e=>suggestOnClass(false),className:'d-flex memorec-button mt-1',children:[/*#__PURE__*/_jsx(ModellingIcon,{className:'my-auto',name:'reference'}),\" Reference\"]})]}):/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,onClick:e=>suggestOnPackage(),className:'d-flex memorec-button mt-1',children:[/*#__PURE__*/_jsx(ModellingIcon,{className:'my-auto',name:'class'}),\" Class\"]}),/*#__PURE__*/_jsx(\"div\",{className:'d-flex memorec-button mt-3',tabIndex:-1,onClick:e=>close(),children:/*#__PURE__*/_jsx(\"span\",{className:'mx-auto text-danger',children:\"Close\"})})]})})]});}function mapStateToProps(state,ownProps){const ret={};ret.user=LUser.fromPointer(DUser.current);ret.display=state.contextMenu.display;ret.position={x:state.contextMenu.x,y:state.contextMenu.y};const nodeid=state.contextMenu.nodeid;//state._lastSelected?.node;\nif(nodeid)ret.node=LGraphElement.fromPointer(nodeid);else ret.node=null;return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const ContextMenuConnected=connect(mapStateToProps,mapDispatchToProps)(ContextMenuComponent);export const ContextMenu=function(props){let childrens=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ContextMenuConnected,{...props,childrens});};export default ContextMenu;","map":{"version":3,"names":["React","connect","SetRootFieldAction","DUser","DViewElement","LGraphElement","LNamedElement","LUser","U","windoww","MemoRec","useStateIfMounted","ModellingIcon","toggleMetrics","icon","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","ContextMenuComponent","props","_node$model","user","display","position","node","memorec","setMemorec","suggestedName","setSuggestedName","childrenMenu","setChildrenMenu","data","fromPointer","model","id","jsxList","ldata","ddata","__raw","close","ContextMenuVisible","new","x","y","addView","newDefault","undefined","structuralFeature","classifier","suggestOnClass","isAttribute","lClass","addAttribute","addReference","suggestOnPackage","addClass","getAddChildren","l","out","arguments","length","d","lref","instanceof","dref","className","aggregation","composition","values","upperBound","filter","o","type","allSubClasses","e","jsxret","onClick","addObject","children","name","style","top","left","onContextMenu","preventDefault","map","lc","child","push","paddingLeft","fontWeight","features","feat","isOffline","fontSize","float","paddingTop","pop","source","concat","current","console","log","delete","zIndex","gn","isResized","isMetamodel","index","overflow","maxHeight","obj","recommendedItem","Math","round","score","tabIndex","onBlur","mapStateToProps","state","ownProps","ret","contextMenu","nodeid","mapDispatchToProps","dispatch","ContextMenuConnected","ContextMenu","childrens"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/frontend/src/components/contextMenu/ContextMenu.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './style.scss';\r\nimport {SetRootFieldAction} from '../../redux/action/action';\r\nimport {\r\n    DClass,\r\n    DNamedElement,\r\n    DState,\r\n    DUser,\r\n    DValue,\r\n    DViewElement,\r\n    GObject,\r\n    LClass,\r\n    LGraphElement, LModel,\r\n    LNamedElement,\r\n    LObject,\r\n    LPackage,\r\n    LProject, LReference,\r\n    LUser,\r\n    LValue,\r\n    U,\r\n    windoww,\r\n} from '../../joiner';\r\nimport MemoRec from '../../api/memorec';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport ModellingIcon from \"../forEndUser/ModellingIcon\";\r\nimport {FakeStateProps} from \"../../joiner/types\";\r\nimport {toggleMetrics} from '../metrics/Metrics';\r\nimport {icon} from '../../pages/components/icons/Icons';\r\n\r\nfunction ContextMenuComponent(props: AllProps) {\r\n    const user = props.user;\r\n    // const project = user.project as LProject;\r\n    const display = props.display;\r\n    const position = props.position;\r\n    const node = props.node;\r\n    const [memorec, setMemorec] = useStateIfMounted<{data:GObject[], type:'class'|'package'}|null>(null);\r\n    const [suggestedName, setSuggestedName] = useStateIfMounted('');\r\n    const [childrenMenu, setChildrenMenu] = useStateIfMounted(false);\r\n    if (!node || !display) return(<></>);\r\n    const data: LNamedElement | undefined = LNamedElement.fromPointer(node?.model?.id);\r\n    let jsxList: ReactNode[] = [];\r\n\r\n\r\n    let ldata: LNamedElement = data as LNamedElement;\r\n    let ddata: DNamedElement = ldata?.__raw as DNamedElement;\r\n    let model = ldata?.model;\r\n\r\n    const close = () => {\r\n        // if (!windoww.ContextMenuVisible) return;\r\n        windoww.ContextMenuVisible = false;\r\n        setSuggestedName('');\r\n        setMemorec(null);\r\n        SetRootFieldAction.new('contextMenu', {display: false, x: 0, y: 0});\r\n        setChildrenMenu(false);\r\n    }\r\n\r\n    const addView = async() => {\r\n        DViewElement.newDefault(ddata as DNamedElement || undefined);\r\n        close();\r\n    }\r\n\r\n    const structuralFeature = async () => {\r\n        setMemorec(await MemoRec.structuralFeature(ldata));\r\n    }\r\n\r\n    const classifier = async() => {\r\n        setMemorec(await MemoRec.classifier(ldata));\r\n    }\r\n\r\n    const suggestOnClass = (isAttribute:boolean) => {\r\n        const lClass: LClass = (ldata as LClass);\r\n        if (isAttribute) lClass.addAttribute(suggestedName);\r\n        else lClass.addReference(suggestedName);\r\n        close();\r\n\r\n    }\r\n    const suggestOnPackage = () => { (ldata as LPackage).addClass(suggestedName); close(); }\r\n\r\n    /* Handling the add of composition children to specific M1 Object */\r\n\r\n\r\n    const getAddChildren = (l:LValue, model: LModel, out: LClass[] = []): ReactNode => {\r\n        let d = l.__raw;\r\n        const lref = l.instanceof as LReference;\r\n        if (!lref) return [];\r\n        let dref = lref.__raw;\r\n        if (dref.className !== 'DReference') return [];\r\n        if (!(dref.aggregation || dref.composition)) return [];\r\n        let values: any[] = l.values;\r\n        if (dref.upperBound !== -1 && values.filter(o=>!!o).length >= dref.upperBound) return [];\r\n        let type = lref.type;\r\n        out = [type, ...type.allSubClasses].filter(e=>!!e);\r\n        let jsxret: ReactNode;\r\n        if (out.length === 1) jsxret = <div onClick={() => { close(); l.addObject({}, out[0]); }} className={'col item'}>{icon['add']} Add {out[0].name}</div>\r\n        else jsxret = <div onClick={(e) => { setChildrenMenu(!childrenMenu)}} className={'col item'}>\r\n            {icon['add']} Add {icon['submenu']}\r\n            {childrenMenu && <div className={'context-menu round submenu'} style={{top: position.y - 216, left: position.x - 333}} onContextMenu={(e)=>e.preventDefault()}>\r\n                {out.map(lc =>\r\n                    <div onClick={() => {\r\n                        close();\r\n                        setChildrenMenu(false);\r\n                        const child = l.addObject({}, lc);\r\n                        l.values = [...(l.values as LObject[]), child];\r\n                    }} className={'col item'}>\r\n                        {lc.name}\r\n                    </div>\r\n                )}\r\n            </div>}\r\n        </div>;\r\n        return jsxret;\r\n    }\r\n\r\n    if (display) {\r\n        if (ddata?.name) {\r\n            jsxList.push(<div className={'mt-1 col'} style={{paddingLeft: '12px', fontWeight: '300'}}>{ddata.className}: <i>{ldata.name}</i></div>);\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n\r\n        if (ddata?.className === 'DObject') {\r\n            jsxList.push(...(ldata as LObject).features.map(feat=>getAddChildren(feat, model, [])));\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n\r\n        if (ddata?.className === 'DValue') {\r\n            jsxList.push(getAddChildren(ldata as any as LValue, model, []));\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n\r\n\r\n        /* Memorec */\r\n        if(ddata && !U.isOffline()) {\r\n            if(ddata.className === 'DClass') {\r\n                jsxList.push(<div onClick={structuralFeature} className={'col item'}>{icon['ai']} AI Suggest <i\r\n                    className='bi bi-chevron-right' style={{fontSize: '0.75em', float: 'right', paddingTop: '2px', fontWeight: '800'}} /></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n            }\r\n            if(ddata.className === 'DPackage') {\r\n                jsxList.push(<div onClick={classifier} className={'col item'}>{icon['ai']} AI Suggest <i\r\n                    className={'ms-1 bi bi-chevron-right'} style={{fontSize: '0.75em', float: 'right', paddingTop: '2px', fontWeight: '800'}} /></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n            }\r\n        }\r\n\r\n        /* Extend */\r\n        switch (ddata.className) {\r\n            default:\r\n            case undefined: break;\r\n            case 'DValue': if ((ldata as any as LValue).instanceof) jsxList.pop(); break;\r\n            case 'DClass':\r\n                jsxList.push(<div onClick={() => {\r\n                    close();\r\n                    SetRootFieldAction.new('isEdgePending', {user: user.id, source: ddata.id});\r\n                }} className={'col item'}>{icon['extend']} Extend<div><i\r\n                    className='bi bi-command'></i> E</div></div>);\r\n                jsxList.push(<hr className={'my-1'} />);\r\n                break;\r\n        }\r\n\r\n        /* Deselect */\r\n        jsxList.push(<div onClick={() => {\r\n            close();\r\n            SetRootFieldAction.new(`selected.${DUser.current}`, '', '', false);\r\n        }} className={'col item'}>{icon['deselect']} Deselect</div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n\r\n        /* Delete */\r\n        jsxList.push(<div onClick={() => {\r\n            close();\r\n            console.log('delete ctxmenu', {data, node});\r\n            if (ldata) ldata.delete();\r\n            else node.delete();// if there is data, then the node is indirectly deleted, no need to call it too.\r\n            //node.delete();\r\n        }} className={'col item'}>{icon['delete']} Delete<i\r\n            className='bi bi-backspace' style={{fontSize: '1em', float: 'right', paddingTop: '2px', fontWeight: '800'}} /></div>);\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* Refresh */\r\n\r\n        // jsxList.push(<div onClick={() => {alert('refresh')}} className={'col item'}>{icon['refresh']} Refresh</div>);\r\n        // jsxList.push(<hr className={'my-1'} />);\r\n\r\n        /* Up / Down */\r\n        jsxList.push(<div onClick={() => {close(); node.zIndex += 1;}} className={'col item'}>{icon['up']} Up<div>\r\n            <i className='bi bi-command' /><i className=\"bi bi-arrow-up\" /></div></div>);\r\n        jsxList.push(<div onClick={() => {close(); node.zIndex -= 1;}} className={'col item'}>{icon['down']} Down<div>\r\n            <i className='bi bi-command' /><i className=\"bi bi-arrow-down\" /></div></div>);\r\n        let gn = node as GObject;\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* AUTO-SIZING */\r\n        if (gn.isResized) jsxList.push(<div onClick={() => {close(); gn.isResized = false; }} className={'col item'}>{icon['contract']} Restore auto-sizing<div> <i\r\n            className='bi bi-command'></i> T</div></div>);\r\n        else jsxList.push(<div onClick={() => {close(); gn.isResized = true; }} className={'col item'}>{icon['expand']} Disable auto-sizing<div> <i\r\n            className='bi bi-command'></i> T</div></div>);\r\n        // /* LOCK-UNLOCK */\r\n        // jsxList.push(<div onClick={() => {close(); ldata.delete(); /*node.delete();*/}} className={'col item'}>{icon['lock']} Lock/Unlock<div> <i\r\n        //     className='bi bi-command'></i> L</div></div>);\r\n        // /* UNLOCK ALL ELEMENTS */\r\n        // jsxList.push(<div onClick={() => {close(); ldata.delete(); /* node.delete();*/}} className={'col item'}>{icon['unlock']} Unlock all<div><i className=\"bi bi-alt\"></i> <i\r\n        //     className='bi bi-command'></i> L</div></div>);\r\n\r\n        jsxList.push(<hr className={'my-1'} />);\r\n        /* METRICS */\r\n        if (ldata && model?.isMetamodel) {\r\n            jsxList.push(<div onClick={() => {close(); toggleMetrics();}} className={'col item'}>{icon['metrics']} Analytics<div>\r\n                <i className='bi bi-command' /> A</div></div>);\r\n            jsxList.push(<hr className={'my-1'} />);\r\n        }\r\n\r\n\r\n\r\n        /* ADD VIEW */\r\n        jsxList.push(<div onClick={async () => {close(); addView();}} className={'col item'}>{icon['view']} Add View<div>\r\n            <i className='bi bi-alt' /> <i className='bi bi-command' /> A</div></div>);\r\n    }\r\n\r\n    return(<>\r\n        <div className={'context-menu round'} style={{top: position.y - 100, left: position.x - 10}} onContextMenu={(e)=>e.preventDefault()}>\r\n            {jsxList.map((jsx, index) => {return <div key={index}>{jsx}</div>})}\r\n        </div>\r\n\r\n\r\n        {(data && memorec?.data) && <div className={'context-menu round'} style={{overflow: 'auto', maxHeight: '12em', top: position.y - 100, left: position.x + 130}}>\r\n            {(memorec.data.map((obj, index) => {\r\n                return (<div key={index}>\r\n                    <div className={'col item d-block'} onClick={e => setSuggestedName(obj.recommendedItem)}>\r\n                        {obj.recommendedItem} :\r\n                        <span className={'ms-1 text-primary'}>{Math.round(obj.score * 100) / 100}</span>\r\n                    </div>\r\n                </div>)\r\n            }))}\r\n        </div>}\r\n\r\n        {(memorec && suggestedName) && <div className={'memorec-overlay'}>\r\n            <div tabIndex={-1} onBlur={e => close()} className={'memorec-popup'}>\r\n                <div className={'d-block text-center mb-1'}>Add <b>{suggestedName}</b> as:</div>\r\n                {(memorec.type === 'class') ? <>\r\n                        <div tabIndex={-1} onClick={e =>suggestOnClass(true)} className={'d-flex memorec-button'}>\r\n                            <ModellingIcon className={'my-auto'} name={'attribute'} /> Attribute\r\n                        </div>\r\n                        <div tabIndex={-1} onClick={e =>suggestOnClass(false)} className={'d-flex memorec-button mt-1'}>\r\n                            <ModellingIcon className={'my-auto'} name={'reference'} /> Reference\r\n                        </div>\r\n                    </> :\r\n                    <div tabIndex={-1} onClick={e =>suggestOnPackage()} className={'d-flex memorec-button mt-1'}>\r\n                        <ModellingIcon className={'my-auto'} name={'class'} /> Class\r\n                    </div>\r\n                }\r\n                <div className={'d-flex memorec-button mt-3'} tabIndex={-1} onClick={e => close()}>\r\n                    <span className={'mx-auto text-danger'}>Close</span>\r\n                </div>\r\n            </div>\r\n        </div>}\r\n\r\n\r\n\r\n\r\n    </>);\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    user: LUser,\r\n    display: boolean,\r\n    position: {x: number, y: number},\r\n    node: LGraphElement|null\r\n}\r\n\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.user = LUser.fromPointer(DUser.current);\r\n    ret.display = state.contextMenu.display;\r\n    ret.position = {x: state.contextMenu.x, y: state.contextMenu.y};\r\n\r\n    const nodeid = state.contextMenu.nodeid; //state._lastSelected?.node;\r\n    if (nodeid) ret.node = LGraphElement.fromPointer(nodeid);\r\n    else ret.node = null;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ContextMenuConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ContextMenuComponent);\r\n\r\nexport const ContextMenu = (props: OwnProps, childrens: (string | React.Component)[] = []): ReactElement => {\r\n    return <ContextMenuConnected {...{...props, childrens}} />;\r\n}\r\nexport default ContextMenu;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}