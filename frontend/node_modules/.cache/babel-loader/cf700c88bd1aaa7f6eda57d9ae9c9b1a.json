{"ast":null,"code":"import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import\"./console.scss\";import React,{PureComponent}from\"react\";import{connect}from\"react-redux\";import{LGraphElement,RuntimeAccessibleClass,U,windoww,Log,transientProperties}from\"../../../joiner\";import*as util from\"util\";import ReactDOM from\"react-dom\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Convert=require('ansi-to-html');var ansiConvert=new Convert();window.ansiconvert=ansiConvert;var ThisState=function ThisState(){_classCallCheck(this,ThisState);this.expression=void 0;this.output=void 0;};// trasformato in class component cos√¨ puoi usare il this nella console. e non usa accidentalmente window come contesto\nvar hiddenkeys=[\"jsxString\",\"pointedBy\",\"clonedCounter\",\"parent\",\"_subMaps\",\"inspect\",\"__random\"];function fixproxy(output){var _output;var hideDKeys=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var addLKeys=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var proxy;if((_output=output)===null||_output===void 0?void 0:_output.__isProxy){proxy=output;output=output.__raw;//Object.fromEntries(Object.getOwnPropertyNames(p).map(k => [k, p[k]]));\n}else proxy=undefined;var ret={output:output};switch(typeof output){case\"function\":return{output:U.buildFunctionDocumentation(output)};default:return{output:output};case\"object\":ret.output=output=_objectSpread({},output);if(addLKeys&&proxy){var _RuntimeAccessibleCla,_RuntimeAccessibleCla2,_output2;console.log(\"console output\",{output:output,proxy:proxy});var Lsingleton=((_RuntimeAccessibleCla=RuntimeAccessibleClass.get((_output2=output)===null||_output2===void 0?void 0:_output2.className))===null||_RuntimeAccessibleCla===void 0?void 0:(_RuntimeAccessibleCla2=_RuntimeAccessibleCla.logic)===null||_RuntimeAccessibleCla2===void 0?void 0:_RuntimeAccessibleCla2.singleton)||{};var comments={};ret.shortcuts=_objectSpread({},Lsingleton);ret.comments=comments;for(var key in output){if(Lsingleton[\"__info_of__\"+key])comments[key]=Lsingleton[\"__info_of__\"+key];}for(var _key in Lsingleton){if(_key in output||_key.indexOf(\"__info_of__\")===0){delete ret.shortcuts[_key];continue;}else{if(ret.shortcuts[_key]===undefined)ret.shortcuts[_key]='';}if(Lsingleton[\"__info_of__\"+_key])comments[_key]=Lsingleton[\"__info_of__\"+_key];if(comments[_key])continue;// if explicitly commented, i will not attempt to generate documentation.\nvar entryvalue=Lsingleton[_key];switch(typeof entryvalue){default:case\"object\":ret.shortcuts[_key]=entryvalue;break;case\"function\":ret.shortcuts[_key]=U.buildFunctionDocumentation(entryvalue);break;}}}if(hiddenkeys){ret.hiddenkeys={};for(var _i=0,_hiddenkeys=hiddenkeys;_i<_hiddenkeys.length;_i++){var _key2=_hiddenkeys[_i];ret.hiddenkeys[_key2]=output[_key2];delete output[_key2];// delete output.shortcuts[key];\n}}break;}return ret;}export var ConsoleComponent=/*#__PURE__*/function(_PureComponent){_inherits(ConsoleComponent,_PureComponent);var _super=_createSuper(ConsoleComponent);function ConsoleComponent(props){var _this;_classCallCheck(this,ConsoleComponent);_this=_super.call(this,props);_this.lastNode=void 0;_this._context={};_this.state={expression:'',output:null};_this.change=_this.change.bind(_assertThisInitialized(_this));_this.change(undefined);return _this;}_createClass(ConsoleComponent,[{key:\"change\",value:function change(evt){var _this$props$node;if(!this)return;// component being destroyed and remade after code hot update\nvar expression=(evt===null||evt===void 0?void 0:evt.target.value.trim())||this.state.expression||'';var output;// let context = {...this.props, props: this.props}; // makeEvalContext(this.props as any, {} as any);\nvar nid=(_this$props$node=this.props.node)===null||_this$props$node===void 0?void 0:_this$props$node.id;var tn=transientProperties.node[nid];if(nid&&tn){// let component = GraphElementComponent.map[this.props.node.id];\nthis._context=_objectSpread({},tn.viewScores[tn.mainView.id].evalContext);this._context.fromcomponent=true;}else{this._context=_objectSpread(_objectSpread({},this.props),{},{props:this.props});}try{output=U.evalInContextAndScope(expression||'undefined',this._context,this._context);}catch(e){console.error(\"console error\",e);output='<span style=\"color:red\">Invalid Syntax!<br></span>'+e.toString();}this.setState({expression:expression,output:output});}},{key:\"render\",value:function render(){var _this$state$output,_this$props$node2;var data=this.props.data;/*\r\n        const [expression, setExpression] = useStateIfMounted('data');\r\n        const [output, setOutput] = useStateIfMounted('');*/if(!this.props.node)return/*#__PURE__*/_jsx(_Fragment,{});if(this.lastNode!==this.props.node.id)this.change();// force reevaluation if selected node changed\nthis.lastNode=this.props.node.id;var outstr;// try { outstr = U.circularStringify(this.state.output, (key, value)=> { return value.__isProxy ? value.name : value; }, \"\\t\", 1) }\n// (window as any).inspect = util.inspect;\n// (window as any).tmpp = this.state.output;\nvar ashtml;var output=this.state.output;var shortcuts=undefined;var comments=undefined;var hidden=undefined;var jsxComments={};try{var _output$,_output3;if(Array.isArray(output)){comments={\"separator\":'<span>Similar to <a href={\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join\"}>Array.join(separator)</a>'+', but supports array of JSX nodes and JSX as separator argument.</span>'};shortcuts={\"separator\":\"\"};}if(Array.isArray(output)&&((_output$=output[0])===null||_output$===void 0?void 0:_output$.__isProxy)){output=output.map(function(o){return fixproxy(o).output;});console.log(\"console result (array):\",{output:output});}else{var ret=fixproxy(output);output=ret.output;comments=ret.comments;shortcuts=ret.shortcuts;hidden=ret.hiddenkeys;console.log(\"console result:\",{output:output,ret:ret});}// todo: as i fix the displaying of a LViewElement without replacing it with __raw,\n//  i will fix window, component and props displaying too i think they crash for props.data, props.view...\nif((_output3=output)===null||_output3===void 0?void 0:_output3._reactInternals){output={\"React.Component\":{props:\"...navigate to expand...\",state:\"\",_isMounted:output._isMounted}};}var format=function format(val){return U.replaceAll(ansiConvert.toHtml(util.inspect(val,true,2,true)),\"style=\\\"color:#FFF\\\"\",\"style=\\\"color:#000\\\"\");};outstr='<h4>Result:</h4><div class=\"output-row\" tabindex=\"984\">'+format(output)+\"<span>\";var commentsPopup=\"\";if(shortcuts||comments){// if(!shortcuts) shortcuts = {};\nif(!comments)comments={};for(var commentKey in comments){var _commentVal,_commentVal2,_commentVal3,_commentVal3$type;var commentVal=comments[commentKey];var txt=(_commentVal=commentVal)===null||_commentVal===void 0?void 0:_commentVal.txt;if(txt&&typeof txt!==\"string\"){// try to inject jsx\njsxComments[commentKey]=txt;txt=\"<span id='console_output_comment_\"+commentKey+\"' />\";// fallback read text, that should go deep iteration, but 1 level deep should be enough.\n// let arr: any[] = (Array.isArray(txt?.props?.children) ? txt.props.children : (txt.props.children ? [txt.props.children] : []));\n// txt = arr.map(e => typeof e === \"string\" ? e : e?.props?.children + '' || '').join(\"\");\n}if((_commentVal2=commentVal)===null||_commentVal2===void 0?void 0:_commentVal2.type)commentVal=\"\\t\\t<span style='color: #999'>\"+(((_commentVal3=commentVal)===null||_commentVal3===void 0?void 0:(_commentVal3$type=_commentVal3.type)===null||_commentVal3$type===void 0?void 0:_commentVal3$type.cname)||commentVal.type)+\"</span>\";// + \" ~ \" + txt;\n// warning: unicode char but should not make a problem. êÄπ\ncommentVal+='<div class=\"output-comment my-tooltip\">'+txt+'</div></div><div class=\"output-row\" tabindex=\"984\">';var commentKeyEscaped=U.multiReplaceAll(commentKey,[\"$\",\"-\"],[\"\\\\$\",\"\\\\-\"]);// _ should be safe, .-,?^ not happening?\nvar regexp=new RegExp(\"^({?\\\\s*\"+commentKeyEscaped+\":.*)$\",\"gm\");var regexpCloseTags=new RegExp(\"(\\\\<span style\\\\=\\\"color\\\\:\\\\#)\",\"gm\");outstr=U.replaceAll(outstr,\"$\",\"¬£\");outstr=outstr.replace(regexp,\"$1\"+commentVal);outstr=outstr.replace(regexpCloseTags,\"</span>$1\");outstr=U.replaceAll(outstr,\"¬£\",\"$\");}if(shortcuts)outstr+=\"</div><br><br><h4>Shortcuts</h4><div class=\\\"output-row\\\" tabindex=\\\"984\\\">\"+format(shortcuts);// if (hidden) outstr +=\"</div><br><br><h4>Other less useful properties</h4><div class=\\\"output-row\\\" tabindex=\\\"984\\\">\" + format(hidden);\n// warning: unicode char but should not make a problem.\n// outstr = U.replaceAll( outstr, 'êÄπ,\\n', '],</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');\noutstr=U.replaceAll(outstr,'<span style=\"color:#000\">,\\n','</span><span style=\"color:#000\">,</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');outstr=U.replaceAll(outstr,'],\\n','],</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');outstr=U.replaceAll(outstr,'},\\n','},</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');}ashtml=true;}catch(e){console.error(e);throw e;outstr=\"[circular object]: \"+e.toString();ashtml=false;}console.log(\"console result (string)\",{outstr:outstr,jsxComments:jsxComments});var contextkeys;var objraw=((_this$state$output=this.state.output)===null||_this$state$output===void 0?void 0:_this$state$output.__raw)||(typeof this.state.output===\"object\"?this.state.output:\"[primitiveValue]\")||{};if(this.state.expression.trim()===\"\")contextkeys=[\"data\",\"node\",\"view\",\"component\"].join(\", \");else if(this.state.expression.trim()===\"this\")contextkeys=[\"Warning: \\\"this\\\" will refer to the Console component instead of a GraphElement component.\"].join(\", \");else if(typeof objraw===\"string\"){contextkeys=\"- length\\n- all string functions\";}else contextkeys=Array.isArray(objraw)?[\"array[index]\"].concat(_toConsumableArray(Object.keys(Array.prototype))).join(\",\\n\"):Object.getOwnPropertyNames(objraw).join(\",\\n\");// || []).join(\", \")\nvar injectCommentJSX=function injectCommentJSX(){try{for(var key in jsxComments){if(hiddenkeys.includes(key))continue;var commentNode=document.getElementById(\"console_output_comment_\"+key);Log.eDev(!commentNode,\"failed to find comment placeholder\",{key:key,v:jsxComments[key],jsxComments:jsxComments});if(commentNode)ReactDOM.render(jsxComments[key],commentNode);}}catch(e){console.error(\"failed to inject console output comment:\",e);}};setTimeout(injectCommentJSX,1);this.setNativeConsoleVariables();return/*#__PURE__*/_jsxs(\"div\",{className:'p-2 w-100 h-100',children:[/*#__PURE__*/_jsx(\"textarea\",{spellCheck:false,className:'p-0 input mb-2 w-100',onChange:this.change}),/*#__PURE__*/_jsxs(\"label\",{children:[\"On \",((data===null||data===void 0?void 0:data.name)||\"model-less node (\"+this.props.node.className+\")\")+\" - \"+((_this$props$node2=this.props.node)===null||_this$props$node2===void 0?void 0:_this$props$node2.className)]}),/*#__PURE__*/_jsx(\"hr\",{className:'mt-1 mb-1'}),ashtml&&/*#__PURE__*/_jsx(\"div\",{className:\"console-output-container\",dangerouslySetInnerHTML:ashtml?{__html:outstr}:undefined}),!ashtml&&/*#__PURE__*/_jsx(\"div\",{style:{whiteSpace:\"pre\"},children:outstr}),/*#__PURE__*/_jsx(\"label\",{className:\"mt-2\",children:\"Context keys:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{whiteSpace:\"pre\"},children:[\" \",contextkeys,\" \"]})]});}},{key:\"setNativeConsoleVariables\",value:function setNativeConsoleVariables(){var _context$data,_context$data2;// just fordebugging\nvar context=this._context;windoww.context=context;windoww.data=context.data;windoww.node=context.node;windoww.edge=context.edge;windoww.output=this.state.output;if((_context$data=context.data)===null||_context$data===void 0?void 0:_context$data.model)windoww.model=(_context$data2=context.data)===null||_context$data2===void 0?void 0:_context$data2.model;}}]);return ConsoleComponent;}(PureComponent);ConsoleComponent.cname=\"ConsoleComponent\";function mapStateToProps(state,ownProps){var _state$_lastSelected;var ret={};var nodeid=(_state$_lastSelected=state._lastSelected)===null||_state$_lastSelected===void 0?void 0:_state$_lastSelected.node;var node=nodeid?LGraphElement.fromPointer(nodeid):null;ret.node=node;ret.data=(node===null||node===void 0?void 0:node.model)?node.model:null;ret.view=(node===null||node===void 0?void 0:node.view)?node.view:null;return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var ConsoleConnected=connect(mapStateToProps,mapDispatchToProps)(ConsoleComponent);export var Console=function Console(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ConsoleConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};ConsoleComponent.cname=\"ConsoleComponent\";ConsoleConnected.cname=\"ConsoleConnected\";Console.cname=\"Console\";export default Console;","map":{"version":3,"names":["React","PureComponent","connect","LGraphElement","RuntimeAccessibleClass","U","windoww","Log","transientProperties","util","ReactDOM","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","Convert","require","ansiConvert","window","ansiconvert","ThisState","_classCallCheck","expression","output","hiddenkeys","fixproxy","_output","hideDKeys","arguments","length","undefined","addLKeys","proxy","__isProxy","__raw","ret","buildFunctionDocumentation","_objectSpread","_RuntimeAccessibleCla","_RuntimeAccessibleCla2","_output2","console","log","Lsingleton","get","className","logic","singleton","comments","shortcuts","key","indexOf","entryvalue","_i","_hiddenkeys","ConsoleComponent","_PureComponent","_inherits","_super","_createSuper","props","_this","call","lastNode","_context","state","change","bind","_assertThisInitialized","_createClass","value","evt","_this$props$node","target","trim","nid","node","id","tn","viewScores","mainView","evalContext","fromcomponent","evalInContextAndScope","e","error","toString","setState","render","_this$state$output","_this$props$node2","data","outstr","ashtml","hidden","jsxComments","_output$","_output3","Array","isArray","map","o","_reactInternals","_isMounted","format","val","replaceAll","toHtml","inspect","commentsPopup","commentKey","_commentVal","_commentVal2","_commentVal3","_commentVal3$type","commentVal","txt","type","cname","commentKeyEscaped","multiReplaceAll","regexp","RegExp","regexpCloseTags","replace","contextkeys","objraw","join","concat","_toConsumableArray","Object","keys","prototype","getOwnPropertyNames","injectCommentJSX","includes","commentNode","document","getElementById","eDev","v","setTimeout","setNativeConsoleVariables","children","spellCheck","onChange","name","dangerouslySetInnerHTML","__html","style","whiteSpace","_context$data","_context$data2","context","edge","model","mapStateToProps","ownProps","_state$_lastSelected","nodeid","_lastSelected","fromPointer","view","mapDispatchToProps","dispatch","ConsoleConnected","Console"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/console/Console.tsx"],"sourcesContent":["import \"./console.scss\";\r\nimport React, {Dispatch, PureComponent, ReactElement} from \"react\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {\r\n    DState,\r\n    DGraphElement,\r\n    Dictionary,\r\n    GObject,\r\n    LGraphElement,\r\n    LModelElement,\r\n    LPointerTargetable,\r\n    LViewElement,\r\n    Pointer,\r\n    RuntimeAccessibleClass,\r\n    U,\r\n    windoww, store, Log, DUser, transientProperties\r\n} from \"../../../joiner\";\r\nimport * as util from \"util\";\r\nimport {GraphElementComponent} from \"../../../graph/graphElement/graphElement\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Router from \"../../../router/Router\";\r\nimport {FakeStateProps} from \"../../../joiner/types\";\r\n\r\nvar Convert = require('ansi-to-html');\r\nvar ansiConvert = new Convert();\r\n(window as any).ansiconvert = ansiConvert;\r\n\r\nclass ThisState{\r\n    expression!: string;\r\n    output: any;\r\n}\r\n\r\n// trasformato in class component cos√¨ puoi usare il this nella console. e non usa accidentalmente window come contesto\r\n\r\nlet hiddenkeys = [\"jsxString\", \"pointedBy\", \"clonedCounter\", \"parent\", \"_subMaps\", \"inspect\", \"__random\"];\r\nfunction fixproxy(output: any/*but not array*/, hideDKeys: boolean = true, addLKeys: boolean = true):\r\n    { output: any, shortcuts?: GObject<'L singleton'>, comments?: Dictionary<string, string | {type:string, txt:string}>, hiddenkeys?: GObject} {\r\n\r\n    let proxy: LPointerTargetable | undefined;\r\n    if (output?.__isProxy) {\r\n        proxy = output;\r\n        output = output.__raw; //Object.fromEntries(Object.getOwnPropertyNames(p).map(k => [k, p[k]]));\r\n    } else proxy = undefined;\r\n\r\n    let ret: ReturnType<typeof fixproxy> = {output};\r\n    switch(typeof output) {\r\n        case \"function\": return {output: U.buildFunctionDocumentation(output)};\r\n        default: return {output};\r\n        case \"object\":\r\n            ret.output = output = {...output};\r\n            if ((addLKeys && proxy)) {\r\n                console.log(\"console output\", {output, proxy});\r\n                let Lsingleton: GObject<'L singleton'> = (RuntimeAccessibleClass.get(output?.className)?.logic?.singleton) || {};\r\n                let comments: Dictionary<string, string | {type:string, txt:string}> = {};\r\n                ret.shortcuts = {...Lsingleton};\r\n                ret.comments = comments;\r\n                for (let key in output) {\r\n                    if (Lsingleton[\"__info_of__\" + key]) comments[key] = Lsingleton[\"__info_of__\" + key];\r\n                }\r\n                for (let key in Lsingleton) {\r\n                    if ((key in output) || (key.indexOf(\"__info_of__\") === 0)) {\r\n                        delete ret.shortcuts[key];\r\n                        continue;\r\n                    } else { if (ret.shortcuts[key] === undefined) ret.shortcuts[key] = ''; }\r\n                    if (Lsingleton[\"__info_of__\" + key]) comments[key] = Lsingleton[\"__info_of__\" + key];\r\n                    if (comments[key]) continue; // if explicitly commented, i will not attempt to generate documentation.\r\n                    let entryvalue = Lsingleton[key];\r\n                    switch (typeof entryvalue) {\r\n                        default:\r\n                        case \"object\":\r\n                            ret.shortcuts[key] = entryvalue;\r\n                            break;\r\n                        case \"function\":\r\n                            ret.shortcuts[key] = U.buildFunctionDocumentation(entryvalue);\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            if (hiddenkeys) {\r\n                ret.hiddenkeys = {};\r\n                for (let key of hiddenkeys) {\r\n                    ret.hiddenkeys[key] = output[key];\r\n                    delete output[key];\r\n                    // delete output.shortcuts[key];\r\n                }\r\n            }\r\n            break;\r\n    }\r\n    return ret; }\r\n\r\nexport class ConsoleComponent extends PureComponent<AllProps, ThisState>{\r\n    public static cname: string = \"ConsoleComponent\";\r\n    lastNode?: Pointer<DGraphElement>;\r\n    constructor(props: AllProps) {\r\n        super(props);\r\n        this.state = {expression:'', output: null};\r\n        this.change = this.change.bind(this);\r\n        this.change(undefined);\r\n    }\r\n    private _context: GObject = {};\r\n    change(evt?: React.ChangeEvent<HTMLTextAreaElement>) {\r\n        if (!this) return; // component being destroyed and remade after code hot update\r\n        let expression: string | undefined = evt?.target.value.trim() || this.state.expression || '';\r\n        let output;\r\n        // let context = {...this.props, props: this.props}; // makeEvalContext(this.props as any, {} as any);\r\n\r\n        let nid = this.props.node?.id;\r\n        let tn = transientProperties.node[nid as string];\r\n        if (nid && tn) {\r\n            // let component = GraphElementComponent.map[this.props.node.id];\r\n            this._context = {...tn.viewScores[tn.mainView.id].evalContext};\r\n            this._context.fromcomponent = true;\r\n        }\r\n        else {\r\n            this._context = {...this.props, props: this.props};\r\n        }\r\n        try { output = U.evalInContextAndScope(expression || 'undefined', this._context, this._context); }\r\n        catch (e: any) {\r\n            console.error(\"console error\", e);\r\n            output = '<span style=\"color:red\">Invalid Syntax!<br></span>' + e.toString(); }\r\n        this.setState({expression, output});\r\n    }\r\n\r\n    render(){\r\n        const data = this.props.data;/*\r\n        const [expression, setExpression] = useStateIfMounted('data');\r\n        const [output, setOutput] = useStateIfMounted('');*/\r\n        if (!this.props.node) return(<></>);\r\n        if (this.lastNode !== this.props.node.id) this.change(); // force reevaluation if selected node changed\r\n        this.lastNode = this.props.node.id;\r\n\r\n            let outstr;\r\n            // try { outstr = U.circularStringify(this.state.output, (key, value)=> { return value.__isProxy ? value.name : value; }, \"\\t\", 1) }\r\n            // (window as any).inspect = util.inspect;\r\n            // (window as any).tmpp = this.state.output;\r\n            let ashtml: boolean\r\n            let output: any = this.state.output;\r\n            let shortcuts: GObject<'L singleton'> | undefined = undefined;\r\n            let comments: Dictionary<string, string | {type:string, txt:string}> | undefined = undefined;\r\n            let hidden: Dictionary<string, string> | undefined = undefined;\r\n            let jsxComments: Dictionary<string, JSX.Element[]> = {};\r\n            try {\r\n                if (Array.isArray(output)){\r\n                    comments = {\"separator\": '<span>Similar to <a href={\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join\"}>Array.join(separator)</a>' +\r\n                            ', but supports array of JSX nodes and JSX as separator argument.</span>'};\r\n                    shortcuts = {\"separator\": \"\"};\r\n                }\r\n                if (Array.isArray(output) && output[0]?.__isProxy) {\r\n                    output = output.map(o => fixproxy(o).output);\r\n                    console.log(\"console result (array):\", {output});\r\n                }\r\n                else {\r\n                    let ret = fixproxy(output);\r\n                    output = ret.output;\r\n                    comments = ret.comments;\r\n                    shortcuts = ret.shortcuts;\r\n                    hidden = ret.hiddenkeys;\r\n                    console.log(\"console result:\", {output, ret});\r\n                }\r\n                // todo: as i fix the displaying of a LViewElement without replacing it with __raw,\r\n                //  i will fix window, component and props displaying too i think they crash for props.data, props.view...\r\n                if (output?._reactInternals) {\r\n                    output = {\"React.Component\": {props:\"...navigate to expand...\", state:\"\", _isMounted:output._isMounted}}\r\n                }\r\n                let format = (val: GObject) => U.replaceAll(ansiConvert.toHtml(util.inspect(val, true, 2, true)), \"style=\\\"color:#FFF\\\"\", \"style=\\\"color:#000\\\"\");\r\n                outstr = '<h4>Result:</h4><div class=\"output-row\" tabindex=\"984\">' + format(output)+\"<span>\";\r\n                let commentsPopup = \"\";\r\n                if (shortcuts || comments){\r\n                    // if(!shortcuts) shortcuts = {};\r\n                    if (!comments) comments = {};\r\n                    for (let commentKey in comments){\r\n                        let commentVal: any = comments[commentKey];\r\n                        let txt = commentVal?.txt;\r\n                        if (txt && typeof txt !== \"string\") {\r\n                            // try to inject jsx\r\n                            jsxComments[commentKey] = txt;\r\n                            txt = \"<span id='console_output_comment_\" + commentKey + \"' />\";\r\n                            // fallback read text, that should go deep iteration, but 1 level deep should be enough.\r\n                            // let arr: any[] = (Array.isArray(txt?.props?.children) ? txt.props.children : (txt.props.children ? [txt.props.children] : []));\r\n                            // txt = arr.map(e => typeof e === \"string\" ? e : e?.props?.children + '' || '').join(\"\");\r\n                        }\r\n                        if (commentVal?.type) commentVal = \"\\t\\t<span style='color: #999'>\" + (commentVal?.type?.cname || commentVal.type)+\"</span>\"; // + \" ~ \" + txt;\r\n                        // warning: unicode char but should not make a problem. êÄπ\r\n                        commentVal += '<div class=\"output-comment my-tooltip\">' + txt + '</div></div><div class=\"output-row\" tabindex=\"984\">'\r\n\r\n                        let commentKeyEscaped = U.multiReplaceAll(commentKey, [\"$\", \"-\"], [\"\\\\$\", \"\\\\-\"]); // _ should be safe, .-,?^ not happening?\r\n                        let regexp = new RegExp(\"^({?\\\\s*\" +commentKeyEscaped+\":.*)$\", \"gm\");\r\n                        let regexpCloseTags = new RegExp(\"(\\\\<span style\\\\=\\\"color\\\\:\\\\#)\", \"gm\");\r\n                        outstr = U.replaceAll( outstr, \"$\", \"¬£\");\r\n                        outstr = outstr.replace(regexp, \"$1\" + commentVal);\r\n                        outstr = outstr.replace(regexpCloseTags,  \"</span>$1\");\r\n                        outstr = U.replaceAll(outstr, \"¬£\", \"$\");\r\n                    }\r\n                    if (shortcuts) outstr += \"</div><br><br><h4>Shortcuts</h4><div class=\\\"output-row\\\" tabindex=\\\"984\\\">\" + format(shortcuts);\r\n                    // if (hidden) outstr +=\"</div><br><br><h4>Other less useful properties</h4><div class=\\\"output-row\\\" tabindex=\\\"984\\\">\" + format(hidden);\r\n                    // warning: unicode char but should not make a problem.\r\n                    // outstr = U.replaceAll( outstr, 'êÄπ,\\n', '],</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');\r\n                    outstr = U.replaceAll( outstr, '<span style=\"color:#000\">,\\n',\r\n                        '</span><span style=\"color:#000\">,</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');\r\n                    outstr = U.replaceAll( outstr, '],\\n', '],</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');\r\n                    outstr = U.replaceAll( outstr, '},\\n', '},</span>\\n</div><div class=\"output-row\" tabindex=\"984\"><span style=\"color:#000\">');\r\n                }\r\n                ashtml = true; }\r\n            catch(e: any) {\r\n                console.error(e);\r\n                throw e;\r\n                outstr = \"[circular object]: \" + e.toString();\r\n                ashtml = false;\r\n            }\r\n            console.log(\"console result (string)\", {outstr, jsxComments});\r\n            let contextkeys;\r\n            let objraw = this.state.output?.__raw || (typeof this.state.output === \"object\" ? this.state.output : \"[primitiveValue]\") || {};\r\n            if (this.state.expression.trim() === \"\") contextkeys = [\"data\", \"node\", \"view\", \"component\"].join(\", \");\r\n            else if (this.state.expression.trim() === \"this\") contextkeys = [\"Warning: \\\"this\\\" will refer to the Console component instead of a GraphElement component.\"].join(\", \");\r\n            else if (typeof objraw === \"string\") { contextkeys = \"- length\\n- all string functions\"}\r\n            else contextkeys = Array.isArray(objraw) ? [\"array[index]\", ...Object.keys(Array.prototype)].join(\",\\n\") : Object.getOwnPropertyNames(objraw).join(\",\\n\");// || []).join(\", \")\r\n\r\n            let injectCommentJSX = () => {\r\n                try{ for (let key in jsxComments) {\r\n                    if (hiddenkeys.includes(key)) continue;\r\n                    let commentNode: HTMLElement | null = document.getElementById(\"console_output_comment_\"+key);\r\n                    Log.eDev(!commentNode, \"failed to find comment placeholder\", {key, v:jsxComments[key], jsxComments});\r\n                    if (commentNode) ReactDOM.render(jsxComments[key], commentNode);\r\n                } }\r\n                catch (e) { console.error(\"failed to inject console output comment:\", e)}\r\n            }\r\n            setTimeout(injectCommentJSX, 1)\r\n            this.setNativeConsoleVariables();\r\n\r\n            return(<div className={'p-2 w-100 h-100'}>\r\n                <textarea spellCheck={false} className={'p-0 input mb-2 w-100'} onChange={this.change} />\r\n                {/*<label>Query {(this.state.expression)}</label>*/}\r\n                <label>On {((data as GObject)?.name || \"model-less node (\" + this.props.node.className + \")\") + \" - \" + this.props.node?.className}</label>\r\n                <hr className={'mt-1 mb-1'} />\r\n                { ashtml && <div className={\"console-output-container\"} dangerouslySetInnerHTML={ashtml ? { __html: outstr as string} : undefined} /> }\r\n                { !ashtml && <div style={{whiteSpace:\"pre\"}}>{ outstr }</div>}\r\n                <label className={\"mt-2\"}>Context keys:</label>\r\n                {\r\n                    <div style={{whiteSpace:\"pre\"}}> {contextkeys} </div>\r\n                }\r\n            </div>)\r\n    }\r\n\r\n    private setNativeConsoleVariables(): void { // just fordebugging\r\n        let context = this._context;\r\n        windoww.context = context;\r\n        windoww.data = context.data;\r\n        windoww.node = context.node;\r\n        windoww.edge = context.edge;\r\n        windoww.output = this.state.output;\r\n        if (context.data?.model) windoww.model = context.data?.model;\r\n    }\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps { data: LModelElement|null, node: LGraphElement|null, view: LViewElement|null }\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const nodeid = state._lastSelected?.node;\r\n    const node: LGraphElement|null = (nodeid) ? LGraphElement.fromPointer(nodeid) : null;\r\n    ret.node = node;\r\n    ret.data = (node?.model) ? node.model : null;\r\n    ret.view = (node?.view) ? node.view : null;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ConsoleConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ConsoleComponent);\r\n\r\nexport const Console = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <ConsoleConnected {...{...props, children}} />;\r\n}\r\n\r\nConsoleComponent.cname = \"ConsoleComponent\";\r\nConsoleConnected.cname = \"ConsoleConnected\";\r\nConsole.cname = \"Console\";\r\nexport default Console;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}