{"ast":null,"code":"import Api from '../../data/api';\nimport Storage from '../../data/storage';\nimport { DUser, U } from '../../joiner';\nclass AuthApi {\n  static async login(email, password) {\n    Storage.reset();\n    Storage.write('offline', 'false');\n    return await Api.post(`${Api.persistance}/auth/login`, {\n      email,\n      password\n    });\n  }\n  static async register(name, surname, country, affiliation, newsLetter, nickname, email, password) {\n    Storage.reset();\n    Storage.write('offline', 'false');\n    return await Api.post(`${Api.persistance}/auth/register`, {\n      name,\n      surname,\n      country,\n      affiliation,\n      newsLetter,\n      nickname,\n      email,\n      password\n    });\n  }\n  static async logout() {\n    if (!U.isOffline()) await Api.delete(`${Api.persistance}/auth/logout`);\n    Storage.reset();\n    U.resetState();\n  }\n  static offline() {\n    Storage.reset();\n    Storage.write('offline', 'true');\n    const user = DUser.new('Offline', 'User', 'Unknown', 'Unknown', 'Unknown', false, 'Unknown', 'Unknown', `Pointer${Date.now()}_OfflineUser`);\n    Storage.write('user', user);\n  }\n}\nexport { AuthApi };","map":{"version":3,"names":["Api","Storage","DUser","U","AuthApi","login","email","password","reset","write","post","persistance","register","name","surname","country","affiliation","newsLetter","nickname","logout","isOffline","delete","resetState","offline","user","new","Date","now"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/api/persistance/auth.ts"],"sourcesContent":["import Api, {Response} from '../../data/api';\r\nimport Storage from '../../data/storage';\r\nimport {DUser, U} from '../../joiner';\r\n\r\nclass AuthApi {\r\n    static async login(email: string, password: string): Promise<Response> {\r\n        Storage.reset(); Storage.write('offline', 'false');\r\n        return await Api.post(`${Api.persistance}/auth/login`, {email, password});\r\n    }\r\n    static async register(name: string, surname: string, country: string, affiliation: string, newsLetter: boolean, nickname: string, email: string, password: string): Promise<Response> {\r\n        Storage.reset(); Storage.write('offline', 'false');\r\n        return await Api.post(`${Api.persistance}/auth/register`, {name, surname, country, affiliation, newsLetter, nickname, email, password});\r\n    }\r\n    static async logout(): Promise<void> {\r\n        if(!U.isOffline()) await Api.delete(`${Api.persistance}/auth/logout`);\r\n        Storage.reset();\r\n        U.resetState();\r\n    }\r\n    static offline(): void {\r\n        Storage.reset(); Storage.write('offline', 'true');\r\n        const user = DUser.new('Offline', 'User', 'Unknown', 'Unknown', 'Unknown', false, 'Unknown', 'Unknown', `Pointer${Date.now()}_OfflineUser`);\r\n        Storage.write('user', user);\r\n    }\r\n}\r\n\r\nexport {AuthApi};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAkB,gBAAgB;AAC5C,OAAOC,OAAO,MAAM,oBAAoB;AACxC,SAAQC,KAAK,EAAEC,CAAC,QAAO,cAAc;AAErC,MAAMC,OAAO,CAAC;EACV,aAAaC,KAAKA,CAACC,KAAa,EAAEC,QAAgB,EAAqB;IACnEN,OAAO,CAACO,KAAK,CAAC,CAAC;IAAEP,OAAO,CAACQ,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC;IAClD,OAAO,MAAMT,GAAG,CAACU,IAAI,CAAC,GAAGV,GAAG,CAACW,WAAW,aAAa,EAAE;MAACL,KAAK;MAAEC;IAAQ,CAAC,CAAC;EAC7E;EACA,aAAaK,QAAQA,CAACC,IAAY,EAAEC,OAAe,EAAEC,OAAe,EAAEC,WAAmB,EAAEC,UAAmB,EAAEC,QAAgB,EAAEZ,KAAa,EAAEC,QAAgB,EAAqB;IAClLN,OAAO,CAACO,KAAK,CAAC,CAAC;IAAEP,OAAO,CAACQ,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC;IAClD,OAAO,MAAMT,GAAG,CAACU,IAAI,CAAC,GAAGV,GAAG,CAACW,WAAW,gBAAgB,EAAE;MAACE,IAAI;MAAEC,OAAO;MAAEC,OAAO;MAAEC,WAAW;MAAEC,UAAU;MAAEC,QAAQ;MAAEZ,KAAK;MAAEC;IAAQ,CAAC,CAAC;EAC3I;EACA,aAAaY,MAAMA,CAAA,EAAkB;IACjC,IAAG,CAAChB,CAAC,CAACiB,SAAS,CAAC,CAAC,EAAE,MAAMpB,GAAG,CAACqB,MAAM,CAAC,GAAGrB,GAAG,CAACW,WAAW,cAAc,CAAC;IACrEV,OAAO,CAACO,KAAK,CAAC,CAAC;IACfL,CAAC,CAACmB,UAAU,CAAC,CAAC;EAClB;EACA,OAAOC,OAAOA,CAAA,EAAS;IACnBtB,OAAO,CAACO,KAAK,CAAC,CAAC;IAAEP,OAAO,CAACQ,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC;IACjD,MAAMe,IAAI,GAAGtB,KAAK,CAACuB,GAAG,CAAC,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,UAAUC,IAAI,CAACC,GAAG,CAAC,CAAC,cAAc,CAAC;IAC3I1B,OAAO,CAACQ,KAAK,CAAC,MAAM,EAAEe,IAAI,CAAC;EAC/B;AACJ;AAEA,SAAQpB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}