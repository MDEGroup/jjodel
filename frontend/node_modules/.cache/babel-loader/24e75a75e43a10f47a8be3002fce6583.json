{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\graph\\\\damedges\\\\damedge.tsx\",\n  _this = this;\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { DEdge, EdgeBendingMode, GraphElementComponent, GraphElementDispatchProps, GraphElementStatee, LPointerTargetable, RuntimeAccessibleClass, U, EdgeStateProps, DModelElement } from \"../../joiner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet groupingsize = {};\ngroupingsize[EdgeBendingMode.Line] = 1;\ngroupingsize[EdgeBendingMode.Bezier_quadratic] = 2;\ngroupingsize[EdgeBendingMode.Bezier_cubic] = 3;\n// groupingsize[EdgeBendingMode.Bezier_quadratic_mirrored] = 1;\n// groupingsize[EdgeBendingMode.Bezier_cubic_mirrored] = 2;\ngroupingsize[EdgeBendingMode.Elliptical_arc] = 2; // (1_coord), (rotation), (sweep    arc), (1_coord)\n\nconst superclassGraphElementComponent = RuntimeAccessibleClass.classes.GraphElementComponent;\nconst superclassGraphElementComponentuntyped = RuntimeAccessibleClass.classes.GraphElementComponent;\nclass ThisStatee extends GraphElementStatee {}\nexport class EdgeComponent extends superclassGraphElementComponent {\n  constructor(props, context) {\n    super(props, context);\n  }\n  /*\r\n      path(): string {\r\n          let coords = this.pathCoords();\r\n          let svgletter: EdgeBendingMode = (this.props.view.bendingMode || \"L\");\r\n          let strings: string[] = coords.map(gp => gp.x+\" \" + gp.y);\r\n          return \"M\"+strings.join(\" \" + svgletter); }\r\n  \r\n      pathCoords(): GraphPoint[] {\r\n          const ret = this.props;\r\n          let svgletter: EdgeBendingMode = (ret).view.bendingMode;\r\n          if (!ret.node) return []; // \"node missing\"\r\n          let coords: GraphPoint[] = (ret.node.midnodes as { x:number, y:number }[] as GraphPoint[]) || [];\r\n          let grouping = groupingsize[svgletter];\r\n          console.log(\"edgeee\", {coords, svgletter, groupingsize, midnodes:ret.node.midnodes, mnraw: ret.node.midnodes.map(mn=>mn.__raw), ret});\r\n          let scoord: GraphPoint = ret.node.startPoint || new GraphPoint(10, 10);\r\n          let ecoord: GraphPoint = ret.node.endPoint || new GraphPoint(100, 100);\r\n          return [scoord, ...coords, ecoord]; }\r\n  \r\n      pathSegments(): GraphPoint[][]{\r\n          return U.pairArrayElements(this.pathCoords(), true); }\r\n  */\n  render() {\n    if (!this.props.node) return \"loading\";\n    // set classes\n    let nodeType = \"Edge\";\n    let classesoverride = [nodeType];\n    // set classes end\n    let styleoverride = {};\n    return super.render(nodeType, styleoverride, classesoverride);\n  }\n}\nEdgeComponent.cname = \"EdgeComponent\";\nclass DispatchProps extends GraphElementDispatchProps {}\nfunction mapStateToProps(state, ownProps) {\n  let ret = new EdgeStateProps();\n  if (!ownProps.data) {\n    let lstart = LPointerTargetable.from(ownProps.start);\n    if (RuntimeAccessibleClass.extends(lstart.className, DModelElement.cname)) ret.data = lstart;\n  }\n  ret = GraphElementComponent.mapStateToProps(state, ownProps, DEdge, ret);\n  // superret.lastSelected = state._lastSelected ? LPointerTargetable.from(state._lastSelected.modelElement) : null;\n  ret.isEdgePending = {\n    user: LPointerTargetable.from(state.isEdgePending.user),\n    source: LPointerTargetable.from(state.isEdgePending.source)\n  };\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const superret = GraphElementComponent.mapDispatchToProps(dispatch);\n  const ret = new GraphElementDispatchProps();\n  U.objectMergeInPlace(superret, ret);\n  U.removeEmptyObjectKeys(superret);\n  return superret;\n}\nexport const EdgeConnected = connect(mapStateToProps, mapDispatchToProps)(EdgeComponent);\nexport const Edge = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(EdgeConnected, {\n    ...props,\n    children,\n    isGraph: false,\n    isVertex: false,\n    isEdge: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 12\n  }, _this);\n};\n_c = Edge;\nEdgeComponent.cname = \"EdgeComponent\";\nEdgeConnected.cname = \"EdgeConnected\";\nEdge.cname = \"Edge\";\nvar _c;\n$RefreshReg$(_c, \"Edge\");","map":{"version":3,"names":["React","connect","DEdge","EdgeBendingMode","GraphElementComponent","GraphElementDispatchProps","GraphElementStatee","LPointerTargetable","RuntimeAccessibleClass","U","EdgeStateProps","DModelElement","jsxDEV","_jsxDEV","groupingsize","Line","Bezier_quadratic","Bezier_cubic","Elliptical_arc","superclassGraphElementComponent","classes","superclassGraphElementComponentuntyped","ThisStatee","EdgeComponent","constructor","props","context","render","node","nodeType","classesoverride","styleoverride","cname","DispatchProps","mapStateToProps","state","ownProps","ret","data","lstart","from","start","extends","className","isEdgePending","user","source","mapDispatchToProps","dispatch","superret","objectMergeInPlace","removeEmptyObjectKeys","EdgeConnected","Edge","children","arguments","length","undefined","isGraph","isVertex","isEdge","fileName","_jsxFileName","lineNumber","columnNumber","_this","_c","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/graph/damedges/damedge.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    DEdge,\r\n    DGraph,\r\n    DGraphElement,\r\n    DGraphVertex, Dictionary,\r\n    DVoidVertex, EdgeBendingMode, GObject,\r\n    GraphElementComponent,\r\n    GraphElementDispatchProps,\r\n    GraphElementOwnProps,\r\n    GraphElementReduxStateProps,\r\n    GraphElementStatee, GraphPoint,\r\n    GraphSize,\r\n    DState,\r\n    LClass, LEdge, LGraphElement,\r\n    LModelElement,\r\n    LPointerTargetable,\r\n    LUser,\r\n    LVoidVertex, Overlap,\r\n    RuntimeAccessibleClass,\r\n    U,\r\n    EdgeOwnProps, EdgeStateProps,\r\n    LViewPoint, DModelElement, SetFieldAction\r\n} from \"../../joiner\";\r\n\r\nlet groupingsize: Dictionary<EdgeBendingMode, number> = {} as any;\r\ngroupingsize[EdgeBendingMode.Line] = 1;\r\ngroupingsize[EdgeBendingMode.Bezier_quadratic] = 2;\r\ngroupingsize[EdgeBendingMode.Bezier_cubic] = 3;\r\n// groupingsize[EdgeBendingMode.Bezier_quadratic_mirrored] = 1;\r\n// groupingsize[EdgeBendingMode.Bezier_cubic_mirrored] = 2;\r\ngroupingsize[EdgeBendingMode.Elliptical_arc] = 2; // (1_coord), (rotation), (sweep    arc), (1_coord)\r\n\r\nconst superclassGraphElementComponent: typeof GraphElementComponent = RuntimeAccessibleClass.classes.GraphElementComponent as any as typeof GraphElementComponent;\r\nconst superclassGraphElementComponentuntyped: any = RuntimeAccessibleClass.classes.GraphElementComponent as any;\r\nclass ThisStatee extends GraphElementStatee {}\r\n\r\nexport class EdgeComponent<AllProps extends AllPropss = AllPropss, ThisState extends ThisStatee = ThisStatee>\r\n    extends superclassGraphElementComponent<AllProps, ThisState> {\r\n    public static cname: string = \"EdgeComponent\";\r\n\r\n    constructor(props: AllProps, context: any) {\r\n        super(props, context);\r\n    }\r\n/*\r\n    path(): string {\r\n        let coords = this.pathCoords();\r\n        let svgletter: EdgeBendingMode = (this.props.view.bendingMode || \"L\");\r\n        let strings: string[] = coords.map(gp => gp.x+\" \" + gp.y);\r\n        return \"M\"+strings.join(\" \" + svgletter); }\r\n\r\n    pathCoords(): GraphPoint[] {\r\n        const ret = this.props;\r\n        let svgletter: EdgeBendingMode = (ret).view.bendingMode;\r\n        if (!ret.node) return []; // \"node missing\"\r\n        let coords: GraphPoint[] = (ret.node.midnodes as { x:number, y:number }[] as GraphPoint[]) || [];\r\n        let grouping = groupingsize[svgletter];\r\n        console.log(\"edgeee\", {coords, svgletter, groupingsize, midnodes:ret.node.midnodes, mnraw: ret.node.midnodes.map(mn=>mn.__raw), ret});\r\n        let scoord: GraphPoint = ret.node.startPoint || new GraphPoint(10, 10);\r\n        let ecoord: GraphPoint = ret.node.endPoint || new GraphPoint(100, 100);\r\n        return [scoord, ...coords, ecoord]; }\r\n\r\n    pathSegments(): GraphPoint[][]{\r\n        return U.pairArrayElements(this.pathCoords(), true); }\r\n*/\r\n    render(): ReactNode {\r\n        if (!this.props.node) return \"loading\";\r\n        // set classes\r\n        let nodeType = \"Edge\";\r\n        let classesoverride = [nodeType];\r\n        // set classes end\r\n        let styleoverride: React.CSSProperties = {}\r\n        return super.render(nodeType, styleoverride, classesoverride);\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nclass DispatchProps extends GraphElementDispatchProps {\r\n}\r\n\r\ntype AllPropss = Overlap<Overlap<EdgeOwnProps, EdgeStateProps>, DispatchProps>;\r\n\r\nfunction mapStateToProps(state: DState, ownProps: EdgeOwnProps): EdgeStateProps {\r\n    let ret: EdgeStateProps = new EdgeStateProps();\r\n    if (!ownProps.data) {\r\n        let lstart = LPointerTargetable.from(ownProps.start);\r\n        if (RuntimeAccessibleClass.extends(lstart.className, DModelElement.cname)) ret.data = lstart as any;\r\n    }\r\n    ret = GraphElementComponent.mapStateToProps(state, ownProps, DEdge, ret) as EdgeStateProps;\r\n    // superret.lastSelected = state._lastSelected ? LPointerTargetable.from(state._lastSelected.modelElement) : null;\r\n    ret.isEdgePending = {\r\n        user: LPointerTargetable.from(state.isEdgePending.user),\r\n        source: LPointerTargetable.from(state.isEdgePending.source)\r\n    };\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const superret: GraphElementDispatchProps = GraphElementComponent.mapDispatchToProps(dispatch);\r\n    const ret: GraphElementDispatchProps = new GraphElementDispatchProps();\r\n    U.objectMergeInPlace(superret, ret);\r\n    U.removeEmptyObjectKeys(superret);\r\n    return superret;\r\n}\r\n\r\n\r\nexport const EdgeConnected = connect<EdgeStateProps, DispatchProps, EdgeOwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(EdgeComponent as any);\r\n\r\nexport const Edge = (props: EdgeOwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <EdgeConnected {...{...props, children}} isGraph={false} isVertex={false} isEdge={true} />;\r\n}\r\n\r\nEdgeComponent.cname = \"EdgeComponent\";\r\nEdgeConnected.cname = \"EdgeConnected\";\r\nEdge.cname = \"Edge\";\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}