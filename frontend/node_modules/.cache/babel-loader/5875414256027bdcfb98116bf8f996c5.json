{"ast":null,"code":"import React from\"react\";import{connect}from\"react-redux\";import{Try}from\"../../../joiner\";import{CreateElementAction,DGraph,LGraph,LModel}from\"../../../joiner\";import{DefaultNode}from\"../../../joiner/components\";import ToolBar from\"../../toolbar/ToolBar\";import ContextMenu from\"../../contextMenu/ContextMenu\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ModelTabComponent(props){const model=props.model;const graph=props.graph;if(!model)return/*#__PURE__*/_jsx(_Fragment,{children:\"closed tab\"});if(!graph){CreateElementAction.new(DGraph.new(0,model.id));return/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",display:\"flex\"},children:/*#__PURE__*/_jsx(\"span\",{style:{margin:\"auto\"},children:\"Building the Graph...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:'w-100 h-100',children:[/*#__PURE__*/_jsx(ContextMenu,{}),/*#__PURE__*/_jsxs(\"div\",{className:'d-flex h-100',children:[/*#__PURE__*/_jsx(ToolBar,{model:model.id,isMetamodel:model.isMetamodel,metamodelId:props.metamodelid}),/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(\"div\",{className:\"GraphContainer h-100 w-100\",style:{position:\"relative\"},children:graph&&/*#__PURE__*/_jsx(DefaultNode,{data:model,nodeid:graph.id,graphid:graph.id})})})]})]});}function mapStateToProps(state,ownProps){const ret={};ret.model=LModel.fromPointer(ownProps.modelid);const graphs=DGraph.fromPointer(state.graphs);const pointers=graphs.filter(graph=>{return graph.model===ownProps.modelid;});if(pointers.length>0)ret.graph=LGraph.fromPointer(pointers[0].id);return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const ModelTabConnected=connect(mapStateToProps,mapDispatchToProps)(ModelTabComponent);export const ModelTab=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ModelTabConnected,{...props,children});};export default ModelTab;","map":{"version":3,"names":["React","connect","Try","CreateElementAction","DGraph","LGraph","LModel","DefaultNode","ToolBar","ContextMenu","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","ModelTabComponent","props","model","graph","children","new","id","style","width","height","display","margin","className","isMetamodel","metamodelId","metamodelid","position","data","nodeid","graphid","mapStateToProps","state","ownProps","ret","fromPointer","modelid","graphs","pointers","filter","length","mapDispatchToProps","dispatch","ModelTabConnected","ModelTab","arguments","undefined"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/abstract/tabs/ModelTab.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {DModel, Pointer, Try} from \"../../../joiner\";\r\nimport {CreateElementAction, DGraph, DModelElement, DState, LGraph, LModel, LModelElement} from \"../../../joiner\";\r\nimport {DefaultNode} from \"../../../joiner/components\";\r\nimport ToolBar from \"../../toolbar/ToolBar\";\r\nimport ContextMenu from \"../../contextMenu/ContextMenu\";\r\nimport { MetricsPanel } from \"../../metrics/Metrics\";\r\n\r\n\r\nfunction ModelTabComponent(props: AllProps) {\r\n    const model = props.model;\r\n    const graph = props.graph;\r\n\r\n    if (!model) return(<>closed tab</>);\r\n    if (!graph) {\r\n        CreateElementAction.new(DGraph.new(0, model.id));\r\n        return(<div style={{width: \"100%\", height: \"100%\", display: \"flex\"}}>\r\n            <span style={{margin: \"auto\"}}>Building the Graph...</span>\r\n        </div>);\r\n    }\r\n\r\n    return(<div className={'w-100 h-100'}>\r\n        <ContextMenu />\r\n        <div className={'d-flex h-100'}>\r\n            <ToolBar model={model.id} isMetamodel={model.isMetamodel} metamodelId={props.metamodelid} />\r\n            <Try>\r\n                <div className={\"GraphContainer h-100 w-100\"} style={{position:\"relative\"}}>\r\n                    {graph && <DefaultNode data={model} nodeid={graph.id} graphid={graph.id} />}\r\n                </div>\r\n            </Try>\r\n        </div>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n    modelid: Pointer<DModel, 1, 1, LModel>,\r\n    metamodelid?: Pointer<DModelElement, 1, 1, LModelElement>,\r\n}\r\ninterface StateProps { model: LModel, graph?: LGraph }\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    ret.model = LModel.fromPointer(ownProps.modelid);\r\n    const graphs: DGraph[] = DGraph.fromPointer(state.graphs);\r\n    const pointers = graphs.filter((graph) => { return graph.model === ownProps.modelid });\r\n    if(pointers.length > 0) ret.graph = LGraph.fromPointer(pointers[0].id);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ModelTabConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ModelTabComponent);\r\n\r\nexport const ModelTab = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <ModelTabConnected {...{...props, children}} />;\r\n}\r\nexport default ModelTab;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAgC,OAAO,CACnD,OAAQC,OAAO,KAAO,aAAa,CACnC,OAAyBC,GAAG,KAAO,iBAAiB,CACpD,OAAQC,mBAAmB,CAAEC,MAAM,CAAyBC,MAAM,CAAEC,MAAM,KAAsB,iBAAiB,CACjH,OAAQC,WAAW,KAAO,4BAA4B,CACtD,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CAAC,OAAAC,QAAA,IAAAC,SAAA,gCAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAIxD,QAAS,CAAAC,iBAAiBA,CAACC,KAAe,CAAE,CACxC,KAAM,CAAAC,KAAK,CAAGD,KAAK,CAACC,KAAK,CACzB,KAAM,CAAAC,KAAK,CAAGF,KAAK,CAACE,KAAK,CAEzB,GAAI,CAACD,KAAK,CAAE,mBAAOL,IAAA,CAAAF,SAAA,EAAAS,QAAA,CAAE,YAAU,CAAE,CAAC,CAClC,GAAI,CAACD,KAAK,CAAE,CACRhB,mBAAmB,CAACkB,GAAG,CAACjB,MAAM,CAACiB,GAAG,CAAC,CAAC,CAAEH,KAAK,CAACI,EAAE,CAAC,CAAC,CAChD,mBAAOT,IAAA,QAAKU,KAAK,CAAE,CAACC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEC,OAAO,CAAE,MAAM,CAAE,CAAAN,QAAA,cAChEP,IAAA,SAAMU,KAAK,CAAE,CAACI,MAAM,CAAE,MAAM,CAAE,CAAAP,QAAA,CAAC,uBAAqB,CAAM,CAAC,CAC1D,CAAC,CACV,CAEA,mBAAOL,KAAA,QAAKa,SAAS,CAAE,aAAc,CAAAR,QAAA,eACjCP,IAAA,CAACJ,WAAW,GAAE,CAAC,cACfM,KAAA,QAAKa,SAAS,CAAE,cAAe,CAAAR,QAAA,eAC3BP,IAAA,CAACL,OAAO,EAACU,KAAK,CAAEA,KAAK,CAACI,EAAG,CAACO,WAAW,CAAEX,KAAK,CAACW,WAAY,CAACC,WAAW,CAAEb,KAAK,CAACc,WAAY,CAAE,CAAC,cAC5FlB,IAAA,CAACX,GAAG,EAAAkB,QAAA,cACAP,IAAA,QAAKe,SAAS,CAAE,4BAA6B,CAACL,KAAK,CAAE,CAACS,QAAQ,CAAC,UAAU,CAAE,CAAAZ,QAAA,CACtED,KAAK,eAAIN,IAAA,CAACN,WAAW,EAAC0B,IAAI,CAAEf,KAAM,CAACgB,MAAM,CAAEf,KAAK,CAACG,EAAG,CAACa,OAAO,CAAEhB,KAAK,CAACG,EAAG,CAAE,CAAC,CAC1E,CAAC,CACL,CAAC,EACL,CAAC,EACL,CAAC,CACV,CAUA,QAAS,CAAAc,eAAeA,CAACC,KAAa,CAAEC,QAAkB,CAAc,CACpE,KAAM,CAAAC,GAAe,CAAG,CAAC,CAAQ,CACjCA,GAAG,CAACrB,KAAK,CAAGZ,MAAM,CAACkC,WAAW,CAACF,QAAQ,CAACG,OAAO,CAAC,CAChD,KAAM,CAAAC,MAAgB,CAAGtC,MAAM,CAACoC,WAAW,CAACH,KAAK,CAACK,MAAM,CAAC,CACzD,KAAM,CAAAC,QAAQ,CAAGD,MAAM,CAACE,MAAM,CAAEzB,KAAK,EAAK,CAAE,MAAO,CAAAA,KAAK,CAACD,KAAK,GAAKoB,QAAQ,CAACG,OAAO,CAAC,CAAC,CAAC,CACtF,GAAGE,QAAQ,CAACE,MAAM,CAAG,CAAC,CAAEN,GAAG,CAACpB,KAAK,CAAGd,MAAM,CAACmC,WAAW,CAACG,QAAQ,CAAC,CAAC,CAAC,CAACrB,EAAE,CAAC,CACtE,MAAO,CAAAiB,GAAG,CACd,CAEA,QAAS,CAAAO,kBAAkBA,CAACC,QAAuB,CAAiB,CAChE,KAAM,CAAAR,GAAkB,CAAG,CAAC,CAAC,CAC7B,MAAO,CAAAA,GAAG,CACd,CAGA,MAAO,MAAM,CAAAS,iBAAiB,CAAG/C,OAAO,CACpCmC,eAAe,CACfU,kBACJ,CAAC,CAAC9B,iBAAiB,CAAC,CAEpB,MAAO,MAAM,CAAAiC,QAAQ,CAAG,QAAAA,CAAChC,KAAe,CAAgE,IAA9D,CAAAG,QAAsC,CAAA8B,SAAA,CAAAL,MAAA,IAAAK,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,EAAE,CACjF,mBAAOrC,IAAA,CAACmC,iBAAiB,EAAM,GAAG/B,KAAK,CAAEG,QAAQ,CAAI,CAAC,CAC1D,CAAC,CACD,cAAe,CAAA6B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}