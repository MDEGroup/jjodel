{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\forEndUser\\\\Input.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Defaults, Keystrokes, LPointerTargetable, U } from '../../joiner';\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport './inputselect.scss';\nimport { Tooltip } from './Tooltip';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction InputComponent(props) {\n  _s();\n  var _data;\n  const data = props.data;\n  const getter = props.getter;\n  const setter = props.setter;\n  const field = props.field;\n  const oldValue = !data ? undefined : getter ? getter(data) : data[field]; // !== undefined); ? data[field] : 'undefined'\n  const [value, setValue] = useStateIfMounted(oldValue);\n  const [isTouched, setIsTouched] = useStateIfMounted(false);\n\n  // I check if the value that I have in my local state is being edited by other <Input />\n  if (value !== oldValue && !isTouched) {\n    setValue(oldValue);\n    setIsTouched(false);\n  }\n  if (!(data || getter && setter)) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"Either props.data or both getter & setter are required.\"\n  }, void 0, false);\n  const readOnly = props.readonly !== undefined ? props.readonly : props.debugmodee !== 'true' && Defaults.check(data === null || data === void 0 ? void 0 : data.id);\n  const type = props.type ? props.type : 'text';\n  const label = props.jsxLabel || props.label;\n  let tooltip = (props.tooltip === true ? data === null || data === void 0 ? void 0 : (_data = data['__info_of__' + field]) === null || _data === void 0 ? void 0 : _data.txt : props.tooltip) || '';\n  let css = ''; //'my-auto input ';\n  //css += (jsxLabel) ? 'ms-1' : (label) ? 'ms-auto' : '';\n  css += props.hidden ? ' hidden-input' : '';\n  let autosize = props.autosize === undefined ? false : props.autosize; // props.type==='text'\n  css += autosize ? ' autosize-input' : '';\n  const isBoolean = ['checkbox', 'radio'].includes(type);\n  const onChange = evt => {\n    if (isBoolean) {\n      if (readOnly) return;\n      const target = evt.target.checked;\n      if (setter) setter(target);else data[field] = target;\n    } else {\n      setValue(evt.target.value);\n      setIsTouched(true); // I'm editing the element in my local state.\n    }\n  };\n\n  const onKeyDown = evt => {\n    if (evt.key === Keystrokes.enter) blur(evt);\n    if (evt.key === Keystrokes.escape) {\n      const oldValue = getter ? getter(data) : data[field];\n      evt.target.value = oldValue;\n      setValue(oldValue);\n      setIsTouched(false);\n      evt.target.blur();\n      // to optimize: probably can remove a large part of this function because this should trigger blur event as well. or move \"change\" event contents here\n      // optimize 2: memoize the whole component, so it won't update unless the displayed value changed. this would also fix cursor going to input end when pressing enter.\n    }\n  };\n\n  const onBlur = evt => {\n    if (readOnly || isBoolean) return;\n    const newValue = evt.target.value;\n    const oldValue = getter ? getter(data) : data[field];\n    if (newValue !== oldValue) {\n      if (setter) setter(newValue);else data[field] = newValue;\n    }\n    // I terminate my editing, so I communicate it to other <Input /> that render the same field.\n    setIsTouched(false);\n  };\n  const otherprops = {\n    ...props\n  };\n  delete otherprops.data;\n  delete otherprops.field;\n  delete otherprops.getter;\n  delete otherprops.setter;\n  delete otherprops.label;\n  delete otherprops.jsxLabel;\n  delete otherprops.tooltip;\n  delete otherprops.hidden;\n  delete otherprops.inputStyle;\n  delete otherprops.children;\n  delete otherprops.autosize; // because react complains is bool in dom attribute or unknown attrib name\n\n  let checked = undefined;\n  if (isBoolean) checked = typeof value === \"boolean\" ? value : typeof value === \"string\" ? U.fromBoolString(value) : !!value;\n  let cursor;\n  if (tooltip) cursor = 'help';else if (readOnly) cursor = 'not-allowed';else if (isBoolean) cursor = 'pointer';else cursor = 'auto';\n  let inputStyle = props.inputStyle || {};\n  if (!inputStyle.cursor && cursor === 'not-allowed') {\n    inputStyle.cursor = cursor;\n  }\n  let rootStyle = props.style || {}; // {display: (jsxLabel || label) ? 'flex' : 'block', cursor, ...((props as any).style || {})};\n  if (readOnly && !(\"color\" in rootStyle)) rootStyle.color = \"gray\";\n  let iclassName = [props.inputClassName, css].join(' ');\n  let inputProps = {\n    spellCheck: props.spellCkeck || false,\n    readOnly,\n    type,\n    value,\n    checked,\n    onChange,\n    onBlur,\n    onKeyDown\n  }; // key:`${field}.${data?.id}`\n  let input;\n  let rootprops = {\n    ...otherprops\n  };\n  if (tooltip) {\n    rootprops.onMouseEnter = () => Tooltip.show(tooltip, true, this.ref);\n    rootprops.onMouseLeave = () => Tooltip.hide();\n  }\n  let rootkeys = new Set(...Object.keys(rootprops));\n  for (let k of rootkeys) {\n    if (!(k[0] === 'o' && k[1] === 'n' && k[2] && k[2].toUpperCase() === k[2])) continue;\n    if (inputProps[k]) inputProps[k] = function () {\n      for (var _len = arguments.length, a = new Array(_len), _key = 0; _key < _len; _key++) {\n        a[_key] = arguments[_key];\n      }\n      inputProps[k](arguments);\n      rootprops[k](arguments);\n    };else inputProps[k] = rootprops[k];\n    delete rootProps[k];\n  }\n  if (autosize) rootprops.className = 'autosize-input-container';\n  if (!label && !autosize) {\n    iclassName = props.className + ' ' + iclassName;\n    let style = {};\n    U.objectMergeInPlace(style, rootStyle, inputStyle);\n    return /*#__PURE__*/_jsxDEV(\"input\", {\n      ...rootprops,\n      ...inputProps,\n      className: iclassName,\n      style: style\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 16\n    }, this);\n  } else input = /*#__PURE__*/_jsxDEV(\"input\", {\n    ...inputProps,\n    className: iclassName,\n    style: inputStyle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 19\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"label\", {\n    ...rootprops\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 12\n  }, this);\n  return input;\n  /*\r\n  return(<label className={'p-1'} {...otherprops}\r\n                style={rootStyle}>\r\n        {label && <span className={'my-auto'} onMouseEnter={e => setShowTooltip(true)}\r\n                      onMouseLeave={e => setShowTooltip(false)}>{label}\r\n      </span>}\r\n        {jsxLabel && <span onMouseEnter={e => setShowTooltip(true)}\r\n                         onMouseLeave={e => setShowTooltip(false)} style={{width: '100%'}}>{jsxLabel}\r\n      </span>}\r\n        {(tooltip && showTooltip) && <div className={'my-tooltip'}>\r\n          <b className={'text-center text-capitalize'}>{field}</b>\r\n          <br />\r\n          <label>{tooltip}</label>\r\n      </div>}\r\n        {autosize ? <div className={(autosize ? 'autosize-input-container' : '') + (props.asLabel ? ' labelstyle' : '')}\r\n                       data-value={value}>{input}\r\n      </div> : input}\r\n  </label>);\r\n  */\n}\n_s(InputComponent, \"Ndke0vrq78Y65Cnw47FkFdiTygg=\", false, function () {\n  return [useStateIfMounted, useStateIfMounted];\n});\n_c = InputComponent;\nInputComponent.cname = 'InputComponent';\nfunction mapStateToProps(state, ownProps) {\n  var _ownProps$data;\n  const ret = {};\n  const pointer = typeof ownProps.data === 'string' ? ownProps.data : (_ownProps$data = ownProps.data) === null || _ownProps$data === void 0 ? void 0 : _ownProps$data.id;\n  ret.debugmodee = state.debug ? 'true' : 'false';\n  if (pointer) ret.data = LPointerTargetable.fromPointer(pointer);\n  /*\r\n  const selected = state.selected;\r\n  ret.selected = {};\r\n  for(let user of Object.keys(selected)) {\r\n      const pointer = selected[user];\r\n      if(pointer) ret.selected[user] = LModelElement.fromPointer(pointer);\r\n      else ret.selected[user] = null;\r\n  }\r\n    */\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const InputConnected = connect(mapStateToProps, mapDispatchToProps)(InputComponent);\nexport function Input(props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(InputConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 12\n  }, this);\n}\n_c2 = Input;\nexport const Edit = Input;\nInputComponent.cname = 'InputComponent';\nInputConnected.cname = 'InputConnected';\nInput.cname = 'Input';\nEdit.cname = 'Edit';\nvar _c, _c2;\n$RefreshReg$(_c, \"InputComponent\");\n$RefreshReg$(_c2, \"Input\");","map":{"version":3,"names":["React","connect","Defaults","Keystrokes","LPointerTargetable","U","useStateIfMounted","Tooltip","Fragment","_Fragment","jsxDEV","_jsxDEV","InputComponent","props","_s","_data","data","getter","setter","field","oldValue","undefined","value","setValue","isTouched","setIsTouched","children","readOnly","readonly","debugmodee","check","id","type","label","jsxLabel","tooltip","txt","css","hidden","autosize","isBoolean","includes","onChange","evt","target","checked","onKeyDown","key","enter","blur","escape","onBlur","newValue","otherprops","inputStyle","fromBoolString","cursor","rootStyle","style","color","iclassName","inputClassName","join","inputProps","spellCheck","spellCkeck","input","rootprops","onMouseEnter","show","ref","onMouseLeave","hide","rootkeys","Set","Object","keys","k","toUpperCase","_len","arguments","length","a","Array","_key","rootProps","className","objectMergeInPlace","fileName","_jsxFileName","lineNumber","columnNumber","_c","cname","mapStateToProps","state","ownProps","_ownProps$data","ret","pointer","debug","fromPointer","mapDispatchToProps","dispatch","InputConnected","Input","_c2","Edit","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/forEndUser/Input.tsx"],"sourcesContent":["import React, {Dispatch, KeyboardEvent, ReactElement, ReactNode} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DState} from '../../redux/store';\r\nimport {Defaults, DPointerTargetable, GObject, Keystrokes, LPointerTargetable, Overlap, Pointer, U} from '../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport './inputselect.scss';\r\nimport { Tooltip } from './Tooltip';\r\n\r\n\r\nfunction InputComponent(props: AllProps) {\r\n    const data = props.data;\r\n    const getter = props.getter;\r\n    const setter = props.setter;\r\n    const field: string = props.field as string;\r\n    const oldValue = (!data) ? undefined : (getter) ? getter(data) : data[field]; // !== undefined); ? data[field] : 'undefined'\r\n    const [value, setValue] = useStateIfMounted(oldValue);\r\n    const [isTouched, setIsTouched] = useStateIfMounted(false);\r\n\r\n    // I check if the value that I have in my local state is being edited by other <Input />\r\n    if (value !== oldValue && !isTouched){\r\n        setValue(oldValue);\r\n        setIsTouched(false);\r\n    }\r\n\r\n\r\n    if (!(data || (getter && setter))) return(<>Either props.data or both getter & setter are required.</>);\r\n    const readOnly = (props.readonly !== undefined) ? props.readonly : props.debugmodee !== 'true' && Defaults.check(data?.id);\r\n    const type = (props.type) ? props.type : 'text';\r\n    const label: ReactNode|undefined = props.jsxLabel || props.label;\r\n    let tooltip: ReactNode|string|undefined = ((props.tooltip === true) ? data?.['__info_of__' + field]?.txt : props.tooltip) || '';\r\n\r\n    let css = '';//'my-auto input ';\r\n    //css += (jsxLabel) ? 'ms-1' : (label) ? 'ms-auto' : '';\r\n    css += (props.hidden) ? ' hidden-input' : '';\r\n    let autosize: boolean = props.autosize === undefined ? false : props.autosize; // props.type==='text'\r\n    css += autosize ? ' autosize-input' : '';\r\n    const isBoolean = (['checkbox', 'radio'].includes(type));\r\n\r\n    const onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (isBoolean) {\r\n            if (readOnly) return;\r\n            const target = evt.target.checked;\r\n            if (setter) setter(target);\r\n            else data[field] = target;\r\n        } else {\r\n            setValue(evt.target.value);\r\n            setIsTouched(true);     // I'm editing the element in my local state.\r\n        }\r\n    }\r\n    const onKeyDown = (evt: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (evt.key === Keystrokes.enter) blur(evt as any);\r\n        if (evt.key === Keystrokes.escape) {\r\n            const oldValue = getter ? getter(data) : data[field];\r\n            (evt.target as HTMLInputElement).value = oldValue;\r\n            setValue(oldValue);\r\n            setIsTouched(false);\r\n            (evt.target as HTMLInputElement).blur();\r\n            // to optimize: probably can remove a large part of this function because this should trigger blur event as well. or move \"change\" event contents here\r\n            // optimize 2: memoize the whole component, so it won't update unless the displayed value changed. this would also fix cursor going to input end when pressing enter.\r\n        }\r\n    }\r\n    const onBlur = (evt: React.FocusEvent<HTMLInputElement>) => {\r\n        if (readOnly || isBoolean) return;\r\n        const newValue = evt.target.value;\r\n        const oldValue = getter ? getter(data) : data[field];\r\n        if (newValue !== oldValue) {\r\n            if (setter) setter(newValue);\r\n            else data[field] = newValue;\r\n        }\r\n        // I terminate my editing, so I communicate it to other <Input /> that render the same field.\r\n        setIsTouched(false);\r\n    }\r\n\r\n    const otherprops: GObject = {...props};\r\n    delete otherprops.data;\r\n    delete otherprops.field;\r\n    delete otherprops.getter;\r\n    delete otherprops.setter;\r\n    delete otherprops.label;\r\n    delete otherprops.jsxLabel;\r\n    delete otherprops.tooltip;\r\n    delete otherprops.hidden;\r\n    delete otherprops.inputStyle;\r\n    delete otherprops.children;\r\n    delete otherprops.autosize; // because react complains is bool in dom attribute or unknown attrib name\r\n\r\n    let checked: boolean | undefined = undefined;\r\n    if (isBoolean) checked = typeof value === \"boolean\" ? value : (typeof value === \"string\" ? U.fromBoolString(value) : !!value);\r\n\r\n    let cursor: string;\r\n    if (tooltip) cursor = 'help';\r\n    else if (readOnly) cursor = 'not-allowed';\r\n    else if (isBoolean) cursor = 'pointer';\r\n    else cursor = 'auto';\r\n    let inputStyle = props.inputStyle || {};\r\n    if (!inputStyle.cursor && cursor === 'not-allowed') { inputStyle.cursor = cursor; }\r\n    let rootStyle = props.style || {}; // {display: (jsxLabel || label) ? 'flex' : 'block', cursor, ...((props as any).style || {})};\r\n    if (readOnly && !(\"color\" in rootStyle)) rootStyle.color = \"gray\";\r\n    let iclassName = [props.inputClassName, css].join(' ');\r\n    let inputProps: GObject = { spellCheck: props.spellCkeck || false, readOnly, type, value, checked, onChange, onBlur, onKeyDown} // key:`${field}.${data?.id}`\r\n    let input: ReactNode;\r\n    let rootprops: GObject = {...otherprops};\r\n    if (tooltip) {\r\n        rootprops.onMouseEnter = () => Tooltip.show(tooltip, true, (this as any).ref);\r\n        rootprops.onMouseLeave = () => Tooltip.hide();\r\n    }\r\n    let rootkeys = new Set(...Object.keys(rootprops));\r\n    for (let k of rootkeys) {\r\n        if (!(k[0] === 'o' && k[1] === 'n' && k[2] && k[2].toUpperCase() === k[2])) continue;\r\n        if (inputProps[k]) inputProps[k] = function(...a:any) { inputProps[k](arguments); rootprops[k](arguments); }\r\n        else inputProps[k] = rootprops[k];\r\n        delete rootProps[k];\r\n    }\r\n    if (autosize) rootprops.className = 'autosize-input-container';\r\n    if (!label && !autosize) {\r\n        iclassName = props.className + ' ' + iclassName;\r\n        let style = {};\r\n        U.objectMergeInPlace(style, rootStyle, inputStyle);\r\n\r\n        return <input {...rootprops} {...inputProps} className={iclassName} style={style} />;\r\n    }\r\n\r\n    else input =  <input {...inputProps} className={iclassName} style={inputStyle} />;\r\n\r\n    return <label {...rootprops}>\r\n\r\n    </label>\r\n    return input;\r\n    /*\r\n    return(<label className={'p-1'} {...otherprops}\r\n                  style={rootStyle}>\r\n\r\n        {label && <span className={'my-auto'} onMouseEnter={e => setShowTooltip(true)}\r\n                        onMouseLeave={e => setShowTooltip(false)}>{label}\r\n        </span>}\r\n\r\n        {jsxLabel && <span onMouseEnter={e => setShowTooltip(true)}\r\n                           onMouseLeave={e => setShowTooltip(false)} style={{width: '100%'}}>{jsxLabel}\r\n        </span>}\r\n\r\n        {(tooltip && showTooltip) && <div className={'my-tooltip'}>\r\n            <b className={'text-center text-capitalize'}>{field}</b>\r\n            <br />\r\n            <label>{tooltip}</label>\r\n        </div>}\r\n\r\n        {autosize ? <div className={(autosize ? 'autosize-input-container' : '') + (props.asLabel ? ' labelstyle' : '')}\r\n                         data-value={value}>{input}\r\n        </div> : input}\r\n    </label>);\r\n    */\r\n}\r\n\r\nInputComponent.cname = 'InputComponent';\r\nexport interface InputOwnProps {\r\n    data?: LPointerTargetable | DPointerTargetable | Pointer<DPointerTargetable, 1, 1, LPointerTargetable>;\r\n    field?: string;\r\n    getter?: (data: any/*LPointerTargetable*/) => string | boolean | undefined;\r\n    setter?: (value: string|boolean) => void;\r\n    label?: string | ReactNode;\r\n    jsxLabel?: ReactNode;\r\n    type?: 'checkbox'|'color'|'date'|'datetime-local'|'email'|'file'|'image'|'month'|\r\n    'number'|'password'|'radio'|'range'|'tel'|'text'|'time'|'url'|'week';\r\n    className?: string;\r\n    style?: GObject;\r\n    readonly?: boolean;\r\n    tooltip?: string | boolean | ReactElement;\r\n    hidden?: boolean;\r\n    autosize?: boolean;\r\n    inputClassName?: string;\r\n    inputStyle?: GObject;\r\n    asLabel?: boolean;\r\n    key?: React.Key | null;\r\n    placeholder?: string;\r\n}\r\ninterface StateProps {\r\n    debugmodee: string;\r\n    data: LPointerTargetable & GObject;\r\n    // selected: Dictionary<Pointer<DUser>, LModelElement | null>;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = Overlap<InputOwnProps, Overlap<StateProps, DispatchProps>>;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: InputOwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    const pointer: Pointer | undefined = typeof ownProps.data === 'string' ? ownProps.data : ownProps.data?.id;\r\n    ret.debugmodee = state.debug ? 'true' : 'false';\r\n    if (pointer) ret.data = LPointerTargetable.fromPointer(pointer);\r\n    /*\r\n    const selected = state.selected;\r\n    ret.selected = {};\r\n    for(let user of Object.keys(selected)) {\r\n        const pointer = selected[user];\r\n        if(pointer) ret.selected[user] = LModelElement.fromPointer(pointer);\r\n        else ret.selected[user] = null;\r\n    }\r\n\r\n    */\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nexport const InputConnected =\r\n    connect<StateProps, DispatchProps, InputOwnProps, DState>(mapStateToProps, mapDispatchToProps)(InputComponent);\r\n\r\n\r\nexport function Input(props: InputOwnProps, children: (string | React.Component)[] = []): ReactElement {\r\n    return <InputConnected {...{...props, children}} />;\r\n}\r\nexport const Edit = Input;\r\n\r\nInputComponent.cname = 'InputComponent';\r\nInputConnected.cname = 'InputConnected';\r\nInput.cname = 'Input';\r\nEdit.cname = 'Edit';\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}