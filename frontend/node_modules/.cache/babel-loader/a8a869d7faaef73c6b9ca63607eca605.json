{"ast":null,"code":"var _dec,_class,_class2;import React,{isValidElement}from'react';import{Log,RuntimeAccessible,Size,Point}from'../../joiner';import'./tooltip.scss';import{PositionStr}from\"../../common/Geom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class TooltipVisualizerState{constructor(){this.tooltip=void 0;this.baseElement=void 0;this.position=void 0;this.offsetX=void 0;this.offsetY=void 0;this.theme=void 0;this.position='b';}}export class TooltipVisualizer extends React.Component{constructor(){super({});this.tooltip=null;this.root=null;this.innerText=void 0;this.tsize=void 0;this.theme=void 0;this.state=new TooltipVisualizerState();TooltipVisualizer.component=this;}onMouseEnter(){var _TooltipVisualizer$co;let position=PositionStr.invertPosStr((_TooltipVisualizer$co=TooltipVisualizer.component.state.position)!==null&&_TooltipVisualizer$co!==void 0?_TooltipVisualizer$co:\"b\");TooltipVisualizer.component.setState({position});}setRef(e){this.root=e;this.componentDidUpdate();}componentDidMount(){return this.componentDidUpdate();}componentDidUpdate(){let e=this.root;if(!e)return;let innerText=e.innerText;if(innerText===this.innerText)return;this.innerText=innerText;this.tooltip=e.children[0];this.tsize=this.tooltip?Size.of(this.tooltip):undefined;this.forceUpdate();}render(){let tooltip=this.state.tooltip;if(!tooltip)return null;const style={};let position=this.state.position;let offsetX=this.state.offsetX||0;let offsetY=this.state.offsetY||0;let theme=this.state.theme;/* debug stuff override\r\n        let positions = ['t', 'b', 'l', 'r', 'tl', 'tr', 'bl', 'br', ''] as any;\r\n        let windoww = window as any\r\n        position = positions[windoww.ii || 0];//Math.floor(Math.random()*positions.length)];\r\n        offsetX = windoww.xx || 0;\r\n        offsetY = windoww.yy || 0;*/if(this.state.baseElement){//style.position = 'absolute';\nlet size=Size.of(this.state.baseElement);let tsize=this.tsize;let x=size.x;let y=size.y;let pos=PositionStr.fromPosString(position);x+=(pos.x+1)/2*size.w+pos.x*offsetX;y+=(pos.y+1)/2*size.h+pos.y*offsetY;// -1 -> 0\n// 0 -> 0.5\n// 1 -> 1\nlet xmin='calc('+size.w+'px / 2 - 50vw)';let ymin='calc('+size.h+'px / 2 - 50vh)';let xmax='calc(50vw - '+size.w+'px / 2)';let ymax='calc(50vh - '+size.h+'px / 2)';let l='max('+xmin+', min('+xmax+', calc( '+x+'px - 50vw)))';let t='max('+ymin+', min('+ymax+', calc( '+y+'px - 50vh)))';// style.left = l; style.top = t;\nstyle['--mid-x']='calc('+x+'px - 50vw)';style['--mid-y']='calc('+y+'px - 50vh)';style['--source-size-w']=size.w+'px';style['--source-size-h']=size.h+'px';if(tsize){style['--size-w']=tsize.w+'px';style['--size-h']=tsize.h+'px';}// style.right = 'calc( 100vw - '+size.w+'px)';\n// currently center of tooltip is topleft of baseelem\n}// wrapper cannot contain only rawtext without subelements to be rendered\nif(typeof tooltip!=='object')tooltip=/*#__PURE__*/_jsx(\"div\",{children:tooltip});if(Array.isArray(tooltip))tooltip=tooltip.map(e=>typeof e!=='object'?/*#__PURE__*/_jsx(\"div\",{children:e}):e);// NB: arrays are allowed but currently show elements in an horizontal line\n// debugg stuff\nlet tooltip2=/*#__PURE__*/_jsx(\"div\",{style:{...style,padding:0,width:0,height:0,borderRadius:'100%'}});// border:'2px solid red',\nstyle.padding=0;// debug stuff end\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"tooltip-wrapper \"+PositionStr.toSeparateFullLabels(position!==null&&position!==void 0?position:'t')+(this.state.baseElement?\" inline\":\" fixed\")+\" \"+theme,onMouseEnter:this.onMouseEnter,style:style,ref:e=>this.setRef(e),children:tooltip}),/*#__PURE__*/_jsx(\"div\",{className:\"tooltip-wrapper \"+PositionStr.toSeparateFullLabels(position!==null&&position!==void 0?position:'t')+(this.state.baseElement?\" inline\":\" fixed\")+\" \"+theme,onMouseEnter:this.onMouseEnter,style:style,children:tooltip2})]});}}TooltipVisualizer.component=void 0;export let Tooltip=(_dec=RuntimeAccessible('Tooltip'),_dec(_class=(_class2=class Tooltip extends React.Component{constructor(props){super(props);this.tooltip=void 0;this.childhtml=null;this.state={};this.onMouseEnter=this.onMouseEnter.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);}static show(tooltip,pos,baseElement){var _offset$x,_offset$y;let seconds=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;let offset=arguments.length>4?arguments[4]:undefined;let theme=arguments.length>5?arguments[5]:undefined;tooltip=Tooltip.fixTooltip(tooltip);const statepatch={tooltip,baseElement,offsetX:(_offset$x=offset===null||offset===void 0?void 0:offset.x)!==null&&_offset$x!==void 0?_offset$x:0,offsetY:(_offset$y=offset===null||offset===void 0?void 0:offset.y)!==null&&_offset$y!==void 0?_offset$y:0,theme};statepatch.position=pos!==null&&pos!==void 0?pos:'b';TooltipVisualizer.component.setState(statepatch);if(seconds>0)setTimeout(()=>{if(TooltipVisualizer.component.state.tooltip!==tooltip)return;if(TooltipVisualizer.component.state.baseElement!==baseElement)return;TooltipVisualizer.component.setState({tooltip:undefined,baseElement:undefined,offsetX:0,offsetY:0});},seconds*1000);}static hide(){TooltipVisualizer.component.setState({tooltip:undefined});}onMouseEnter(e){let inline=this.props.inline;let x=this.props.offsetX;let y=this.props.offsetY;let offset=x||x===0||y||y===0?new Point(this.props.offsetX||0,this.props.offsetY||0):undefined;Tooltip.show(this.tooltip,this.props.position,inline?this.childhtml||undefined:undefined,-1,offset);if(this.props.seconds){setTimeout(()=>this.onMouseLeave(e),this.props.seconds);}}onMouseLeave(e){if(this.props.seconds)return;Tooltip.hide();}componentWillUnmount(){this.onMouseLeave();}static fixTooltip(t){return t;// const onMouseEnter = Tooltip.mergeEvents(t, \"onMouseEnter\", ()=> TooltipVisualizer.component.setState({position: !TooltipVisualizer.component.position}));\n//return React.cloneElement(t, {onMouseEnter});\n}static mergeEvents(c,key,func){if(!c.props[key])return func;let evt=function(){let ret=undefined;if(typeof c.props[key]!==\"function\")Log.ww(\"<Tooltip /> component requires his child to have \"+key+\" props either missing or a valid function\");else{ret=c.props[key](...arguments);}func(...arguments);return ret;};return evt;}render(){var _this=this;if(!this.props.tooltip)return this.props.children;if(Array.isArray(this.props.children))return/*#__PURE__*/_jsx(\"span\",{children:\"<Tooltip /> component requires exactly 1 element as children. Wrap the subelements in a container element.\"});if(!this.props.children||!/*#__PURE__*/isValidElement(this.props.children))return/*#__PURE__*/_jsx(\"span\",{children:\"<Tooltip /> component requires a html or react node as children.\"});for(let k of Object.keys(this.props))switch(k){//default: Log.ww('<Tooltip /> component cannot accept props other than \"key\", \"position\", and \"tooltip\".'); break;\ncase'children':case'key':case'tooltip':case'position':break;// case \"inline\": break;\n}this.tooltip=Tooltip.fixTooltip(this.props.tooltip);let c=this.props.children;const onMouseEnter=Tooltip.mergeEvents(c,'onMouseEnter',this.onMouseEnter);const onMouseLeave=Tooltip.mergeEvents(c,'onMouseLeave',this.onMouseLeave);let ref=undefined;if(c.props.ref){const pref=c.props.ref;switch(typeof pref){case\"object\":this.childhtml=pref.current;break;case\"function\":ref=function(e){for(var _len=arguments.length,a=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){a[_key-1]=arguments[_key];}pref(e,a);_this.childhtml=e;};break;case\"string\":Log.ee(\"Found React-ref of type string in Tooltip children which is unsupported. Use object or funcional refs.\");break;}}else ref=ref=>{this.childhtml=ref;};const injectProps={onMouseEnter,onMouseLeave};if(ref)injectProps.ref=ref;let ret=/*#__PURE__*/React.cloneElement(c,injectProps);return ret;}},_class2.cname=\"Tooltip\",_class2))||_class);// const TooltipConnected = connect<StateProps, DispatchProps, OwnProps, DState>(mapStateToProps, mapDispatchToProps)(TooltipComponent);\n// export function Tooltip(props: OwnProps): ReactElement { return <TooltipConnected {...{...props}}>{props.children}</TooltipConnected>; }\n//TooltipComponent.cname = 'TooltipComponent';\n//TooltipConnected.cname = 'TooltipConnected';\nTooltip.cname='Tooltip';","map":{"version":3,"names":["React","isValidElement","Log","RuntimeAccessible","Size","Point","PositionStr","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TooltipVisualizerState","constructor","tooltip","baseElement","position","offsetX","offsetY","theme","TooltipVisualizer","Component","root","innerText","tsize","state","component","onMouseEnter","_TooltipVisualizer$co","invertPosStr","setState","setRef","e","componentDidUpdate","componentDidMount","children","of","undefined","forceUpdate","render","style","size","x","y","pos","fromPosString","w","h","xmin","ymin","xmax","ymax","l","t","Array","isArray","map","tooltip2","padding","width","height","borderRadius","className","toSeparateFullLabels","ref","Tooltip","_dec","_class","_class2","props","childhtml","bind","onMouseLeave","show","_offset$x","_offset$y","seconds","arguments","length","offset","fixTooltip","statepatch","setTimeout","hide","inline","componentWillUnmount","mergeEvents","c","key","func","evt","ret","ww","_this","k","Object","keys","pref","current","_len","a","_key","ee","injectProps","cloneElement","cname"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/frontend/src/components/forEndUser/Tooltip.tsx"],"sourcesContent":["import React, {\r\n    Dispatch,\r\n    isValidElement,\r\n    KeyboardEvent,\r\n    LegacyRef,\r\n    ReactElement,\r\n    ReactNode,\r\n    Ref,\r\n    RefObject\r\n} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DState} from '../../redux/store';\r\nimport {\r\n    Defaults,\r\n    DPointerTargetable,\r\n    DV,\r\n    GObject,\r\n    Keystrokes,\r\n    Log,\r\n    LPointerTargetable,\r\n    Overlap,\r\n    Pointer, store,\r\n    U, LoggerCategoryState, RuntimeAccessible, Size, Point\r\n} from '../../joiner';\r\nimport './tooltip.scss';\r\nimport {IPoint, PositionStr, PositionStrTypes} from \"../../common/Geom\";\r\n\r\nclass TooltipVisualizerState{\r\n    tooltip?: ReactNode;\r\n    baseElement?: Element;\r\n    position?: PositionStrTypes;\r\n    offsetX?: number;\r\n    offsetY?: number\r\n    theme?: ThemeType;\r\n    constructor() {\r\n        this.position = 'b';\r\n    }\r\n}\r\nexport class TooltipVisualizer extends React.Component<{}, TooltipVisualizerState> {\r\n    public static component: TooltipVisualizer;\r\n    constructor(){\r\n        super({});\r\n        this.state = new TooltipVisualizerState();\r\n        TooltipVisualizer.component = this;\r\n    }\r\n    onMouseEnter(){\r\n        let position = PositionStr.invertPosStr(TooltipVisualizer.component.state.position ?? \"b\");\r\n        TooltipVisualizer.component.setState({position});\r\n    }\r\n\r\n    private tooltip: HTMLElement | null = null;\r\n    private root: HTMLElement | null = null;\r\n    private innerText?: string;\r\n    private tsize?: Size;\r\n    private theme?: ThemeType;\r\n\r\n    setRef(e: HTMLElement | null) { this.root = e; this.componentDidUpdate(); }\r\n    componentDidMount(){\r\n        return this.componentDidUpdate();\r\n    }\r\n    componentDidUpdate(){\r\n        let e = this.root;\r\n        if (!e) return;\r\n        let innerText = e.innerText;\r\n        if (innerText === this.innerText) return;\r\n        this.innerText = innerText;\r\n        this.tooltip = e.children[0] as any;\r\n        this.tsize = this.tooltip ? Size.of(this.tooltip) : undefined;\r\n        \r\n        this.forceUpdate();\r\n    }\r\n\r\n    render(){\r\n        let tooltip = this.state.tooltip;\r\n        if (!tooltip) return null;\r\n        const style: GObject = {};\r\n        let position = this.state.position;\r\n        let offsetX = this.state.offsetX || 0;\r\n        let offsetY = this.state.offsetY || 0;\r\n        let theme = this.state.theme;\r\n\r\n        /* debug stuff override\r\n        let positions = ['t', 'b', 'l', 'r', 'tl', 'tr', 'bl', 'br', ''] as any;\r\n        let windoww = window as any\r\n        position = positions[windoww.ii || 0];//Math.floor(Math.random()*positions.length)];\r\n        offsetX = windoww.xx || 0;\r\n        offsetY = windoww.yy || 0;*/\r\n        if (this.state.baseElement){\r\n            //style.position = 'absolute';\r\n            let size = Size.of(this.state.baseElement);\r\n            let tsize = this.tsize;\r\n            let x = size.x;\r\n            let y = size.y;\r\n            let pos = PositionStr.fromPosString(position);\r\n            x += (pos.x+1)/2 * size.w + pos.x * offsetX;\r\n            y += (pos.y+1)/2 * size.h + pos.y * offsetY;\r\n            // -1 -> 0\r\n            // 0 -> 0.5\r\n            // 1 -> 1\r\n\r\n            let xmin = 'calc(' + size.w + 'px / 2 - 50vw)';\r\n            let ymin = 'calc(' +  size.h + 'px / 2 - 50vh)';\r\n\r\n            let xmax = 'calc(50vw - ' + size.w + 'px / 2)';\r\n            let ymax = 'calc(50vh - ' +  size.h + 'px / 2)';\r\n\r\n            let l = 'max(' + xmin + ', min(' + xmax +', calc( '+ x +'px - 50vw)))';\r\n            let t = 'max(' + ymin + ', min(' + ymax + ', calc( '+ y +'px - 50vh)))';\r\n            // style.left = l; style.top = t;\r\n            style['--mid-x'] = 'calc(' + x + 'px - 50vw)';\r\n            style['--mid-y'] = 'calc(' + y + 'px - 50vh)';\r\n            style['--source-size-w'] = size.w + 'px';\r\n            style['--source-size-h'] = size.h + 'px';\r\n            if (tsize) {\r\n                style['--size-w'] = tsize.w + 'px';\r\n                style['--size-h'] = tsize.h + 'px';\r\n            }\r\n            // style.right = 'calc( 100vw - '+size.w+'px)';\r\n            // currently center of tooltip is topleft of baseelem\r\n        }\r\n\r\n        // wrapper cannot contain only rawtext without subelements to be rendered\r\n        if (typeof tooltip !== 'object') tooltip = <div>{tooltip}</div>;\r\n        if (Array.isArray(tooltip)) tooltip = tooltip.map(e => typeof e !== 'object' ? <div>{e}</div> : e)\r\n        // NB: arrays are allowed but currently show elements in an horizontal line\r\n        // debugg stuff\r\n        let tooltip2 = <div style={{...style, padding:0, width:0, height:0,  borderRadius: '100%'}} />; // border:'2px solid red',\r\n        style.padding = 0;\r\n        // debug stuff end\r\n\r\n        return <>\r\n            <div className={\"tooltip-wrapper \" +\r\n                (PositionStr.toSeparateFullLabels(position ?? 't'))+\r\n                (this.state.baseElement ? \" inline\" : \" fixed\")+ \" \"+\r\n                (theme)\r\n            } onMouseEnter={this.onMouseEnter}\r\n                 style={style} ref={(e)=> this.setRef(e)}>\r\n                {tooltip}</div>\r\n            <div className={\"tooltip-wrapper \" +\r\n                (PositionStr.toSeparateFullLabels(position ?? 't'))+\r\n                (this.state.baseElement ? \" inline\" : \" fixed\")+ \" \"+\r\n                (theme)\r\n            } onMouseEnter={this.onMouseEnter}\r\n                 style={style}>\r\n        {tooltip2}</div>\r\n        </>;\r\n    }\r\n}\r\n\r\n@RuntimeAccessible('Tooltip')\r\nexport class Tooltip extends React.Component<AllProps, State> {\r\n    static cname: string = \"Tooltip\";\r\n    tooltip!: ReactNode;\r\n\r\n    constructor(props: AllProps) {\r\n        super(props);\r\n        this.state = {};\r\n        this.onMouseEnter = this.onMouseEnter.bind(this);\r\n        this.onMouseLeave = this.onMouseLeave.bind(this);\r\n    }\r\n\r\n    public static show(tooltip: ReactNode, pos?: PositionStrTypes, baseElement?: Element, seconds: number = -1, offset?: IPoint, theme?: ThemeType): void{\r\n        tooltip = Tooltip.fixTooltip(tooltip);\r\n        const statepatch: Partial<TooltipVisualizerState> = {tooltip, baseElement, offsetX: offset?.x ?? 0, offsetY: offset?.y ?? 0, theme};\r\n         statepatch.position = pos ?? 'b';\r\n        TooltipVisualizer.component.setState(statepatch);\r\n        if (seconds>0) setTimeout( () => {\r\n            if (TooltipVisualizer.component.state.tooltip !== tooltip) return;\r\n            if (TooltipVisualizer.component.state.baseElement !== baseElement) return;\r\n            TooltipVisualizer.component.setState({tooltip: undefined, baseElement: undefined, offsetX: 0, offsetY: 0});\r\n            }, seconds * 1000);\r\n    }\r\n\r\n    public static hide(): void {\r\n        TooltipVisualizer.component.setState({tooltip: undefined});\r\n    }\r\n\r\n    onMouseEnter(e?: MouseEvent): void{\r\n        let inline = this.props.inline;\r\n        let x = this.props.offsetX;\r\n        let y = this.props.offsetY;\r\n        let offset: Point | undefined = (x || x === 0) || (y || y === 0) ? new Point(this.props.offsetX || 0, this.props.offsetY || 0) : undefined;\r\n        Tooltip.show(this.tooltip, this.props.position, inline ? (this.childhtml || undefined) : undefined, -1, offset);\r\n\r\n        if (this.props.seconds) {\r\n            setTimeout(()=>this.onMouseLeave(e), this.props.seconds);\r\n        }\r\n    }\r\n    onMouseLeave(e?: MouseEvent): void{\r\n        if (this.props.seconds) return;\r\n        Tooltip.hide();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.onMouseLeave();\r\n    }\r\n    private static fixTooltip(t: ReactNode): ReactNode{\r\n        return t;\r\n        // const onMouseEnter = Tooltip.mergeEvents(t, \"onMouseEnter\", ()=> TooltipVisualizer.component.setState({position: !TooltipVisualizer.component.position}));\r\n        //return React.cloneElement(t, {onMouseEnter});\r\n    }\r\n    private static mergeEvents(c: React.ReactElement<any, string | React.JSXElementConstructor<any>> | React.ReactPortal, key: string, func: (...a:any)=>any): ((...a:any)=>any) {\r\n        if (!c.props[key]) return func;\r\n\r\n        let evt = (...a:any[])=>{\r\n            let ret: any = undefined;\r\n            if (typeof c.props[key] !== \"function\") Log.ww(\"<Tooltip /> component requires his child to have \"+key+\" props either missing or a valid function\");\r\n            else { ret = c.props[key](...a); }\r\n            func(...a);\r\n            return ret;\r\n        }\r\n        return evt;\r\n\r\n    }\r\n    childhtml: Element | null = null;\r\n\r\n    render() {\r\n        if (!this.props.tooltip) return this.props.children;\r\n        if (Array.isArray(this.props.children)) return <span>\r\n            &lt;Tooltip /&gt; component requires exactly 1 element as children. Wrap the subelements in a container element.\r\n        </span>\r\n        if (!this.props.children || !isValidElement(this.props.children)) return <span>\r\n            &lt;Tooltip /&gt; component requires a html or react node as children.\r\n        </span>\r\n        for (let k of Object.keys(this.props)) switch (k){\r\n            //default: Log.ww('<Tooltip /> component cannot accept props other than \"key\", \"position\", and \"tooltip\".'); break;\r\n            case 'children': case 'key': case 'tooltip': case 'position': break;\r\n            // case \"inline\": break;\r\n        }\r\n        this.tooltip = Tooltip.fixTooltip(this.props.tooltip);\r\n\r\n        let c = this.props.children;\r\n        const onMouseEnter = Tooltip.mergeEvents(c, 'onMouseEnter', this.onMouseEnter);\r\n        const onMouseLeave = Tooltip.mergeEvents(c, 'onMouseLeave', this.onMouseLeave);\r\n        let ref: Ref<Element> | undefined = undefined;\r\n        if (c.props.ref) {\r\n            const pref = c.props.ref;\r\n            switch(typeof pref){\r\n                case \"object\": this.childhtml = (pref as RefObject<Element>).current; break;\r\n                case \"function\": ref = (e: Element, ...a:any)=> { pref(e, a); this.childhtml = e;}; break;\r\n                case \"string\": Log.ee(\"Found React-ref of type string in Tooltip children which is unsupported. Use object or funcional refs.\"); break;\r\n            }\r\n        } else ref = ((ref: Element | null) => { this.childhtml = ref; } );\r\n\r\n        const injectProps: GObject = {onMouseEnter, onMouseLeave};\r\n        if (ref) injectProps.ref = ref;\r\n        let ret = React.cloneElement(c, injectProps);\r\n        return ret;\r\n    }\r\n\r\n}\r\ninterface State{\r\n}\r\n\r\ntype ThemeType = 'default' | 'dark';\r\n\r\ninterface OwnProps {\r\n    key?: React.Key | null;\r\n    catch?: ReactNode | ((error: Error, info?: React.ErrorInfo) => ReactNode);\r\n    children: ReactNode;\r\n    tooltip: ReactNode;\r\n    inline?: boolean;\r\n    offsetX?: number;\r\n    offsetY?: number;\r\n    position?: PositionStrTypes;\r\n    seconds?: number;\r\n    theme?: ThemeType;\r\n}\r\ninterface StateProps {\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = Overlap<OwnProps, Overlap<StateProps, DispatchProps>>;\r\n\r\n\r\n// const TooltipConnected = connect<StateProps, DispatchProps, OwnProps, DState>(mapStateToProps, mapDispatchToProps)(TooltipComponent);\r\n\r\n\r\n// export function Tooltip(props: OwnProps): ReactElement { return <TooltipConnected {...{...props}}>{props.children}</TooltipConnected>; }\r\n\r\n//TooltipComponent.cname = 'TooltipComponent';\r\n//TooltipConnected.cname = 'TooltipConnected';\r\nTooltip.cname = 'Tooltip';\r\n"],"mappings":"wBAAA,MAAO,CAAAA,KAAK,EAERC,cAAc,KAOX,OAAO,CAGd,OAMIC,GAAG,CAIqBC,iBAAiB,CAAEC,IAAI,CAAEC,KAAK,KACnD,cAAc,CACrB,MAAO,gBAAgB,CACvB,OAAgBC,WAAW,KAAyB,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExE,KAAM,CAAAC,sBAAsB,CAOxBC,WAAWA,CAAA,CAAG,MANdC,OAAO,aACPC,WAAW,aACXC,QAAQ,aACRC,OAAO,aACPC,OAAO,aACPC,KAAK,QAED,IAAI,CAACH,QAAQ,CAAG,GAAG,CACvB,CACJ,CACA,MAAO,MAAM,CAAAI,iBAAiB,QAAS,CAAArB,KAAK,CAACsB,SAAsC,CAE/ER,WAAWA,CAAA,CAAE,CACT,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KASNC,OAAO,CAAuB,IAAI,MAClCQ,IAAI,CAAuB,IAAI,MAC/BC,SAAS,aACTC,KAAK,aACLL,KAAK,QAZT,IAAI,CAACM,KAAK,CAAG,GAAI,CAAAb,sBAAsB,CAAC,CAAC,CACzCQ,iBAAiB,CAACM,SAAS,CAAG,IAAI,CACtC,CACAC,YAAYA,CAAA,CAAE,KAAAC,qBAAA,CACV,GAAI,CAAAZ,QAAQ,CAAGX,WAAW,CAACwB,YAAY,EAAAD,qBAAA,CAACR,iBAAiB,CAACM,SAAS,CAACD,KAAK,CAACT,QAAQ,UAAAY,qBAAA,UAAAA,qBAAA,CAAI,GAAG,CAAC,CAC1FR,iBAAiB,CAACM,SAAS,CAACI,QAAQ,CAAC,CAACd,QAAQ,CAAC,CAAC,CACpD,CAQAe,MAAMA,CAACC,CAAqB,CAAE,CAAE,IAAI,CAACV,IAAI,CAAGU,CAAC,CAAE,IAAI,CAACC,kBAAkB,CAAC,CAAC,CAAE,CAC1EC,iBAAiBA,CAAA,CAAE,CACf,MAAO,KAAI,CAACD,kBAAkB,CAAC,CAAC,CACpC,CACAA,kBAAkBA,CAAA,CAAE,CAChB,GAAI,CAAAD,CAAC,CAAG,IAAI,CAACV,IAAI,CACjB,GAAI,CAACU,CAAC,CAAE,OACR,GAAI,CAAAT,SAAS,CAAGS,CAAC,CAACT,SAAS,CAC3B,GAAIA,SAAS,GAAK,IAAI,CAACA,SAAS,CAAE,OAClC,IAAI,CAACA,SAAS,CAAGA,SAAS,CAC1B,IAAI,CAACT,OAAO,CAAGkB,CAAC,CAACG,QAAQ,CAAC,CAAC,CAAQ,CACnC,IAAI,CAACX,KAAK,CAAG,IAAI,CAACV,OAAO,CAAGX,IAAI,CAACiC,EAAE,CAAC,IAAI,CAACtB,OAAO,CAAC,CAAGuB,SAAS,CAE7D,IAAI,CAACC,WAAW,CAAC,CAAC,CACtB,CAEAC,MAAMA,CAAA,CAAE,CACJ,GAAI,CAAAzB,OAAO,CAAG,IAAI,CAACW,KAAK,CAACX,OAAO,CAChC,GAAI,CAACA,OAAO,CAAE,MAAO,KAAI,CACzB,KAAM,CAAA0B,KAAc,CAAG,CAAC,CAAC,CACzB,GAAI,CAAAxB,QAAQ,CAAG,IAAI,CAACS,KAAK,CAACT,QAAQ,CAClC,GAAI,CAAAC,OAAO,CAAG,IAAI,CAACQ,KAAK,CAACR,OAAO,EAAI,CAAC,CACrC,GAAI,CAAAC,OAAO,CAAG,IAAI,CAACO,KAAK,CAACP,OAAO,EAAI,CAAC,CACrC,GAAI,CAAAC,KAAK,CAAG,IAAI,CAACM,KAAK,CAACN,KAAK,CAE5B;AACR;AACA;AACA;AACA;AACA,oCACQ,GAAI,IAAI,CAACM,KAAK,CAACV,WAAW,CAAC,CACvB;AACA,GAAI,CAAA0B,IAAI,CAAGtC,IAAI,CAACiC,EAAE,CAAC,IAAI,CAACX,KAAK,CAACV,WAAW,CAAC,CAC1C,GAAI,CAAAS,KAAK,CAAG,IAAI,CAACA,KAAK,CACtB,GAAI,CAAAkB,CAAC,CAAGD,IAAI,CAACC,CAAC,CACd,GAAI,CAAAC,CAAC,CAAGF,IAAI,CAACE,CAAC,CACd,GAAI,CAAAC,GAAG,CAAGvC,WAAW,CAACwC,aAAa,CAAC7B,QAAQ,CAAC,CAC7C0B,CAAC,EAAI,CAACE,GAAG,CAACF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAGD,IAAI,CAACK,CAAC,CAAGF,GAAG,CAACF,CAAC,CAAGzB,OAAO,CAC3C0B,CAAC,EAAI,CAACC,GAAG,CAACD,CAAC,CAAC,CAAC,EAAE,CAAC,CAAGF,IAAI,CAACM,CAAC,CAAGH,GAAG,CAACD,CAAC,CAAGzB,OAAO,CAC3C;AACA;AACA;AAEA,GAAI,CAAA8B,IAAI,CAAG,OAAO,CAAGP,IAAI,CAACK,CAAC,CAAG,gBAAgB,CAC9C,GAAI,CAAAG,IAAI,CAAG,OAAO,CAAIR,IAAI,CAACM,CAAC,CAAG,gBAAgB,CAE/C,GAAI,CAAAG,IAAI,CAAG,cAAc,CAAGT,IAAI,CAACK,CAAC,CAAG,SAAS,CAC9C,GAAI,CAAAK,IAAI,CAAG,cAAc,CAAIV,IAAI,CAACM,CAAC,CAAG,SAAS,CAE/C,GAAI,CAAAK,CAAC,CAAG,MAAM,CAAGJ,IAAI,CAAG,QAAQ,CAAGE,IAAI,CAAE,UAAU,CAAER,CAAC,CAAE,cAAc,CACtE,GAAI,CAAAW,CAAC,CAAG,MAAM,CAAGJ,IAAI,CAAG,QAAQ,CAAGE,IAAI,CAAG,UAAU,CAAER,CAAC,CAAE,cAAc,CACvE;AACAH,KAAK,CAAC,SAAS,CAAC,CAAG,OAAO,CAAGE,CAAC,CAAG,YAAY,CAC7CF,KAAK,CAAC,SAAS,CAAC,CAAG,OAAO,CAAGG,CAAC,CAAG,YAAY,CAC7CH,KAAK,CAAC,iBAAiB,CAAC,CAAGC,IAAI,CAACK,CAAC,CAAG,IAAI,CACxCN,KAAK,CAAC,iBAAiB,CAAC,CAAGC,IAAI,CAACM,CAAC,CAAG,IAAI,CACxC,GAAIvB,KAAK,CAAE,CACPgB,KAAK,CAAC,UAAU,CAAC,CAAGhB,KAAK,CAACsB,CAAC,CAAG,IAAI,CAClCN,KAAK,CAAC,UAAU,CAAC,CAAGhB,KAAK,CAACuB,CAAC,CAAG,IAAI,CACtC,CACA;AACA;AACJ,CAEA;AACA,GAAI,MAAO,CAAAjC,OAAO,GAAK,QAAQ,CAAEA,OAAO,cAAGP,IAAA,QAAA4B,QAAA,CAAMrB,OAAO,CAAM,CAAC,CAC/D,GAAIwC,KAAK,CAACC,OAAO,CAACzC,OAAO,CAAC,CAAEA,OAAO,CAAGA,OAAO,CAAC0C,GAAG,CAACxB,CAAC,EAAI,MAAO,CAAAA,CAAC,GAAK,QAAQ,cAAGzB,IAAA,QAAA4B,QAAA,CAAMH,CAAC,CAAM,CAAC,CAAGA,CAAC,CAAC,CAClG;AACA;AACA,GAAI,CAAAyB,QAAQ,cAAGlD,IAAA,QAAKiC,KAAK,CAAE,CAAC,GAAGA,KAAK,CAAEkB,OAAO,CAAC,CAAC,CAAEC,KAAK,CAAC,CAAC,CAAEC,MAAM,CAAC,CAAC,CAAGC,YAAY,CAAE,MAAM,CAAE,CAAE,CAAC,CAAE;AAChGrB,KAAK,CAACkB,OAAO,CAAG,CAAC,CACjB;AAEA,mBAAO/C,KAAA,CAAAF,SAAA,EAAA0B,QAAA,eACH5B,IAAA,QAAKuD,SAAS,CAAE,kBAAkB,CAC7BzD,WAAW,CAAC0D,oBAAoB,CAAC/C,QAAQ,SAARA,QAAQ,UAARA,QAAQ,CAAI,GAAG,CAAE,EAClD,IAAI,CAACS,KAAK,CAACV,WAAW,CAAG,SAAS,CAAG,QAAQ,CAAC,CAAE,GAAG,CACnDI,KACJ,CAACQ,YAAY,CAAE,IAAI,CAACA,YAAa,CAC7Ba,KAAK,CAAEA,KAAM,CAACwB,GAAG,CAAGhC,CAAC,EAAI,IAAI,CAACD,MAAM,CAACC,CAAC,CAAE,CAAAG,QAAA,CACxCrB,OAAO,CAAM,CAAC,cACnBP,IAAA,QAAKuD,SAAS,CAAE,kBAAkB,CAC7BzD,WAAW,CAAC0D,oBAAoB,CAAC/C,QAAQ,SAARA,QAAQ,UAARA,QAAQ,CAAI,GAAG,CAAE,EAClD,IAAI,CAACS,KAAK,CAACV,WAAW,CAAG,SAAS,CAAG,QAAQ,CAAC,CAAE,GAAG,CACnDI,KACJ,CAACQ,YAAY,CAAE,IAAI,CAACA,YAAa,CAC7Ba,KAAK,CAAEA,KAAM,CAAAL,QAAA,CACrBsB,QAAQ,CAAM,CAAC,EACd,CAAC,CACP,CACJ,CA7GarC,iBAAiB,CACZM,SAAS,QA8G3B,UACa,CAAAuC,OAAO,EAAAC,IAAA,CADnBhE,iBAAiB,CAAC,SAAS,CAAC,CAAAgE,IAAA,CAAAC,MAAA,EAAAC,OAAA,CAA7B,KACa,CAAAH,OAAO,QAAS,CAAAlE,KAAK,CAACsB,SAA2B,CAI1DR,WAAWA,CAACwD,KAAe,CAAE,CACzB,KAAK,CAACA,KAAK,CAAC,CAAC,KAHjBvD,OAAO,aA8DPwD,SAAS,CAAmB,IAAI,CA1D5B,IAAI,CAAC7C,KAAK,CAAG,CAAC,CAAC,CACf,IAAI,CAACE,YAAY,CAAG,IAAI,CAACA,YAAY,CAAC4C,IAAI,CAAC,IAAI,CAAC,CAChD,IAAI,CAACC,YAAY,CAAG,IAAI,CAACA,YAAY,CAACD,IAAI,CAAC,IAAI,CAAC,CACpD,CAEA,MAAc,CAAAE,IAAIA,CAAC3D,OAAkB,CAAE8B,GAAsB,CAAE7B,WAAqB,CAAiE,KAAA2D,SAAA,CAAAC,SAAA,IAA/D,CAAAC,OAAe,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAxC,SAAA,CAAAwC,SAAA,IAAG,CAAC,CAAC,IAAE,CAAAE,MAAe,CAAAF,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAxC,SAAA,IAAE,CAAAlB,KAAiB,CAAA0D,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAxC,SAAA,CAC1IvB,OAAO,CAAGmD,OAAO,CAACe,UAAU,CAAClE,OAAO,CAAC,CACrC,KAAM,CAAAmE,UAA2C,CAAG,CAACnE,OAAO,CAAEC,WAAW,CAAEE,OAAO,EAAAyD,SAAA,CAAEK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAErC,CAAC,UAAAgC,SAAA,UAAAA,SAAA,CAAI,CAAC,CAAExD,OAAO,EAAAyD,SAAA,CAAEI,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEpC,CAAC,UAAAgC,SAAA,UAAAA,SAAA,CAAI,CAAC,CAAExD,KAAK,CAAC,CAClI8D,UAAU,CAACjE,QAAQ,CAAG4B,GAAG,SAAHA,GAAG,UAAHA,GAAG,CAAI,GAAG,CACjCxB,iBAAiB,CAACM,SAAS,CAACI,QAAQ,CAACmD,UAAU,CAAC,CAChD,GAAIL,OAAO,CAAC,CAAC,CAAEM,UAAU,CAAE,IAAM,CAC7B,GAAI9D,iBAAiB,CAACM,SAAS,CAACD,KAAK,CAACX,OAAO,GAAKA,OAAO,CAAE,OAC3D,GAAIM,iBAAiB,CAACM,SAAS,CAACD,KAAK,CAACV,WAAW,GAAKA,WAAW,CAAE,OACnEK,iBAAiB,CAACM,SAAS,CAACI,QAAQ,CAAC,CAAChB,OAAO,CAAEuB,SAAS,CAAEtB,WAAW,CAAEsB,SAAS,CAAEpB,OAAO,CAAE,CAAC,CAAEC,OAAO,CAAE,CAAC,CAAC,CAAC,CAC1G,CAAC,CAAE0D,OAAO,CAAG,IAAI,CAAC,CAC1B,CAEA,MAAc,CAAAO,IAAIA,CAAA,CAAS,CACvB/D,iBAAiB,CAACM,SAAS,CAACI,QAAQ,CAAC,CAAChB,OAAO,CAAEuB,SAAS,CAAC,CAAC,CAC9D,CAEAV,YAAYA,CAACK,CAAc,CAAO,CAC9B,GAAI,CAAAoD,MAAM,CAAG,IAAI,CAACf,KAAK,CAACe,MAAM,CAC9B,GAAI,CAAA1C,CAAC,CAAG,IAAI,CAAC2B,KAAK,CAACpD,OAAO,CAC1B,GAAI,CAAA0B,CAAC,CAAG,IAAI,CAAC0B,KAAK,CAACnD,OAAO,CAC1B,GAAI,CAAA6D,MAAyB,CAAIrC,CAAC,EAAIA,CAAC,GAAK,CAAC,EAAMC,CAAC,EAAIA,CAAC,GAAK,CAAE,CAAG,GAAI,CAAAvC,KAAK,CAAC,IAAI,CAACiE,KAAK,CAACpD,OAAO,EAAI,CAAC,CAAE,IAAI,CAACoD,KAAK,CAACnD,OAAO,EAAI,CAAC,CAAC,CAAGmB,SAAS,CAC1I4B,OAAO,CAACQ,IAAI,CAAC,IAAI,CAAC3D,OAAO,CAAE,IAAI,CAACuD,KAAK,CAACrD,QAAQ,CAAEoE,MAAM,CAAI,IAAI,CAACd,SAAS,EAAIjC,SAAS,CAAIA,SAAS,CAAE,CAAC,CAAC,CAAE0C,MAAM,CAAC,CAE/G,GAAI,IAAI,CAACV,KAAK,CAACO,OAAO,CAAE,CACpBM,UAAU,CAAC,IAAI,IAAI,CAACV,YAAY,CAACxC,CAAC,CAAC,CAAE,IAAI,CAACqC,KAAK,CAACO,OAAO,CAAC,CAC5D,CACJ,CACAJ,YAAYA,CAACxC,CAAc,CAAO,CAC9B,GAAI,IAAI,CAACqC,KAAK,CAACO,OAAO,CAAE,OACxBX,OAAO,CAACkB,IAAI,CAAC,CAAC,CAClB,CAEAE,oBAAoBA,CAAA,CAAG,CACnB,IAAI,CAACb,YAAY,CAAC,CAAC,CACvB,CACA,MAAe,CAAAQ,UAAUA,CAAC3B,CAAY,CAAY,CAC9C,MAAO,CAAAA,CAAC,CACR;AACA;AACJ,CACA,MAAe,CAAAiC,WAAWA,CAACC,CAAyF,CAAEC,GAAW,CAAEC,IAAqB,CAAqB,CACzK,GAAI,CAACF,CAAC,CAAClB,KAAK,CAACmB,GAAG,CAAC,CAAE,MAAO,CAAAC,IAAI,CAE9B,GAAI,CAAAC,GAAG,CAAG,QAAAA,CAAA,CAAc,CACpB,GAAI,CAAAC,GAAQ,CAAGtD,SAAS,CACxB,GAAI,MAAO,CAAAkD,CAAC,CAAClB,KAAK,CAACmB,GAAG,CAAC,GAAK,UAAU,CAAEvF,GAAG,CAAC2F,EAAE,CAAC,mDAAmD,CAACJ,GAAG,CAAC,2CAA2C,CAAC,CAAC,IAC/I,CAAEG,GAAG,CAAGJ,CAAC,CAAClB,KAAK,CAACmB,GAAG,CAAC,CAAC,GAAAX,SAAI,CAAC,CAAE,CACjCY,IAAI,CAAC,GAAAZ,SAAI,CAAC,CACV,MAAO,CAAAc,GAAG,CACd,CAAC,CACD,MAAO,CAAAD,GAAG,CAEd,CAGAnD,MAAMA,CAAA,CAAG,KAAAsD,KAAA,MACL,GAAI,CAAC,IAAI,CAACxB,KAAK,CAACvD,OAAO,CAAE,MAAO,KAAI,CAACuD,KAAK,CAAClC,QAAQ,CACnD,GAAImB,KAAK,CAACC,OAAO,CAAC,IAAI,CAACc,KAAK,CAAClC,QAAQ,CAAC,CAAE,mBAAO5B,IAAA,SAAA4B,QAAA,CAAM,4GAErD,CAAM,CAAC,CACP,GAAI,CAAC,IAAI,CAACkC,KAAK,CAAClC,QAAQ,EAAI,cAACnC,cAAc,CAAC,IAAI,CAACqE,KAAK,CAAClC,QAAQ,CAAC,CAAE,mBAAO5B,IAAA,SAAA4B,QAAA,CAAM,kEAE/E,CAAM,CAAC,CACP,IAAK,GAAI,CAAA2D,CAAC,GAAI,CAAAC,MAAM,CAACC,IAAI,CAAC,IAAI,CAAC3B,KAAK,CAAC,CAAE,OAAQyB,CAAC,EAC5C;AACA,IAAK,UAAU,CAAE,IAAK,KAAK,CAAE,IAAK,SAAS,CAAE,IAAK,UAAU,CAAE,MAC9D;AACJ,CACA,IAAI,CAAChF,OAAO,CAAGmD,OAAO,CAACe,UAAU,CAAC,IAAI,CAACX,KAAK,CAACvD,OAAO,CAAC,CAErD,GAAI,CAAAyE,CAAC,CAAG,IAAI,CAAClB,KAAK,CAAClC,QAAQ,CAC3B,KAAM,CAAAR,YAAY,CAAGsC,OAAO,CAACqB,WAAW,CAACC,CAAC,CAAE,cAAc,CAAE,IAAI,CAAC5D,YAAY,CAAC,CAC9E,KAAM,CAAA6C,YAAY,CAAGP,OAAO,CAACqB,WAAW,CAACC,CAAC,CAAE,cAAc,CAAE,IAAI,CAACf,YAAY,CAAC,CAC9E,GAAI,CAAAR,GAA6B,CAAG3B,SAAS,CAC7C,GAAIkD,CAAC,CAAClB,KAAK,CAACL,GAAG,CAAE,CACb,KAAM,CAAAiC,IAAI,CAAGV,CAAC,CAAClB,KAAK,CAACL,GAAG,CACxB,OAAO,MAAO,CAAAiC,IAAI,EACd,IAAK,QAAQ,CAAE,IAAI,CAAC3B,SAAS,CAAI2B,IAAI,CAAwBC,OAAO,CAAE,MACtE,IAAK,UAAU,CAAElC,GAAG,CAAG,QAAAA,CAAChC,CAAU,CAAc,SAAAmE,IAAA,CAAAtB,SAAA,CAAAC,MAAA,CAATsB,CAAC,KAAA9C,KAAA,CAAA6C,IAAA,GAAAA,IAAA,MAAAE,IAAA,GAAAA,IAAA,CAAAF,IAAA,CAAAE,IAAA,IAADD,CAAC,CAAAC,IAAA,IAAAxB,SAAA,CAAAwB,IAAA,GAAUJ,IAAI,CAACjE,CAAC,CAAEoE,CAAC,CAAC,CAAEP,KAAI,CAACvB,SAAS,CAAGtC,CAAC,CAAC,CAAC,CAAE,MACpF,IAAK,QAAQ,CAAE/B,GAAG,CAACqG,EAAE,CAAC,wGAAwG,CAAC,CAAE,MACrI,CACJ,CAAC,IAAM,CAAAtC,GAAG,CAAKA,GAAmB,EAAK,CAAE,IAAI,CAACM,SAAS,CAAGN,GAAG,CAAE,CAAG,CAElE,KAAM,CAAAuC,WAAoB,CAAG,CAAC5E,YAAY,CAAE6C,YAAY,CAAC,CACzD,GAAIR,GAAG,CAAEuC,WAAW,CAACvC,GAAG,CAAGA,GAAG,CAC9B,GAAI,CAAA2B,GAAG,cAAG5F,KAAK,CAACyG,YAAY,CAACjB,CAAC,CAAEgB,WAAW,CAAC,CAC5C,MAAO,CAAAZ,GAAG,CACd,CAEJ,CAAC,CAAAvB,OAAA,CAnGUqC,KAAK,CAAW,SAAS,CAAArC,OAAA,IAAAD,MAAA,EA2HpC;AAGA;AAEA;AACA;AACAF,OAAO,CAACwC,KAAK,CAAG,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}