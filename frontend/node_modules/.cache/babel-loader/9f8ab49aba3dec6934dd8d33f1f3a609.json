{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\forEndUser\\\\Measurable.tsx\";\nimport React, { PureComponent } from \"react\";\nimport { Log, U } from \"../../joiner\";\nimport $ from \"jquery\";\n\n// private\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class MeasurableComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.html = null;\n    this.$html = void 0;\n    this.dragOptionsChanged = true;\n    this.resizeOptionsChanged = true;\n    this.rotateOptionsChanged = true;\n    this.defaultOptions = {\n      draggable: {\n        cursor: 'grabbing',\n        // containment: 'parent',\n        distance: 5\n        // helper: 'clone', // 'original' or 'csselector'? or func=>html\n        // disabled: !(view.draggable),}\n      },\n\n      resizable: {},\n      rotatable: {}\n    };\n  }\n  componentDidMount() {\n    this.afterUpdate();\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    this.afterUpdate();\n  }\n  afterUpdate() {\n    if (!this.html) return;\n    this.$html = $(this.html);\n    if (this.dragOptionsChanged) {\n      this.afterUpdateSingle(\"draggable\");\n    }\n    if (this.resizeOptionsChanged) {\n      this.afterUpdateSingle(\"resizable\");\n    }\n    if (this.rotateOptionsChanged) {\n      this.afterUpdateSingle(\"rotatable\");\n    }\n  }\n  afterUpdateSingle(type) {\n    if (!this.$html) return;\n    let $measurable = this.$html;\n\n    // todo: change options, put disable then remove disable attr and check if changing options at runtime works\n\n    let eventmap = {\n      's': {\n        'draggable': 'onDragStart',\n        'rotatable': 'onRotateStart',\n        'resizable': 'onResizeStart'\n      },\n      'ing': {\n        'draggable': 'whileDragging',\n        'rotatable': 'whileRotating',\n        'resizable': 'whileResizing'\n      },\n      'e': {\n        'draggable': 'onDragEnd',\n        'rotatable': 'onRotateEnd',\n        'resizable': 'onResizeEnd'\n      }\n    };\n    let jqui_ing;\n    switch (type) {\n      default:\n        jqui_ing = Log.eDevv(\"unexpected measurable event: \" + type);\n        return;\n      case \"draggable\":\n        jqui_ing = 'drag';\n        break;\n      case \"resizable\":\n        jqui_ing = 'resize';\n        break;\n      case \"rotatable\":\n        jqui_ing = 'rotate';\n        break;\n    }\n    /*\r\n    defaultoptions.start = (event: GObject, obj: GObject) => {\r\n        TRANSACTION(()=>{\r\n            //for (let vid of allviews) this.doMeasurableEvent((EMeasurableEvents as any)[eventmap.s[type]], vid);\r\n        })\r\n    }\r\n    defaultoptions[jqui_ing] = (event: GObject, obj: GObject) => {\r\n        TRANSACTION(()=>{\r\n            //for (let vid of allviews) this.doMeasurableEvent((EMeasurableEvents as any)[eventmap.s[type]], vid);\r\n        })\r\n    };\r\n    defaultoptions.stop = (event: GObject, obj: GObject) => {\r\n        TRANSACTION(()=>{\r\n            //for (let vid of allviews) this.doMeasurableEvent((EMeasurableEvents as any)[eventmap.s[type]], vid);\r\n        })\r\n    }*/\n    let options;\n    const optionSuffix = ''; // 'Options'; // '';\n    const props = this.props;\n    if (props[type + optionSuffix] === false || !props[type + optionSuffix]) {\n      if ($measurable.data(\"uiDraggable\")) $measurable[type]('disable');\n      return;\n    }\n    if (props[type + optionSuffix] === true) {\n      options = {};\n    } else options = {\n      ...props[type + optionSuffix]\n    };\n\n    //let jodelevent = {'s': eventmap.s[type], 'ing': eventmap.ing[type], 'e': eventmap.e[type]};\n    let jquievent = {\n      's': 'start',\n      'ing': jqui_ing,\n      'e': 'end'\n    };\n    let evtkey;\n    for (evtkey in jquievent) {\n      let jqkey = jquievent[evtkey] || '';\n      if (typeof props[eventmap[evtkey][type]] !== \"function\") {\n        Log.ee(\"<Measurable /> \" + evtkey + \" props must be a function\");\n        continue;\n      }\n      options[jqkey] = () => {\n        props[evtkey]();\n      };\n    }\n    let propsOptions = {\n      ...options\n    };\n    let defaultOptions = this.defaultOptions[type];\n    U.objectMergeInPlace(options, defaultOptions);\n    console.log(\"measurable\", {\n      type,\n      $measurable,\n      options,\n      propsOptions,\n      defaultOptions\n    });\n    $measurable[type](options);\n  }\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    const oldProps = this.props || {};\n    this.dragOptionsChanged = false;\n    this.resizeOptionsChanged = false;\n    this.rotateOptionsChanged = false;\n    let ret = false;\n    const nestederr = \"Options cannot contain functions or nested objects\";\n    if (!U.isShallowEqualWithProxies(oldProps.dragOptions, nextProps.dragOptions)) {\n      const opt = oldProps.dragOptions;\n      if (opt) for (let k in opt) {\n        switch (typeof opt[k]) {\n          case \"function\":\n          case \"object\":\n            Log.ee(\"drag\" + nestederr, k);\n        }\n      }\n      this.dragOptionsChanged = true;\n      ret = true;\n    }\n    if (!U.isShallowEqualWithProxies(oldProps.resizeOptions, nextProps.resizeOptions)) {\n      const opt = oldProps.resizeOptions;\n      if (opt) for (let k in opt) {\n        switch (typeof opt[k]) {\n          case \"function\":\n          case \"object\":\n            Log.ee(\"resize\" + nestederr, k);\n        }\n      }\n      this.resizeOptionsChanged = true;\n      ret = true;\n    }\n    if (!U.isShallowEqualWithProxies(oldProps.rotateOptions, nextProps.rotateOptions)) {\n      const opt = oldProps.rotateOptions;\n      if (opt) for (let k in opt) {\n        switch (typeof opt[k]) {\n          case \"function\":\n          case \"object\":\n            Log.ee(\"rotate\" + nestederr, k);\n        }\n      }\n      this.rotateOptionsChanged = true;\n      return true;\n    }\n    if (ret) return true; // i don't need to set more this.variable stuff and i already determined something changed.\n    if (Object.keys(oldProps).length !== Object.keys(nextProps).length) return true;\n    let k;\n    for (k in oldProps) {\n      if (!(k in nextProps)) return false;\n      let ok = oldProps[k];\n      let nk = nextProps[k];\n      if (ok === nk) continue;\n      let tk = typeof ok;\n      if (tk !== typeof nk) return false;\n      switch (tk) {\n        case \"object\":\n          Log.ee(\"unexpected object in <Measurable/> props\", {\n            k,\n            nk,\n            ok\n          });\n          return true;\n        case \"function\":\n          if (ok.toString() !== nk.toString()) return true;\n          break;\n        default:\n          return false;\n        // already checked they are !==\n      }\n    }\n\n    return false;\n  }\n  render() {\n    let child = this.props.children;\n    console.log(\"measurable render\", child);\n    if (!child) return child;\n    if (Array.isArray(child)) {\n      if (child.length !== 1) {\n        Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\");\n        return child;\n      } else child = child[0];\n    }\n    if (child.type.toString() === React.Fragment.toString()) {\n      Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\");\n      return child;\n    }\n    let oldProps = child.props;\n    let newProps = {\n      ref: html => {\n        this.html = html;\n      }\n    };\n    U.objectMergeInPlace(newProps, oldProps);\n    let clonedChild = /*#__PURE__*/React.cloneElement(child, newProps);\n    return clonedChild;\n  }\n}\nMeasurableComponent.cname = \"MeasurableComponent\"; // private\n// private\n// private\n// private\n////// mapper func\n/*\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n*/\nMeasurableComponent.defaultProps = {\n  autosizex: true,\n  autosizey: true,\n  style: undefined,\n  children: []\n};\nexport function Measurable(props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(MeasurableComponent, {\n    ...props,\n    children,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 12\n  }, this);\n}\n/*connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MeasurableComponent);*/\n_c = Measurable;\nvar _c;\n$RefreshReg$(_c, \"Measurable\");","map":{"version":3,"names":["React","PureComponent","Log","U","$","jsxDEV","_jsxDEV","MeasurableComponent","constructor","arguments","html","$html","dragOptionsChanged","resizeOptionsChanged","rotateOptionsChanged","defaultOptions","draggable","cursor","distance","resizable","rotatable","componentDidMount","afterUpdate","componentDidUpdate","prevProps","prevState","snapshot","afterUpdateSingle","type","$measurable","eventmap","jqui_ing","eDevv","options","optionSuffix","props","data","jquievent","evtkey","jqkey","ee","propsOptions","objectMergeInPlace","console","log","shouldComponentUpdate","nextProps","nextState","nextContext","oldProps","ret","nestederr","isShallowEqualWithProxies","dragOptions","opt","k","resizeOptions","rotateOptions","Object","keys","length","ok","nk","tk","toString","render","child","children","Array","isArray","Fragment","newProps","ref","clonedChild","cloneElement","cname","defaultProps","autosizex","autosizey","style","undefined","Measurable","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/forEndUser/Measurable.tsx"],"sourcesContent":["import React, {CSSProperties, PureComponent, ReactChild, ReactElement, ReactNode} from \"react\";\r\nimport {GObject, Log, TRANSACTION, U} from \"../../joiner\";\r\nimport $ from \"jquery\";\r\n\r\n// private\r\ninterface ThisState {\r\n}\r\n\r\nexport class MeasurableComponent extends PureComponent<AllProps, ThisState>{\r\n    static cname: string = \"MeasurableComponent\";\r\n\r\n\r\n    private html: Element | null = null;\r\n    private $html!:  JQuery<Element>;\r\n    dragOptionsChanged: boolean = true;\r\n    resizeOptionsChanged: boolean = true;\r\n    rotateOptionsChanged: boolean = true;\r\n    defaultOptions: {\"draggable\": JQueryUI.DraggableOptions, resizable: JQueryUI.ResizableOptions, rotatable: GObject} = {\r\n        draggable: {\r\n            cursor: 'grabbing',\r\n            // containment: 'parent',\r\n            distance: 5,\r\n            // helper: 'clone', // 'original' or 'csselector'? or func=>html\r\n            // disabled: !(view.draggable),}\r\n        },\r\n        resizable: {},\r\n        rotatable: {},\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.afterUpdate();\r\n    }\r\n    componentDidUpdate(prevProps: Readonly<AllProps>, prevState: Readonly<ThisState>, snapshot?: any) {\r\n        this.afterUpdate();\r\n    }\r\n    afterUpdate(): void{\r\n        if (!this.html) return;\r\n        this.$html = $(this.html);\r\n        if (this.dragOptionsChanged) { this.afterUpdateSingle(\"draggable\"); }\r\n        if (this.resizeOptionsChanged) { this.afterUpdateSingle(\"resizable\"); }\r\n        if (this.rotateOptionsChanged) { this.afterUpdateSingle(\"rotatable\"); }\r\n    }\r\n\r\n    afterUpdateSingle(type: \"draggable\" | \"resizable\" | \"rotatable\"): void{\r\n        if (!this.$html) return;\r\n        let $measurable = this.$html;\r\n\r\n        // todo: change options, put disable then remove disable attr and check if changing options at runtime works\r\n\r\n\r\n        let eventmap = {\r\n            's':    {'draggable': 'onDragStart',    'rotatable': 'onRotateStart',   'resizable': 'onResizeStart'},\r\n            'ing':  {'draggable': 'whileDragging',  'rotatable': 'whileRotating',   'resizable': 'whileResizing'},\r\n            'e':    {'draggable': 'onDragEnd',      'rotatable': 'onRotateEnd',     'resizable': 'onResizeEnd'  },\r\n        }\r\n        let jqui_ing: string;\r\n        switch (type){\r\n            default: jqui_ing = Log.eDevv(\"unexpected measurable event: \" + type); return;\r\n            case \"draggable\": jqui_ing = 'drag'; break;\r\n            case \"resizable\": jqui_ing = 'resize'; break;\r\n            case \"rotatable\": jqui_ing = 'rotate'; break;\r\n        }\r\n        /*\r\n        defaultoptions.start = (event: GObject, obj: GObject) => {\r\n            TRANSACTION(()=>{\r\n                //for (let vid of allviews) this.doMeasurableEvent((EMeasurableEvents as any)[eventmap.s[type]], vid);\r\n            })\r\n        }\r\n        defaultoptions[jqui_ing] = (event: GObject, obj: GObject) => {\r\n            TRANSACTION(()=>{\r\n                //for (let vid of allviews) this.doMeasurableEvent((EMeasurableEvents as any)[eventmap.s[type]], vid);\r\n            })\r\n        };\r\n        defaultoptions.stop = (event: GObject, obj: GObject) => {\r\n            TRANSACTION(()=>{\r\n                //for (let vid of allviews) this.doMeasurableEvent((EMeasurableEvents as any)[eventmap.s[type]], vid);\r\n            })\r\n        }*/\r\n        let options: GObject;\r\n        const optionSuffix = '';// 'Options'; // '';\r\n        const props: GObject = this.props;\r\n        if (props[type + optionSuffix] === false || !props[type + optionSuffix]) {\r\n            if ($measurable.data(\"uiDraggable\")) $measurable[type]('disable');\r\n            return;\r\n        }\r\n        if (props[type + optionSuffix] === true) {\r\n            options = {};\r\n        } else options = {...props[type + optionSuffix]};\r\n\r\n        //let jodelevent = {'s': eventmap.s[type], 'ing': eventmap.ing[type], 'e': eventmap.e[type]};\r\n        let jquievent = {'s': 'start', 'ing': jqui_ing, 'e':'end'};\r\n        let evtkey: keyof typeof jquievent;\r\n        for (evtkey in jquievent) {\r\n            let jqkey = jquievent[evtkey] || '';\r\n            if (typeof props[eventmap[evtkey][type]] !== \"function\") {\r\n                Log.ee(\"<Measurable /> \" + evtkey + \" props must be a function\");\r\n                continue;\r\n            }\r\n            options[jqkey] = ()=> { props[evtkey]() } ;\r\n        }\r\n        let propsOptions = {...options};\r\n        let defaultOptions = this.defaultOptions[type];\r\n        U.objectMergeInPlace(options, defaultOptions);\r\n        console.log(\"measurable\", {type, $measurable, options, propsOptions, defaultOptions});\r\n        ($measurable as GObject)[type](options);\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<AllProps>, nextState: Readonly<ThisState>, nextContext: any): boolean {\r\n        const oldProps = this.props || {};\r\n        this.dragOptionsChanged = false;\r\n        this.resizeOptionsChanged = false;\r\n        this.rotateOptionsChanged = false;\r\n        let ret: boolean = false;\r\n        const nestederr = \"Options cannot contain functions or nested objects\";\r\n        if (!U.isShallowEqualWithProxies(oldProps.dragOptions, nextProps.dragOptions)) {\r\n            const opt = oldProps.dragOptions;\r\n            if (opt) for(let k in opt){ switch (typeof opt[k]){ case \"function\": case \"object\": Log.ee(\"drag\" + nestederr, k); } }\r\n            this.dragOptionsChanged = true;\r\n            ret = true;\r\n        }\r\n        if (!U.isShallowEqualWithProxies(oldProps.resizeOptions, nextProps.resizeOptions)) {\r\n            const opt = oldProps.resizeOptions;\r\n            if (opt) for(let k in opt){ switch (typeof opt[k]){ case \"function\": case \"object\": Log.ee(\"resize\" + nestederr, k); } }\r\n            this.resizeOptionsChanged = true;\r\n            ret = true;\r\n        }\r\n        if (!U.isShallowEqualWithProxies(oldProps.rotateOptions, nextProps.rotateOptions)) {\r\n            const opt = oldProps.rotateOptions;\r\n            if (opt) for(let k in opt){ switch (typeof opt[k]){ case \"function\": case \"object\": Log.ee(\"rotate\" + nestederr, k); } }\r\n            this.rotateOptionsChanged = true;\r\n            return true;\r\n        }\r\n        if (ret) return true; // i don't need to set more this.variable stuff and i already determined something changed.\r\n        if (Object.keys(oldProps).length !== Object.keys(nextProps).length) return true;\r\n        let k: keyof typeof nextProps;\r\n        for (k in oldProps){\r\n            if (!(k in nextProps)) return false;\r\n            let ok = oldProps[k];\r\n            let nk = nextProps[k];\r\n            if (ok === nk) continue;\r\n            let tk = typeof ok;\r\n            if (tk !== typeof nk) return false;\r\n            switch (tk) {\r\n                case \"object\": Log.ee(\"unexpected object in <Measurable/> props\", {k, nk, ok}); return true;\r\n                case \"function\": if (ok!.toString() !== nk!.toString()) return true; break;\r\n                default: return false; // already checked they are !==\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    render(): ReactNode {\r\n        let child: ReactElement = this.props.children as any;\r\n        console.log(\"measurable render\", child);\r\n        if (!child) return child;\r\n        if (Array.isArray(child)) {\r\n            if (child.length !== 1) {\r\n                Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\");\r\n                return child;\r\n            }\r\n            else child = child[0];\r\n        }\r\n        if (child.type.toString() === React.Fragment.toString()) {\r\n            Log.ee(\"Measurable can have only 1 subelement and it cannot be an array or a <>React.fragment</>\");\r\n            return child; }\r\n\r\n        let oldProps = child.props;\r\n        let newProps = {\r\n            ref: (html: Element | null)=>{ this.html = html; }\r\n        };\r\n        U.objectMergeInPlace(newProps, oldProps);\r\n        let clonedChild = React.cloneElement(child, newProps);\r\n        return clonedChild;\r\n    }\r\n}\r\n\r\ntype EventHandler = ()=>void;\r\ntype Options = GObject;\r\n// private\r\ninterface OwnProps {\r\n    children: ReactChild[] | ReactChild;\r\n\r\n    dragOptions?: Options;\r\n    //drag?: Options;\r\n    onDragStart?: EventHandler;\r\n    whileDragging?: EventHandler;\r\n    onDragEnd?: EventHandler;\r\n\r\n    resizeOptions?: Options;\r\n    //resize?: Options;\r\n    onResizeStart?: EventHandler;\r\n    whileResizing?: EventHandler;\r\n    onResizeEnd?: EventHandler;\r\n\r\n    rotateOptions?: Options;\r\n    //rotate?: Options;\r\n    onRotationStart?: EventHandler;\r\n    whileRotating?: EventHandler;\r\n    onRotationEnd?: EventHandler;\r\n}\r\n// private\r\ninterface StateProps {\r\n    // propsFromReduxStateOrOtherKindOfStateManagement: boolean; // flux or custom things too, unrelated to this.state of react.\r\n}\r\n\r\n// private\r\ninterface DispatchProps {\r\n    // propsFromReduxActions: typeof funzioneTriggeraAzioneDaImportare;\r\n}\r\n\r\n\r\n// private\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n////// mapper func\r\n/*\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {} as any;\r\n    /// to fill\r\n    return ret; }\r\n*/\r\n\r\n(MeasurableComponent as any).defaultProps = {\r\n    autosizex: true,\r\n    autosizey: true,\r\n    style: undefined,\r\n    children: [],\r\n} as OwnProps;\r\n\r\nexport function Measurable(props: AllProps, children: ReactChild[] = []): ReactElement {\r\n    return <MeasurableComponent {...{...props, children}}>{children}</MeasurableComponent>;\r\n}\r\n/*connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MeasurableComponent);*/\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}