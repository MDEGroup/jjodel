{"ast":null,"code":"import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{LNamedElement,SetRootFieldAction,U}from'../../joiner';import{useStateIfMounted}from'use-state-if-mounted';import'./style.scss';import{useEffectOnce}from\"usehooks-ts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Tree(props){var data=props.data?props.data:null;var children=props.children;var _useStateIfMounted=useStateIfMounted(''),_useStateIfMounted2=_slicedToArray(_useStateIfMounted,2),id=_useStateIfMounted2[0],setId=_useStateIfMounted2[1];var depth=props.depth?[].concat(_toConsumableArray(props.depth),[id]):[id];var _useStateIfMounted3=useStateIfMounted(''),_useStateIfMounted4=_slicedToArray(_useStateIfMounted3,2),filter=_useStateIfMounted4[0],applyFilter=_useStateIfMounted4[1];var hide=depth.includes(filter);useEffectOnce(function(){setId(data&&data.id?data.id:U.getRandomString(5));});var setFilter=function setFilter(){if(filter===id)applyFilter('');else applyFilter(id);};if(data)return/*#__PURE__*/_jsx(DataTree,{data:data,depth:depth,hide:hide,setFilter:setFilter});if(children)return/*#__PURE__*/_jsx(HtmlTree,{data:children,hide:hide,depth:depth,setFilter:setFilter});return/*#__PURE__*/_jsx(_Fragment,{});}function DataTree(props){var _data$children,_data$children2;var hide=props.hide;var data=LNamedElement.fromPointer(props.data.id);if(!data)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error Data is \",/*#__PURE__*/_jsx(\"b\",{children:\"undefined\"})]});var depth=props.depth;var setFilter=props.setFilter;var click=function click(){var node=data.node;SetRootFieldAction.new('_lastSelected',{node:node===null||node===void 0?void 0:node.id,view:node===null||node===void 0?void 0:node.view.id,modelElement:data.id},'',false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:'d-flex tree',children:[/*#__PURE__*/_jsx(\"button\",{className:'btn',onClick:setFilter,children:((_data$children=data.children)===null||_data$children===void 0?void 0:_data$children.length)>0&&hide?/*#__PURE__*/_jsx(\"i\",{className:'bi bi-chevron-up'}):/*#__PURE__*/_jsx(\"i\",{className:'bi bi-chevron-down'})}),/*#__PURE__*/_jsxs(\"label\",{className:data.className+' ms-1 text-capitalize my-auto',children:[/*#__PURE__*/_jsx(\"b\",{children:data.className}),\":\"]}),/*#__PURE__*/_jsx(\"label\",{tabIndex:-1,role:'button',onClick:click,className:'name ms-1 my-auto',children:data.name?data.name:'unnamed'})]}),!hide&&Array.isArray(data.children)&&((_data$children2=data.children)===null||_data$children2===void 0?void 0:_data$children2.map(function(child){return/*#__PURE__*/_jsx(\"div\",{className:'ms-2',children:/*#__PURE__*/_jsx(Tree,{data:child,depth:depth})});}))]});}function HtmlTree(props){var data=Array.isArray(props.data)?props.data:[props.data];var hide=props.hide;var depth=props.depth;var setFilter=props.setFilter;return/*#__PURE__*/_jsx(\"div\",{children:data.map(function(element){if(!/*#__PURE__*/React.isValidElement(element))return/*#__PURE__*/_jsx(_Fragment,{});var children=Array.isArray(element.props.children)?element.props.children:[element.props.children];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:'d-flex',children:[/*#__PURE__*/_jsx(\"button\",{className:'btn',onClick:setFilter,children:children.length>0&&hide?/*#__PURE__*/_jsx(\"i\",{className:'bi bi-chevron-up'}):/*#__PURE__*/_jsx(\"i\",{className:'bi bi-chevron-down'})}),/*#__PURE__*/_jsx(\"label\",{className:'ms-1 my-auto',children:element.props['label']?element.props['label']:'unnamed'})]}),!hide&&children.map(function(child){if(!/*#__PURE__*/React.isValidElement(child))return/*#__PURE__*/_jsx(_Fragment,{});return/*#__PURE__*/_jsx(\"div\",{className:'ms-2',children:/*#__PURE__*/_jsx(Tree,{depth:depth,children:child})});})]});})});}Tree.cname=\"Tree\";DataTree.cname=\"DataTree\";HtmlTree.cname=\"HtmlTree\";export default Tree;","map":{"version":3,"names":["React","LNamedElement","SetRootFieldAction","U","useStateIfMounted","useEffectOnce","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Tree","props","data","children","_useStateIfMounted","_useStateIfMounted2","_slicedToArray","id","setId","depth","concat","_toConsumableArray","_useStateIfMounted3","_useStateIfMounted4","filter","applyFilter","hide","includes","getRandomString","setFilter","DataTree","HtmlTree","_data$children","_data$children2","fromPointer","click","node","new","view","modelElement","className","onClick","length","tabIndex","role","name","Array","isArray","map","child","element","isValidElement","cname"],"sources":["C:/d/Programming/web/jodel-mde/src/components/forEndUser/Tree.tsx"],"sourcesContent":["import React, {ReactNode} from \"react\";\r\nimport {GObject, LModelElement, LNamedElement, SetRootFieldAction, U} from '../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport './style.scss';\r\nimport {useEffectOnce} from \"usehooks-ts\";\r\n\r\ninterface TreeProps {data?: LModelElement, depth?: string[], children?: GObject}\r\nfunction Tree(props: TreeProps) {\r\n    const data = (props.data) ? props.data : null;\r\n    const children = props.children;\r\n    const [id, setId] = useStateIfMounted('');\r\n    const depth = (props.depth) ? [...props.depth, id] : [id];\r\n    const [filter, applyFilter] = useStateIfMounted('');\r\n    const hide = depth.includes(filter);\r\n\r\n    useEffectOnce(() => {\r\n        setId((data && data.id) ? data.id : U.getRandomString(5));\r\n    })\r\n\r\n    const setFilter = (): void => {\r\n        if(filter === id) applyFilter('');\r\n        else applyFilter(id);\r\n    }\r\n\r\n    if(data) return(<DataTree data={data} depth={depth} hide={hide} setFilter={setFilter}  />)\r\n    if(children) return(<HtmlTree data={children} hide={hide} depth={depth} setFilter={setFilter} />);\r\n    return(<></>);\r\n}\r\n\r\ninterface DataTreeProps {data: LModelElement, hide: boolean, depth: string[], setFilter: () => void}\r\nfunction DataTree(props: DataTreeProps): JSX.Element {\r\n    const hide = props.hide;\r\n    const data: LNamedElement = LNamedElement.fromPointer(props.data.id);\r\n    if(!data) return(<div>Error Data is <b>undefined</b></div>);\r\n    const depth = props.depth;\r\n    const setFilter = props.setFilter;\r\n\r\n    const click = () => {\r\n        let node = data.node;\r\n        SetRootFieldAction.new('_lastSelected', {\r\n            node: node?.id,\r\n            view: node?.view.id,\r\n            modelElement: data.id\r\n        }, '', false);\r\n    }\r\n\r\n    return(<div>\r\n        <div className={'d-flex tree'}>\r\n            <button className={'btn'} onClick={setFilter}>\r\n                {(data.children?.length > 0 && hide) ? <i className={'bi bi-chevron-up'} /> : <i className={'bi bi-chevron-down'} />}\r\n            </button>\r\n            <label className={data.className + ' ms-1 text-capitalize my-auto'}>\r\n                <b>{data.className}</b>:\r\n            </label>\r\n            <label tabIndex={-1} role={'button'} onClick={click} className={'name ms-1 my-auto'}>\r\n                {(data.name) ? data.name : 'unnamed'}\r\n            </label>\r\n        </div>\r\n        {!hide && Array.isArray(data.children) && data.children?.map((child: LModelElement) => {\r\n            return(<div className={'ms-2'}>\r\n                <Tree data={child} depth={depth} />\r\n            </div>);\r\n        })}\r\n    </div>);\r\n}\r\n\r\ninterface HtmlTreeProps {data: GObject, hide: boolean, depth: string[], setFilter: () => void}\r\nfunction HtmlTree(props: HtmlTreeProps) {\r\n    const data: (string|ReactNode)[] = (Array.isArray(props.data)) ? props.data : [props.data];\r\n    const hide = props.hide;\r\n    const depth = props.depth;\r\n    const setFilter = props.setFilter;\r\n\r\n    return(<div>\r\n        {data.map((element: string|ReactNode) => {\r\n            if(!React.isValidElement(element)) return(<></>);\r\n            const children: (string|ReactNode)[] = (Array.isArray(element.props.children)) ? element.props.children: [element.props.children];\r\n            return(<>\r\n                <div className={'d-flex'}>\r\n                    <button className={'btn'} onClick={setFilter}>\r\n                        {(children.length > 0 && hide) ? <i className={'bi bi-chevron-up'} /> : <i className={'bi bi-chevron-down'} />}\r\n                    </button>\r\n                    <label className={'ms-1 my-auto'}>\r\n                        {element.props['label'] ? element.props['label'] : 'unnamed'}\r\n                    </label>\r\n                </div>\r\n                {!hide && children.map((child) => {\r\n                    if(!React.isValidElement(child)) return(<></>);\r\n                    return(<div className={'ms-2'}>\r\n                        <Tree depth={depth}>\r\n                            {child}\r\n                        </Tree>\r\n                    </div>);\r\n                })}\r\n            </>);\r\n        })}\r\n    </div>);\r\n}\r\n\r\nTree.cname = \"Tree\";\r\nDataTree.cname = \"DataTree\";\r\nHtmlTree.cname = \"HtmlTree\";\r\nexport default Tree;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}