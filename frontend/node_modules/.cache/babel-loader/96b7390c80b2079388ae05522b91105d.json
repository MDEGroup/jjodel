{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _get from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _dec,_class,_class2,_dec2,_class3,_dec3,_class4,_class5,_dec4,_class6,_class7,_dec5,_class8,_class9,_dec6,_class10,_dec7,_class12,_class13,_dec8,_class14,_class15,_dec9,_class16,_class17,_dec10,_class18,_class19,_dec11,_class20,_class21,_dec12,_class22,_class23,_dec13,_class24,_class25,_dec14,_class26,_class27,_dec15,_class28,_class29,_dec16,_class30,_class31,_dec17,_class32,_class33,_dec18,_class34,_class35,_dec19,_class36,_class37,_dec20,_class38,_class39,_dec21,_class40,_class41,_dec22,_class42,_class43,_dec23,_class44,_class45,_dec24,_class46,_class47,_dec25,_class48,_class49,_dec26,_class50,_class51,_dec27,_class52,_class53,_dec28,_class54,_class55,_dec29,_class56,_class57,_dec30,_class58,_class59,_dec31,_class60,_class61,_dec32,_class62,_class63,_dec33,_class64,_dec34,_class66,_dec35,_class68,_class69,_dec36,_class70,_dec37,_class72,_class73,_dec38,_class74,_class75,_dec39,_class76,_class77,_dec40,_class78,_dec41,_class79,_class80,_dec42,_class81,_class82,_dec43,_class83,_class84,_dec44,_class85,_class86,_dec45,_class87,_class88,_dec46,_class89,_class90;import{Abstract,BEGIN,Constructors,Debug,DPointerTargetable,END,Instantiable,Leaf,Log,LPointerTargetable,Node,PointedBy,Pointers,RuntimeAccessible,RuntimeAccessibleClass,Selectors,SetFieldAction,SetRootFieldAction,ShortAttribETypes,ShortAttribSuperTypes,store,TargetableProxyHandler,TRANSACTION,U}from\"../../joiner\";import{AccessModifier,ECoreAnnotation,ECoreAttribute,ECoreClass,ECoreEnum,EcoreLiteral,ECoreOperation,ECorePackage,EcoreParser,ECoreReference,ECoreRoot}from\"../../api/data\";import{transientProperties}from\"../../joiner/classes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var DModelElement=(_dec=RuntimeAccessible('DModelElement'),Node(_class=_dec(_class=(_class2=/*#__PURE__*/function(_DPointerTargetable){_inherits(DModelElement,_DPointerTargetable);var _super=_createSuper(DModelElement);function DModelElement(){var _this;_classCallCheck(this,DModelElement);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.id=void 0;_this.parent=[];_this.father=void 0;_this.annotations=[];return _this;}// static _super = DPointerTargetable;\n// static logic: typeof LModelElement;\n// static structure: typeof DModelElement;\n// static singleton: LModelElement;\n_createClass(DModelElement,null,[{key:\"new\",value:function _new(){Log.exx(\"DModelElement is abstract, cannot instantiate\");return null;//return new Constructors(new DModelElement('dwc')).DPointerTargetable().DModelElement().end();\n}},{key:\"new3\",value:function new3(){Log.exx(\"DModelElement is abstract, cannot instantiate\");return null;}}]);return DModelElement;}(DPointerTargetable),_class2.subclasses=[],_class2._extends=[],_class2))||_class)||_class);export var DAnnotationDetail=(_dec2=RuntimeAccessible('DAnnotationDetail'),Leaf(_class3=_dec2(_class3=/*#__PURE__*/function(_DPointerTargetable2){_inherits(DAnnotationDetail,_DPointerTargetable2);var _super2=_createSuper(DAnnotationDetail);function DAnnotationDetail(){_classCallCheck(this,DAnnotationDetail);return _super2.apply(this,arguments);}return DAnnotationDetail;}(DPointerTargetable))||_class3)||_class3);export var LModelElement=(_dec3=RuntimeAccessible('LModelElement'),Abstract(_class4=_dec3(_class4=(_class5=/*#__PURE__*/function(_LPointerTargetable){_inherits(LModelElement,_LPointerTargetable);var _super3=_createSuper(LModelElement);function LModelElement(){var _this2;_classCallCheck(this,LModelElement);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super3.call.apply(_super3,[this].concat(args));_this2.__raw=void 0;_this2.id=void 0;_this2.parent=void 0;_this2.father=void 0;_this2.__info_of__father={type:\"LModelElement\",txt:\"<a href=\\\"https://github.com/DamianoNaraku/jodel-react/wiki/LModelElement\\\"><span>The element containing this object.</span></a>\"};_this2.fatherList=void 0;_this2.annotations=void 0;_this2.children=void 0;_this2.__info_of_children__={type:\"LModelElement[]\",txt:/*#__PURE__*/_jsx(\"div\",{children:\"Merging of all the subelement collections (attributes, references, parameters...) except annotations\"})};_this2.nodes=void 0;_this2.node=void 0;_this2.model=void 0;_this2.package=void 0;_this2.class=void 0;_this2.enum=void 0;_this2.operation=void 0;_this2.subNodes=void 0;_this2.property=void 0;_this2.containers=void 0;_this2.name=void 0;_this2.isM1=void 0;_this2.__info_of__isM1={type:'()=>boolean',txt:/*#__PURE__*/_jsx(\"div\",{children:\"Whether the element belong to the metamodel or the model.\"})};_this2.isM2=void 0;_this2.__info_of__isM2={type:'()=>boolean',txt:/*#__PURE__*/_jsx(\"div\",{children:\"Whether the element belong to the metamodel or the model.\"})};_this2.isInstantiable=void 0;_this2.__info_of__isInstantiable={type:'()=>boolean',txt:/*#__PURE__*/_jsx(\"div\",{children:\"Whether the element can produce an instance in the model.\"})};_this2.childNames=void 0;_this2.__info_of__childNames={type:\"(json: object, instanceof?: LClass) => LObject\",txt:\"Array containing the names of all children subelements.\"};return _this2;}// extends Mixin(DModelElement0, LPointerTargetable)\n// static logic: typeof LModelElement;\n// static structure: typeof DModelElement;\n// static singleton: LModelElement;\n/*static ResolvePointer = resolvePointerFunction;\r\n    private static ResolvePointers? = resolvePointersFunction;\r\n    private resolvePointer<T extends DPointerTargetable = DPointerTargetable, LB extends number = 0, UB extends number = 0, RET extends LPointerTargetable = LPointerTargetable>(ptr: Pointer<T, LB, UB, RET>): RET | null {\r\n        return LModelElement.ResolvePointer(ptr); }\r\n    private resolvePointers<T extends DPointerTargetable = DPointerTargetable, LB extends number = 0, RET extends LPointerTargetable = LPointerTargetable>(ptr: Pointer<T, LB, 'N', RET>)\r\n        : (RET | null)[] { return resolvePointersFunction(ptr); }\r\n    */ // annotations can be children of everything. except them fathers are: Model, Package, Classifier(class+enum), Operation\n// chain of fathers going up recursively\n// utilities to go up in the tree (singular names)\n// utility, follow father chain until get a Model parent or null\n// list of fathers until the model is reached.\n_createClass(LModelElement,[{key:\"_defaultSetter\",value:// protected _defaultGetter(c: Context, k: keyof Context[\"data\"]): any {}\n// this one must return true or the js engine throws an exception\nfunction _defaultSetter(val,c,k){this._setterFor$stuff_canReturnFalse(val,c,k);return true;}// this one must be able to return false because is called by DObject and DValue default setters and return type is checked\n},{key:\"_setterFor$stuff_canReturnFalse\",value:function _setterFor$stuff_canReturnFalse(val,c,k){if(![\"@\",\"$\"].includes(k[0]))return false;var target=c.proxyObject[k];if(!target)return false;var l;var tClassName=target.className;// messanger classNames (pass it to next sublevel)\nnavigationloop:while(true){switch(tClassName){default:break navigationloop;case DPackage.cname:case DClass.cname:case DEnumerator.cname:case DObject.cname:target=target.children[0];continue navigationloop;}}// actiong classNames\nswitch(tClassName){default:Log.ex(\"default setter not supported for model element: \"+c.data.className,{c:c,k:k,val:val,target:target});return false;case DEnumLiteral.cname:l=target;switch(typeof val){default:return false;case\"string\":l.literal=val;return true;case\"number\":l.ordinal=val;return true;}return false;case DValue.cname:// makes object.$x = 1      be equivalent to object.$x.value = 1 (or values if is arr)\nl=target;l.values=val;return true;}}// Dstrudturalfeature in shapeless obj??\n},{key:\"get_isM1\",value:function get_isM1(c){// NB: if called with \"abstract classes\" like DModelElement, DTypedElement... responds they are in m2\nreturn function(){return!c.data.isMetamodel&&LModelElement.M1Classes.includes(c.data.className);};}},{key:\"get_isM2\",value:function get_isM2(c){var _this3=this;return function(){return!_this3.get_isM1(c);};}},{key:\"get_isInstantiable\",value:function get_isInstantiable(c){return function(){return LModelElement.M2InstantiableClasses.includes(c.data.className);};}},{key:\"get_childNames\",value:function get_childNames(c){return this.get_children(c).map(function(c){return c.name;}).filter(function(c){return!!c;});}},{key:\"generateEcoreJson\",value:function generateEcoreJson(){var loopDetectionloopDetectionObj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};throw new Error(\"cannot be called directly, should trigger getter. this is only for correct signature\");}},{key:\"get_generateEcoreJson\",value:function get_generateEcoreJson(context){var _this4=this;return function(loopdetectionobj){return _this4.generateEcoreJson_impl(context,loopdetectionobj);};}},{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context,loopDetectionObj){return Log.exDevv(\"generateEcoreJson() should be overridden\",context);}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate() class is abstract\");}},{key:\"addAnnotation\",value:function addAnnotation(source,details){return this.cannotCall(\"addAnnotation\");}},{key:\"get_addAnnotation\",value:function get_addAnnotation(context){return function(source,details){return DAnnotation.new(source,details,context.data.id,true);};}},{key:\"set_containers\",value:function set_containers(){return this.cannotSet('containers');}},{key:\"get_containers\",value:function get_containers(context){var thiss=context.proxyObject;var ret=[thiss];while(true){thiss=thiss.father;if(!thiss)break;ret.push(thiss);}return ret;}},{key:\"get_namespace\",value:function get_namespace(context){throw new Error(\"?? get namespace ?? todo\");return\"\";}},{key:\"get_subNodes\",value:function get_subNodes(context){var includingthis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var lclass=context.proxyObject;var $class=$('[data-dataid=\"'+context.data.id+'\"]');var $subnodes=$class.find('[data-nodeid]');function mapfunc(){return this.dataset.nodeid;}var nodehtmlarr=$subnodes.toArray();if(includingthis)nodehtmlarr.push($class[0]);var nodeidarr=nodehtmlarr.map(function(html){return html.dataset.nodeid;});var state=store.getState();var dnodes=nodeidarr.map(function(id){return state.idlookup[id];}).filter(function(d){return!!d;});return dnodes.map(function(d){return LPointerTargetable.wrap(d);});}// name -> redux (es. DClass -> classs)\n},{key:\"get_property\",value:function get_property(context){return(context.data.className.substring(1)+\"s\").toLowerCase();}},{key:\"targetRemoved\",value:function targetRemoved(context,field){context.proxyObject.delete();}},{key:\"get_fatherList\",value:function get_fatherList(context){var ret=[context.proxyObject];var loopdetection={};loopdetection[context.data.id]=true;var current=this.get_father(context);while(current){if(loopdetection[current.id]){console.error(\"found loop\",{loopdetection:loopdetection,ret:ret,current:current});return ret;}loopdetection[current.id]=true;ret.push(current);current=current.father;}return ret;}// @ts-ignore\n},{key:\"get_until_parent\",value:function get_until_parent(l,d,father){while(true){var _l;// console.log('get_until_parent', {l, d, father}, {dname: d.className, fname: father.name});\nif(d.className===(father.cname||father.name))return l;l=l.father;var oldd=d;d=(_l=l)===null||_l===void 0?void 0:_l.__raw;if(oldd===d||!l)return null;// reached end of father chain (a model) without finding the desired parent.\n}}},{key:\"get_nodes\",value:function get_nodes(context){var _transientProperties$;return Object.values(((_transientProperties$=transientProperties.modelElement[context.data.id])===null||_transientProperties$===void 0?void 0:_transientProperties$.nodes)||{});/*\r\n        const nodes: LGraphElement[] = [];\r\n        const nodeElements = $('[data-dataid=\"' + context.data.id + '\"]'); nope, this must become more efficient. when node is created set action to update data.nodes array? or to update a transient property (better)\r\n        for (let nodeElement of nodeElements) {\r\n            const nodeId = nodeElement.id;\r\n            if (nodeId) {\r\n                const lNode: LGraphElement | undefined = LPointerTargetable.wrap(nodeId);\r\n                if (lNode) nodes.push(lNode);\r\n            }\r\n        }\r\n        return nodes;*/}},{key:\"get_node\",value:function get_node(context){var _transientProperties$2;return(_transientProperties$2=transientProperties.modelElement[context.data.id])===null||_transientProperties$2===void 0?void 0:_transientProperties$2.node;// const nodes = context.proxyObject.nodes;\n// return nodes.filter( n => n.favoriteNode)[0] || nodes[0];\n}/*\r\n    protected get_nodes(context: Context): this[\"nodes\"] {\r\n        return context.data.nodes.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_nodes(val: PackArr<this[\"nodes\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'nodes', list);\r\n        return true;\r\n    }\r\n    */},{key:\"get_model\",value:function get_model(context){return this.get_until_parent(context.proxyObject,context.data,DModel);}},{key:\"get_package\",value:function get_package(context){return this.get_until_parent(context.proxyObject,context.data,DPackage);}},{key:\"get_class\",value:function get_class(context){return this.get_until_parent(context.proxyObject,context.data,DClass);}// todo: might be better for pergormance to erase this universal method and add implementations to every single L-class counting the correct amount of \"father\" navigations for each ( attrib to package? use attrib.father.father)\n},{key:\"get_operation\",value:function get_operation(context){return this.get_until_parent(context.proxyObject,context.data,DOperation);}},{key:\"get_enum\",value:function get_enum(context){return this.get_until_parent(context.proxyObject,context.data,DEnumerator);}},{key:\"get_father\",value:function get_father(context){return LPointerTargetable.from(context.data.father);}},{key:\"get_children_idlist\",value:function get_children_idlist(context){// LPackage | LClassifier | LTypedElement | LAnnotation | LEnumLiteral | LParameter | LStructuralFeature | LOperation\nreturn context.data.annotations?_toConsumableArray(context.data.annotations):[];}},{key:\"get_children\",value:function get_children(context){// return this.get_children_idlist(context).map(e => LPointerTargetable.from(e));\nreturn LPointerTargetable.from(this.get_children_idlist(context));}},{key:\"set_children\",value:function set_children(a,context){return Log.exx('children is a derived read-only collection',context.data);}},{key:\"add_parent\",value:function add_parent(val,logicContext){// todo: when will be used?\nvar ptr=Pointers.from(val);return SetFieldAction.new(logicContext.data,'parent',ptr,'+=',true);// todo: need to update children of the old and new parents\n}},{key:\"remove_parent\",value:function remove_parent(logicContext){// todo: perchè senza bersaglio? perchè sempre elimina tutti?\nreturn SetFieldAction.new(logicContext.data,'parent',[],'',true);}},{key:\"get_parent\",value:function get_parent(context){return LPointerTargetable.from(context.data.id);}},{key:\"set_parent\",value:function set_parent(val,context){// val: Pack<DModelElement>\nvar ptrs=Pointers.from(val);SetFieldAction.new(context.data,'father',(ptrs===null||ptrs===void 0?void 0:ptrs[0])||ptrs,'',true);return SetFieldAction.new(context.data,'parent',ptrs,'',true);}},{key:\"add_annotation\",value:function add_annotation(val,context){var ptrs=Pointers.from(val);return SetFieldAction.new(context.data,'annotations',ptrs,'+=',true);}},{key:\"remove_annotation\",value:function remove_annotation(val,context){// todo: when this will be ever used? this should be triggered by LObject but only get_ / set_ and delete of whole elements should be triggerable.\n//todo: remove as any\nvar ptrs=Pointers.from(val);var indexes=ptrs.map(function(ptr){return context.data.annotations.indexOf(ptr);}).filter(function(p){return p>=0;});return SetFieldAction.new(context.data,'annotations',indexes,'-=',true);}},{key:\"get_annotations\",value:function get_annotations(context){return LPointerTargetable.fromPointer(context.data.annotations);}},{key:\"set_annotations\",value:function set_annotations(val,context){//  if (!Array.isArray(val)) val = [val];\n//         val = val.map( v => (v instanceof LAnnotation ? v.id : ( Pointers.filterValid(v) ? v : null ))) as Pointer<DAnnotation>[];\nvar ptrs=Pointers.from(val);SetFieldAction.new(context.data,'annotations',ptrs,'',true);return true;}},{key:\"get_addChild\",value:function get_addChild(c){var _this5=this;// just for add new, not for add pre-existing.\nreturn function(type){var _ref,_this5$get_class,_this5$get_class2,_this5$get_enum,_this5$get_class3,_this5$get_operation;var ret;if(!type||type===\"auto\"){switch(c.data.className){case DModel.cname:if(c.data.isMetamodel)type=\"package\";else type=\"object\";break;case DObject.cname:type=\"value\";break;case DPackage.cname:type=\"package\";break;case DClass.cname:type=\"attribute\";break;case DEnumerator.cname:type=\"literal\";break;case DOperation.cname:type=\"parameter\";break;default:type=\"annotation\";break;}}var fatherElement;switch(type.toLowerCase()){default:Log.ee('cannot find children type requested to add:',{type:(type||'').toLowerCase(),c:c});ret=function ret(){return undefined;};break;case\"package\":ret=(_ref=_this5.get_package(c)||_this5.get_model(c))===null||_ref===void 0?void 0:_ref.addPackage;break;case\"class\":// let current = c.proxyObject;\nfatherElement=_this5.get_package(c);if(!fatherElement){var model=_this5.get_model(c);fatherElement=model.packages[0];if(!fatherElement)fatherElement=model.addPackage();}ret=fatherElement.addClass;//ret = (this as any).get_addClass(context as any);\nbreak;case\"enum\":case\"enumerator\":fatherElement=_this5.get_package(c);if(!fatherElement){var _model=_this5.get_model(c);fatherElement=_model.packages[0];if(!fatherElement)fatherElement=_model.addPackage();}ret=fatherElement.addEnumerator;break;case\"attribute\":ret=(_this5$get_class=_this5.get_class(c))===null||_this5$get_class===void 0?void 0:_this5$get_class.addAttribute;break;case\"reference\":ret=(_this5$get_class2=_this5.get_class(c))===null||_this5$get_class2===void 0?void 0:_this5$get_class2.addReference;break;case\"literal\":ret=(_this5$get_enum=_this5.get_enum(c))===null||_this5$get_enum===void 0?void 0:_this5$get_enum.addLiteral;break;case\"operation\":ret=(_this5$get_class3=_this5.get_class(c))===null||_this5$get_class3===void 0?void 0:_this5$get_class3.addOperation;break;case\"parameter\":ret=(_this5$get_operation=_this5.get_operation(c))===null||_this5$get_operation===void 0?void 0:_this5$get_operation.addParameter;break;case\"object\":if(c.data.className===\"DValue\"){ret=_this5.get_addObject(c);}else{ret=_this5.get_model(c).addObject;}//case \"exception\": ret = ((exception: Pack1<LClassifier>) => { let rett = this.get_addException(context as any); rett(exception); }) as any; break;\n/*case \"exception\": exceptions should not be \"added\" here, this is for creating objects. exceptions are not created but just linked. they are classes.\r\n                    ret = (this as any).get_addException(c as any);\r\n                    break; */}for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3];}return ret?ret.apply(void 0,args):null;};}},{key:\"get_addException\",value:function get_addException(context){var _context$data;var ret=function ret(){};var dOperation=((_context$data=context.data)===null||_context$data===void 0?void 0:_context$data.className)===\"DOperation\"?context.data:null;if(dOperation){var dClass=DPointerTargetable.from(dOperation.father);ret=function ret(){SetFieldAction.new(dOperation,\"exceptions\",dClass.id,'+=',true);};}ret();return ret;}// activated by user in JSX\n// todo: this.wrongAccessMessage(\"addClass\");\n},{key:\"cannotCall\",value:function cannotCall(name){for(var _len4=arguments.length,params=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){params[_key4-1]=arguments[_key4];}Log.exDevv(name+' should never be called directly, but should trigger get_'+name+'('+params.join(', ')+'), this is only a signature for type checking.');}},{key:\"addClass\",value:function addClass(){this.cannotCall('addClass');}},{key:\"addAttribute\",value:function addAttribute(){this.cannotCall('addAttribute');}},{key:\"addReference\",value:function addReference(){this.cannotCall('addReference');}},{key:\"addEnumerator\",value:function addEnumerator(){this.cannotCall('addEnumerator');}},{key:\"addParameter\",value:function addParameter(){this.cannotCall('addParameter');}// chiedere al prof: cosa può lanciato come eccezione: se tutte le classi o se solo quelle che estendono Exception\n},{key:\"addException\",value:function addException(exception){throw this.wrongAccessMessage(\"AddException\");}},{key:\"addChild\",value:function addChild(type){return this.cannotCall('addChild',type);}}]);return LModelElement;}(LPointerTargetable),_class5.subclasses=[],_class5._extends=[],_class5.M1Classes=['DModel','DObject','DValue'],_class5.AbstractClasses=['DModelElement','DNamedElement','...'],_class5.M2InstantiableClasses=['DModel','DOperation','DClass','DReference','DAttribute'],_class5))||_class4)||_class4);/*function isValidPointer<T extends DPointerTargetable = DModelElement, LB extends number = 0, UB extends number = 1, RET extends LPointerTargetable = LModelElement>\r\n(p: Pointer<T, LB, UB, RET>, constraintType?: typeof DPointerTargetable): boolean {\r\n    const pointerval: RET | null = LModelElement.ResolvePointer(p);\r\n    if (!pointerval) return false;\r\n    if (!constraintType) return true;\r\n    return (pointerval instanceof constraintType); }*/ /* todo:\r\nnel proxy aggiungi regola di default, se prendi qualcosa che inizia con \"set_X\" esplicitamente (dovrebbe farlo solo il dev)\r\nrichiama _set_X(context, ...params)     <---- nuova funzione set di default, anche this.x = x richiama _set_x\r\n\r\nil dev specifica set_x come public di sola firma senza implementazione (throw exception) e senza context\r\nil dev specifica _set_x come implementazione private\r\n\r\nper la get esiste solo _get_x, non \"get_x\"\r\n\r\n todo2: aggiungi readonly a tutti i campi L per non sbagliarsi e fare in modo che il dev usi sempre i \"set_\" che sono correttamente tipizzati\r\n*\r\n* */ /*todo:\r\n* for every feature X: typed L, in CLASS_L0 with a side effects when they are edited (like need to update other data for consistency)\r\n*\r\n* dev will use this\r\n* protected set_X(val: D | L | Pointer<D> ) { throw new Error(\"set_X should never be executed, the proxy should redirect to get_set_X.\"); }\r\n* protected get_set_X( val: D | L | Pointer<D>, otherparams, ContextD>) { throw new Error(\"set_X should never be executed, the proxy should redirect to get_set_X.\"); }\r\n*\r\n*\r\n* */ // export type WModelElement = DModelElement | LModelElement | _WModelElement;\nRuntimeAccessibleClass.set_extend(DPointerTargetable,DModelElement);RuntimeAccessibleClass.set_extend(DPointerTargetable,LModelElement);export var DAnnotation=(_dec4=RuntimeAccessible('DAnnotation'),Leaf(_class6=_dec4(_class6=(_class7=/*#__PURE__*/function(_DModelElement){_inherits(DAnnotation,_DModelElement);var _super4=_createSuper(DAnnotation);function DAnnotation(){var _this6;_classCallCheck(this,DAnnotation);for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}_this6=_super4.call.apply(_super4,[this].concat(args));_this6.id=void 0;_this6.parent=[];_this6.father=void 0;_this6.annotations=[];_this6.source=void 0;_this6.details=void 0;return _this6;}// extends Mixin(DAnnotation0, DModelElement)\n// static singleton: LAnnotation;\n// static logic: typeof LAnnotation;\n// static structure: typeof DAnnotation;\n// inherit redefine\n// personal\n_createClass(DAnnotation,null,[{key:\"new\",value://Dictionary<string, string>;\nfunction _new(source,details,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;// if (!name) name = this.defaultname(\"annotation \", father);\nreturn new Constructors(new DAnnotation('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DAnnotation(source,details).end();}}]);return DAnnotation;}(DModelElement),_class7.subclasses=[],_class7._extends=[],_class7))||_class6)||_class6);export var LAnnotation=(_dec5=RuntimeAccessible('LAnnotation'),Node(_class8=_dec5(_class8=(_class9=/*#__PURE__*/function(_LModelElement){_inherits(LAnnotation,_LModelElement);var _super5=_createSuper(LAnnotation);function LAnnotation(){var _this7;_classCallCheck(this,LAnnotation);for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6];}_this7=_super5.call.apply(_super5,[this].concat(args));_this7.__namee=\"LAnnotation\";_this7.__raw=void 0;_this7.id=void 0;_this7.parent=void 0;_this7.father=void 0;_this7.annotations=void 0;_this7.source=void 0;_this7.details=void 0;return _this7;}// Mixin(DAnnotation0, LModelElement)\n// @ts-ignore\n// static singleton: LAnnotation;\n// static logic: typeof LAnnotation;\n// static structure: typeof DAnnotation;\n// inherit redefine\n// personal\n_createClass(LAnnotation,[{key:\"generateEcoreJson_impl\",value:// Dictionary<string, string> = {};\nfunction generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};EcoreParser.write(json,ECoreAnnotation.source,context.data.source);// EcoreParser.write(json, ECoreAnnotation.references, context.proxyObject.referencesStr);\nEcoreParser.write(json,ECoreAnnotation.details,context.proxyObject.details.map(function(d){return d.generateEcoreJson(loopDetectionObj);}));return json;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var de=context.proxyObject.father.addAnnotation(context.data.source,deep?context.proxyObject.details.map(function(ldet){return ldet.duplicate().__raw;}):context.data.details);var le=LPointerTargetable.fromD(de);var we=le;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;END();return le;};}},{key:\"get_source\",value:function get_source(context){return context.data.source;}},{key:\"set_source\",value:function set_source(val,context){SetFieldAction.new(context.data,'source',val,'',false);return true;}},{key:\"get_details\",value:function get_details(context){return TargetableProxyHandler.wrapAll(context.data.details);}},{key:\"set_details\",value:function set_details(val,context){SetFieldAction.new(context.data,'details',val);return true;}}]);return LAnnotation;}(LModelElement),_class9.subclasses=[],_class9._extends=[],_class9))||_class8)||_class8);RuntimeAccessibleClass.set_extend(DModelElement,DAnnotation);RuntimeAccessibleClass.set_extend(LModelElement,LAnnotation);export var LAnnotationDetail=(_dec6=RuntimeAccessible('LAnnotationDetail'),Leaf(_class10=_dec6(_class10=/*#__PURE__*/function(_LModelElement2){_inherits(LAnnotationDetail,_LModelElement2);var _super6=_createSuper(LAnnotationDetail);function LAnnotationDetail(){var _this8;_classCallCheck(this,LAnnotationDetail);for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++){args[_key7]=arguments[_key7];}_this8=_super6.call.apply(_super6,[this].concat(args));_this8.father=void 0;return _this8;}// todo\n_createClass(LAnnotationDetail,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// loopDetectionObj[context.data.id] = context.data;\nvar json={};// if (context.data.name !== null) EcoreParser.write(json, ECoreDetail.key, context.data.name);\n// if (context.data.value !== null) EcoreParser.write(json, ECoreDetail.value, context.data.value);\nreturn json;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){var _this9=this;Log.exDevv(\"LAnnotationDetail.getDuplicate(): todo\");return function(){return _this9;};// return (deep: boolean = false) => (context.proxyObject as LAnnotationDetail).father.addAnnotationDetail( {...context.data._subMaps})\n}}]);return LAnnotationDetail;}(LModelElement))||_class10)||_class10);RuntimeAccessibleClass.set_extend(DModelElement,DAnnotationDetail);RuntimeAccessibleClass.set_extend(LModelElement,LAnnotationDetail);export var DNamedElement=(_dec7=RuntimeAccessible('DNamedElement'),Node(_class12=_dec7(_class12=(_class13=/*#__PURE__*/function(_DPointerTargetable3){_inherits(DNamedElement,_DPointerTargetable3);var _super7=_createSuper(DNamedElement);function DNamedElement(){var _this10;_classCallCheck(this,DNamedElement);for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++){args[_key8]=arguments[_key8];}_this10=_super7.call.apply(_super7,[this].concat(args));_this10.id=void 0;_this10.parent=[];_this10.father=void 0;_this10.annotations=[];_this10.name=void 0;return _this10;}// Mixin(DNamedElement0, DAnnotation)\n// static _super = DAnnotation;\n// static singleton: LNamedElement;\n// static logic: typeof LNamedElement;\n// static structure: typeof DNamedElement;\n// inherit redefine\n// personal\n_createClass(DNamedElement,null,[{key:\"new\",value:function _new(name){Log.exx(\"DNamedElement is abstract, cannot instantiate\");return null;// return new Constructors(new DNamedElement('dwc')).DPointerTargetable().DModelElement().DNamedElement(name).end();\n}}]);return DNamedElement;}(DPointerTargetable),_class13.subclasses=[],_class13._extends=[],_class13))||_class12)||_class12);export var LNamedElement=(_dec8=RuntimeAccessible('LNamedElement'),Abstract(_class14=_dec8(_class14=(_class15=/*#__PURE__*/function(_LModelElement3){_inherits(LNamedElement,_LModelElement3);var _super8=_createSuper(LNamedElement);function LNamedElement(){var _this11;_classCallCheck(this,LNamedElement);for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9];}_this11=_super8.call.apply(_super8,[this].concat(args));_this11.id=void 0;_this11.parent=void 0;_this11.father=void 0;_this11.annotations=void 0;_this11.name=void 0;_this11.namespace=void 0;_this11.fullname=void 0;return _this11;}// Mixin(DNamedElement0, DAnnotation)\n// public __raw!: DNamedElement;\n// static singleton: LNamedElement;\n// static logic: typeof LNamedElement;\n// static structure: typeof DNamedElement;\n// inherit redefine\n// personal\n_createClass(LNamedElement,[{key:\"set_containers\",value:function set_containers(){return this.cannotSet('containers');}},{key:\"get_containers\",value:function get_containers(context){var thiss=context.proxyObject;var ret=[thiss];while(true){thiss=thiss.father;if(!thiss)break;ret.push(thiss);}return ret;}// protected get_namespace(context: Context): string { throw new Error(\"?? get namespace ?? todo\"); return \"\"; }\n},{key:\"get_fullname\",value:function get_fullname(context){var containers=this.get_containers(context);var fullname=containers.reverse().slice(1,containers.length).map(function(c){return c.name;}).join('.');return fullname;}},{key:\"get_name\",value:function get_name(context){return context.data.name;}},{key:\"set_name\",value:function set_name(val,context){var name=val;var father=context.proxyObject.father;if(father){var check=father.children.filter(function(child){return DNamedElement.fromPointer(child.id).name===name;});if(check.length>0){U.alert('error','Cannot rename the selected element since this name is already taken.');return true;}}SetFieldAction.new(context.data,'name',name,'',false);return true;/*\r\n        // this autofix removes spaces with _\r\n        if (val.match(/\\s/)) val = this._autofix_name(val, context);\r\n        // todo: validate if operation can be completed or need autocorrection, then either return false (invalid parameter cannot complete) or send newVal at redux\r\n        const fixedVal: string = val;\r\n        SetFieldAction.new(context.data, 'name', fixedVal, '', false);\r\n        return true;\r\n        */}},{key:\"_autofix_name\",value:function _autofix_name(val,context){// NB: NON fare autofix di univocità nome tra i children o qualsiasi cosa dipendente dal contesto, questo potrebbe essere valido in alcuni modelli e invalido in altri e modificare un oggetto condiviso.\nreturn val.replaceAll(/\\s/g,'_');}},{key:\"get_autofix_name\",value:function get_autofix_name(val,context){var _this12=this;return function(val){return _this12._autofix_name(val,context);};}},{key:\"autofix_name\",value:function autofix_name(val){return this.wrongAccessMessage(\"autofix_name\");}}]);return LNamedElement;}(LModelElement),_class15.subclasses=[],_class15._extends=[],_class15))||_class14)||_class14);// export type WNamedElement = DNamedElement | LNamedElement | _WNamedElement;\nRuntimeAccessibleClass.set_extend(DModelElement,DNamedElement);RuntimeAccessibleClass.set_extend(LModelElement,LNamedElement);export var DTypedElement=(_dec9=RuntimeAccessible('DTypedElement'),_dec9(_class16=(_class17=/*#__PURE__*/function(_DPointerTargetable4){_inherits(DTypedElement,_DPointerTargetable4);var _super9=_createSuper(DTypedElement);function DTypedElement(){var _this13;_classCallCheck(this,DTypedElement);for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++){args[_key10]=arguments[_key10];}_this13=_super9.call.apply(_super9,[this].concat(args));_this13.id=void 0;_this13.annotations=[];_this13.parent=[];_this13.father=void 0;_this13.name=void 0;_this13.instances=void 0;_this13.type=void 0;_this13.ordered=true;_this13.unique=true;_this13.lowerBound=0;_this13.upperBound=1;_this13.many=void 0;_this13.required=void 0;return _this13;}// Mixin(DTypedElement0, DNamedElement)\n// static singleton: LTypedElement;\n// static logic: typeof LTypedElement;\n// static structure: typeof DTypedElement;\n// inherit redefine\n// personal\n// ?\n_createClass(DTypedElement,null,[{key:\"new\",value:// ?\nfunction _new(name,type,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;Log.exx(\"DTypedElement is abstract, cannot instantiate\");return null;//return new Constructors(new DTypedElement('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).end();\n}}]);return DTypedElement;}(DPointerTargetable),_class17.subclasses=[],_class17._extends=[],_class17))||_class16);export var LTypedElement=(_dec10=RuntimeAccessible('LTypedElement'),Abstract(_class18=_dec10(_class18=(_class19=/*#__PURE__*/function(_LNamedElement){_inherits(LTypedElement,_LNamedElement);var _super10=_createSuper(LTypedElement);function LTypedElement(){var _this14;_classCallCheck(this,LTypedElement);for(var _len11=arguments.length,args=new Array(_len11),_key11=0;_key11<_len11;_key11++){args[_key11]=arguments[_key11];}_this14=_super10.call.apply(_super10,[this].concat(args));_this14.__raw=void 0;_this14.id=void 0;_this14.parent=void 0;_this14.father=void 0;_this14.annotations=void 0;_this14.name=void 0;_this14.namespace=void 0;_this14.instances=void 0;_this14.type=void 0;_this14.primitiveType=void 0;_this14.classType=void 0;_this14.enumType=void 0;_this14.ordered=void 0;_this14.unique=void 0;_this14.lowerBound=void 0;_this14.upperBound=void 0;_this14.many=void 0;_this14.required=void 0;return _this14;}// extends Mixin(DTypedElement0, LNamedElement)\n// static singleton: LTypedElement;\n// static logic: typeof LTypedElement;\n// static structure: typeof DTypedElement;\n// inherit redefine\n// personal\n_createClass(LTypedElement,[{key:\"get_classType\",value:function get_classType(context){var type=this.get_type(context);return type.isClass?type:undefined;}},{key:\"get_enumType\",value:function get_enumType(context){var type=this.get_type(context);return type.isEnum?type:undefined;}},{key:\"get_primitiveType\",value:function get_primitiveType(context){var type=this.get_type(context);return type.isPrimitive?type:undefined;}},{key:\"get_type\",value:function get_type(context){return LPointerTargetable.from(context.data.type);}},{key:\"set_type\",value:function set_type(val,context){var data=context.data;var instances=context.proxyObject.instances;SetFieldAction.new(context.data,'type',Pointers.from(val),\"\",true);return true;}},{key:\"get_ordered\",value:function get_ordered(context){return context.data.ordered;}},{key:\"set_ordered\",value:function set_ordered(val,logicContext){return SetFieldAction.new(logicContext.data,'ordered',val);}},{key:\"get_unique\",value:function get_unique(context){return context.data.unique;}},{key:\"set_unique\",value:function set_unique(val,logicContext){return SetFieldAction.new(logicContext.data,'unique',val);}},{key:\"get_lowerBound\",value:function get_lowerBound(context){return context.data.lowerBound;}},{key:\"set_lowerBound\",value:function set_lowerBound(val,context){val=+val;if(isNaN(val))val=0;else val=Math.max(0,val);SetFieldAction.new(context.data,'lowerBound',val);if(context.data.upperBound!=-1&&val>context.data.upperBound)SetFieldAction.new(context.data,'upperBound',val);return true;}},{key:\"get_upperBound\",value:function get_upperBound(context){return context.data.upperBound;}},{key:\"set_upperBound\",value:function set_upperBound(val,context){val=+val;if(isNaN(val))val=-1;else val=Math.max(-1,val);SetFieldAction.new(context.data,'upperBound',val);if(val!==-1&&val<context.data.lowerBound)SetFieldAction.new(context.data,'lowerBound',val);return true;}},{key:\"get_many\",value:function get_many(context){return context.data.many;}},{key:\"set_many\",value:function set_many(val,context){SetFieldAction.new(context.data,'many',val);return true;}},{key:\"get_required\",value:function get_required(context){return context.data.required;}},{key:\"set_required\",value:function set_required(val,context){SetFieldAction.new(context.data,'required',val);return true;}},{key:\"typeToEcoreString\",value:function typeToEcoreString(){return this.cannotCall(\"typeToEcoreString\");}},{key:\"get_typeToEcoreString\",value:function get_typeToEcoreString(context){// if (context.data.classType) return EcoreParser.classTypePrefix + context.proxyObject.classType.name;\n// if (context.data.enumType) return EcoreParser.classTypePrefix + context.proxyObject.enumType.name;\n// if (context.data.primitiveType) return context.proxyObject.primitiveType.long;\nreturn function(){return context.proxyObject.type.typeEcoreString;};}},{key:\"typeToShortString\",value:function typeToShortString(){return this.cannotCall(\"typeToShortString\");}},{key:\"get_typeToShortString\",value:function get_typeToShortString(context){// if (context.data.classType) return '' + context.data.classType.name;\n// if (context.data.enumType) return '' + context.data.enumType.name;\n// if (context.data.primitiveType) return '' + context.data.primitiveType.getName();\nreturn function(){return context.proxyObject.type.typeString;};}},{key:\"canOverride\",value:function canOverride(context,other){// i primitivi identici sono compatibili\nif(context.data.type===other.type.id)return true;var t1=context.proxyObject.type;var t2=other.type;// se entrambi primitivi\nif(context.proxyObject.primitiveType&&other.primitiveType){ShortAttribSuperTypes[t1.name].includes(other.name);}if(context.proxyObject.enumType)return t1===t2;// only if they are same enumerator\n// now assumed to be class type\nif(other.classType===other.classType)return true;return context.proxyObject.classType.isExtending(other.classType);}}]);return LTypedElement;}(LNamedElement),_class19.subclasses=[],_class19._extends=[],_class19))||_class18)||_class18);// @RuntimeAccessible('') export class _WTypedElement extends _WNamedElement { }\n// export type WTypedElement = DTypedElement | LTypedElement | _WTypedElement;\nRuntimeAccessibleClass.set_extend(DNamedElement,DTypedElement);RuntimeAccessibleClass.set_extend(LNamedElement,LTypedElement);export var DClassifier=(_dec11=RuntimeAccessible('DClassifier'),_dec11(_class20=(_class21=/*#__PURE__*/function(_DPointerTargetable5){_inherits(DClassifier,_DPointerTargetable5);var _super11=_createSuper(DClassifier);function DClassifier(){var _this15;_classCallCheck(this,DClassifier);for(var _len12=arguments.length,args=new Array(_len12),_key12=0;_key12<_len12;_key12++){args[_key12]=arguments[_key12];}_this15=_super11.call.apply(_super11,[this].concat(args));_this15.id=void 0;_this15.parent=[];_this15.father=void 0;_this15.annotations=[];_this15.name=void 0;_this15.instanceClassName=void 0;_this15.defaultValue=void 0;return _this15;}// extends DNamedElement\n// static singleton: LClassifier;\n// static logic: typeof LClassifier;\n// static structure: typeof DClassifier;\n// inherit redefine\n// personal\n// instanceClass: EJavaClass // ?\n_createClass(DClassifier,null,[{key:\"new\",value:// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\nfunction _new(name,father){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;Log.exx(\"DClassifier is abstract, cannot instantiate\");return null;// return new Constructors(new DClassifier('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DClassifier().end();\n}}]);return DClassifier;}(DPointerTargetable),_class21.subclasses=[],_class21._extends=[],_class21))||_class20);export var LClassifier=(_dec12=RuntimeAccessible('LClassifier'),Abstract(_class22=_dec12(_class22=(_class23=/*#__PURE__*/function(_LNamedElement2){_inherits(LClassifier,_LNamedElement2);var _super12=_createSuper(LClassifier);function LClassifier(){var _this16;_classCallCheck(this,LClassifier);for(var _len13=arguments.length,args=new Array(_len13),_key13=0;_key13<_len13;_key13++){args[_key13]=arguments[_key13];}_this16=_super12.call.apply(_super12,[this].concat(args));_this16.__raw=void 0;_this16.id=void 0;_this16.parent=void 0;_this16.father=void 0;_this16.annotations=void 0;_this16.name=void 0;_this16.namespace=void 0;_this16.instanceClassName=void 0;_this16.defaultValue=void 0;_this16.isPrimitive=void 0;_this16.isClass=void 0;_this16.isEnum=void 0;_this16.typeEcoreString=void 0;_this16.typeString=void 0;return _this16;}// extends DNamedElement\n// static singleton: LClassifier;\n// static logic: typeof LClassifier;\n// static structure: typeof DClassifier;\n// inherit redefine\n// personal\n// instanceClass: EJavaClass // ?\n_createClass(LClassifier,[{key:\"get_instanceClassName\",value:// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\nfunction get_instanceClassName(context){return context.data.instanceClassName;}},{key:\"set_instanceClassName\",value:function set_instanceClassName(val,context){SetFieldAction.new(context.data,'instanceClassName',val,\"\",false);return true;}},{key:\"set_isPrimitive\",value:function set_isPrimitive(val,context){return this.cannotSet(\"isPrimitive\");}},{key:\"set_isClass\",value:function set_isClass(val,context){return this.cannotSet(\"isClass\");}},{key:\"set_isEnum\",value:function set_isEnum(val,context){return this.cannotSet(\"isEnum\");}},{key:\"get_isPrimitive\",value:function get_isPrimitive(context){return!!context.data.isPrimitive;}},{key:\"get_isClass\",value:function get_isClass(context){return context.data.isPrimitive?false:context.data.className===DClass.cname;}},{key:\"get_isEnum\",value:function get_isEnum(context){return context.data.className===DEnumerator.cname;}},{key:\"set_defaultValue\",value:function set_defaultValue(val,context){if(typeof val!==\"object\"&&!Pointers.isPointer(val)){// primitive default value for enums\nSetFieldAction.new(context.data,'defaultValue',val,\"\",false);}else{SetFieldAction.new(context.data,'defaultValue',Pointers.from(val)||[],\"\",true);}return true;}},{key:\"get_typeEcoreString\",value:function get_typeEcoreString(context){return EcoreParser.classTypePrefix+context.data.name;}},{key:\"get_typeString\",value:function get_typeString(context){return context.data.name;}}]);return LClassifier;}(LNamedElement),_class23.subclasses=[],_class23._extends=[],_class23))||_class22)||_class22);// @RuntimeAccessible('') export class _WClassifier extends _WNamedElement { }\n// export type WClassifier = DClassifier | LClassifier | _WClassifier;\nRuntimeAccessibleClass.set_extend(DNamedElement,DClassifier);RuntimeAccessibleClass.set_extend(LNamedElement,LClassifier);export var DPackage=(_dec13=RuntimeAccessible('DPackage'),Leaf(_class24=_dec13(_class24=(_class25=/*#__PURE__*/function(_DPointerTargetable6){_inherits(DPackage,_DPointerTargetable6);var _super13=_createSuper(DPackage);function DPackage(){var _this17;_classCallCheck(this,DPackage);for(var _len14=arguments.length,args=new Array(_len14),_key14=0;_key14<_len14;_key14++){args[_key14]=arguments[_key14];}_this17=_super13.call.apply(_super13,[this].concat(args));_this17.id=void 0;_this17.parent=[];_this17.father=void 0;_this17.annotations=[];_this17.name=void 0;_this17.classifiers=[];_this17.subpackages=[];_this17.uri=void 0;_this17.prefix=void 0;return _this17;}// extends DNamedElement\n// static _super = DNamedElement;\n// static singleton: LPackage;\n// static logic: typeof LPackage;\n// static structure: typeof DPackage;\n// inherit redefine\n// personal\n_createClass(DPackage,null,[{key:\"new\",value:function _new(name,uri,prefix,father){var persist=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var fatherType=arguments.length>5?arguments[5]:undefined;var dmodel;if(!name){dmodel=father&&DPointerTargetable.from(father);name=this.defaultname(\"pkg_\",dmodel);}/*if (!uri) {\r\n            dmodel = dmodel || father && DPointerTargetable.from(father);\r\n            uri = ('org.jodel-react.') + (dmodel?.name || \"username\"); // (DPointerTargetable.from(DUser.current)).name) todo: when DUser is done\r\n        }*/return new Constructors(new DPackage('dwc'),father,persist,fatherType).DPointerTargetable().DModelElement().DNamedElement(name).DPackage(uri,prefix).end();}/*\r\n    static new15(setter: (d: DPackage) => void, father: DPackage[\"father\"], fatherType: Constructor, name?: string): DPackage {\r\n        if (!name) name = this.defaultname(\"pkg_\", father);\r\n        return new Constructors(new DPackage('dwc'), father, true, fatherType).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DPackage().end(setter);\r\n    }\r\n    static new2(setter: Partial<ObjectWithoutPointers<DPackage>>, fatherType: Constructor, persist: boolean = true): DPackage {\r\n        if (!name) name = this.defaultname(\"pkg_\", father);\r\n        return new Constructors(new DPackage('dwc'), father, true, fatherType).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DPackage().end((d)=> { Object.assign(d, setter); });\r\n    }*/},{key:\"new3\",value:function new3(a,callback,fatherType){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!a.name)a.name=this.defaultname(\"pkg_\",a.father);return new Constructors(new DPackage('dwc'),a.father,persist,fatherType,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DPackage().end(callback);}}]);return DPackage;}(DPointerTargetable),_class25.subclasses=[],_class25._extends=[],_class25))||_class24)||_class24);export var LPackage=(_dec14=RuntimeAccessible('LPackage'),Leaf(_class26=_dec14(_class26=(_class27=/*#__PURE__*/function(_LNamedElement3){_inherits(LPackage,_LNamedElement3);var _super14=_createSuper(LPackage);function LPackage(){var _this18;_classCallCheck(this,LPackage);for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++){args[_key15]=arguments[_key15];}_this18=_super14.call.apply(_super14,[this].concat(args));_this18.__raw=void 0;_this18.id=void 0;_this18.parent=void 0;_this18.father=void 0;_this18.annotations=void 0;_this18.name=void 0;_this18.namespace=void 0;_this18.classifiers=void 0;_this18.subpackages=void 0;_this18.uri=void 0;_this18.prefix='';_this18.classes=void 0;_this18.enums=void 0;_this18.enumerators=void 0;_this18.allSubPackages=void 0;_this18.allSubEnums=void 0;_this18.allSubClasses=void 0;_this18.operations=void 0;_this18.parameters=void 0;_this18.exceptions=void 0;_this18.attributes=void 0;_this18.references=void 0;_this18.literals=void 0;return _this18;}// extends DNamedElement\n// static singleton: LPackage;\n// static logic: typeof LPackage;\n// static structure: typeof DPackage;\n// inherit redefine\n// ype 'LPackage' is missing the following properties from type 'LModelElement': get_set_parent, set_parent\n// personal\n// derived\n// utilities to go down in the tree (plural names)\n_createClass(LPackage,[{key:\"generateEcoreJson_impltemplate\",value:function generateEcoreJson_impltemplate(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};return json;}},{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var model={};var d=context.data;var classarr=context.proxyObject.classes.map(function(c){return c.generateEcoreJson(loopDetectionObj);});var enumarr=context.proxyObject.enums.map(function(e){return e.generateEcoreJson(loopDetectionObj);});var classifiers=Array.prototype.concat.call(classarr,enumarr);model[ECorePackage.xmiversion]='2.0';model[ECorePackage.xmlnsxmi]='http://www.omg.org/XMI';model[ECorePackage.xmlnsxsi]='http://www.w3.org/2001/XMLSchema-instance';model[ECorePackage.xmlnsecore]='http://www.eclipse.org/emf/2002/Ecore';model[ECorePackage.namee]=d.name;model[ECorePackage.nsURI]=d.uri;model[ECorePackage.nsPrefix]=d.prefix;//getModelRoot().namespace();\nmodel[ECorePackage.eClassifiers]=classifiers;return model;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addPackage(context.data.name,context.data.uri,context.data.prefix);var de=le.__raw;var we=le;we.subpackages=deep?context.proxyObject.subpackages.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.subpackages;we.classifiers=deep?context.proxyObject.classifiers.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.classifiers;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;END();return le;};}},{key:\"addPackage\",value:function addPackage(name,uri,prefix){return this.cannotCall(\"addPackage\");}},{key:\"get_addPackage\",value:function get_addPackage(context){console.log(\"Package.get_addPackage()\",{context:context,thiss:this});return function(name,uri,prefix){return LPointerTargetable.fromD(DPackage.new(name,uri,prefix,context.data.id,true,DPackage));};}},{key:\"addClass\",value:function addClass(name,isInterface,isAbstract,isPrimitive,isPartial,partialDefaultName){return this.cannotCall(\"addClass\");}},{key:\"get_addClass\",value:function get_addClass(context){return function(name,isInterface,isAbstract,isPrimitive,isPartial,partialDefaultName){return LPointerTargetable.fromD(DClass.new(name,isInterface,isAbstract,isPrimitive,isPartial,partialDefaultName,context.data.id,true));};}},{key:\"addEnum\",value:function addEnum(){return this.addEnumerator.apply(this,arguments);}},{key:\"get_addEnum\",value:function get_addEnum(context){return this.get_addEnumerator(context);}},{key:\"addEnumerator\",value:function addEnumerator(name){return this.cannotCall(\"addEnumerator\");}},{key:\"get_addEnumerator\",value:function get_addEnumerator(context){return function(name){return LPointerTargetable.fromD(DEnumerator.new(name,context.data.id,true));};}},{key:\"get_classes\",value:function get_classes(context,state){var setNameKeys=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!context.data.classifiers.length)return[];if(!state)state=store.getState();var classifiers=DPointerTargetable.fromPointer(context.data.classifiers,state);var dclasses=classifiers.filter(function(dc){return(dc===null||dc===void 0?void 0:dc.className)===DClass.cname;});var lclasses=LPointerTargetable.fromD(dclasses);if(setNameKeys)for(var i=0;i<dclasses.length;i++){lclasses[\"$\"+dclasses[i].name]=lclasses[i];}return lclasses;}},{key:\"get_enums\",value:function get_enums(context){return this.get_enumerators(context);}},{key:\"get_enumerators\",value:function get_enumerators(context,state){var setNameKeys=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!context.data.classifiers.length)return[];if(!state)state=store.getState();var classifiers=DPointerTargetable.fromPointer(context.data.classifiers,state);var denums=classifiers.filter(function(dc){return(dc===null||dc===void 0?void 0:dc.className)===DEnumerator.cname;});var lenums=LPointerTargetable.fromD(denums);if(setNameKeys)for(var i=0;i<denums.length;i++){lenums[\"$\"+denums[i].name]=lenums[i];}return lenums;}//private get_allClasses(context: Context): LClass[] & Dictionary<DocString<\"$name\">, LClass> { return this.get_allSubClasses(c); }\n},{key:\"get_allSubClasses\",value:function get_allSubClasses(context){// if (!context.data.isMetamodel) return (context.data.instanceof?.allSubClasses(context) || [] as any);\nvar s=store.getState();var arr=this.get_allSubPackages(context,s);var ret=[];// this.get_allSubPackages(context, s).flatMap(p => (p.classes || [])); this was losing the naming $keys!\nvar _iterator=_createForOfIteratorHelper(arr),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _a=_step.value;var classarr=_a.classes||[];U.mergeNamedArray(ret,classarr);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return ret;}},{key:\"get_allSubEnums\",value:function get_allSubEnums(context){return this.get_allSubEnumerators(context);}},{key:\"get_allSubEnumerators\",value:function get_allSubEnumerators(context){var s=store.getState();var arr=this.get_allSubPackages(context,s);var ret=[];// this.get_allSubPackages(context, s).flatMap(p => (p.enums || [])); this was losing the naming $keys!\nvar _iterator2=_createForOfIteratorHelper(arr),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _a2=_step2.value;var enumarr=_a2.enumerators||[];U.mergeNamedArray(ret,enumarr);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return ret;}},{key:\"get_allSubPackages\",value:function get_allSubPackages(c,state){// return context.data.packages.map(p => LPointerTargetable.from(p));\nstate=state||store.getState();var tocheck=c.data.subpackages||[];var checked={};checked[c.data.id]=c.data;while(tocheck.length){var newtocheck=[];var _iterator3=_createForOfIteratorHelper(tocheck),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var ptr=_step3.value;if(checked[ptr])throw new Error(\"loop in packages containing themselves\");var dpackage=DPointerTargetable.from(ptr,state);checked[ptr]=dpackage;U.arrayMergeInPlace(newtocheck,dpackage===null||dpackage===void 0?void 0:dpackage.subpackages);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}tocheck=newtocheck;}var darr=Object.values(checked);var larr=LPointerTargetable.fromArr(darr,state);U.toNamedArray(larr,darr);return larr;}},{key:\"get_children_idlist\",value:function get_children_idlist(context){return[].concat(_toConsumableArray(_get(_getPrototypeOf(LPackage.prototype),\"get_children_idlist\",this).call(this,context)),_toConsumableArray(context.data.subpackages),_toConsumableArray(context.data.classifiers));}},{key:\"get_classifiers\",value:function get_classifiers(context){return context.data.classifiers.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_classifiers\",value:function set_classifiers(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.classifiers;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'classifiers',list,\"\",true);var _iterator4=_createForOfIteratorHelper(diff.added),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _id=_step4.value;SetFieldAction.new(_id,'father',context.data.id,'',true);SetFieldAction.new(_id,'parent',context.data.id,'+=',true);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}for(var _i=0,_arr=diff.removed;_i<_arr.length;_i++){var id=_arr[_i];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_subpackages\",value:function get_subpackages(context){return context.data.subpackages.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_subpackages\",value:function set_subpackages(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.subpackages;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'subpackages',list,\"\",true);var _iterator5=_createForOfIteratorHelper(diff.added),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _id2=_step5.value;SetFieldAction.new(_id2,'father',context.data.id,'',true);SetFieldAction.new(_id2,'parent',context.data.id,'+=',true);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}for(var _i2=0,_arr2=diff.removed;_i2<_arr2.length;_i2++){var id=_arr2[_i2];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_uri\",value:function get_uri(context){var _context$proxyObject$;if(context.data.uri)return context.data.uri+\".\"+context.data.name;return'org.jodel-react.'+(((_context$proxyObject$=context.proxyObject.model)===null||_context$proxyObject$===void 0?void 0:_context$proxyObject$.name)||\"username\")+\".\"+context.data.name;}},{key:\"set_uri\",value:function set_uri(val,context){val=val||'';var pos=val.lastIndexOf(context.data.name);if(pos)val=val.substring(0,pos-1);// removes final name and dot, to keep the name part dinamically added in the getter.\nSetFieldAction.new(context.data,'uri',val,\"\",false);return true;}},{key:\"get_prefix\",value:function get_prefix(context){return context.data.prefix;}},{key:\"set_prefix\",value:function set_prefix(val,context){SetFieldAction.new(context.data,'prefix',val,\"\",false);return true;}}]);return LPackage;}(LNamedElement),_class27.subclasses=[],_class27._extends=[],_class27))||_class26)||_class26);// @RuntimeAccessible('') export class _WPackage extends _WNamedElement { }\n// export type WPackage = DPackage | LPackage | _WPackage;\nRuntimeAccessibleClass.set_extend(DNamedElement,DPackage);RuntimeAccessibleClass.set_extend(LNamedElement,LPackage);export var DOperation=(_dec15=RuntimeAccessible('DOperation'),Leaf(_class28=_dec15(_class28=(_class29=/*#__PURE__*/function(_DPointerTargetable7){_inherits(DOperation,_DPointerTargetable7);var _super15=_createSuper(DOperation);function DOperation(){var _this19;_classCallCheck(this,DOperation);for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++){args[_key16]=arguments[_key16];}_this19=_super15.call.apply(_super15,[this].concat(args));_this19.instances=void 0;_this19.id=void 0;_this19.annotations=[];_this19.parent=[];_this19.father=void 0;_this19.name=void 0;_this19.type=void 0;_this19.ordered=true;_this19.unique=true;_this19.lowerBound=0;_this19.upperBound=1;_this19.many=void 0;_this19.required=void 0;_this19.exceptions=[];_this19.parameters=[];_this19.visibility=AccessModifier.private;_this19.implementation=void 0;return _this19;}// extends DTypedElement\n// static singleton: LOperation;\n// static logic: typeof LOperation;\n// static structure: typeof DOperation;\n// inherit redefine\n// personal\n_createClass(DOperation,null,[{key:\"new\",value:function _new(name,type){var exceptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var father=arguments.length>3?arguments[3]:undefined;var persist=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(!name)name=this.defaultname(\"fx_\",father);if(!type)type=father;return new Constructors(new DOperation('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DOperation(exceptions).end();}},{key:\"new2\",value:function new2(setter,father,type,name){if(!name)name=this.defaultname(\"fx_\",father);if(!type)type=father;return new Constructors(new DOperation('dwc'),father,true).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DOperation().end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"fx_\",a.father);if(!a.type)a.type=a.father;return new Constructors(new DOperation('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DTypedElement(a.type).DOperation().end(callback);}}]);return DOperation;}(DPointerTargetable),_class29.subclasses=[],_class29._extends=[],_class29))||_class28)||_class28);export var LOperation=(_dec16=RuntimeAccessible('LOperation'),Node(_class30=_dec16(_class30=(_class31=/*#__PURE__*/function(_LTypedElement){_inherits(LOperation,_LTypedElement);var _super16=_createSuper(LOperation);function LOperation(){var _this20;_classCallCheck(this,LOperation);for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++){args[_key17]=arguments[_key17];}_this20=_super16.call.apply(_super16,[this].concat(args));_this20.__raw=void 0;_this20.id=void 0;_this20.instances=void 0;_this20.annotations=void 0;_this20.parent=void 0;_this20.father=void 0;_this20.name=void 0;_this20.namespace=void 0;_this20.type=void 0;_this20.ordered=true;_this20.unique=true;_this20.lowerBound=0;_this20.upperBound=1;_this20.many=void 0;_this20.required=void 0;_this20.implementation=void 0;_this20.signatureImplementation=void 0;_this20.exceptions=void 0;_this20.parameters=void 0;_this20.visibility=void 0;return _this20;}// extends DTypedElement\n// static singleton: LOperation;\n// static logic: typeof LOperation;\n// static structure: typeof DOperation;\n// inherit redefine\n// personal\n// (param1 /*type*/, param2 = value, ...) => /*return type*/\n_createClass(LOperation,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};json[ECoreOperation.eParameters]=context.proxyObject.parameters.map(function(par){return par.generateEcoreJson(loopDetectionObj);});EcoreParser.write(json,ECoreOperation.namee,context.data.name);EcoreParser.write(json,ECoreOperation.eType,context.proxyObject.type.typeEcoreString);EcoreParser.write(json,ECoreOperation.lowerBound,''+context.data.lowerBound);EcoreParser.write(json,ECoreOperation.upperBound,''+context.data.upperBound);EcoreParser.write(json,ECoreOperation.eexceptions,context.proxyObject.exceptions.map(function(l){return l.typeEcoreString;}).join(' '));// todo: not really sure it's this format\nEcoreParser.write(json,ECoreOperation.ordered,''+context.data.ordered);EcoreParser.write(json,ECoreOperation.unique,''+context.data.unique);return json;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addOperation(context.data.name,context.data.type);var de=le.__raw;de.many=context.data.many;de.lowerBound=context.data.lowerBound;de.upperBound=context.data.upperBound;de.ordered=context.data.ordered;de.required=context.data.required;de.unique=context.data.unique;de.visibility=context.data.visibility;de.exceptions=context.data.exceptions;var we=le;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;we.parameters=deep?context.proxyObject.parameters.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.parameters;we.exceptions=context.data.exceptions;END();return le;};}},{key:\"addParameter\",value:function addParameter(name,type){return this.cannotCall(\"addParameter\");}},{key:\"get_addParameter\",value:function get_addParameter(context){return function(name,type){return LPointerTargetable.fromD(DParameter.new(name,type,context.data.id,true));};}},{key:\"execute\",value:function execute(thiss){return this.cannotCall(\"execute\");}},{key:\"get_execute\",value:function get_execute(context){var _this21=this;return function(thiss){var func=eval(_this21.get_signatureImplementation(context,true)+\" {\\n\"+context.data.implementation+\"\\n}\");for(var _len18=arguments.length,params=new Array(_len18>1?_len18-1:0),_key18=1;_key18<_len18;_key18++){params[_key18-1]=arguments[_key18];}func.apply(thiss,params);};}},{key:\"set_implementation\",value:function set_implementation(val,context){return SetFieldAction.new(context.data.id,\"implementation\",val,undefined,false);}},{key:\"get_implementation\",value:function get_implementation(context){return context.data.implementation;}},{key:\"set_signatureImplementation\",value:function set_signatureImplementation(val,context){return this.cannotSet(\"signatureImplementation\");}},{key:\"get_signatureImplementation\",value:function get_signatureImplementation(context){var typedComments=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var operation=context.proxyObject;var typedcommentpre=typedComments?\"/* :\":': ';var typedcommentpost=typedComments?\" */\":'';return\"(\"+operation.parameters.map(function(p){return p.name+(p.defaultValue!==undefined?\"=\"+p.defaultValue:typedcommentpre+p.typeToShortString()+typedcommentpost);}).join(\", \")+\") => \"+typedcommentpre.replace(\":\",\"\")+operation.type+typedcommentpost;}},{key:\"get_signature\",value:function get_signature(context){return this.get_signatureImplementation(context,false);}},{key:\"get_children_idlist\",value:function get_children_idlist(context){return[].concat(_toConsumableArray(_get(_getPrototypeOf(LOperation.prototype),\"get_children_idlist\",this).call(this,context)),_toConsumableArray(context.data.exceptions),_toConsumableArray(context.data.parameters));}},{key:\"get_exceptions\",value:function get_exceptions(context){return context.data.exceptions.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_exceptions\",value:function set_exceptions(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'exceptions',list,\"\",true);return true;}},{key:\"get_parameters\",value:function get_parameters(context){return context.data.parameters.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_parameters\",value:function set_parameters(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.parameters;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'parameters',list,\"\",true);var _iterator6=_createForOfIteratorHelper(diff.added),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _id3=_step6.value;SetFieldAction.new(_id3,'father',context.data.id,'',true);SetFieldAction.new(_id3,'parent',context.data.id,'+=',true);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}for(var _i3=0,_arr3=diff.removed;_i3<_arr3.length;_i3++){var id=_arr3[_i3];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}// protected get_type(context: Context): this[\"type\"] { return context.proxyObject.parameters[0].type; }\n// protected set_type(val: Pack1<this[\"type\"]>, context: Context): this[\"type\"] { return super.set_type(val, context); }\n},{key:\"_mark\",value:function _mark(b,superchildren,override){}},{key:\"_canOverride\",value:function _canOverride(superchildren){return undefined;}},{key:\"_canPolymorph\",value:function _canPolymorph(superchildren){return undefined;}}]);return LOperation;}(LTypedElement),_class31.subclasses=[],_class31._extends=[],_class31))||_class30)||_class30);RuntimeAccessibleClass.set_extend(DTypedElement,DOperation);RuntimeAccessibleClass.set_extend(LTypedElement,LOperation);export var DParameter=(_dec17=RuntimeAccessible('DParameter'),Leaf(_class32=_dec17(_class32=(_class33=/*#__PURE__*/function(_DPointerTargetable8){_inherits(DParameter,_DPointerTargetable8);var _super17=_createSuper(DParameter);function DParameter(){var _this22;_classCallCheck(this,DParameter);for(var _len19=arguments.length,args=new Array(_len19),_key19=0;_key19<_len19;_key19++){args[_key19]=arguments[_key19];}_this22=_super17.call.apply(_super17,[this].concat(args));_this22.instances=void 0;_this22.id=void 0;_this22.annotations=[];_this22.parent=[];_this22.father=void 0;_this22.name=void 0;_this22.type=void 0;_this22.ordered=true;_this22.unique=true;_this22.lowerBound=0;_this22.upperBound=1;_this22.many=void 0;_this22.required=void 0;_this22.defaultValue=void 0;return _this22;}// extends DTypedElement\n// static singleton: LParameter;\n// static logic: typeof LParameter;\n// static structure: typeof DParameter;\n// inherit redefine\n_createClass(DParameter,null,[{key:\"new\",value:// personal\nfunction _new(name,type,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!type)type=LPointerTargetable.from(Selectors.getFirstPrimitiveTypes()).id;// default type as string\nif(!name)name=this.defaultname(\"arg\",father);return new Constructors(new DParameter('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DParameter().end();}},{key:\"new2\",value:function new2(setter,father,type,name){if(!name)name=this.defaultname(name||\"arg\",father);return new Constructors(new DParameter('dwc'),father,true).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"arg\",a.father);return new Constructors(new DParameter('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DTypedElement(a.type).DOperation().end(callback);}}]);return DParameter;}(DPointerTargetable),_class33.subclasses=[],_class33._extends=[],_class33))||_class32)||_class32);export var LParameter=(_dec18=RuntimeAccessible('LParameter'),Leaf(_class34=_dec18(_class34=(_class35=/*#__PURE__*/function(_LTypedElement2){_inherits(LParameter,_LTypedElement2);var _super18=_createSuper(LParameter);function LParameter(){var _this23;_classCallCheck(this,LParameter);for(var _len20=arguments.length,args=new Array(_len20),_key20=0;_key20<_len20;_key20++){args[_key20]=arguments[_key20];}_this23=_super18.call.apply(_super18,[this].concat(args));_this23.__raw=void 0;_this23.id=void 0;_this23.instances=void 0;_this23.annotations=void 0;_this23.parent=void 0;_this23.father=void 0;_this23.name=void 0;_this23.namespace=void 0;_this23.type=void 0;_this23.ordered=true;_this23.unique=true;_this23.lowerBound=0;_this23.upperBound=1;_this23.many=void 0;_this23.required=void 0;_this23.defaultValue=void 0;return _this23;}// extends DTypedElement\n// static singleton: LParameter;\n// static logic: typeof LParameter;\n// static structure: typeof DParameter;\n// inherit redefine\n// personal\n_createClass(LParameter,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};var l=context.proxyObject;var d=context.data;EcoreParser.write(json,ECoreOperation.lowerBound,''+d.lowerBound);EcoreParser.write(json,ECoreOperation.upperBound,''+d.upperBound);EcoreParser.write(json,ECoreOperation.ordered,''+d.ordered);EcoreParser.write(json,ECoreOperation.unique,''+d.unique);EcoreParser.write(json,ECoreOperation.eType,''+l.type.typeEcoreString);return json;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addParameter(context.data.name,context.data.type);var de=le.__raw;de.many=context.data.many;de.lowerBound=context.data.lowerBound;de.upperBound=context.data.upperBound;de.ordered=context.data.ordered;de.required=context.data.required;de.unique=context.data.unique;var we=le;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;END();return le;};}}]);return LParameter;}(LTypedElement),_class35.subclasses=[],_class35._extends=[],_class35))||_class34)||_class34);RuntimeAccessibleClass.set_extend(DTypedElement,DParameter);RuntimeAccessibleClass.set_extend(LTypedElement,LParameter);export var ClassReferences=function ClassReferences(){_classCallCheck(this,ClassReferences);this.id=void 0;this.parent=void 0;this.father=void 0;this.instances=[];this.operations=[];this.features=[];this.references=[];this.attributes=[];this.referencedBy=[];this.extends=[];this.extendedBy=[];this.implements=[];this.implementedBy=[];};export var DClass=(_dec19=RuntimeAccessible('DClass'),_dec19(_class36=(_class37=/*#__PURE__*/function(_DPointerTargetable9){_inherits(DClass,_DPointerTargetable9);var _super19=_createSuper(DClass);function DClass(){var _this24;_classCallCheck(this,DClass);for(var _len21=arguments.length,args=new Array(_len21),_key21=0;_key21<_len21;_key21++){args[_key21]=arguments[_key21];}_this24=_super19.call.apply(_super19,[this].concat(args));_this24.id=void 0;_this24.instanceClassName=void 0;_this24.parent=[];_this24.father=void 0;_this24.annotations=[];_this24.name=void 0;_this24.defaultValue=void 0;_this24.abstract=false;_this24.interface=false;_this24.instances=[];_this24.operations=[];_this24.features=[];_this24.references=[];_this24.attributes=[];_this24.referencedBy=[];_this24.extends=[];_this24.extendedBy=[];_this24.isPrimitive=void 0;_this24.implements=[];_this24.implementedBy=[];_this24.partial=void 0;_this24.partialdefaultname=void 0;return _this24;}// extends DClassifier\n// static _super = DClassifier;\n// static singleton: LClass;\n// static logic: typeof LClass;\n// static structure: typeof DClass;\n// inherit redefine\n// instanceClass: EJavaClass // ?\n// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\n// personal\n// isSuperTypeOf(someClass: DClassifier): boolean { return todoret; }\n// getEstructuralFeatureByID(featureID: number): DStructuralFeature { return todoret; }\n// getEstructuralFeature(featureName: string): DStructuralFeature { return todoret; }\n// mia aggiunta:\n_createClass(DClass,null,[{key:\"new\",value:// for m1:\n// hideExcessFeatures: boolean = true; // isn't it like partial?? // old comment: se attivo questo e creo una DClass di sistema senza nessuna feature e di nome Object, ho creato lo schema di un oggetto schema-less a cui tutti sono conformi\nfunction _new(name){var isInterface=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var isAbstract=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var isPrimitive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var partial=arguments.length>4?arguments[4]:undefined;var partialDefaultName=arguments.length>5?arguments[5]:undefined;var father=arguments.length>6?arguments[6]:undefined;var persist=arguments.length>7&&arguments[7]!==undefined?arguments[7]:true;var id=arguments.length>8?arguments[8]:undefined;if(!name)name=this.defaultname(\"Concept \",father);return new Constructors(new DClass('dwc'),father,persist,undefined,id).DPointerTargetable().DModelElement().DNamedElement(name).DClassifier().DClass(isInterface,isAbstract,isPrimitive,partial,partialDefaultName).end();}},{key:\"new2\",value:function new2(setter,father,name){if(!name)name=this.defaultname(name||\"Concept \",father);return new Constructors(new DClass('dwc'),father,true,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DClassifier().DClass().end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"Concept \",a.father);return new Constructors(new DClass('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DClassifier().DClass().end(callback);}}]);return DClass;}(DPointerTargetable),_class37.subclasses=[],_class37._extends=[],_class37))||_class36);window.dc=DClassifier;window.c=DClass;export var LClass=(_dec20=RuntimeAccessible('LClass'),Instantiable(_class38=Node(_class38=_dec20(_class38=(_class39=/*#__PURE__*/function(_LClassifier){_inherits(LClass,_LClassifier);var _super20=_createSuper(LClass);function LClass(){var _this25;_classCallCheck(this,LClass);for(var _len22=arguments.length,args=new Array(_len22),_key22=0;_key22<_len22;_key22++){args[_key22]=arguments[_key22];}_this25=_super20.call.apply(_super20,[this].concat(args));_this25.__raw=void 0;_this25.id=void 0;_this25.instanceClassName=void 0;_this25.parent=void 0;_this25.father=void 0;_this25.annotations=void 0;_this25.name=void 0;_this25.namespace=void 0;_this25.defaultValue=void 0;_this25.abstract=void 0;_this25.interface=void 0;_this25.instances=void 0;_this25.operations=void 0;_this25.features=void 0;_this25.references=void 0;_this25.attributes=void 0;_this25.referencedBy=void 0;_this25.extends=void 0;_this25.__info_of__extends={type:\"LClass[]\",txt:\"classes directly extended by this. check also: \\\"superclasses\\\".\"};_this25.extendsChain=void 0;_this25.extendedBy=void 0;_this25.nodes=void 0;_this25.superclasses=void 0;_this25.__info_of__superclasses={type:\"LClass[]\",txt:\"all classes directly and indirectly extended by this. same as check also: \\\"extends\\\".\"};_this25.allSubClasses=void 0;_this25.partial=void 0;_this25.partialdefaultname=void 0;_this25.isPrimitive=void 0;_this25.isClass=void 0;_this25.isEnum=void 0;_this25.implements=[];_this25.implementedBy=[];_this25.ownAttributes=void 0;_this25.ownReferences=void 0;_this25.ownOperations=void 0;_this25.ownChildren=void 0;_this25.inheritedAttributes=void 0;_this25.inheritedReferences=void 0;_this25.inheritedOperations=void 0;_this25.inheritedChildren=void 0;_this25.allAttributes=void 0;_this25.allReferences=void 0;_this25.allOperations=void 0;_this25.allChildren=void 0;_this25.exceptions=void 0;_this25.parameters=void 0;_this25.__info_of__isSubclassOf={type:\"(superclass: Pointer | LClass, directly: boolean = false) => boolean\",txt:\"Alias for isExtending\"};_this25.__info_of__isExtending={type:\"(superclass: Pointer | LClass, directly: boolean = false) => boolean\",txt:/*#__PURE__*/_jsxs(\"div\",{children:[\"Tells if \\\"this\\\" is a subclass of the \\\"superclass\\\" parameter.\",/*#__PURE__*/_jsx(\"br\",{}),\"- If \\\"directly\\\" is set to true, it will only include direct subclassing as in \\\"class A extends C\\\" not considering chains.\",/*#__PURE__*/_jsx(\"br\",{}),\"    If \\\"directly\\\" is set to true: \\\"class A extends B\\\" & \\\"Class B extends C\\\". In that case A.isExtending(C, true) will return false.\"]})};return _this25;}// extends DClassifier\n// static singleton: LClass;\n// static logic: typeof LClass;\n// static structure: typeof DClass;\n// inherit redefine\n// instanceClass: EJavaClass // ?\n// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\n// personal\n// isSuperTypeOf(someClass: DClassifier): boolean { return todoret; }\n// getEstructuralFeatureByID(featureID: number): DStructuralFeature { return todoret; }\n// getEstructuralFeature(featureName: string): DStructuralFeature { return todoret; }\n// list of all super classes (father, father of father, ...)  todo: isn't this the same as \"superclasses\" ? check implementation differeces, eventually remove one.\n// ipotesi, non so se tenerlo\n// fittizi:\n// false if it's primitive type\n//todo: interface\n// includes inherited and shadowed features\n// utilities to go down in the tree (plural names)\n_createClass(LClass,[{key:\"get_childNames\",value:// [`@${string}`]: LModelElement; todo: try to put it\nfunction get_childNames(c){return this.get_allChildren(c).map(function(c){return c.name;}).filter(function(c){return!!c;});}},{key:\"get_ownAttributes\",value:function get_ownAttributes(context){return LAttribute.fromPointer(context.data.attributes);}},{key:\"get_ownReferences\",value:function get_ownReferences(context){return LReference.fromPointer(context.data.references);}},{key:\"get_ownOperations\",value:function get_ownOperations(context){return LOperation.fromPointer(context.data.operations);}},{key:\"get_ownChildren\",value:function get_ownChildren(context){return U.arrayMergeInPlace(this.get_ownAttributes(context),this.get_ownReferences(context),this.get_ownOperations(context));}},{key:\"get_extendsChain\",value:function get_extendsChain(context){var targets=LClass.fromArr(context.data.extends);var alreadyParsed={};while(targets.length){var nextTargets=[];var _iterator7=_createForOfIteratorHelper(targets),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var target=_step7.value;if(alreadyParsed[target.id])continue;alreadyParsed[target.id]=target;var _iterator8=_createForOfIteratorHelper(target.extends),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var father=_step8.value;nextTargets.push(father);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}targets=nextTargets;}return _toConsumableArray(new Set(Object.values(alreadyParsed)));}},{key:\"isSubClassOf\",value:function isSubClassOf(superClass){var returnIfSameClass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return this.cannotCall(\"isSubClassOf\");}},{key:\"isSuperClassOf\",value:function isSuperClassOf(subClass){var returnIfSameClass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return this.cannotCall(\"isSuperClassOf\");}},{key:\"get_isSubClassOf\",value:function get_isSubClassOf(c){var _this26=this;return function(superClass){var returnIfSameClass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!superClass)return false;if(superClass.id===c.data.id)return returnIfSameClass;var _iterator9=_createForOfIteratorHelper(_this26.get_extendsChain(c)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var subclass=_step9.value;if(subclass.id===superClass.id)return true;}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return false;};}},{key:\"get_isSuperClassOf\",value:function get_isSuperClassOf(c){return function(subClass){var returnIfSameClass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!subClass)return false;if(subClass.id===c.data.id)return returnIfSameClass;return subClass.isSubClassOf(c.proxyObject,returnIfSameClass);};}},{key:\"get_inheritedAttributes\",value:function get_inheritedAttributes(context){return this.get_extendsChain(context).flatMap(function(superClass){return superClass.ownAttributes;});}},{key:\"get_inheritedReferences\",value:function get_inheritedReferences(context){return this.get_extendsChain(context).flatMap(function(superClass){return superClass.ownReferences;});}},{key:\"get_inheritedOperations\",value:function get_inheritedOperations(context){return this.get_extendsChain(context).flatMap(function(superClass){return superClass.ownOperations;});}},{key:\"get_inheritedChildren\",value:function get_inheritedChildren(context){return U.arrayMergeInPlace(this.get_inheritedAttributes(context),this.get_inheritedReferences(context),this.get_inheritedOperations(context));}},{key:\"get_allAttributes\",value:function get_allAttributes(context){return U.arrayMergeInPlace(this.get_ownAttributes(context),this.get_inheritedAttributes(context));}},{key:\"get_allReferences\",value:function get_allReferences(context){return U.arrayMergeInPlace(this.get_ownReferences(context),this.get_inheritedReferences(context));}},{key:\"get_allOperations\",value:function get_allOperations(context){return U.arrayMergeInPlace(this.get_ownOperations(context),this.get_inheritedOperations(context));}},{key:\"get_allChildren\",value:function get_allChildren(context){return U.arrayMergeInPlace(this.get_ownChildren(context),this.get_inheritedChildren(context));}},{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};var featurearr=[];var operationsarr=[];var supertypesstr=[];var d=context.data;var l=context.proxyObject;var _iterator10=_createForOfIteratorHelper(l.attributes),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var att=_step10.value;featurearr.push(att.generateEcoreJson(loopDetectionObj));}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}var _iterator11=_createForOfIteratorHelper(l.references),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var ref=_step11.value;featurearr.push(ref.generateEcoreJson(loopDetectionObj));}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}var _iterator12=_createForOfIteratorHelper(l.operations),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var op=_step12.value;operationsarr.push(op.generateEcoreJson(loopDetectionObj));}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}json[ECoreClass.xsitype]='ecore:EClass';json[ECoreClass.namee]=d.name;json[ECoreClass.interface]=U.toBoolString(d.interface,false);json[ECoreClass.abstract]=U.toBoolString(d.abstract,false);if(d.instanceClassName)json[ECoreClass.instanceTypeName]=d.instanceClassName;json[ECoreClass.eSuperTypes]=l.extends.map(function(superclass){return superclass.typeEcoreString;}).join(\" \");if(featurearr)json[ECoreClass.eStructuralFeatures]=featurearr;if(operationsarr)json[ECoreClass.eOperations]=operationsarr;return json;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var ret=undefined;TRANSACTION(function(){var le=context.proxyObject.father.addClass(context.data.name,context.data.interface,context.data.abstract,context.data.isPrimitive);var de=le.__raw;// de.hideExcessFeatures = context.data.hideExcessFeatures;\nvar we=le;we.defaultValue=context.data.defaultValue;we.extends=context.data.extends;we.attributes=deep?context.proxyObject.attributes.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.attributes;we.references=deep?context.proxyObject.references.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.references;we.operations=deep?context.proxyObject.operations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.operations;ret=le;// set ret = le only if the transaction is complete.\n});return ret;};}},{key:\"get_children_idlist\",value:function get_children_idlist(context){return[].concat(_toConsumableArray(_get(_getPrototypeOf(LClass.prototype),\"get_children_idlist\",this).call(this,context)),_toConsumableArray(context.data.attributes),_toConsumableArray(context.data.references),_toConsumableArray(context.data.operations));}},{key:\"set_name\",value:function set_name(val,context){if(context.data.name===val)return true;_get(_getPrototypeOf(LClass.prototype),\"set_name\",this).call(this,val,context);SetRootFieldAction.new('ClassNameChanged.'+context.data.id,val,'',false);// it is pointer, but related to transient stuff, so don't need pointedBy's\nreturn true;}},{key:\"set_partial\",value:function set_partial(val,context){return SetFieldAction.new(context.data.id,\"partial\",val);}},{key:\"get_partial\",value:function get_partial(context){return context.data.partial;}},{key:\"set_partialdefaultname\",value:function set_partialdefaultname(val,context){return SetFieldAction.new(context.data.id,\"partialdefaultname\",val,undefined,false);}},{key:\"get_partialdefaultname\",value:function get_partialdefaultname(context){return context.data.partialdefaultname;}},{key:\"addAttribute\",value:function addAttribute(name,type){return this.cannotCall(\"addAttribute\");}},{key:\"get_addAttribute\",value:function get_addAttribute(context){return function(name,type){return LPointerTargetable.fromD(DAttribute.new(name,type,context.data.id,true));};}},{key:\"addReference\",value:function addReference(name,type){return this.cannotCall(\"addReference\");}},{key:\"get_addReference\",value:function get_addReference(context){return function(name,type){return LPointerTargetable.fromD(DReference.new(name,type,context.data.id,true));};}},{key:\"addOperation\",value:function addOperation(name,type){return this.cannotCall(\"addOperation\");}},{key:\"get_addOperation\",value:function get_addOperation(context){return function(name,type){return LPointerTargetable.fromD(DOperation.new(name,type,[],context.data.id,true));};}},{key:\"get_abstract\",value:function get_abstract(context){return context.data.abstract;}},{key:\"set_abstract\",value:function set_abstract(val,context){var data=context.data;if(val&&data.instances.length>0){U.alert('error','Cannot change the abstraction level since there are instances.');}else{SetFieldAction.new(data,'abstract',val);}return true;}},{key:\"set_isPrimitive\",value:function set_isPrimitive(val,context){SetFieldAction.new(context.data,'isPrimitive',val);return true;}// get is in classifier with all other \"type\"s getter and setter\n},{key:\"get_interface\",value:function get_interface(context){return context.data.interface;}},{key:\"set_interface\",value:function set_interface(val,context){SetFieldAction.new(context.data,'interface',val);return true;}},{key:\"get_instances\",value:function get_instances(context){return context.data.instances.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_instances\",value:function set_instances(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'instances',list,\"\",true);return true;}},{key:\"get_operations\",value:function get_operations(context){return context.data.operations.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_operations\",value:function set_operations(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.operations;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'operations',list,\"\",true);var _iterator13=_createForOfIteratorHelper(diff.added),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _id4=_step13.value;SetFieldAction.new(_id4,'father',context.data.id,'',true);SetFieldAction.new(_id4,'parent',context.data.id,'+=',true);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}for(var _i4=0,_arr4=diff.removed;_i4<_arr4.length;_i4++){var id=_arr4[_i4];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_features\",value:function get_features(context){return context.data.features.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_features\",value:function set_features(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.features;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'features',list,\"\",true);var _iterator14=_createForOfIteratorHelper(diff.added),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _id5=_step14.value;SetFieldAction.new(_id5,'father',context.data.id,'',true);SetFieldAction.new(_id5,'parent',context.data.id,'+=',true);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}for(var _i5=0,_arr5=diff.removed;_i5<_arr5.length;_i5++){var id=_arr5[_i5];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_references\",value:function get_references(context){return context.data.references.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_references\",value:function set_references(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.references;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'references',list,\"\",true);var _iterator15=_createForOfIteratorHelper(diff.added),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _id6=_step15.value;SetFieldAction.new(_id6,'father',context.data.id,'',true);SetFieldAction.new(_id6,'parent',context.data.id,'+=',true);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}for(var _i6=0,_arr6=diff.removed;_i6<_arr6.length;_i6++){var id=_arr6[_i6];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_attributes\",value:function get_attributes(context){return context.data.attributes.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_attributes\",value:function set_attributes(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.attributes;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'attributes',list,\"\",true);var _iterator16=_createForOfIteratorHelper(diff.added),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var _id7=_step16.value;SetFieldAction.new(_id7,'father',context.data.id,'',true);SetFieldAction.new(_id7,'parent',context.data.id,'+=',true);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}for(var _i7=0,_arr7=diff.removed;_i7<_arr7.length;_i7++){var id=_arr7[_i7];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_referencedBy\",value:function get_referencedBy(context){return context.data.referencedBy.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_referencedBy\",value:function set_referencedBy(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'referencedBy',list,\"\",true);return true;}},{key:\"get_extends\",value:function get_extends(context){return context.data.extends.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_extends\",value:function set_extends(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'extends',list,\"\",true);return true;}},{key:\"add_extends\",value:function add_extends(val,context){var ptrs=Pointers.from(val);SetFieldAction.new(context.data,'extends',[].concat(_toConsumableArray(context.data.extends),_toConsumableArray(ptrs)),'',true);}},{key:\"remove_extends\",value:function remove_extends(val,context){if(!Array.isArray(val))val=[val];if(!val.length)return;var finalVal;if(typeof val[0]===\"number\"){finalVal=context.data.extends.filter(function(elem,index,arr){return val.includes(index);});}else{finalVal=_toConsumableArray(context.data.extends);var ptrs=Pointers.from(val);var _iterator17=_createForOfIteratorHelper(ptrs),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var v=_step17.value;U.arrayRemoveAll(finalVal,v);}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}SetFieldAction.new(context.data,'extends',finalVal,'',true);}},{key:\"get_extendedBy\",value:function get_extendedBy(context){return context.data.extendedBy.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_extendedBy\",value:function set_extendedBy(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'extendedBy',list,\"\",true);return true;}},{key:\"get_implements\",value:function get_implements(context){return context.data.implements;}},{key:\"set_implements\",value:function set_implements(val,context){SetFieldAction.new(context.data,'implements',val,\"\",true);return true;}},{key:\"get_implementedBy\",value:function get_implementedBy(context){return context.data.implementedBy;}},{key:\"set_implementedBy\",value:function set_implementedBy(val,context){SetFieldAction.new(context.data,'implementedBy',val,\"\",true);return true;}},{key:\"canExtend\",value:function canExtend(superclass){var output=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{reason:'',allTargetSuperClasses:[]};this.cannotCall(\"canExtend\");return false;}},{key:\"get_canExtend\",value:function get_canExtend(context){var _this27=this;return function(superclass){var output=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{reason:'',allTargetSuperClasses:[]};return _this27._canExtend(context,superclass,output);};}},{key:\"isExtending\",value:function isExtending(superclass){var directly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.cannotCall(\"isExtending\");}},{key:\"isSubclassOf\",value:function isSubclassOf(superclass){var directly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.cannotCall(\"isSubclassOf\");}},{key:\"get_isSubclassOf\",value:function get_isSubclassOf(c){var plusThis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return this.get_isExtending(c,plusThis);}},{key:\"get_isExtending\",value:function get_isExtending(c){var _this28=this;var plusThis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return function(superclass){var directly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var ptr=Pointers.from(superclass);if(directly)return c.data.extends.includes(ptr);return _this28.get_superclasses(c,plusThis).map(function(classe){return classe.id;}).includes(ptr);};}},{key:\"get_superclasses\",value:function get_superclasses(context){var plusThis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i;var thiss=context.proxyObject;var visited={};var queue=thiss.extends;if(plusThis)queue=[thiss].concat(_toConsumableArray(queue));var ret=[];for(i=0;i<queue.length;i++){var _queue;var elem=queue[i];if(visited[elem.id])continue;visited[elem.id]=elem;ret.push(elem);(_queue=queue).push.apply(_queue,_toConsumableArray(elem.extends));}return ret;}},{key:\"get_allSubClasses\",value:function get_allSubClasses(context){var _context$data$extende;var plusThis=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var state=arguments.length>2?arguments[2]:undefined;var thiss=context.proxyObject;var extendedBy=thiss.extendedBy;var ebyIDS=extendedBy.map(function(e){return e.id;});/* old version, remade longer but more efficient\r\n        const set: Set<LClass> = plusThis ? new Set<LClass>([thiss.id, ...ebyIDS]) : new Set(ebyIDS);\r\n        for (let i = 0; i < extendedBy.length; i++) { U.SetMerge(true, set, extendedBy[i].allSubClasses.map(e=>e.id)); }*/var parsedSubclasses={};parsedSubclasses[context.data.id]=context.data;var stack=[context.data];if(!state&&!((_context$data$extende=context.data.extendedBy)===null||_context$data$extende===void 0?void 0:_context$data$extende.length))state=store.getState();while(stack.length){var newstack=[];var _iterator18=_createForOfIteratorHelper(stack),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _d=_step18.value;var _iterator19=_createForOfIteratorHelper(_d.extendedBy),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var sid=_step19.value;if(!sid||parsedSubclasses[sid])continue;var _d2=DClass.from(sid,state);if(!_d2)continue;parsedSubclasses[sid]=_d2;newstack.push(_d2);}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}stack=newstack;}if(!plusThis)delete parsedSubclasses[context.data.id];return Object.values(parsedSubclasses).map(function(d){return LPointerTargetable.fromD(d);});}},{key:\"_canExtend\",value:function _canExtend(context,superclass){var output=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{reason:'',allTargetSuperClasses:[]};if(!superclass){output.reason='Invalid extend target: '+superclass;return false;}var thiss=context.proxyObject;if(superclass.id===thiss.id){output.reason='Classes cannot extend themselves.';return false;}// todo: se diversi proxy dello stesso oggetto sono considerati diversi questo fallisce, in tal caso fai thiss.extends.map( l => l.id).indexof(superclass.id)\nif(thiss.extends.map(function(sc){return sc.id;}).indexOf(superclass.id)>=0){output.reason='Target class is already directly extended.';return false;}output.allTargetSuperClasses=superclass.superclasses;if(thiss.superclasses.map(function(sc){return sc.id;}).indexOf(superclass.id)>=0){output.reason='Target class is already indirectly extended.';return false;}if(output.allTargetSuperClasses.map(function(sc){return sc.id;}).indexOf(thiss.id)>=0){output.reason='Cannot set this extend, it would cause a inheritance loop.';return false;}if(thiss.interface&&!superclass.interface){output.reason='An interface cannot extend a class.';return false;}// ora verifico se causa delle violazioni di override (attibuti omonimi string e boolean non possono overridarsi)\nvar i;var j;var children=thiss.operations;//[...thiss.getBasicOperations()];\nvar superchildren=superclass.operations;//[...superclass.getBasicOperations()];\nvar _loop=function _loop(){var op=children[i];var _loop2=function _loop2(){var superchild=superchildren[j];if(op.name!==superchild.name)return\"continue\";if(op._canOverride(superchild)||op._canPolymorph(superchild))return\"continue\";output.reason='Marked homonymous operations cannot override nor polymorph each others.';setTimeout(function(){op._mark(true,superchild,'override');//  mark op && superchildren\nsetTimeout(function(){op._mark(false,superchild,'override');},3000);// unmark\n},1);return{v:{v:false}};};for(j=0;j<superchildren.length;j++){var _ret2=_loop2();if(_ret2===\"continue\")continue;if(typeof _ret2===\"object\")return _ret2.v;}};for(i=0;i<children.length;i++){var _ret=_loop();if(typeof _ret===\"object\")return _ret.v;}return true;}},{key:\"_isExtending\",value:function _isExtending(context,superclass){var orEqual=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!superclass)return false;return this.get_superclasses(context,orEqual).includes(superclass);}},{key:\"add_Extends\",value:function add_Extends(context,superclass){var force=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var out={reason:'',allTargetSuperClasses:[]};var thiss=context.proxyObject;if(!force&&!this._canExtend(context,superclass,out)){return false;}SetFieldAction.new(thiss.__raw,'extends',[superclass.id],'+=',true);SetFieldAction.new(superclass.__raw,'extendedBy',[thiss.id],'+=',true);// const extendChildren: LClass[] =  [thiss, ...thiss.superclasses];\n// console.log('calculateViolationsExtend children:'  + extendChildren, this);\n// for (let extChild of extendChildren) { extChild._checkViolations(false); } // after instances have their meta-class changed, they might need to change shape or values.\nreturn true;}},{key:\"unsetExtends\",value:function unsetExtends(context,superclass){if(!superclass)return;console.log('UnsetExtend:',context);// todo: when Object is loaded in m3, set him there for easy access.\n//  if (superclass.id === LClass.genericObjectid) { Log.w(true, 'Cannot un-extend \"Object\"'); return; }\nvar thiss=context.proxyObject;var index=thiss.extends.indexOf(superclass);if(index<0)return;var newextends=thiss.extends.map(function(l){return l.id;});var newextendedBy=superclass.extendedBy.map(function(l){return l.id;});U.arrayRemoveAll(newextends,superclass.id);U.arrayRemoveAll(newextendedBy,thiss.id);SetFieldAction.new(thiss,'extends',newextends,'',true);// -=\nSetFieldAction.new(superclass,'extendedBy',newextendedBy,'',true);// -=\n// todo: update instances for (i = 0; i < thiss.instances.length; i++) { thiss.instances[i].unsetExtends(superclass); }\n// todo: remove extend edge? here?\n// todo: check violations\n// const extendedby: LClass[] = [thiss, ...thiss.allSubClasses];\n// for (i = 0; i < extendedby.length; i++) { extendedby[i].checkViolations(true); }\n}},{key:\"instance\",value:function instance(){return this.cannotCall('instance');}/*private get_instance_old(context: Context): () => DObject {\r\n        return () => {\r\n            const dClass: DClass = context.data;\r\n            const lClass: LClass = LClass.from(dClass);\r\n            const dObject = DObject.new(lClass.name.toLowerCase());\r\n            CreateElementAction.new(dObject);\r\n            BEGIN()\r\n            SetFieldAction.new(dObject, 'instanceof', dClass.id, '', true);\r\n            SetFieldAction.new(dClass, 'instances', dObject.id, '+=', true);\r\n\r\n            let father: LClass|undefined = lClass;\r\n            while(father) {\r\n                for(let dFeature of [...father.attributes, ...father.references]) {\r\n                    const dValue = DValue.new(dFeature.name); dValue.value = [U.initializeValue(dFeature.type)];\r\n                    CreateElementAction.new(dValue);\r\n\r\n                    SetFieldAction.new(dValue, 'father', dObject.id, '', true);\r\n                    SetFieldAction.new(dValue, 'instanceof', dFeature.id, '', true);\r\n                    SetFieldAction.new(dFeature, 'instances', dValue.id, '+=', true);\r\n                    SetFieldAction.new(dObject, 'features', dValue.id, '+=', true);\r\n\r\n                }\r\n                father = (father.extends.length > 0) ? father.extends[0] : undefined;\r\n            }\r\n            END()\r\n            return dObject;\r\n        };\r\n    }*/}]);return LClass;}(LClassifier),_class39.subclasses=[],_class39._extends=[],_class39))||_class38)||_class38)||_class38);RuntimeAccessibleClass.set_extend(DClassifier,DClass);RuntimeAccessibleClass.set_extend(LClassifier,LClass);export var DDataType=(_dec21=RuntimeAccessible('DDataType'),_dec21(_class40=(_class41=/*#__PURE__*/function(_DPointerTargetable10){_inherits(DDataType,_DPointerTargetable10);var _super21=_createSuper(DDataType);function DDataType(){var _this29;_classCallCheck(this,DDataType);for(var _len23=arguments.length,args=new Array(_len23),_key23=0;_key23<_len23;_key23++){args[_key23]=arguments[_key23];}_this29=_super21.call.apply(_super21,[this].concat(args));_this29.id=void 0;_this29.instanceClassName=void 0;_this29.parent=[];_this29.father=void 0;_this29.annotations=[];_this29.name=void 0;_this29.defaultValue=void 0;_this29.serializable=true;return _this29;}// extends DClassifier\n// static singleton: LDataType;\n// static logic: typeof LDataType;\n// static structure: typeof DDataType;\n// inherit redefine\n// instanceClass: EJavaClass // ?\n// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\n// personal\n_createClass(DDataType,null,[{key:\"new\",value:// usedBy: Pointer<DAttribute, 0, 'N', LAttribute> = [];\nfunction _new(name,father){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;Log.exx(\"DDataType is abstract, cannot instantiate\");return null;// if (!name) name = this.defaultname(\"datatype_\", father);\n// return new Constructors(new DDataType('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DClassifier().DDataType().end();\n}}]);return DDataType;}(DPointerTargetable),_class41.subclasses=[],_class41._extends=[],_class41))||_class40);export var LDataType=(_dec22=RuntimeAccessible('LDataType'),Abstract(_class42=_dec22(_class42=(_class43=/*#__PURE__*/function(_LClassifier2){_inherits(LDataType,_LClassifier2);var _super22=_createSuper(LDataType);function LDataType(){var _this30;_classCallCheck(this,LDataType);for(var _len24=arguments.length,args=new Array(_len24),_key24=0;_key24<_len24;_key24++){args[_key24]=arguments[_key24];}_this30=_super22.call.apply(_super22,[this].concat(args));_this30.__raw=void 0;_this30.id=void 0;_this30.instanceClassName=void 0;_this30.parent=void 0;_this30.father=void 0;_this30.annotations=void 0;_this30.name=void 0;_this30.namespace=void 0;_this30.defaultValue=void 0;_this30.isPrimitive=void 0;_this30.isClass=void 0;_this30.isEnum=void 0;_this30.serializable=void 0;return _this30;}// extends DClassifier\n// static singleton: LDataType;\n// static logic: typeof LDataType;\n// static structure: typeof DDataType;\n// inherit redefine\n// instanceClass: EJavaClass // ?\n// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\n// personal\n_createClass(LDataType,[{key:\"get_serializable\",value:function get_serializable(context){return context.data.serializable;}},{key:\"set_serializable\",value:function set_serializable(val,context){SetFieldAction.new(context.data,'serializable',val);return true;}}]);return LDataType;}(LClassifier),_class43.subclasses=[],_class43._extends=[],_class43))||_class42)||_class42);RuntimeAccessibleClass.set_extend(DClassifier,DDataType);RuntimeAccessibleClass.set_extend(LClassifier,LDataType);export var DStructuralFeature=(_dec23=RuntimeAccessible('DStructuralFeature'),_dec23(_class44=(_class45=/*#__PURE__*/function(_DPointerTargetable11){_inherits(DStructuralFeature,_DPointerTargetable11);var _super23=_createSuper(DStructuralFeature);function DStructuralFeature(){var _this31;_classCallCheck(this,DStructuralFeature);for(var _len25=arguments.length,args=new Array(_len25),_key25=0;_key25<_len25;_key25++){args[_key25]=arguments[_key25];}_this31=_super23.call.apply(_super23,[this].concat(args));_this31.id=void 0;_this31.annotations=[];_this31.parent=[];_this31.father=void 0;_this31.name=void 0;_this31.type=void 0;_this31.ordered=true;_this31.unique=true;_this31.lowerBound=0;_this31.upperBound=1;_this31.many=void 0;_this31.required=void 0;_this31.instances=[];_this31.changeable=true;_this31.volatile=true;_this31.transient=false;_this31.unsettable=false;_this31.derived=false;_this31.defaultValue=void 0;return _this31;}// DTypedElement\n// static singleton: LStructuralFeature;\n// static logic: typeof LStructuralFeature;\n// static structure: typeof DStructuralFeature;\n// inherit redefine\n// personal\n_createClass(DStructuralFeature,null,[{key:\"new\",value:function _new(name,type,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;Log.exx(\"DStructuralFeature is abstract, cannot instantiate\");return null;// if (!name) name = this.defaultname(\"feature \", father);\n// return new Constructors(new DStructuralFeature('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DStructuralFeature().end();\n}// getFeatureID(): number;\n// getContainerClass(): EJavaClass\n}]);return DStructuralFeature;}(DPointerTargetable),_class45.subclasses=[],_class45._extends=[],_class45))||_class44);export var LStructuralFeature=(_dec24=RuntimeAccessible('LStructuralFeature'),Abstract(_class46=_dec24(_class46=(_class47=/*#__PURE__*/function(_LTypedElement3){_inherits(LStructuralFeature,_LTypedElement3);var _super24=_createSuper(LStructuralFeature);function LStructuralFeature(){var _this32;_classCallCheck(this,LStructuralFeature);for(var _len26=arguments.length,args=new Array(_len26),_key26=0;_key26<_len26;_key26++){args[_key26]=arguments[_key26];}_this32=_super24.call.apply(_super24,[this].concat(args));_this32.__raw=void 0;_this32.id=void 0;_this32.annotations=void 0;_this32.parent=void 0;_this32.father=void 0;_this32.name=void 0;_this32.namespace=void 0;_this32.type=void 0;_this32.ordered=true;_this32.unique=true;_this32.lowerBound=0;_this32.upperBound=1;_this32.many=void 0;_this32.required=void 0;_this32.instances=void 0;_this32.changeable=void 0;_this32.volatile=void 0;_this32.transient=void 0;_this32.unsettable=void 0;_this32.derived=void 0;_this32.defaultValue=void 0;return _this32;}// DTypedElement\n// static singleton: LStructuralFeature;\n// static logic: typeof LStructuralFeature;\n// static structure: typeof DStructuralFeature;\n// inherit redefine\n// personal\n// defaultValueLiteral!: string;\n_createClass(LStructuralFeature,[{key:\"get_instances\",value:// getFeatureID(): number;\n// getContainerClass(): EJavaClass\nfunction get_instances(context){return context.data.instances.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_instances\",value:function set_instances(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'instances',list,\"\",true);return true;}},{key:\"get_changeable\",value:function get_changeable(context){return context.data.changeable;}},{key:\"set_changeable\",value:function set_changeable(val,context){SetFieldAction.new(context.data,'changeable',val);return true;}},{key:\"get_volatile\",value:function get_volatile(context){return context.data.volatile;}},{key:\"set_volatile\",value:function set_volatile(val,context){SetFieldAction.new(context.data,'volatile',val);return true;}},{key:\"get_transient\",value:function get_transient(context){return context.data.transient;}},{key:\"set_transient\",value:function set_transient(val,context){SetFieldAction.new(context.data,'transient',val);return true;}},{key:\"get_unsettable\",value:function get_unsettable(context){return context.data.unsettable;}},{key:\"set_unsettable\",value:function set_unsettable(val,context){SetFieldAction.new(context.data,'unsettable',val);return true;}},{key:\"get_derived\",value:function get_derived(context){return context.data.derived;}},{key:\"set_derived\",value:function set_derived(val,context){SetFieldAction.new(context.data,'derived',val);return true;}/*\r\n        protected get_defaultValueLiteral(context: Context): this[\"defaultValueLiteral\"] { return context.data.defaultValueLiteral; }\r\n        protected set_defaultValueLiteral(val: this[\"defaultValueLiteral\"], context: Context): boolean {\r\n            SetFieldAction.new(context.data, 'defaultValueLiteral', val, \"\", false);\r\n            return true;\r\n        }*/}]);return LStructuralFeature;}(LTypedElement),_class47.subclasses=[],_class47._extends=[],_class47))||_class46)||_class46);RuntimeAccessibleClass.set_extend(DTypedElement,DStructuralFeature);RuntimeAccessibleClass.set_extend(LTypedElement,LStructuralFeature);export var DReference=(_dec25=RuntimeAccessible('DReference'),Instantiable(_class48=Leaf(_class48=_dec25(_class48=(_class49=/*#__PURE__*/function(_DPointerTargetable12){_inherits(DReference,_DPointerTargetable12);var _super25=_createSuper(DReference);function DReference(){var _this33;_classCallCheck(this,DReference);for(var _len27=arguments.length,args=new Array(_len27),_key27=0;_key27<_len27;_key27++){args[_key27]=arguments[_key27];}_this33=_super25.call.apply(_super25,[this].concat(args));_this33.id=void 0;_this33.annotations=[];_this33.name=void 0;_this33.type=void 0;_this33.ordered=true;_this33.unique=true;_this33.lowerBound=0;_this33.upperBound=1;_this33.many=void 0;_this33.required=void 0;_this33.changeable=true;_this33.volatile=true;_this33.transient=false;_this33.unsettable=false;_this33.derived=false;_this33.defaultValueLiteral='';_this33.parent=[];_this33.father=void 0;_this33.instances=[];_this33.defaultValue=void 0;_this33.containment=false;_this33.container=false;_this33.resolveProxies=true;_this33.opposite=void 0;_this33.target=[];_this33.edges=[];return _this33;}// DStructuralFeature\n// static singleton: LReference;\n// static logic: typeof LReference;\n// static structure: typeof DReference;\n// inherit redefine\n// personal\n// ?\n// ?\n_createClass(DReference,null,[{key:\"new\",value:function _new(name,type,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!type)type=father;// default type is self-reference\nif(!name)name=this.defaultname(\"ref_\",father);return new Constructors(new DReference('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DStructuralFeature().DReference().end();}},{key:\"new2\",value:function new2(setter,father,type,name){if(!name)name=this.defaultname(name||\"ref_\",father);return new Constructors(new DReference('dwc'),father,true,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DStructuralFeature().DReference().end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"ref_\",a.father);return new Constructors(new DReference('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DPointerTargetable().DModelElement().DNamedElement(a.name).DTypedElement(a.type).DStructuralFeature().DReference().end(callback);}}]);return DReference;}(DPointerTargetable),_class49.subclasses=[],_class49._extends=[],_class49))||_class48)||_class48)||_class48);export var LReference=(_dec26=RuntimeAccessible('LReference'),Instantiable(_class50=Leaf(_class50=_dec26(_class50=(_class51=/*#__PURE__*/function(_LStructuralFeature){_inherits(LReference,_LStructuralFeature);var _super26=_createSuper(LReference);function LReference(){var _this34;_classCallCheck(this,LReference);for(var _len28=arguments.length,args=new Array(_len28),_key28=0;_key28<_len28;_key28++){args[_key28]=arguments[_key28];}_this34=_super26.call.apply(_super26,[this].concat(args));_this34.__raw=void 0;_this34.id=void 0;_this34.annotations=void 0;_this34.name=void 0;_this34.namespace=void 0;_this34.type=void 0;_this34.ordered=void 0;_this34.unique=void 0;_this34.lowerBound=void 0;_this34.upperBound=void 0;_this34.many=void 0;_this34.required=void 0;_this34.changeable=void 0;_this34.volatile=void 0;_this34.transient=void 0;_this34.unsettable=void 0;_this34.derived=void 0;_this34.defaultValueLiteral=void 0;_this34.parent=void 0;_this34.father=void 0;_this34.instances=void 0;_this34.defaultValue=void 0;_this34.containment=void 0;_this34.container=void 0;_this34.resolveProxies=void 0;_this34.opposite=void 0;_this34.edges=void 0;return _this34;}// static singleton: LReference;\n// static logic: typeof LReference;\n// static structure: typeof DReference;\n// inherit redefine\n// personal\n//??\n// target!: LClass[]; replaced by type\n_createClass(LReference,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var model={};var d=context.data;var l=context.proxyObject;model[ECoreReference.xsitype]='ecore:EReference';model[ECoreReference.eType]=l.type.typeEcoreString;model[ECoreReference.namee]=d.name;if(d.lowerBound!=null&&!isNaN(+d.lowerBound)){model[ECoreReference.lowerbound]=+d.lowerBound;}if(d.upperBound!=null&&!isNaN(+d.upperBound)){model[ECoreReference.upperbound]=+d.upperBound;}if(d.containment!=null){model[ECoreReference.containment]=d.containment;}return model;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addReference(context.data.name,context.data.type);var de=le.__raw;de.many=context.data.many;de.lowerBound=context.data.lowerBound;de.upperBound=context.data.upperBound;de.ordered=context.data.ordered;de.required=context.data.required;de.unique=context.data.unique;de.changeable=context.data.changeable;de.container=context.data.container;de.containment=context.data.containment;de.defaultValueLiteral=context.data.defaultValueLiteral;de.derived=context.data.derived;de.transient=context.data.transient;de.unsettable=context.data.unsettable;de.volatile=context.data.unsettable;var we=le;we.opposite=context.data.opposite||undefined;we.defaultValue=context.data.defaultValue;we.type=context.data.type;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;// we.target = deep ? context.proxyObject.target.map(lchild => lchild.duplicate(deep).id) : context.data.target;\nEND();return le;};}},{key:\"set_type\",value:function set_type(val,context){return _get(_getPrototypeOf(LReference.prototype),\"set_type\",this).call(this,val,context);}},{key:\"addClass\",value:function addClass(name,isInterface,isAbstract,isPrimitive,isPartial,partialDefaultName){return this.cannotCall(\"LReference.addClass\");}},{key:\"get_addClass\",value:function get_addClass(context){var _this35=this;return function(name,isInterface,isAbstract,isPrimitive,isPartial,partialDefaultName){BEGIN();var dclass=DClass.new(name,isInterface,isAbstract,isPrimitive,isPartial,partialDefaultName,context.proxyObject.package.id,true);// SetFieldAction.new(context.data.id, \"type\", dclass.id);\n_this35.set_type(dclass.id,context);END();return LPointerTargetable.fromD(dclass);};}},{key:\"get_containment\",value:function get_containment(context){return context.data.containment;}},{key:\"set_containment\",value:function set_containment(val,context){SetFieldAction.new(context.data,'containment',val);return true;}},{key:\"get_container\",value:function get_container(context){return context.data.container;}},{key:\"set_container\",value:function set_container(val,context){SetFieldAction.new(context.data,'container',val);return true;}},{key:\"get_resolveProxies\",value:function get_resolveProxies(context){return context.data.resolveProxies;}},{key:\"set_resolveProxies\",value:function set_resolveProxies(val,context){SetFieldAction.new(context.data,'resolveProxies',val);return true;}},{key:\"get_opposite\",value:function get_opposite(context){return context.data.opposite&&LPointerTargetable.from(context.data.opposite);}},{key:\"set_opposite\",value:function set_opposite(val,context){SetFieldAction.new(context.data,'opposite',Pointers.from(val),\"\",true);return true;}/*\r\n        /// todo: why this exist?  why not type?\r\n        protected get_target(context: Context): this[\"target\"] { return context.data.target.map(pointer => LPointerTargetable.from(pointer)); }\r\n        protected set_target(val: PackArr<this[\"target\"]>, context: Context): boolean {\r\n            const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n            SetFieldAction.new(context.data, 'target', list, \"\", true);\r\n            return true;\r\n        }*/},{key:\"get_defaultValue\",value:function get_defaultValue(context){return LPointerTargetable.fromPointer(context.data.defaultValue);}},{key:\"set_defaultValue\",value:function set_defaultValue(val,context){// @ts-ignore\nif(!val)val=[];else if(!Array.isArray(val))val=[val];var ptrs=Pointers.from(val);SetFieldAction.new(context.data,'defaultValue',ptrs,'',false);return true;}},{key:\"get_edges\",value:function get_edges(context){return context.data.edges.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_edges\",value:function set_edges(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});SetFieldAction.new(context.data,'edges',list,\"\",true);return true;}}]);return LReference;}(LStructuralFeature),_class51.subclasses=[],_class51._extends=[],_class51))||_class50)||_class50)||_class50);RuntimeAccessibleClass.set_extend(DStructuralFeature,DReference);RuntimeAccessibleClass.set_extend(LStructuralFeature,LReference);function has_opposite(oppositename){// return (c:Constructor, key:string, ):any =>{}\n}function obsolete_attribute(){return undefined;// function(c:Constructor, key:string,): any {}\n}export var DAttribute=(_dec27=RuntimeAccessible('DAttribute'),Leaf(_class52=_dec27(_class52=(_class53=/*#__PURE__*/function(_DPointerTargetable13){_inherits(DAttribute,_DPointerTargetable13);var _super27=_createSuper(DAttribute);function DAttribute(){var _this36;_classCallCheck(this,DAttribute);for(var _len29=arguments.length,args=new Array(_len29),_key29=0;_key29<_len29;_key29++){args[_key29]=arguments[_key29];}_this36=_super27.call.apply(_super27,[this].concat(args));_this36.id=void 0;_this36.annotations=[];_this36.name=void 0;_this36.type=void 0;_this36.ordered=true;_this36.unique=true;_this36.lowerBound=0;_this36.upperBound=1;_this36.many=void 0;_this36.required=void 0;_this36.changeable=true;_this36.volatile=true;_this36.transient=false;_this36.unsettable=false;_this36.derived=false;_this36.defaultValueLiteral='';_this36.parent=[];_this36.father=void 0;_this36.instances=[];_this36.defaultValue=void 0;_this36.isID=false;_this36.isIoT=false;return _this36;}// DStructuralFeature\n// static singleton: LAttribute;\n// static logic: typeof LAttribute;\n// static structure: typeof DAttribute;\n// inherit redefine\n// @has_opposite(\"father\")\n//@obsolete_attribute()\n//@has_opposite(\"attributes\")\n//@has_opposite(\"instanceof\")\n// personal\n// ? exist in ecore as \"iD\" ?\n_createClass(DAttribute,null,[{key:\"new\",value:function _new(name,type,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!name)name=this.defaultname(\"attr_\",father);if(!type)type=LPointerTargetable.from(Selectors.getFirstPrimitiveTypes()).id;// default type as string\nreturn new Constructors(new DAttribute('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DStructuralFeature().DAttribute().end();}},{key:\"new2\",value:function new2(setter,father,type,name){if(!name)name=this.defaultname(name||\"ref_\",father);return new Constructors(new DAttribute('dwc'),father,true,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DStructuralFeature().DAttribute().end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"attr_\",a.father);return new Constructors(new DAttribute('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DTypedElement(a.type).DStructuralFeature().DAttribute().end(callback);}}]);return DAttribute;}(DPointerTargetable),_class53.subclasses=[],_class53._extends=[],_class53))||_class52)||_class52);export var LAttribute=(_dec28=RuntimeAccessible('LAttribute'),Leaf(_class54=Instantiable(_class54=_dec28(_class54=(_class55=/*#__PURE__*/function(_LStructuralFeature2){_inherits(LAttribute,_LStructuralFeature2);var _super28=_createSuper(LAttribute);function LAttribute(){var _this37;_classCallCheck(this,LAttribute);for(var _len30=arguments.length,args=new Array(_len30),_key30=0;_key30<_len30;_key30++){args[_key30]=arguments[_key30];}_this37=_super28.call.apply(_super28,[this].concat(args));_this37.__raw=void 0;_this37.id=void 0;_this37.annotations=void 0;_this37.name=void 0;_this37.namespace=void 0;_this37.type=void 0;_this37.ordered=void 0;_this37.unique=void 0;_this37.lowerBound=void 0;_this37.upperBound=void 0;_this37.many=void 0;_this37.required=void 0;_this37.changeable=void 0;_this37.volatile=void 0;_this37.transient=void 0;_this37.unsettable=void 0;_this37.derived=void 0;_this37.defaultValue=void 0;_this37.parent=void 0;_this37.father=void 0;_this37.instances=void 0;_this37.isID=false;_this37.isIoT=false;return _this37;}// DStructuralFeature\n// static singleton: LAttribute;\n// static logic: typeof LAttribute;\n// static structure: typeof DAttribute;\n// inherit redefine\n// defaultValueLiteral!: string;\n// personal\n// ? exist in ecore as \"iD\" ?\n_createClass(LAttribute,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var model={};var d=context.data;var l=context.proxyObject;EcoreParser.write(model,ECoreAttribute.xsitype,'ecore:EAttribute');EcoreParser.write(model,ECoreAttribute.eType,l.type.typeEcoreString);EcoreParser.write(model,ECoreAttribute.namee,d.name);EcoreParser.write(model,ECoreAttribute.lowerbound,''+d.lowerBound);EcoreParser.write(model,ECoreAttribute.upperbound,''+d.upperBound);return model;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addAttribute(context.data.name,context.data.type);var de=le.__raw;de.many=context.data.many;de.lowerBound=context.data.lowerBound;de.upperBound=context.data.upperBound;de.ordered=context.data.ordered;de.required=context.data.required;de.unique=context.data.unique;de.changeable=context.data.changeable;de.defaultValue=context.data.defaultValue;de.defaultValueLiteral=context.data.defaultValueLiteral;de.derived=context.data.derived;de.transient=context.data.transient;de.unsettable=context.data.unsettable;de.volatile=context.data.volatile;de.isID=context.data.isID;de.isIoT=context.data.isIoT;var we=le;we.type=context.data.type;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;END();return le;};}},{key:\"addEnum\",value:function addEnum(){return this.addEnumerator.apply(this,arguments);}},{key:\"get_addEnum\",value:function get_addEnum(context){return this.get_addEnumerator(context);}},{key:\"addEnumerator\",value:function addEnumerator(name,father){return this.cannotCall(\"Attribute.addEnumerator\");}},{key:\"get_addEnumerator\",value:function get_addEnumerator(context){return function(name,father){var _context$proxyObject$2;return LPointerTargetable.fromD(DEnumerator.new(name,(_context$proxyObject$2=context.proxyObject.package)===null||_context$proxyObject$2===void 0?void 0:_context$proxyObject$2.id,true));};}},{key:\"get_isID\",value:function get_isID(context){return context.data.isID;}},{key:\"set_isID\",value:function set_isID(val,context){SetFieldAction.new(context.data,'isID',val);return true;}},{key:\"get_isIoT\",value:function get_isIoT(context){return context.data.isIoT;}},{key:\"set_isIoT\",value:function set_isIoT(val,context){TRANSACTION(function(){var _iterator20=_createForOfIteratorHelper(context.proxyObject.instances),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var value=_step20.value;SetFieldAction.new(value,'topic','','',false);}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}SetFieldAction.new(context.data,'isIoT',val);});return true;}},{key:\"get_defaultValue\",value:function get_defaultValue(context){return context.data.defaultValue;}},{key:\"set_defaultValue\",value:function set_defaultValue(val,context){// @ts-ignore\nif(!val)val=[];else if(!Array.isArray(val))val=[val];SetFieldAction.new(context.data,'defaultValue',val,'',false);return true;}}]);return LAttribute;}(LStructuralFeature),_class55.subclasses=[],_class55._extends=[],_class55))||_class54)||_class54)||_class54);RuntimeAccessibleClass.set_extend(DStructuralFeature,DAttribute);RuntimeAccessibleClass.set_extend(LStructuralFeature,LAttribute);export var DEnumLiteral=(_dec29=RuntimeAccessible('DEnumLiteral'),Leaf(_class56=_dec29(_class56=(_class57=/*#__PURE__*/function(_DPointerTargetable14){_inherits(DEnumLiteral,_DPointerTargetable14);var _super29=_createSuper(DEnumLiteral);function DEnumLiteral(){var _this38;_classCallCheck(this,DEnumLiteral);for(var _len31=arguments.length,args=new Array(_len31),_key31=0;_key31<_len31;_key31++){args[_key31]=arguments[_key31];}_this38=_super29.call.apply(_super29,[this].concat(args));_this38.id=void 0;_this38.parent=[];_this38.father=void 0;_this38.annotations=[];_this38.name=void 0;_this38.value=void 0;_this38.literal=void 0;return _this38;}// DNamedElement\n// static singleton: LAttribute;\n// static logic: typeof LAttribute;\n// static structure: typeof DAttribute;\n// inherit redefine\n// personal\n// ordinal: number=1; replaced by value\n_createClass(DEnumLiteral,null,[{key:\"new\",value:function _new(name,value,father){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;//vv4\nif(!name)name=this.defaultname(\"literal \",father);return new Constructors(new DEnumLiteral('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DEnumLiteral(value).end();}},{key:\"new2\",value:function new2(setter,father,name){if(!name)name=this.defaultname(\"literal \",father);return new Constructors(new DEnumLiteral('dwc'),father,true,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DEnumLiteral().end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"literal_\",a.father);return new Constructors(new DEnumLiteral('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DEnumLiteral().end(callback);}}]);return DEnumLiteral;}(DPointerTargetable),_class57.subclasses=[],_class57._extends=[],_class57))||_class56)||_class56);export var LEnumLiteral=(_dec30=RuntimeAccessible('LEnumLiteral'),Leaf(_class58=_dec30(_class58=(_class59=/*#__PURE__*/function(_LNamedElement4){_inherits(LEnumLiteral,_LNamedElement4);var _super30=_createSuper(LEnumLiteral);function LEnumLiteral(){var _this39;_classCallCheck(this,LEnumLiteral);for(var _len32=arguments.length,args=new Array(_len32),_key32=0;_key32<_len32;_key32++){args[_key32]=arguments[_key32];}_this39=_super30.call.apply(_super30,[this].concat(args));_this39.__raw=void 0;_this39.id=void 0;_this39.parent=void 0;_this39.father=void 0;_this39.annotations=void 0;_this39.name=void 0;_this39.namespace=void 0;_this39.value=void 0;_this39.ordinal=void 0;_this39.literal=void 0;return _this39;}// DNamedElement\n// static singleton: LAttribute;\n// static logic: typeof LAttribute;\n// static structure: typeof DAttribute;\n// inherit redefine\n// personal\n_createClass(LEnumLiteral,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};var d=context.data;json[EcoreLiteral.value]=d.value;json[EcoreLiteral.literal]=d.literal;json[EcoreLiteral.namee]=d.name;return json;}},{key:\"generateEcoreJsonM1\",value:function generateEcoreJsonM1(){return this.cannotCall(\"GenerateEcoreJsonM1\");}},{key:\"get_generateEcoreJsonM1\",value:function get_generateEcoreJsonM1(context){return this.impl_generateEcoreJsonM1(context);}},{key:\"impl_generateEcoreJsonM1\",value:function impl_generateEcoreJsonM1(context){// loopDetectionObj[context.data.id] = context.data; no loop detection here, the same literal can be exported multiple times in m1\n// return context.data.literal;\n// return context.data.name;\nreturn function(){return context.data.value;};}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addLiteral(context.data.name,context.data.value);var de=le.__raw;de.literal=context.data.literal;de.value=context.data.value;var we=le;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;END();return le;};}},{key:\"get_ordinal\",value:function get_ordinal(context){return this.get_value(context);}},{key:\"set_ordinal\",value:function set_ordinal(val,context){return this.set_value(val,context);}},{key:\"get_value\",value:function get_value(context){var ordinalAssumedByPosition=true;// per ottimizzazione forse è disattivabile\nif(!ordinalAssumedByPosition)return context.data.value||0;return context.proxyObject.father.ordinals.map(function(o){return o===null||o===void 0?void 0:o.id;}).indexOf(context.data.id);}},{key:\"set_value\",value:function set_value(val,context){if(val===context.data.value)return true;var ordinals=context.proxyObject.father.ordinals;if(ordinals[val]){Log.e(true,\"that ordinal place is already taken by \"+ordinals[val].name,{sameOrdinalLit:ordinals[val],ordinals:ordinals,thiss:context.data});return true;}return SetFieldAction.new(context.data,'value',val);}/*\r\n        protected get_literal(context: Context): this[\"literal\"] { return context.data.literal; }\r\n        protected set_literal(val: this[\"literal\"], context: Context): boolean {\r\n            return SetFieldAction.new(context.data, 'literal', val, '', false); }*/},{key:\"get_literal\",value:function get_literal(context){return context.data.name;}},{key:\"set_literal\",value:function set_literal(val,context){if(val===context.data.name)return true;return SetFieldAction.new(context.data,'name',val,'',false);}}]);return LEnumLiteral;}(LNamedElement),_class59.subclasses=[],_class59._extends=[],_class59))||_class58)||_class58);RuntimeAccessibleClass.set_extend(DNamedElement,DEnumLiteral);RuntimeAccessibleClass.set_extend(LNamedElement,LEnumLiteral);export var DEnumerator=(_dec31=RuntimeAccessible('DEnumerator'),Leaf(_class60=_dec31(_class60=(_class61=/*#__PURE__*/function(_DPointerTargetable15){_inherits(DEnumerator,_DPointerTargetable15);var _super31=_createSuper(DEnumerator);function DEnumerator(){var _this40;_classCallCheck(this,DEnumerator);for(var _len33=arguments.length,args=new Array(_len33),_key33=0;_key33<_len33;_key33++){args[_key33]=arguments[_key33];}_this40=_super31.call.apply(_super31,[this].concat(args));_this40.id=void 0;_this40.instanceClassName=void 0;_this40.parent=[];_this40.father=void 0;_this40.annotations=[];_this40.name=void 0;_this40.defaultValue=void 0;_this40.serializable=true;_this40.literals=[];return _this40;}// DDataType\n// static singleton: LEnumerator;\n// static logic: typeof LEnumerator;\n// static structure: typeof DEnumerator;\n// inherit redefine\n// instanceClass: EJavaClass // ?\n// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\n// usedBy: Pointer<DAttribute, 0, 'N', LAttribute> = []; obsolete?\n// personal\n_createClass(DEnumerator,null,[{key:\"new\",value:function _new(name,father){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!name)name=this.defaultname(\"enum \",father);return new Constructors(new DEnumerator('dwc'),father,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DEnumerator().end();}},{key:\"new2\",value:function new2(setter,father,name){if(!name)name=this.defaultname(\"enum \",father);return new Constructors(new DEnumerator('dwc'),father,true,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DEnumerator().end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"enum \",a.father);return new Constructors(new DEnumerator('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DEnumerator().end(callback);}}]);return DEnumerator;}(DPointerTargetable),_class61.subclasses=[],_class61._extends=[],_class61))||_class60)||_class60);export var LEnumerator=(_dec32=RuntimeAccessible('LEnumerator'),Node(_class62=_dec32(_class62=(_class63=/*#__PURE__*/function(_LDataType){_inherits(LEnumerator,_LDataType);var _super32=_createSuper(LEnumerator);function LEnumerator(){var _this41;_classCallCheck(this,LEnumerator);for(var _len34=arguments.length,args=new Array(_len34),_key34=0;_key34<_len34;_key34++){args[_key34]=arguments[_key34];}_this41=_super32.call.apply(_super32,[this].concat(args));_this41.__raw=void 0;_this41.id=void 0;_this41.instanceClassName=void 0;_this41.parent=void 0;_this41.father=void 0;_this41.annotations=void 0;_this41.name=void 0;_this41.namespace=void 0;_this41.defaultValue=void 0;_this41.serializable=void 0;_this41.isPrimitive=void 0;_this41.isClass=void 0;_this41.isEnum=void 0;_this41.literals=void 0;_this41.ordinals=void 0;return _this41;}// DDataType\n// static singleton: LEnumerator;\n// static logic: typeof LEnumerator;\n// static structure: typeof DEnumerator;\n// inherit redefine\n// instanceClass: EJavaClass // ?\n// isInstance(object: EJavaObject): boolean; ?\n// getClassifierID(): number;\n// usedBy!: LAttribute[];\n// personal\n_createClass(LEnumerator,[{key:\"generateEcoreJson_impl\",value:// literal array ordered by ordinal number\nfunction generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};var d=context.data;if(d.instanceClassName)json[ECoreEnum.instanceTypeName]=d.instanceClassName;json[ECoreEnum.xsitype]='ecore:EEnum';json[ECoreEnum.namee]=d.name;json[ECoreEnum.serializable]=d.serializable?\"true\":\"false\";json[ECoreEnum.eLiterals]=context.proxyObject.literals.map(function(l){return l.generateEcoreJson(loopDetectionObj);});return json;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return this.cannotCall((this.constructor.cname||this.constructor.name)+\"duplicate()\");}},{key:\"get_duplicate\",value:function get_duplicate(context){return function(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;BEGIN();var le=context.proxyObject.father.addEnumerator(context.data.name);var de=le.__raw;de.defaultValue=context.data.defaultValue;de.serializable=context.data.serializable;var we=le;we.annotations=deep?context.proxyObject.annotations.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.annotations;we.literals=deep?context.proxyObject.literals.map(function(lchild){return lchild.duplicate(deep).id;}):context.data.literals;END();return le;};}},{key:\"get_children_idlist\",value:function get_children_idlist(context){return[].concat(_toConsumableArray(_get(_getPrototypeOf(LEnumerator.prototype),\"get_children_idlist\",this).call(this,context)),_toConsumableArray(context.data.literals));}},{key:\"addLiteral\",value:function addLiteral(name,value){return this.cannotCall(\"addLiteral\");}},{key:\"get_addLiteral\",value:function get_addLiteral(context){return function(name,value){return LPointerTargetable.fromD(DEnumLiteral.new(name,value,context.data.id,true));};}},{key:\"get_literals\",value:function get_literals(context){return context.data.literals.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_literals\",value:function set_literals(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.literals;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'literals',list,\"\",true);var _iterator21=_createForOfIteratorHelper(diff.added),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _id8=_step21.value;SetFieldAction.new(_id8,'father',context.data.id,'',true);SetFieldAction.new(_id8,'parent',context.data.id,'+=',true);}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}for(var _i8=0,_arr8=diff.removed;_i8<_arr8.length;_i8++){var id=_arr8[_i8];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_ordinals\",value:function get_ordinals(context){var ret=[];var literals=context.proxyObject.literals;var dliterals=literals.map(function(d){return d.__raw;});/*\r\n        if it happens like:   second=2, third, fourth=4, fifth=3, sixth.(six would be 4 but 4 already exist)\r\n        there are 2 problems:\r\n        1) [3] is already occupied by third, but fith is correctly being the only one explicitly declaring his ordinal 3.\r\n           fixed by first assigning all known ordinals, then starting with the assumed ordinals.\r\n        2) sixth would get in position fourth, but that is already occupied\r\n         */ // adressing 1)\nfor(var i=0;i<dliterals.length;i++){var v=dliterals[i].value;if(v){ret[v]=literals[i];}}// setting assumed literals\nvar currentOrdinal=0;for(var _i9=0;_i9<dliterals.length;_i9++){var _v=dliterals[_i9].value;if(_v){currentOrdinal=_v;continue;}while(ret[currentOrdinal]){currentOrdinal++;}// adressing 2)\nret[currentOrdinal]=literals[_i9];}return ret;}}]);return LEnumerator;}(LDataType),_class63.subclasses=[],_class63._extends=[],_class63))||_class62)||_class62);RuntimeAccessibleClass.set_extend(DDataType,DEnumerator);RuntimeAccessibleClass.set_extend(LDataType,LEnumerator);export var DModelM1=(_dec33=RuntimeAccessible('DModelM1'),_dec33(_class64=/*#__PURE__*/function(_DNamedElement){_inherits(DModelM1,_DNamedElement);var _super33=_createSuper(DModelM1);function DModelM1(){var _this42;_classCallCheck(this,DModelM1);for(var _len35=arguments.length,args=new Array(_len35),_key35=0;_key35<_len35;_key35++){args[_key35]=arguments[_key35];}_this42=_super33.call.apply(_super33,[this].concat(args));_this42.name=void 0;_this42.roots=void 0;_this42.children=void 0;return _this42;}// no package ma LObjects[] (solo quelli isRoot)\nreturn DModelM1;}(DNamedElement))||_class64);export var LModelM1=(_dec34=RuntimeAccessible('LModelM1'),_dec34(_class66=/*#__PURE__*/function(_LNamedElement5){_inherits(LModelM1,_LNamedElement5);var _super34=_createSuper(LModelM1);function LModelM1(){var _this43;_classCallCheck(this,LModelM1);for(var _len36=arguments.length,args=new Array(_len36),_key36=0;_key36<_len36;_key36++){args[_key36]=arguments[_key36];}_this43=_super34.call.apply(_super34,[this].concat(args));_this43.name=void 0;_this43.roots=void 0;_this43.children=void 0;return _this43;}return LModelM1;}(LNamedElement))||_class66);RuntimeAccessibleClass.set_extend(DModelM1,DNamedElement);RuntimeAccessibleClass.set_extend(LModelM1,LNamedElement);// problema: o costringo l'utente a fare sempre .value per ricevere il valore invece dei metadati\n// oppure ritorno il valore da subito ma dal valore non posso accedere ai metadati (upperbound...) a meno che non trovi un altor sistema.\n// possibile fix: LValue.toString() che ritorna il .value\nexport var DModel=(_dec35=RuntimeAccessible('DModel'),_dec35(_class68=(_class69=/*#__PURE__*/function(_DNamedElement2){_inherits(DModel,_DNamedElement2);var _super35=_createSuper(DModel);function DModel(){var _this44;_classCallCheck(this,DModel);for(var _len37=arguments.length,args=new Array(_len37),_key37=0;_key37<_len37;_key37++){args[_key37]=arguments[_key37];}_this44=_super35.call.apply(_super35,[this].concat(args));_this44.id=void 0;_this44.parent=[];_this44.father=void 0;_this44.annotations=[];_this44.name=void 0;_this44.packages=[];_this44.isMetamodel=true;_this44.objects=[];_this44.models=[];_this44.instanceof=void 0;return _this44;}// DNamedElement\n// static singleton: LModel;\n// static logic: typeof LModel;\n// static structure: typeof DModel;\n// inherit redefine\n// personal\n_createClass(DModel,null,[{key:\"new\",value:function _new(name,instanceoff,isMetamodel){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var dmodels=Selectors.getAll(DModel,undefined,undefined,true,false);var dmodelnames=dmodels.map(function(d){return d.name;});if(!name)name=this.defaultname(\"model_\",function(name){return dmodelnames.includes(name);});return new Constructors(new DModel('dwc'),undefined,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DModel(instanceoff,isMetamodel).end();}},{key:\"new2\",value:function new2(setter,name,instanceoff){var dmodels=Selectors.getAll(DModel,undefined,undefined,true,false);var dmodelnames=dmodels.map(function(d){return d.name;});if(!name)name=this.defaultname(\"model_\",function(name){return dmodelnames.includes(name);});return new Constructors(new DModel('dwc'),undefined,true,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DModel(instanceoff).end(function(d){Object.assign(d,setter);});}},{key:\"new3\",value:function new3(a,callback){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var dmodels=Selectors.getAll(DModel,undefined,undefined,true,false);var dmodelnames=dmodels.map(function(d){return d.name;});if(!a.name)a.name=this.defaultname(\"model_\",function(name){return dmodelnames.includes(name);});return new Constructors(new DModel('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DModel(a.instanceof,!a.instanceof).end(callback);}}]);return DModel;}(DNamedElement),_class69.subclasses=[],_class69._extends=[],_class69))||_class68);export var EdgeStarter=(_dec36=RuntimeAccessible('EdgeStarter'),_dec36(_class70=/*#__PURE__*/function(){// <T1 extends LPointerTargetable = LPointerTargetable, T2 extends LPointerTargetable = LPointerTargetable>{\nfunction EdgeStarter(start,end,sn,en){var _this$startSize,_this$startVertexSize;var otherPossibleEnds=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];_classCallCheck(this,EdgeStarter);this.start=void 0;this.end=void 0;this.startNode=void 0;this.endNode=void 0;this.startVertex=void 0;this.endVertex=void 0;this.startSize=void 0;this.endSize=void 0;this.startVertexSize=void 0;this.endVertexSize=void 0;this.otherEnds=void 0;this.overlaps=void 0;this.vertexOverlaps=void 0;this.start=start;this.end=end;this.startNode=sn;this.endNode=en;this.otherEnds=otherPossibleEnds||end.nodes;this.startSize=sn.outerSize;this.endSize=en.outerSize;this.startVertex=sn.vertex;this.endVertex=en.vertex;this.startVertexSize=this.startVertex===sn?this.startSize:this.startVertex.outerSize;this.endVertexSize=this.endVertex===en?this.endSize:this.endVertex.outerSize;this.overlaps=(_this$startSize=this.startSize)===null||_this$startSize===void 0?void 0:_this$startSize.isOverlapping(this.endSize);this.vertexOverlaps=(_this$startVertexSize=this.startVertexSize)===null||_this$startVertexSize===void 0?void 0:_this$startVertexSize.isOverlapping(this.endVertexSize);}_createClass(EdgeStarter,null,[{key:\"oneToMany\",value:function oneToMany(start,ends){var sn=start.node;if(!sn)return[];var rett=ends.map(function(e){if(!e)return undefined;var en=e.node;return en?new EdgeStarter(start,e,sn,en):undefined;});var ret=rett.filter(function(e){return!!e;});// let ret: (EdgeStarter)[] = rett.filter<EdgeStarter>((e): (e is EdgeStarter) => { return !!e });\nreturn ret;}}]);return EdgeStarter;}())||_class70);export var LModel=(_dec37=RuntimeAccessible('LModel'),_dec37(_class72=(_class73=/*#__PURE__*/function(_LNamedElement6){_inherits(LModel,_LNamedElement6);var _super36=_createSuper(LModel);function LModel(){var _this45;_classCallCheck(this,LModel);for(var _len38=arguments.length,args=new Array(_len38),_key38=0;_key38<_len38;_key38++){args[_key38]=arguments[_key38];}_this45=_super36.call.apply(_super36,[this].concat(args));_this45.__raw=void 0;_this45.id=void 0;_this45.parent=void 0;_this45.father=void 0;_this45.annotations=void 0;_this45.name=void 0;_this45.namespace=void 0;_this45.isMetamodel=void 0;_this45.packages=void 0;_this45.models=void 0;_this45.instanceof=void 0;_this45.objects=void 0;_this45.roots=void 0;_this45.enums=void 0;_this45.enumerators=void 0;_this45.classes=void 0;_this45.operations=void 0;_this45.parameters=void 0;_this45.exceptions=void 0;_this45.attributes=void 0;_this45.references=void 0;_this45.literals=void 0;_this45.values=void 0;_this45.allSubAnnotations=void 0;_this45.allSubPackages=void 0;_this45.allSubObjects=void 0;_this45.allSubValues=void 0;_this45.suggestedEdges=void 0;_this45.__info_of__suggestedEdges={type:'Dictionary<\"extend\" | \"reference\" | \"packageDependencies\" | DmodelName, EdgeStarter[]>',txt:\"A map to access all possible kind of edges based on model data.\"+\"<br/>extend and reference are the most commonly used for horizontal references (outside the containment tree schema).\"+\"<br/>packageDependencies links packages using classes from other packages.\"+// \"<br/>other keys are the names of container data types (mode, package, class, object...) from them to their childrens rendered as Nodes (vertical tree schema).\" +\n// todo: implement the commented part as LGrahElement.vertexs.map(v=>{start:v.parentnode.isVertex ? v.parentnode.id : undefined, end:v.id}).filter(e=>e.start) instead. it's a thing of graph more than model.\n\"<br/> EdgeStarter is a collection of data useful to start a &lt;Edge /&gt; in JSX.\"};_this45.otherObjects=void 0;_this45.otherInstances=void 0;_this45.__info_of__otherObjects={type:\"(...excludeInstances: (string|LClass|Pointer)[], excludeSubclasses: boolean = false)=>LObject[]\",txt:/*#__PURE__*/_jsx(\"div\",{children:\"Alias for this.otherInstances.\"})};_this45.__info_of__otherInstances={type:\"(...excludeInstances: (string|LClass|Pointer)[], excludeSubclasses: boolean = false)=>LObject[]\",txt:/*#__PURE__*/_jsxs(\"div\",{children:[\"Read this.instancesOf documentation first.\",/*#__PURE__*/_jsx(\"br\",{}),\"Retrieves all the objects not obtained between previous calls of this.instancesOf and the last call of this method.\",/*#__PURE__*/_jsx(\"br\",{}),\"Meaning calling it twice without any instancesOf in between, it will return all objects.\"]})};_this45.__type_of__instancesOf={type:\"(instancetypes: orArr<(string | LClass | Pointer)>, includeSubclasses: boolean = false) => LObject[]\",txt:/*#__PURE__*/_jsxs(\"div\",{children:[\"Retrieves all objects instancing a target class.\",/*#__PURE__*/_jsx(\"br\",{}),\"The first parameter is the targeted class, which can be his name, pointer or object.\",/*#__PURE__*/_jsx(\"br\",{}),\"The second parameter tells if instances of his subclasses needs to be retreieved as well.\"]})};_this45.__info_of__addObject={type:\"(json: object, instanceof?: LClass) => LObject\",txt:\"Appends an object instancing \\\"instanceof\\\" to the model.\\n<br>Setting his own properties, and DValues according to the content of the parameter object.\"};_this45.__info_of__instantiableClasses={type:\"(o?: object, loose?: boolean) => LClass[]\",txt:\"List of all classes which can be used to instantiate an object.\"+\"\\n<br>Abstract and Interface classes are excluded.\"+\"\\n<br>If the parameter \\\"o\\\" is specified, it will filter only the instances conforming to the object schema.\"+\"\\n<br>Results are sorted from tightest fit to loosest fit.\"+\"\\n<br>loose parameter set to true makes return instead a list of matching scores of all subclasses.\",hidden:true};return _this45;}// static singleton: LModel;\n// static logic: typeof LModel;\n// static structure: typeof DModel;\n// inherit redefine\n// personal\n// Metamodel\n// Model\n// utilities to go down in the tree (plural names)\n// alias for enumerators\n//, model: EdgeStarter[], package:EdgeStarter[], class:EdgeStarter[]};\n_createClass(LModel,[{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var json={};// if it's M2 metamodel\nif(context.data.isMetamodel){var packageArr=[];var _iterator22=_createForOfIteratorHelper(context.proxyObject.packages),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var pkg=_step22.value;packageArr.push(pkg.generateEcoreJson(loopDetectionObj));}// return (context.proxyObject.packages[0])?.generateEcoreJson(loopDetectionObj);\n}catch(err){_iterator22.e(err);}finally{_iterator22.f();}json[ECoreRoot.ecoreEPackage]=packageArr;return json;}// if it's M1 model\n// let serializeasroot = context.proxyObject.isRoot && loopDetectionObj.length; // if rootobj is nested because you started the serialization from another node, i prevent it generating root content\nvar _iterator23=_createForOfIteratorHelper(context.proxyObject.roots),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var obj=_step23.value;json[obj.ecoreRootName]=obj.generateEcoreJson(loopDetectionObj);}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}return json;}},{key:\"addPackage\",value:function addPackage(name,uri,prefix){return this.cannotCall(\"addPackage\");}},{key:\"get_addPackage\",value:function get_addPackage(context){console.log(\"Model.addPackage()\",{context:context,thiss:this});return function(name,uri,prefix){return LPointerTargetable.fromD(DPackage.new(name,uri,prefix,context.data.id,true,DModel));};}},{key:\"_defaultGetter\",value:function _defaultGetter(c,key){console.log(\"$getter 000\",{key:key,ism1:!c.data.isMetamodel,ism:c.data.isMetamodel,data:c.data});if(!c.data.isMetamodel)return this._defaultGetterM1(c,key);return this._defaultGetterM2(c,key);}},{key:\"_defaultGetterM2\",value:function _defaultGetterM2(c,key){Log.ee(\"Could not find property \"+key+\" on MetaModel\",{c:c,key:key});var s=store.getState();if(key[0]===\"$\"){// look for m1 matches\nvar k=key.substring(1).toLowerCase();console.log(\"$getter m2 0\",{k:k,key:key});var _iterator24=_createForOfIteratorHelper(this.get_allSubPackages(c,s)),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var subelement=_step24.value;var n=subelement.__raw.name;if(n&&n.toLowerCase()===k)return subelement;}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}var _iterator25=_createForOfIteratorHelper(this.get_classes(c,s)),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var _subelement=_step25.value;var _n=_subelement.__raw.name;if(_n&&_n.toLowerCase()===k)return _subelement;}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}}}},{key:\"_defaultGetterM1\",value:function _defaultGetterM1(c,key){// if m1.$m1RootObjectName then --> return that root object\n// if m1.$m1ObjectName then --> return that sub object nested somewhere in the model.\n// if m1.$m2classname\"s\" then --> this.instancesOf(\"m2classname\")\n// if m1.$m2classname then ---> m2.$m2classname (lower priority, if there are 2 metaclasses differing only by final s,\n// the one with 1 more final \"s\" if shadowed by the instances of the one with 1 less final \"s\",\n// in that case you can access the shadowed one through m1.instanceof.$classnames\n// priorities: 1) m1 name natch --> m1object. 2) m2 exact name match --> m2item, 3) m2 name+\"s\" match --> instances\n// to access m2 classes within a package, need to navigate it like model.$packagename.Ssubcpackagename.$classname,\n// path + \"s\" won't work in that case, and need to use this.getInstancesOf instead\nif(key[0]===\"$\"){// look for m1 matches\nvar deepmatch;var k=key.substring(1).toLowerCase();console.log(\"$getter 0\",{k:k,key:key,deepmatch:deepmatch});var directSubObjects=U.objectFromArrayValues(c.data.objects);var _iterator26=_createForOfIteratorHelper(this.get_allSubObjects(c)),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var subobject=_step26.value;var n=subobject.name;if(!n||n.toLowerCase()!==k)continue;// A0) perfect match with direct child object\nif(directSubObjects[subobject.id])return subobject;// actually cannot do direct match, because proxy get function will solve it directly before calling _defaultGetter\nelse if(!deepmatch)deepmatch=subobject;}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}console.log(\"$getter 1\",{k:k,key:key,deepmatch:deepmatch});// A1) match with deep sub-object\nif(deepmatch)return deepmatch;// look for m2 matches\nvar m2=this.get_instanceof(c);console.log(\"$getter 2\",{k:k,key:key,m2:m2});if(!m2)return Log.ee(\"Could not find m1 match for data.$name. And the metamodel is missing, so cannot get instances by type.\",{c:c,key:key,m2:m2});var m2item;// check for a perfect m2 name match and return it\nm2item=m2[key];console.log(\"$getter 3\",{k:k,key:key,m2:m2,m2item:m2item});if(m2item)return m2item;//this.instancesOf(key);\nif(!m2)Log.ee(\"Could not find property \"+key+\" on M1 Model\",{c:c,key:key,m2:m2});// if not a perfect name match, i try name+s match for instances\nif(key[key.length-1]===\"s\"){var key1=key.substring(0,key.length-1);m2item=m2[key1];console.log(\"$getter 4\",{k:k,key:key,key1:key1,m2:m2,m2item:m2item});if(m2item){if(m2item.className===\"DClass\")return this.get_instancesOf(c)(m2item);else return Log.ee(\"Could not get instances of \"+key1+\".\",{c:c,key:key,m2:m2});}}console.log(\"$getter 5\",{k:k,key:key,m2:m2,m2item:m2item});if(!m2)return Log.ee(\"Could not find any subelement with name \"+key+\" on M1 or M2 Models\",{c:c,key:key,m1:c.data,m2:m2});}}// public otherObjectsSetup(){ LModel.otherObjectsTemp = undefined; LModel.otherObectsAccessedKeys = []; }\n},{key:\"get_otherObjects\",value:function get_otherObjects(c){return this.get_otherInstances(c);}},{key:\"get_otherInstances\",value:function get_otherInstances(c){var _this46=this;// todo:\nreturn function(excludeInstances){var includeSubclasses=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var ret;_this46.get_instancesOf(c)(excludeInstances,includeSubclasses);// and drop the result\nif(!LModel.otherObjectsTemp){ret=_this46.get_allSubObjects(c);}else{var dict=_objectSpread({},LModel.otherObjectsTemp);var _iterator27=_createForOfIteratorHelper(LModel.otherObectsAccessedKeys),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var _key39=_step27.value;delete dict[_key39];}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}delete LModel.otherObjectsTemp;delete LModel.otherObectsAccessedKeys;ret=Object.values(dict).flat();}return ret;};}// not meant to be called directly.\n},{key:\"_populateOtherObjects\",value:function _populateOtherObjects(c,classes){// from names, DClass and ptrs, make them only ptrs. all classes of this model are valid name targets.\n// nb: cannot optimize getting only instantiated classes from this.get_allSubObjects because if a class have 0 instances should have an empty array instead of undefined (risk jsx crash)\nvar state=store.getState();var dinstancetypes=(classes||this.get_classes(c,state)).map(function(c){return c.__raw;});var namemap={};namemap=dinstancetypes.reduce(function(acc,current){namemap[current.name]=current;return namemap;},namemap);var idtoname={};for(var n in namemap){idtoname[namemap[n].id]=n;}// make it more general, first make a dictionary holding all selected types as keys, including \"_other\"\n// then a SEPARATE (split this) function to return only the selected keys, merging the subarrays in the global naming instance map.\nLModel.otherObjectsTemp={};LModel.otherObectsAccessedKeys=[];// part 1: i add empty arrays for all instances, but not include shapeless objects.\nfor(var _name in namemap){LModel.otherObjectsTemp[_name]=[];}//LPointerTargetable.fromPointer(namemap[name].instances); }\n// part 2: for shapeless objs too\nLModel.otherObjectsTemp[undefined]=[];var allObjects=this.get_allSubObjects(c,state);// part 3: now i populate the Model.otherObjectsTemp dictionary arrays\nvar _iterator28=_createForOfIteratorHelper(allObjects),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var o=_step28.value;// if (o.__instanceof) continue;\nvar _name2=idtoname[o.__raw.instanceof];if(!LModel.otherObjectsTemp[_name2]){LModel.otherObjectsTemp[_name2]=[o];Log.eDev(\"model._populateOtherObjects() this case should never happen\",{name:_name2,o:o,allObjects:allObjects,namemap:namemap,idtoname:idtoname});}else LModel.otherObjectsTemp[_name2].push(o);}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}}},{key:\"instancesOf\",value:function instancesOf(instancetypes0){var includeSubclasses=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.cannotCall(\"instancesOf\");}},{key:\"get_instancesOf\",value:// M1\nfunction get_instancesOf(c){var _this47=this;if(c.data.isMetamodel){return function(){Log.w(\"cannot call instancesOf() on a metamodel\");return[];};}return function(instancetypes0){var includeSubclasses=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var state=store.getState();var classes=_this47.get_classes(c,state);if(!LModel.otherObjectsTemp)_this47._populateOtherObjects(c,classes);if(!Array.isArray(instancetypes0))instancetypes0=[instancetypes0];// from names, DClass and ptrs, make them only ptrs. all classes of this model are valid name targets.\nvar instancetypes=LModel.namesORDObjectsToID(instancetypes0,classes);var dinstancetypes=DClass.fromPointer(instancetypes,state);if(includeSubclasses){var arr=dinstancetypes.map(function(d){return LPointerTargetable.fromD(d);});var _iterator29=_createForOfIteratorHelper(arr),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _dinstancetypes;var _c=_step29.value;(_dinstancetypes=dinstancetypes).push.apply(_dinstancetypes,_toConsumableArray(_c.allSubClasses.map(function(l){return l.__raw;})||[]));}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}dinstancetypes=_toConsumableArray(new Set(dinstancetypes));}var ret=[];var _iterator30=_createForOfIteratorHelper(dinstancetypes),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _c2=_step30.value;var _arr9=LModel.otherObjectsTemp[_c2.name];if(!_arr9||!_arr9.length)continue;ret.push.apply(ret,_toConsumableArray(_arr9));LModel.otherObectsAccessedKeys.push(_c2.name);}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}return ret;};}/*\r\n* instanceof === some class -> instantiate object and forces to conform to that class\r\ninstanceof === null  --> shapeless object\r\ninstanceof === undefined or missing  --> auto-detect and assign the type\r\n */},{key:\"addObject\",value:function addObject(json){var instanceoff=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;return this.cannotCall(\"LValue.addObject\");}},{key:\"get_addObject\",value:function get_addObject(c){return LValue.singleton.get_addObject.call(this,c);}},{key:\"instantiableClasses\",value:function instantiableClasses(o){var loose=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.cannotCall(\"instantiableClasses\");}},{key:\"get_instantiableClasses\",value:// M1\nfunction get_instantiableClasses(c){if(c.data.isMetamodel){return function(){Log.w(\"cannot call instantiableClasses() on a metamodel\");return[];};}return LValue.singleton.get_instantiableClasses.call(this,c);}},{key:\"get_suggestedEdges\",value:function get_suggestedEdges(context){var ret;if(context.data.isMetamodel)ret=this.impl_get_suggestedEdgesM2(context);else ret=this.impl_get_suggestedEdgesM1(context);return ret;}},{key:\"impl_get_suggestedEdgesM1\",value:function impl_get_suggestedEdgesM1(context,state){var ret={extend:[],reference:[],packageDependencies:[]};if(context.data.isMetamodel){Log.w(\"cannot call suggestedEdgesM1() on a metamodel\");return ret;}if(Debug.lightMode){return ret;}var s=store.getState();var values=this.get_allSubValues(context,s);var map={};if(!state)state=store.getState();var _iterator31=_createForOfIteratorHelper(values),_step31;try{outer:for(_iterator31.s();!(_step31=_iterator31.n()).done;){var lval=_step31.value;if(!lval)continue;var dval=lval.__raw;// NB: ELiterals can be pointers in L, but string or ordinal numbers in D, but they won't make edges, so i use .__raw\nvar _iterator32=_createForOfIteratorHelper(dval.values||[]),_step32;try{inner:for(_iterator32.s();!(_step32=_iterator32.n()).done;){var v=_step32.value;if(!Pointers.isPointer(v,state))continue inner;var snode=lval.node;if(!snode||!snode.html)continue outer;if(v===dval.id)continue inner;// pointing to itself\nvar ltarget=LPointerTargetable.fromPointer(v,state);if(!ltarget)continue;if(ltarget.className!==DObject.cname)continue inner;var enode=ltarget.node;if(!enode||!enode.html)continue inner;if(!map[dval.id])map[dval.id]=[];map[dval.id].push(new EdgeStarter(lval,ltarget,snode,enode,undefined));}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}ret.reference=Object.values(map).flat();return ret;}},{key:\"impl_get_suggestedEdgesM2\",value:function impl_get_suggestedEdgesM2(context){var ret={extend:[],reference:[],packageDependencies:[]};if(!context.data.isMetamodel){Log.w(\"cannot call suggestedEdgesM2() on a model\");return ret;}var s=store.getState();var classes=this.get_classes(context,s);var references=Debug.lightMode?[]:classes.flatMap(function(c){return c.references;});ret.reference=references.map(function(r){var _sn$component,_r$type,_r$type2,_r$type3,_r$type3$node;var sn=r===null||r===void 0?void 0:r.node;console.log('ex51',{sc:sn===null||sn===void 0?void 0:(_sn$component=sn.component)===null||_sn$component===void 0?void 0:_sn$component.id,s:r===null||r===void 0?void 0:r.name,e:r===null||r===void 0?void 0:(_r$type=r.type)===null||_r$type===void 0?void 0:_r$type.name,sn:sn,sh:sn===null||sn===void 0?void 0:sn.html,en:r===null||r===void 0?void 0:(_r$type2=r.type)===null||_r$type2===void 0?void 0:_r$type2.node,eh:r===null||r===void 0?void 0:(_r$type3=r.type)===null||_r$type3===void 0?void 0:(_r$type3$node=_r$type3.node)===null||_r$type3$node===void 0?void 0:_r$type3$node.html});if(!sn||!sn.html)return undefined;var end=r.type;// if (end.id === r.id) return undefined;\nvar en=end===null||end===void 0?void 0:end.node;if(!en||!en.html)return undefined;return new EdgeStarter(r,end,sn,en);}).filter(function(e){return!!e;});// ret.extend = classes.flatMap( c => EdgeStarter.oneToMany(c, c.extends));\nvar alreadyAdded={};// if A extends B1, B2;    B1 extends C1, C2;    and node B1 is hidden. instead of edge from A to B, i display edge from A~C1, A~C2, A~B2\nfunction SkipExtendNodeHidden(start,end){var rootCall=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var ret=[];if(rootCall){alreadyAdded={};alreadyAdded[start.id]=start;}// end classes can get added twice if from a different starting subclass path (in classes.flatMap -> each one should have his own dict).\n// ret.start = start;\nvar sn=start.node;if(!sn||!sn.html)return[];//  let end: LClass[] = start.extends;\nvar _iterator33=_createForOfIteratorHelper(end),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var e=_step33.value;if(!e)continue;var eid=e.id;if(alreadyAdded[eid])continue;// without this there might be duplicates if A extends B1, B2;  and both B1 & B2 extends C\nalreadyAdded[eid]=e;var en=e.node;if(en&&en.html){ret.push({start:start,end:e,sn:sn,en:en});continue;}var secondTierExtends=e.extends;// for (let eend of secondTierExtends) {\nret.push.apply(ret,_toConsumableArray(SkipExtendNodeHidden(start,secondTierExtends,false)));//}\n}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}return ret;}ret.extend=classes.flatMap(function(c){return SkipExtendNodeHidden(c,c.extends,true);}).map(function(es){return new EdgeStarter(es.start,es.end,es.sn,es.en);});var dependencies=Debug.lightMode?[]:[].concat(_toConsumableArray(classes.map(function(c){return{src:c,ends:c.superclasses};})),_toConsumableArray(references.map(function(r){return{src:r,ends:[r.type]};})));var pkgdependencies=[];// transform form in dictionary to prevent duplicates\n//dependencies.map( d=> { let end = d.end.package; return {src:d.src.package, end, endid:end.id}})\nvar _iterator34=_createForOfIteratorHelper(dependencies),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var _d3=_step34.value;var src=_d3.src.package;if(!src)continue;var srcnode=src.node;if(!srcnode||!srcnode.html)continue;var ends={};var _iterator35=_createForOfIteratorHelper(_d3.ends),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var end=_step35.value;var ep=end.package;if(!ep)continue;var epnode=ep.node;if(!epnode||!epnode.html)continue;ends[ep.id]={end:ep,en:epnode};}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}pkgdependencies.push({src:src,sn:srcnode,ends:ends});}// todo: check\n}catch(err){_iterator34.e(err);}finally{_iterator34.f();}ret.packageDependencies=pkgdependencies.flatMap(function(pd){return Object.values(pd.ends).map(function(end){return new EdgeStarter(pd.src,end.end,pd.sn,end.en);});});return ret;}},{key:\"get_models\",value:function get_models(context){// todo: should this not be data.instances instead?\nreturn LModel.fromPointer(context.data.models);}},{key:\"set_models\",value:function set_models(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.models;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'models',list,'',true);var _iterator36=_createForOfIteratorHelper(diff.added),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var _id9=_step36.value;SetFieldAction.new(_id9,'father',context.data.id,'',true);SetFieldAction.new(_id9,'parent',context.data.id,'+=',true);}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}for(var _i10=0,_arr10=diff.removed;_i10<_arr10.length;_i10++){var id=_arr10[_i10];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"duplicate\",value:function duplicate(){var deep=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;throw new Error(\"Model.duplicate(): use export/import ecore instead.\");}},{key:\"set_instanceof\",value:function set_instanceof(val,context){var ptr=Pointers.from(val);SetFieldAction.new(context.data.id,\"instanceof\",ptr,undefined,true);// update father's collections (pointedby's here are set automatically)\n// todo: ptr && SetFieldAction.new(ptr, \"instances\", context.data.id, '+=', true);\nreturn true;}},{key:\"get_instanceof\",value:function get_instanceof(context){return context.data.instanceof?LPointerTargetable.fromPointer(context.data.instanceof):undefined;}},{key:\"set_name\",value:function set_name(val,context){var models=LModel.fromPointer(store.getState()['models']);if(models.filter(function(model){return model.name===val;}).length>0){U.alert('error','Cannot rename the selected element since this name is already taken.');}else{SetFieldAction.new(context.data,'name',val,'',false);}return true;}},{key:\"get_children_idlist\",value:function get_children_idlist(context){var children;if(context.data.isMetamodel)children=context.data.packages;else children=context.proxyObject.allSubObjects.map(function(o){return o.id;});return[].concat(_toConsumableArray(_get(_getPrototypeOf(LModel.prototype),\"get_children_idlist\",this).call(this,context)),_toConsumableArray(children));}},{key:\"get_isMetamodel\",value:function get_isMetamodel(context){return context.data.isMetamodel;}},{key:\"set_isMetamodel\",value:function set_isMetamodel(val,context){if(context.data.isMetamodel!==val)SetFieldAction.new(context.data,'isMetamodel',val,'',false);return true;}},{key:\"get_objects\",value:function get_objects(context){return context.data.objects.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"get_packages\",value:function get_packages(context){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).packages:[];}return context.data.packages.map(function(pointer){return LPointerTargetable.from(pointer);});}},{key:\"set_packages\",value:function set_packages(val,context){var list=val.map(function(lItem){return Pointers.from(lItem);});var oldList=context.data.packages;var diff=U.arrayDifference(oldList,list);BEGIN();SetFieldAction.new(context.data,'packages',list,\"\",true);var _iterator37=_createForOfIteratorHelper(diff.added),_step37;try{for(_iterator37.s();!(_step37=_iterator37.n()).done;){var _id10=_step37.value;SetFieldAction.new(_id10,'father',context.data.id,'',true);SetFieldAction.new(_id10,'parent',context.data.id,'+=',true);}}catch(err){_iterator37.e(err);}finally{_iterator37.f();}for(var _i11=0,_arr11=diff.removed;_i11<_arr11.length;_i11++){var id=_arr11[_i11];SetFieldAction.new(id,'father',undefined,'',true);var parent=DPointerTargetable.from(id).parent;U.arrayRemoveAll(parent,context.data.id);SetFieldAction.new(id,'parent',parent,'',true);}END();return true;}},{key:\"get_roots\",value:function get_roots(context){return this.get_objects(context).filter(function(o){return o.isRoot;});}},{key:\"get_classes\",value:function get_classes(context,s){//if (!s) s = store.getState();+\nif(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).classes:[];}var ret=[];var pkgs=this.get_packages(context);// it's ok not having deep packages\nvar _iterator38=_createForOfIteratorHelper(pkgs),_step38;try{for(_iterator38.s();!(_step38=_iterator38.n()).done;){var p=_step38.value;var classes=p.allSubClasses||[];U.mergeNamedArray(ret,classes);}}catch(err){_iterator38.e(err);}finally{_iterator38.f();}return ret;}},{key:\"get_references\",value:function get_references(context,s){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).references:[];}s=s||store.getState();return this.get_classes(context,s).flatMap(function(p){return p.references||[];});}},{key:\"get_enums\",value:function get_enums(context){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).enumerators:[];}return this.get_enumerators(context);}},{key:\"get_enumerators\",value:function get_enumerators(context,s){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).enumerators:[];}// if (!s) s = store.getState();\nvar ret=[];var pkgs=this.get_packages(context);// it's ok not having deep packages\nvar _iterator39=_createForOfIteratorHelper(pkgs),_step39;try{for(_iterator39.s();!(_step39=_iterator39.n()).done;){var p=_step39.value;var enums=p.allSubEnums||[];U.mergeNamedArray(ret,enums);}}catch(err){_iterator39.e(err);}finally{_iterator39.f();}return ret;}},{key:\"get_allSubPackages\",value:function get_allSubPackages(context,state){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).allSubPackages:[];}state=state||store.getState();var tocheck=context.data.packages||[];var checked={};while(tocheck.length){var newtocheck=[];var _iterator40=_createForOfIteratorHelper(tocheck),_step40;try{for(_iterator40.s();!(_step40=_iterator40.n()).done;){var ptr=_step40.value;if(checked[ptr])throw new Error(\"loop in packages containing themselves\");var dpackage=DPointerTargetable.from(ptr,state);checked[ptr]=dpackage;U.arrayMergeInPlace(newtocheck,dpackage===null||dpackage===void 0?void 0:dpackage.subpackages);}}catch(err){_iterator40.e(err);}finally{_iterator40.f();}tocheck=newtocheck;}var darr=Object.values(checked);var larr=LPointerTargetable.fromArr(darr,state);U.toNamedArray(larr,darr);return larr;}},{key:\"get_allSubValues\",value:function get_allSubValues(context,state){state=state||store.getState();var darr=Selectors.getAll(DValue,undefined,state,true,false);var larr=[];for(var i=0;i<darr.length;i++){var l=LPointerTargetable.fromD(darr[i]);if(!l||l.model.id!==context.data.id){darr[i]=undefined;continue;}larr.push(l);}darr=darr.filter(function(d){return!!d;});U.toNamedArray(larr,darr);return larr;}},{key:\"get_allSubObjects\",value:function get_allSubObjects(context,state){state=state||store.getState();var darr=Selectors.getAll(DObject,undefined,state,true,false);// console.log(\"gao\", {darr:[...darr]});\nvar larr=[];for(var i=0;i<darr.length;i++){var l=LPointerTargetable.fromD(darr[i]);if(!l||l.model.id!==context.data.id){darr[i]=undefined;continue;}larr.push(l);}// console.log(\"gao\", {darr:[...darr], larr});\ndarr=darr.filter(function(d){return!!d;});// console.log(\"gao\", {darr, larr});\nU.toNamedArray(larr,darr);return larr;}},{key:\"getClassByNameSpace\",value:function getClassByNameSpace(namespacedclass){return this.cannotCall(\"getClassByNameSpace\");}},{key:\"get_getClassByNameSpace\",value:function get_getClassByNameSpace(context){var _this48=this;if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).getClassByNameSpace:undefined;}return function(namespacedclass){var pos=namespacedclass.lastIndexOf(\":\");var pkguri=namespacedclass.substring(0,pos);var classname=namespacedclass.substring(pos+1);var pkg=_this48.get_getPackageByUri(context)(pkguri);if(!pkg)return undefined;// return pkg[\"@\" + classname];\nreturn pkg.classes.filter(function(c){return c.name===classname;})[0];};}},{key:\"getPackageByUri\",value:function getPackageByUri(uri){return this.cannotCall(\"getPackageByUri\");}},{key:\"get_getPackageByUri\",value:function get_getPackageByUri(context){return function(uri){return context.proxyObject.allSubPackages.filter(function(p){return p.uri===uri;})[0];};}/* See src/api/persistance/save.ts */},{key:\"get_attributes\",value:function get_attributes(context){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).attributes:[];}return context.proxyObject.classes.flatMap(function(c){return c.attributes;});}},{key:\"get_literals\",value:function get_literals(context){if(!context.data.isMetamodel){return context.data.instanceof?this.get_instanceof(context).literals:[];}return context.proxyObject.enumerators.flatMap(function(e){return e.literals;});}},{key:\"get_values\",value:function get_values(context){return context.proxyObject.objects.flatMap(function(o){return o.features;});}}],[{key:\"namesORDObjectsToID\",value:// return the first array parameter converted in an array of pointers. The second parameter is the scope where names are allowed to match. if empty all class.names will fail mapping to id's.\n// second parameter is mandatory when the array contain names, to prevent looking into class names of different models.\nfunction namesORDObjectsToID(targets,namedCandidates){// let targets = any[] = (!Array.isArray(targets0)) ? targets0 : [targets0];\nif(!targets)return[];var ret=[];var state=store.getState();if(targets&&!Array.isArray(targets))targets=[targets];var dnamedcandidates=namedCandidates?DPointerTargetable.fromArr(namedCandidates):[];var dAllowedNamesMap=dnamedcandidates.reduce(function(acc,val){acc[val.name]=val.id;return acc;},{});//let dtargets: DNamedElement[] = targets ? DPointerTargetable.fromArr(targets) as DNamedElement[] : [];\nvar tmp;var _iterator41=_createForOfIteratorHelper(targets),_step41;try{for(_iterator41.s();!(_step41=_iterator41.n()).done;){var target=_step41.value;// try as name\ntmp=dAllowedNamesMap[target];if(tmp){ret.push(tmp);continue;}// try as $name\ntmp=dAllowedNamesMap[\"$\"+target];if(tmp){ret.push(tmp);continue;}// try as id\nvar _d4=DPointerTargetable.from(target,state);if(_d4&&dAllowedNamesMap[_d4.name]){ret.push(target);continue;}Log.w(\"namesORDObjectsToID() could not resolve name:\",{name:target,namedCandidates:namedCandidates,targets:targets});}}catch(err){_iterator41.e(err);}finally{_iterator41.f();}return ret;}}]);return LModel;}(LNamedElement),_class73.subclasses=[],_class73._extends=[],_class73.otherObjectsTemp=undefined,_class73.otherObectsAccessedKeys=[],_class73))||_class72);RuntimeAccessibleClass.set_extend(DNamedElement,DModel);RuntimeAccessibleClass.set_extend(LNamedElement,LModel);export var DFactory_useless_=(_dec38=RuntimeAccessible('DFactory_useless_'),_dec38(_class74=(_class75=/*#__PURE__*/function(_DPointerTargetable16){_inherits(DFactory_useless_,_DPointerTargetable16);var _super37=_createSuper(DFactory_useless_);function DFactory_useless_(){var _this49;_classCallCheck(this,DFactory_useless_);for(var _len39=arguments.length,args=new Array(_len39),_key40=0;_key40<_len39;_key40++){args[_key40]=arguments[_key40];}_this49=_super37.call.apply(_super37,[this].concat(args));_this49.id=void 0;_this49.parent=[];_this49.father=void 0;_this49.annotations=[];_this49.ePackage='';return _this49;}// DModelElement\n// static singleton: LFactory_useless_;\n// static logic: typeof LFactory_useless_;\n// static structure: typeof DFactory_useless_;\n// inherit redefine\n// personal\nreturn DFactory_useless_;}(DPointerTargetable),_class75.subclasses=[],_class75._extends=[],_class75))||_class74);export var LFactory_useless_=(_dec39=RuntimeAccessible('LFactory_useless_'),_dec39(_class76=(_class77=/*#__PURE__*/function(_LModelElement4){_inherits(LFactory_useless_,_LModelElement4);var _super38=_createSuper(LFactory_useless_);function LFactory_useless_(){var _this50;_classCallCheck(this,LFactory_useless_);for(var _len40=arguments.length,args=new Array(_len40),_key41=0;_key41<_len40;_key41++){args[_key41]=arguments[_key41];}_this50=_super38.call.apply(_super38,[this].concat(args));_this50.__raw=void 0;_this50.id=void 0;_this50.parent=void 0;_this50.father=void 0;_this50.annotations=void 0;_this50.ePackage=void 0;return _this50;}// static singleton: LFactory_useless_;\n// static logic: typeof LFactory_useless_;\n// static structure: typeof DFactory_useless_;\n// inherit redefine\n// personal\nreturn LFactory_useless_;}(LModelElement),_class77.subclasses=[],_class77._extends=[],_class77))||_class76);// DModelElement.subclasses.push('DFactory_useless_'); // because it's abstract and cannot be used as a value, it's pure type definition\n// DModelElement.subclasses.push('LFactory_useless_'); // because it's abstract and cannot be used as a value, it's pure type definition\n// RuntimeAccessibleClass.set_extend(DModelElement, DFactory_useless_);\n// RuntimeAccessibleClass.set_extend(LModelElement, LFactory_useless_);\nexport var EJavaObject=(_dec40=RuntimeAccessible('EJavaObject'),_dec40(_class78=function EJavaObject(){_classCallCheck(this,EJavaObject);})||_class78);// ??? EDataType instance?\nexport var DMap=(_dec41=RuntimeAccessible('DMap'),_dec41(_class79=(_class80=/*#__PURE__*/function(_RuntimeAccessibleCla){_inherits(DMap,_RuntimeAccessibleCla);var _super39=_createSuper(DMap);// DPointerTargetable\n// static logic: typeof LModelElement;\n// static structure: typeof DModelElement;\n// static singleton: LModelElement;\nfunction DMap(){var _this51;_classCallCheck(this,DMap);_this51=_super39.call(this);_this51.__isDMap=void 0;return _this51;}// id!: Pointer<DModelElement, 1, 1, LModelElement>;\nreturn DMap;}(RuntimeAccessibleClass),_class80.subclasses=[],_class80._extends=[],_class80))||_class79);export var LMap=(_dec42=RuntimeAccessible('LMap'),_dec42(_class81=(_class82=/*#__PURE__*/function(_LPointerTargetable2){_inherits(LMap,_LPointerTargetable2);var _super40=_createSuper(LMap);function LMap(){var _this52;_classCallCheck(this,LMap);for(var _len41=arguments.length,args=new Array(_len41),_key42=0;_key42<_len41;_key42++){args[_key42]=arguments[_key42];}_this52=_super40.call.apply(_super40,[this].concat(args));_this52.__isLMap=void 0;return _this52;}// static logic: typeof LModelElement;\n// static structure: typeof DModelElement;\n// static singleton: LModelElement;\n// id!: Pointer<DModelElement, 1, 1, LModelElement>;\nreturn LMap;}(LPointerTargetable),_class82.subclasses=[],_class82._extends=[],_class82))||_class81);RuntimeAccessibleClass.set_extend(DPointerTargetable,DMap);RuntimeAccessibleClass.set_extend(LPointerTargetable,LMap);export var DObject=(_dec43=RuntimeAccessible('DObject'),Leaf(_class83=_dec43(_class83=(_class84=/*#__PURE__*/function(_DPointerTargetable17){_inherits(DObject,_DPointerTargetable17);var _super41=_createSuper(DObject);function DObject(){var _this53;_classCallCheck(this,DObject);for(var _len42=arguments.length,args=new Array(_len42),_key43=0;_key43<_len42;_key43++){args[_key43]=arguments[_key43];}_this53=_super41.call.apply(_super41,[this].concat(args));_this53.annotations=void 0;_this53.id=void 0;_this53.parent=[];_this53.father=void 0;_this53.name=void 0;_this53.instanceof=void 0;_this53.features=[];return _this53;}// extends DNamedElement, m1 class instance\n// inherit redefine\n// annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\n// personal\n// actually nullable now, but takes too much type refactoring. be careful to check if it's present\n_createClass(DObject,null,[{key:\"new\",value:function _new(instanceoff,father,fatherType,name){var persist=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;// if (!name) name = this.defaultname(((meta: LNamedElement) => meta.name + \" \"), father);\nif(!name)name=this.defaultname(function(meta){return((meta===null||meta===void 0?void 0:meta.name)||\"obj\")+\"_\";},father,instanceoff);var ret=new Constructors(new DObject('dwc'),father,persist,fatherType).DPointerTargetable().DModelElement().DNamedElement(name).DObject(instanceoff).end();return ret;}},{key:\"new3\",value:function new3(ptrs,then,fatherType){var persist=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!ptrs.name)ptrs.name=this.defaultname(function(meta){return((meta===null||meta===void 0?void 0:meta.name)||\"obj\")+\"_\";},ptrs.father,ptrs.instanceof);return new Constructors(new DObject('dwc'),ptrs.father,persist,fatherType,ptrs.id).DPointerTargetable().DModelElement().DNamedElement(ptrs.name).DObject(ptrs.instanceof).end(then);}}]);return DObject;}(DPointerTargetable),_class84.subclasses=[],_class84._extends=[],_class84))||_class83)||_class83);export var LObject=(_dec44=RuntimeAccessible('LObject'),_dec44(_class85=(_class86=/*#__PURE__*/function(_LNamedElement7){_inherits(LObject,_LNamedElement7);var _super42=_createSuper(LObject);function LObject(){var _this54;_classCallCheck(this,LObject);for(var _len43=arguments.length,args=new Array(_len43),_key44=0;_key44<_len43;_key44++){args[_key44]=arguments[_key44];}_this54=_super42.call.apply(_super42,[this].concat(args));_this54.__raw=void 0;_this54.id=void 0;_this54.annotations=void 0;_this54.children=void 0;_this54.allChildren=void 0;_this54.truechildren=void 0;_this54.parent=void 0;_this54.father=void 0;_this54.model=void 0;_this54.name=void 0;_this54.ecoreRootName=void 0;_this54.namespace=void 0;_this54.fullname=void 0;_this54.defaultValue=void 0;_this54.deepSubObjects=void 0;_this54.subObjects=void 0;_this54.referenceFeatures=void 0;_this54.attributeFeatures=void 0;_this54.shapelessFeatures=void 0;_this54.instanceof=void 0;_this54.features=void 0;_this54.referencedBy=void 0;_this54.isRoot=void 0;_this54.partial=void 0;return _this54;}// extends DNamedElement, m1 class instance\n// inherit redefine\n// including hidden values\n// real shape without \"mirage\" values\n// annotations!: LAnnotation[];\n// from LClass\n// abstract!: boolean;\n// interface!: boolean;\n// references!: LReference[];\n// attributes!: LAttribute[];\n// operations!: LOperation[];\n// personal\n// todo: itera features (lvalue[]) deep e vitando di inserire doppioni (salva una mappatura di di già aggiunti e skip se ricompaiono)\n// subset of features that are references.\n// subset of features that are attributes.\n// subset of features that are not mapped and can have any kind of values.\n// + tutte le funzioni di comodità navigazionale del modello, trattarlo un pò come se fosse un modello (e quasi può esserlo)\n_createClass(LObject,[{key:\"get_name\",value:function get_name(context){var _$name;return((_$name=context.proxyObject['$name'])===null||_$name===void 0?void 0:_$name.value)||context.data.name||context.proxyObject.instanceof.name;}},{key:\"get_truechildren\",value:function get_truechildren(context){var childs=_get(_getPrototypeOf(LObject.prototype),\"get_children\",this).call(this,context);if(!context.data.instanceof)return childs;return childs.filter(function(c){return!c.isMirage;});}},{key:\"get_allChildren\",value:function get_allChildren(context){return _get(_getPrototypeOf(LObject.prototype),\"get_children\",this).call(this,context);}},{key:\"get_children\",value:function get_children(context){var sort=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var childs=_get(_getPrototypeOf(LObject.prototype),\"get_children\",this).call(this,context);var meta=context.proxyObject.instanceof;// if (!sort && (!meta || meta.partial)) return childs;\nvar conformchildren=meta&&!meta.partial?meta.allChildren.map(function(c){return c.id;}):undefined;if(!sort){// console.log(\"return get features:\", {context, meta, childs, conformchildren, ret:childs.filter((c) => (c.instanceof?.id) && conformchildren!.includes(c.instanceof?.id))});\nif(!conformchildren)return childs;return childs.filter(function(c){var _c$instanceof,_c$instanceof2;return((_c$instanceof=c.instanceof)===null||_c$instanceof===void 0?void 0:_c$instanceof.id)&&conformchildren.includes((_c$instanceof2=c.instanceof)===null||_c$instanceof2===void 0?void 0:_c$instanceof2.id);});}var bymetaparent={};var _iterator42=_createForOfIteratorHelper(childs),_step42;try{for(_iterator42.s();!(_step42=_iterator42.n()).done;){var v=_step42.value;var vmeta=v.instanceof;// console.log(\"get features filtering:\", {context, meta, vmeta, v, childs, conformchildren});\nif(conformchildren&&(!vmeta||!conformchildren.includes(vmeta.id)))continue;var vmetaid=vmeta===null||vmeta===void 0?void 0:vmeta.id;// undef as key is fine even if compiler complains, so i cast it\nif(!bymetaparent[vmetaid])bymetaparent[vmetaid]=[v];else bymetaparent[vmetaid].push(v);}// console.log(\"return get features:\", {context, meta, childs, conformchildren, ret:Object.values(bymetaparent).flat()});\n}catch(err){_iterator42.e(err);}finally{_iterator42.f();}return Object.values(bymetaparent).flat();}// protected get_fromlclass<T extends keyof (LClass)>(meta: LClass, key: T): LClass[T] { return meta[key]; }\n},{key:\"get_model\",value:function get_model(context){var l=context.proxyObject;while(l&&l.className!==DModel.cname){l=l.father;}return l;}// protected set_name(val: string, context: Context): boolean { return this.cannotSet(\"name\"); }\n},{key:\"set_namespace\",value:function set_namespace(val,context){return this.cannotSet(\"namespace\");}// protected get_namespace(context: Context): LClass[\"namespace\"] { return context.proxyObject.instanceof.namespace; }\n},{key:\"set_fullname\",value:function set_fullname(val,context){return this.cannotSet(\"fullname\");}},{key:\"get_fullname\",value:function get_fullname(context){return context.proxyObject.instanceof.fullname;}},{key:\"set_ecoreRootName\",value:function set_ecoreRootName(val,context){return this.cannotSet(\"ecoreRootName\");}},{key:\"get_ecoreRootName\",value:function get_ecoreRootName(context){var instanceoff=context.proxyObject.instanceof;if(!instanceoff)return\"schemaless:Object\";return this.get_uri(context)+\":\"+instanceoff.name;// optimize later in instanceoff.namespace + \":\" + instanceoff.name; and implement namespace all around\n}},{key:\"set_partialdefaultname\",value:function set_partialdefaultname(val,context){return this.cannotSet(\"DObject.partialdefaultname()\");}},{key:\"get_partialdefaultname\",value:function get_partialdefaultname(context){return context.data.instanceof?context.proxyObject.instanceof.partialdefaultname:\"val_\";}},{key:\"set_partial\",value:function set_partial(val,context){return this.cannotSet(\"DObject.set_partial()\");}},{key:\"get_partial\",value:function get_partial(context){var _context$proxyObject$3;return context.data.instanceof?(_context$proxyObject$3=context.proxyObject.instanceof)===null||_context$proxyObject$3===void 0?void 0:_context$proxyObject$3.partial:true;}/*    protected set_abstract(val: string, context: Context): boolean { return this.cannotSet(\"abstract\"); }\r\n        protected get_abstract(context: Context): LClass[\"abstract\"] { return context.proxyObject.instanceof.abstract; }\r\n        protected set_interface(val: string, context: Context): boolean { return this.cannotSet(\"interface\"); }\r\n        protected get_interface(context: Context): LClass[\"interface\"] { return context.proxyObject.instanceof.interface; }*/},{key:\"set_defaultValue\",value:function set_defaultValue(val,context){return this.cannotSet(\"defaultValue\");}},{key:\"get_defaultValue\",value:function get_defaultValue(context){return context.proxyObject.instanceof.defaultValue;}},{key:\"set_referencedBy\",value:function set_referencedBy(val,context){return this.wrongAccessMessage(\"referencedBy cannot be set directly. It should be updated automatically as side effect\");}},{key:\"get_referencedBy\",value:function get_referencedBy(context){var state=store.getState();var targeting=LPointerTargetable.fromArr(context.data.pointedBy.map(function(p){var s=state;var _iterator43=_createForOfIteratorHelper(PointedBy.getPathArr(p)),_step43;try{for(_iterator43.s();!(_step43=_iterator43.n()).done;){var _key45=_step43.value;s=s[_key45];if(!s)return null;if(s.className===DObject.cname)return s.id;}}catch(err){_iterator43.e(err);}finally{_iterator43.f();}}));return targeting;}},{key:\"get_subObjects\",value:function get_subObjects(context){var ref_features=this.get_referenceFeatures(context,false).filter(function(f){return f.instanceof.containment;});var shapeless_features=this.get_shapelessFeatures(context);var vals=[].concat(_toConsumableArray(ref_features.flatMap(function(f){return f.values;}).filter(function(val){return!!val;})),_toConsumableArray(shapeless_features.flatMap(function(f){return f.values;}).filter(function(val){return!!val&&val.className===DObject.cname;})));return vals;}},{key:\"get_deepSubObjects\",value:function get_deepSubObjects(context){var alreadyparsed={};var arr=this.get_subObjects(context);while(arr.length){var next=[];var _iterator44=_createForOfIteratorHelper(arr),_step44;try{for(_iterator44.s();!(_step44=_iterator44.n()).done;){var obj=_step44.value;if(alreadyparsed[obj.id])continue;alreadyparsed[obj.id]=obj;next.push.apply(next,_toConsumableArray(obj.subObjects));}}catch(err){_iterator44.e(err);}finally{_iterator44.f();}arr=next;}return Object.values(alreadyparsed)||[];}},{key:\"get_referenceFeatures\",value:function get_referenceFeatures(context){var includeshapeless=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return context.proxyObject.features.filter(function(f){return!f.instanceof?includeshapeless:f.instanceof.className===DReference.cname;});}},{key:\"get_attributeFeatures\",value:function get_attributeFeatures(context){var includeshapeless=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return context.proxyObject.features.filter(function(f){return!f.instanceof?includeshapeless:f.instanceof.className===DAttribute.cname;});}},{key:\"get_shapelessFeatures\",value:function get_shapelessFeatures(context){return context.proxyObject.features.filter(function(f){return!f.instanceof;});}},{key:\"get_isRoot\",value:function get_isRoot(context){return context.proxyObject.father.className===DModel.cname;}},{key:\"set_isRoot\",value:function set_isRoot(val,context){return this.wrongAccessMessage(\"isRoot cannot be set directly, change father element instead.\");}},{key:\"feature\",value:function feature(name){this.cannotCall('feature');return null;}},{key:\"get_feature\",value:function get_feature(context){return function(name){var lObject=context.proxyObject;var features=lObject.features.filter(function(value){var _value$instanceof;return((_value$instanceof=value.instanceof)===null||_value$instanceof===void 0?void 0:_value$instanceof.name)===name;});if(features.length>0){var matchedFeature=features[0];switch(matchedFeature.values.length){case 0:return'';case 1:return matchedFeature.value;default:return matchedFeature.values;}}return'';};}},{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var asEcoreRoot=context.proxyObject.isRoot;// todo: actually use this loopdetectionobj\nvar json={};if(asEcoreRoot){console.log(\"generate object ecore\",{context:context,asEcoreRoot:asEcoreRoot,json:json});var lc=context.proxyObject.instanceof;json[ECorePackage.xmiversion]='2.0';json[ECorePackage.xmlnsxmi]='http://www.omg.org/XMI';// json[ECorePackage.xmlnsxsi] = 'http://www.w3.org/2001/XMLSchema-instance';\njson[\"xmlns:\"+(lc?lc.father.uri+\".\"+lc.father.name:\"shapeless.model.uri\")]='http://www.eclipse.org/emf/2002/Ecore';}var features=context.proxyObject.features||[];console.log(\"features\",{features:features});var _iterator45=_createForOfIteratorHelper(features),_step45;try{for(_iterator45.s();!(_step45=_iterator45.n()).done;){var f=_step45.value;!json[f.name]&&(json[f.name]=f.generateEcoreJson(loopDetectionObj));}}catch(err){_iterator45.e(err);}finally{_iterator45.f();}return json;}},{key:\"addValue\",value:function addValue(name,instanceoff,value,isMirage){return this.cannotCall(\"addValue\");}},{key:\"get_addValue\",value:function get_addValue(context){return function(name,instanceoff,value,isMirage){return LPointerTargetable.fromD(DValue.new(name,instanceoff,value,context.data.id,true,isMirage));};}},{key:\"get_namespace\",value:function get_namespace(context){return context.data.instanceof?context.proxyObject.instanceof.father.prefix:\"schemaless\";}},{key:\"get_uri\",value:function get_uri(context){if(!context.data.instanceof)return\"schemaless\";var pkg=context.proxyObject.instanceof.father;return pkg.uri;// + \".\" + pkg.name;\n}// protected get_namespace(context: Context): string { if (!context.data.instanceof) return \"schemaless\"; return context.proxyObject.instanceof.namespace; }\n},{key:\"get_children_idlist\",value:function get_children_idlist(context){return[].concat(_toConsumableArray(_get(_getPrototypeOf(LObject.prototype),\"get_children_idlist\",this).call(this,context)),_toConsumableArray(context.data.features));}},{key:\"get_instanceof\",value:function get_instanceof(context){var pointer=context.data.instanceof;return pointer&&LPointerTargetable.from(pointer);}},{key:\"set_instanceof\",value:function set_instanceof(val,context){var metaptr=Pointers.from(val);this._removeConformity(context);SetFieldAction.new(context.data.id,\"instanceof\",metaptr,undefined,true);// update father's collections (pointedby's here are set automatically)\nmetaptr&&SetFieldAction.new(metaptr,\"instances\",context.data.id,'+=',true);if(metaptr)this._forceConformity(context,metaptr);return true;}},{key:\"forceConformity\",value:function forceConformity(context,meta){var oldinstanceof=context.data.instanceof;// context.data.instanceof = meta;\nvar ret=this._forceConformity(context,meta);// context.data.instanceof = oldinstanceof;\nreturn ret;}},{key:\"_forceConformity\",value:function _forceConformity(context,meta){var lmeta=meta&&LPointerTargetable.wrap(meta);if(!lmeta)return;var attrs=lmeta.allAttributes;var refs=lmeta.allReferences;var values=context.proxyObject.allChildren;var idmap={};var _iterator46=_createForOfIteratorHelper(attrs),_step46;try{for(_iterator46.s();!(_step46=_iterator46.n()).done;){var _a3=_step46.value;idmap[_a3.id]=_a3;}}catch(err){_iterator46.e(err);}finally{_iterator46.f();}var _iterator47=_createForOfIteratorHelper(refs),_step47;try{for(_iterator47.s();!(_step47=_iterator47.n()).done;){var _a4=_step47.value;idmap[_a4.id]=_a4;}}catch(err){_iterator47.e(err);}finally{_iterator47.f();}console.log({idmap:idmap,values:values,data:context.data,l:context.proxyObject});// damiano: todo quando viene cancellato una feature il puntatore in features e values rimane. use pointedby's\n// then remove attributes and references that are already instantiated in the object\nvar _iterator48=_createForOfIteratorHelper(values),_step48;try{for(_iterator48.s();!(_step48=_iterator48.n()).done;){var v=_step48.value;if(v&&v.__raw.instanceof)delete idmap[v.__raw.instanceof];}}catch(err){_iterator48.e(err);}finally{_iterator48.f();}console.log(\"forceconformity\",{attrs:attrs,refs:refs,valuesPre:values.map(function(v){return v&&v.__raw.instanceof;}),toadd:idmap});for(var id in idmap){// let l = idmap[id];\ncontext.proxyObject.addValue(undefined,id,[],true);}}},{key:\"_removeConformity\",value:function _removeConformity(context){var childs=context.proxyObject.features;var _iterator49=_createForOfIteratorHelper(childs),_step49;try{for(_iterator49.s();!(_step49=_iterator49.n()).done;){var child=_step49.value;if(child.isMirage)child.delete();}}catch(err){_iterator49.e(err);}finally{_iterator49.f();}}},{key:\"get_features\",value:function get_features(context){return this.get_children(context);// return context.data.features.map((feature) => { return LPointerTargetable.from(feature) });\n}},{key:\"ecorePointer\",value:function ecorePointer(){return this.cannotCall(\"ecorePointer\");}},{key:\"get_ecorePointer\",value:function get_ecorePointer(context){var _this55=this;var lastvisited=context.data.id;return function(){return\"@//\"+_this55.get_fatherList(context).map(function(f){if(f.className===DObject.cname){lastvisited=f.id;return'';}if(f.className===DModel.cname){return'';}console.log(\"get_ecorepointer\",f,f.__raw,lastvisited);return f.name+\".\"+f.__raw.values.indexOf(lastvisited);}).filter(function(v){return!!v;}).join(\"@/\");};}}]);return LObject;}(LNamedElement),_class86.subclasses=[],_class86._extends=[],_class86))||_class85);RuntimeAccessibleClass.set_extend(DNamedElement,DObject);RuntimeAccessibleClass.set_extend(LNamedElement,LObject);export var DValue=(_dec45=RuntimeAccessible('DValue'),Leaf(_class87=_dec45(_class87=(_class88=/*#__PURE__*/function(_DModelElement2){_inherits(DValue,_DModelElement2);var _super43=_createSuper(DValue);function DValue(){var _this56;_classCallCheck(this,DValue);for(var _len44=arguments.length,args=new Array(_len44),_key46=0;_key46<_len44;_key46++){args[_key46]=arguments[_key46];}_this56=_super43.call.apply(_super43,[this].concat(args));_this56.id=void 0;_this56.parent=[];_this56.father=void 0;_this56.annotations=[];_this56.name=void 0;_this56.values=[];_this56.instanceof=void 0;_this56.edges=void 0;_this56.isMirage=void 0;_this56.topic='';return _this56;}// extends DModelElement, m1 value (attribute | reference)\n// static singleton: LValue;\n// static logic: typeof LModelElement;\n// static structure: typeof DValue;\n// inherit redefine\n// nome opzionale solo per modelli schema-less\n// personal\n// value: PrimitiveType | Pointer<DObject, 1, 1, LObject>; // vv4\n// values: PrimitiveType[] | Pointer<DObject, 1, 'N', LObject> | Pointer<DEnumLiteral, 1, 'N', LEnumLiteral> = []; // vv4\n// todo: maybe min lowerbound 0 if you want to allow free shape objects chiedere prof\n// conformsTo!: Pointer<DStructuralFeature, 0, 'N', LStructuralFeature>; // low priority to do: attributo fittizio controlla a quali elementi m2 è conforme quando viene richiesto\n// IoT Section\n_createClass(DValue,null,[{key:\"new\",value:function _new(name,instanceoff,val,father){var persist=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var isMirage=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(!name)name=this.defaultname(\"property_\",father);return new Constructors(new DValue('dwc'),typeof father===\"string\"?father:father===null||father===void 0?void 0:father.id,persist,undefined).DPointerTargetable().DModelElement().DNamedElement(name).DValue(instanceoff,val,isMirage).end();}},{key:\"new3\",value:function new3(a,then){var persist=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!a.name)a.name=this.defaultname(\"property_\",a.father);return new Constructors(new DValue('dwc'),a.father,persist,undefined,a.id).DPointerTargetable().DModelElement().DNamedElement(a.name).DValue(a.instanceof,a.values).end(then);}}]);return DValue;}(DModelElement),_class88.subclasses=[],_class88._extends=[],_class88))||_class87)||_class87);export var LValue=(_dec46=RuntimeAccessible('LValue'),_dec46(_class89=(_class90=/*#__PURE__*/function(_LModelElement5){_inherits(LValue,_LModelElement5);var _super44=_createSuper(LValue);function LValue(){var _this57;_classCallCheck(this,LValue);for(var _len45=arguments.length,args=new Array(_len45),_key47=0;_key47<_len45;_key47++){args[_key47]=arguments[_key47];}_this57=_super44.call.apply(_super44,[this].concat(args));_this57.__raw=void 0;_this57.id=void 0;_this57.parent=void 0;_this57.father=void 0;_this57.model=void 0;_this57.name=void 0;_this57.namespace=void 0;_this57.fullname=void 0;_this57.type=void 0;_this57.primitiveType=void 0;_this57.classType=void 0;_this57.enumType=void 0;_this57.ordered=void 0;_this57.unique=void 0;_this57.lowerBound=void 0;_this57.upperBound=void 0;_this57.many=void 0;_this57.required=void 0;_this57.changeable=void 0;_this57.volatile=void 0;_this57.transient=void 0;_this57.unsettable=void 0;_this57.derived=void 0;_this57.defaultValue=void 0;_this57.containment=void 0;_this57.container=void 0;_this57.opposite=void 0;_this57.edges=void 0;_this57.topic=void 0;_this57.value=void 0;_this57.isMirage=void 0;_this57.values=void 0;_this57.instanceof=void 0;_this57.conformsTo=void 0;_this57.__info_of__add={type:\"(...val: any|any[]) => void\",txt:\"Adds a value in the current value collection\"};_this57.__info_of__remove={type:\"(...val: any) => void\",txt:\"Deletes a value in the current value collection, or none if the element is not found.\"};_this57.__info_of__removeByIndex={type:\"(...indices: number) => removed[]\",txt:\"Deletes a value in the current value collection, or none if the element is not found.\"};_this57.__info_of__instantiableClasses={type:\"(o?: object, loose?: boolean) => LClass[]\",txt:\"List of all subclasses of the specified type, which can be used as reference values.\"+\"\\n<br>Abstract and Interface classes are excluded.\"+\"\\n<br>If the parameter \\\"o\\\" is specified, it will filter only the instances conforming to the object schema.\"+\"\\n<br>Results are sorted from tightest fit to loosest fit.\"+\"\\n<br>loose parameter set to true makes return instead a list of matching scores of all subclasses.\",hidden:true};_this57.__info_of__addObject={type:\"(json: object, instanceof?: LClass | string | null) => LObject\",txt:\"Appends an object instancing \\\"instanceof\\\" to the values.\\n<br>Setting his own properties, and DValues according to the content of the parameter object.\\n<br>\"+\"If instanceof is:<ul><li><b>a class or a class name</b>, it will instance that class, or a valid non-abstract subclass.\"+\"\\n<br/><b>null</b>, it will instantiate a shapeless object.\"+\"\\n<br/><b>undefined or missing</b>, it will first try to find a valid type in m2 or fail.</ul\"};_this57.typeStr=void 0;_this57.typeString=void 0;_this57.__info_of__typeStr={type:ShortAttribETypes.EString,txt:/*#__PURE__*/_jsxs(\"div\",{children:[\"Alias of\",/*#__PURE__*/_jsx(\"i\",{children:\"this.typeString\"})]})};_this57.__info_of__typeString={type:ShortAttribETypes.EString,txt:/*#__PURE__*/_jsxs(\"div\",{children:[\"Stringified version of \",/*#__PURE__*/_jsx(\"i\",{children:\"this.type\"})]})};return _this57;}// extends DModelElement, m1 value (attribute | reference)\n// inherit redefine\n// from namedelement\n// Classifiers describing PrimitiveTypes or the classes that can be pointed.\n// from structuralfeature (ref + attr)\n// defaultValueLiteral!: string;\n// from reference\n// resolveProxies!: boolean;\n// if DRef have opposite DRef, when you set a value ref you also set a opposite value ref from target to this src. they are always mirroring.\n// target!: LClass[]; is value[]\n// IoT Section\n// personal\n// value!: PrimitiveType | LObject;\n_createClass(LValue,[{key:\"_defaultGetter\",value:// low priority to do: attributo fittizio controlla a quali elementi m2 è conforme quando viene richiesto\nfunction _defaultGetter(c,k){if(k in c.data)return this.__defaultGetter(c,k);// if value not found in node, check in view.\nreturn this.get_instanceof(c)[k];}},{key:\"_defaultSetter\",value:function _defaultSetter(v,c,k){if(_get(_getPrototypeOf(LValue.prototype),\"_setterFor$stuff_canReturnFalse\",this).call(this,v,c,k))return true;// try setter for data.$feature = value; shortcut for data.$feature.value = value;\nthis.__defaultSetter(v,c,k);return true;}},{key:\"add\",value:function add(){return this.cannotCall(\"LValue.add\");}},{key:\"get_add\",value:function get_add(c){var _this58=this;return function(){for(var _len46=arguments.length,val=new Array(_len46),_key48=0;_key48<_len46;_key48++){val[_key48]=arguments[_key48];}_this58.set_values([].concat(_toConsumableArray(c.data.values),_toConsumableArray(val.map(function(v){return(v===null||v===void 0?void 0:v.id)||v;}))),c);};}},{key:\"remove\",value:function remove(){return this.cannotCall(\"LValue.remove\");}},{key:\"get_remove\",value:function get_remove(c){var _this59=this;return function(){for(var _len47=arguments.length,val=new Array(_len47),_key49=0;_key49<_len47;_key49++){val[_key49]=arguments[_key49];}val=val.map(function(v){return(v===null||v===void 0?void 0:v.id)||v;});var indices=[];var values=c.data.values;for(var i=0;i<values.length;i++){if(val.includes(values[i]))indices.push(i);}_this59.get_removeByIndex(c).apply(void 0,indices);};}},{key:\"removeByIndex\",value:function removeByIndex(){return this.cannotCall(\"LValue.removeByIndex\");}},{key:\"get_removeByIndex\",value:function get_removeByIndex(c){var _this60=this;return function(){for(var _len48=arguments.length,indices=new Array(_len48),_key50=0;_key50<_len48;_key50++){indices[_key50]=arguments[_key50];}// reducer is ill-typed, so must force typings\nvar indexMap=indices.reduce(function(accumulator,currentValue){accumulator[currentValue]=true;return accumulator;},{});_this60.set_values(c.data.values.filter(function(v,index){return!indexMap[index];}),c);// this.set_values(c.data.values.filter((v,index) => indices.includes(index)));\n};}},{key:\"instantiableClasses\",value:function instantiableClasses(o){var loose=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this.cannotCall(\"instantiableClasses\");}},{key:\"get_instantiableClasses\",value:// warning: this can be called through model, c.data might be either a value or a model.\nfunction get_instantiableClasses(c){var _this61=this;return function(o){var loose=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return LValue.getInstantiableClasses(_this61,c,o,loose);};}// @eligibleClasses: search only between those targets.\n// @favoritematch: if this class is a valid match, it is given topmost priority regardless of tightness of excess features over the schema.\n// if a class name actually starts with $ character, it needs to be placed twice to get a match, as in class.$$name\n},{key:\"addObject\",value:function addObject(json){var metaclass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;return this.cannotCall(\"LValue.addObject\");}},{key:\"get_addObject\",value:// warning: this can be called through model, c.data might be either a value or a model.\n/*\r\n    @param metaclass: null means \"shapeless\", undefined means automatic or failure, never shapeless.\r\n    type assignment priority:\r\n    1) by explicit type argument\r\n    1.1) treating it as a pointer\r\n    1.2) treating it as a $class_name\r\n    1.3) treating it as a DClass\r\n*/function get_addObject(c){var _this62=this;return function(){var json=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var metaclass=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var lobj=undefined;TRANSACTION(function(){var father='';var isDValue=c.data.className===\"DValue\";var isDModel=c.data.className===\"DModel\";var instanceoff=isDValue?_this62.get_instanceof(c):undefined;var dinstanceoff=instanceoff&&instanceoff.__raw;// let ShapelessObjectID =\nvar isShapeless=!dinstanceoff;// || dinstanceoff && ((dinstanceoff?.id | dinstanceoff) === ShapelessObjectID);\nvar isReference=!!(dinstanceoff&&dinstanceoff.className===\"DReference\");if(isDValue&&!isReference&&!isShapeless)return Log.ee(\"cannot call addObject() on a DValue implementing an attribute\",{dinstanceoff:dinstanceoff,thiss:c.data});var isContainment=isDValue&&_this62.get_containment(c)||isDModel;// if (metaclass === undefined) metaclass = \"object\"; // in this case, i first check if a class \"object\" exist, then make a shapeless object if not.\nvar state=store.getState();father=isContainment?c.data.id:_this62.get_model(c).id;var constructorPointers=_objectSpread(_objectSpread({},json),{},{father:father});// if undefined = explicitely told to make it shapeless. if null, it's automatic selectyion by value.type or m2-model classes.\nif(metaclass!==null){var _lmetaclass;// find instance schema: 1) by explicit type argument\nif(metaclass){// find instance schema: 1.1) by pointer AND 1.3) by Dclass\n_lmetaclass=LPointerTargetable.from(metaclass,state);// find instance schema: 1.2) by $class_name\nif((!_lmetaclass||_lmetaclass.className!==\"DClass\")&&typeof metaclass===\"string\"){var _c$proxyObject$model,_c$proxyObject$model$;var m2classes=(_c$proxyObject$model=c.proxyObject.model)===null||_c$proxyObject$model===void 0?void 0:(_c$proxyObject$model$=_c$proxyObject$model.instanceof)===null||_c$proxyObject$model$===void 0?void 0:_c$proxyObject$model$.classes;if(m2classes)_lmetaclass=LPointerTargetable.from(m2classes[\"$\"+metaclass]||m2classes[metaclass],state);// if (!lmetaclass && typeof metaclass === \"string\" && metaclass.toLowerCase() === \"object\") lmetaclass = undefined;\n}window.debugg=LValue.getInstantiableClasses(_this62,c,json,true,_lmetaclass?[_lmetaclass].concat(_toConsumableArray(_lmetaclass.allSubClasses)):[]);// check if metaclass is found\nif(!_lmetaclass||_lmetaclass.className!==\"DClass\")return Log.ee(\"provided schema type does not belong to a Class, cannot intantiate.\",{lmetaclass:_lmetaclass,schema:metaclass,this:c.data});// check if metaclass is valid (instantiable in the callee collection: .values or .objects)\n// console.log(\"isExtending\", {lmetaclass, type: isDValue && this.get_type?.(c as any)});\nif(isDValue&&!_lmetaclass.isExtending(_this62.get_type(c)))return Log.ee(\"provided schema type does not extend this.type, cannot intantiate.\",{lmetaclass:_lmetaclass,schema:metaclass,this:c.data});}// find instance schema: 2) by dvalue.type\nelse if(isDValue&&!isShapeless){_lmetaclass=_this62.get_type(c);}// phase 2: using lmetaclass (if found), i set constructorPointers.instanceof\n// if requested type is found. but might be abstract, so i filter the best subclass match\nif(_lmetaclass){constructorPointers.instanceof=LValue.getInstantiableClasses(_this62,c,json,false,[_lmetaclass].concat(_toConsumableArray(_lmetaclass.allSubClasses)),_lmetaclass)[0];// actually a L-class, but \"ObjectPointers\" can accept them too.\nif(!constructorPointers.instanceof){// the whole if is just printing error.\nvar matches=LValue.getInstantiableClasses(_this62,c,json,true,[_lmetaclass].concat(_toConsumableArray(_lmetaclass.allSubClasses)));return Log.ee(\"addObject(schema) could not find a valid subtype of \"+metaclass+\" conforming ot that schema to instantiate an object.\\n\"+(matches.length?\"closest match was: \"+matches[0].name:\"\"),{json:json,matches:matches,this:c.data});}}// if not found, i look among all m2classes\nelse if(!isDValue||isShapeless){// if shapelessvalue.addObject() --> infer schema from json keys and ref sub-types best match\n// if model.addObject() --> find best match within all classes\nwindow.debugg=_this62.get_model(c).instantiableClasses(json,true);constructorPointers.instanceof=_this62.get_model(c).instantiableClasses(json,false)[0];// actually a L-class, but \"ObjectPointers\" can accept them too.\nif(!constructorPointers.instanceof){var _matches$;// the whole if is just printing error.\nvar _matches=isDValue?_this62.get_instantiableClasses(c)(json,true):_this62.get_model(c).instantiableClasses(json,true);var _type=isDValue?_this62.get_type(c):undefined;return Log.ee(\"LValue.addObject(schema) could not find a valid \"+(c.data.className===\"DValue\"?\"subtype of \"+_type.name:\"type\")+\" conforming ot that schema to instantiate an object.\\n\"+(_matches.length?\"closest match was: \"+((_matches$=_matches[0])===null||_matches$===void 0?void 0:_matches$.class.name):\"\"),{json:json,type:_type,matches:_matches,thiss:c.data});}}if(!constructorPointers.instanceof&&isDValue&&!isShapeless){var _instanceoff$type;return Log.ee(\"could not find an instantiable subtype for given schema and type \"+(instanceoff===null||instanceoff===void 0?void 0:(_instanceoff$type=instanceoff.type)===null||_instanceoff$type===void 0?void 0:_instanceoff$type.name),{schema:json,type:instanceoff===null||instanceoff===void 0?void 0:instanceoff.type});}}// both dmodel.objects nad dvalue.values are updated by the Constructors by passing father parameter.\n// phase 3: create object according to schema (or shapeless) and update parent container collection.\nconsole.log(\"Object.new3\",{constructorPointers:constructorPointers});var dobj=DObject.new3(constructorPointers,function(){},DValue,true);if(isReference&&!isContainment){// if is ref containment, object.father is set to value, which also appends the object to this.values\n// if it's model, object.father = model, and it goes in model.objects and not in values.\n// if it's non-containment value, it goes in model but also appended to this.values\n// ? if schemaless acts like a containment ref so still fine ?\n_this62.set_values([].concat(_toConsumableArray(c.data.values),[dobj.id]),c);}// phase 4: set sub-DDalues.values according to json data provided, or create them if they were missing in partial class match.\nlobj=LPointerTargetable.fromD(dobj);var dobjkeys=Object.keys(dobj);// update lmetaclass from candidate root, to selected instance (sub-type)\nvar lmetaclass=constructorPointers.instanceof&&LPointerTargetable.wrap(constructorPointers.instanceof);var isPartial=!!(lmetaclass===null||lmetaclass===void 0?void 0:lmetaclass.partial);var childnames=lmetaclass?U.objectFromArrayValues(lmetaclass.childNames):{};// because at current time Constructor.setPtr actions are not executed yet. so dobject.features is empty, even through LPoint.from(valueid) canaccess the \"pending\" local dvalue not in store.\nsetTimeout(function(){return TRANSACTION(function(){for(var _key51 in json){if(_key51[0]===\"$\"){// if $ is prepended, priority is first and only child values check\nif(_key51 in childnames){// if child dvalue with that name including char $ exist, like in \"$\" + \"$name\"\nlobj[\"$\"+_key51].values=json[_key51];continue;}var key1=_key51.substring(1);if(key1 in childnames){// if child dvalue with that name excluding char $ exist, like in \"$\" + \"name\" (as normal)\nlobj[\"$\"+key1].values=json[_key51];continue;}// if child dvalue with that name do not exist\nif(isShapeless||isPartial){lobj.addValue(_key51,undefined,json[_key51],false);continue;}// this should never happen, if there is a mismatch in finding the correct type conforming to the schema, the function should have already stopped and returned before.\nLog.eDev('addObject(schema) error: cannot find value collection named \"'+_key51+' \" as defined in the schema parameter.',{lmetaclass:lmetaclass,this:c.data,instanceof:constructorPointers.instanceof});continue;}// if $ is NOT prepended, priority is inverted: first DObject properties, then child values\nif(_key51 in dobjkeys){lobj[_key51]=json[_key51];continue;}else{// redoing the whole childmatch attempt for shaped and shapeless, when first char is not $, as a fallback.\nif(_key51 in childnames){// if child dvalue with that name excluding char $ exist, like in \"$\" + \"name\" (as normal)\nconsole.log(\"get_addObject() adding values\",{lobj:lobj,key:_key51,json:json,childnames:childnames,d:constructorPointers.instanceof});lobj[\"$\"+_key51].values=json[_key51];continue;}else if(isShapeless||isPartial){lobj.addValue(_key51,undefined,json[_key51],false);continue;}Log.eDev('addObject(schema) error: cannot find value collection named \"'+_key51+' \" as defined in the schema parameter.',{lmetaclass:lmetaclass,this:c.data,instanceof:constructorPointers.instanceof,dobjkeys:dobjkeys});continue;}}});},100);});return lobj;};}},{key:\"get_edges\",value:function get_edges(context){return LPointerTargetable.fromPointer(context.data.edges)||[];}},{key:\"get_fromlfeature\",value:function get_fromlfeature(meta,key){return meta?meta[key]:undefined;}},{key:\"get_opposite\",value:function get_opposite(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"opposite\");}},{key:\"get_container\",value:function get_container(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"container\");}},{key:\"get_containment\",value:function get_containment(context){var iof=context.proxyObject.instanceof;if(!iof)return true;// shapeless\nreturn this.get_fromlfeature(iof,\"containment\");}// protected get_defaultValueLiteral(context: Context): LStructuralFeature[\"defaultValueLiteral\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"defaultValueLiteral\"); }\n},{key:\"get_defaultValue\",value:function get_defaultValue(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"defaultValue\");}},{key:\"get_defaultderived\",value:function get_defaultderived(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"derived\");}},{key:\"get_defaultunsettable\",value:function get_defaultunsettable(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"unsettable\");}},{key:\"get_defaulttransient\",value:function get_defaulttransient(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"transient\");}},{key:\"get_volatile\",value:function get_volatile(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"volatile\");}},{key:\"get_changeable\",value:function get_changeable(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"changeable\");}},{key:\"get_required\",value:function get_required(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"required\");}},{key:\"get_unique\",value:function get_unique(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"unique\");}},{key:\"get_many\",value:function get_many(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"many\");}},{key:\"get_upperBound\",value:function get_upperBound(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"upperBound\");}},{key:\"get_lowerBound\",value:function get_lowerBound(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"lowerBound\");}},{key:\"get_ordered\",value:function get_ordered(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"ordered\");}},{key:\"get_enumType\",value:function get_enumType(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"enumType\");}},{key:\"get_classType\",value:function get_classType(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"classType\");}},{key:\"get_primitiveType\",value:function get_primitiveType(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"primitiveType\");}},{key:\"get_type\",value:function get_type(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"type\");}},{key:\"get_fullname\",value:function get_fullname(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"fullname\");}},{key:\"get_namespace\",value:function get_namespace(context){return this.get_fromlfeature(context.proxyObject.instanceof,\"namespace\");}},{key:\"get_name\",value:function get_name(context){return context.data.instanceof?this.get_fromlfeature(context.proxyObject.instanceof,\"name\"):context.data.name||'';}},{key:\"get_instanceof\",value:function get_instanceof(context){var pointer=context.data.instanceof;if(!pointer)return undefined;return LPointerTargetable.from(pointer);}},{key:\"set_instanceof\",value:function set_instanceof(val,context){// const list = val.map((lItem) => { return Pointers.from(lItem) });\nvar ptr=Pointers.from(val);SetFieldAction.new(context.data,'instanceof',ptr,\"\",true);return true;}},{key:\"get_isMirage\",value:function get_isMirage(context){return context.data.isMirage;}},{key:\"set_isMirage\",value:function set_isMirage(val,context){SetFieldAction.new(context.data,'isMirage',val,\"\",false);return true;}// derivate attribute, abstract\n// derivate attribute, abstract\n},{key:\"get_typeString\",value:function get_typeString(c){return this.get_typeStr(c);}},{key:\"get_typeStr\",value:function get_typeStr(c){var meta=this.get_instanceof(c);return meta?meta.typeToShortString():\"shapeless\";}// individual value getters\n// if withMetaInfo, returns a wrapper for the first non-empty value found containing his index and metainfo\n},{key:\"get_value\",value:function get_value(context){var namedPointers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var ecorePointers=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var shapeless=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var keepempties=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var withmetainfo=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;return this.get_values(context,true,namedPointers,ecorePointers,shapeless,keepempties,withmetainfo,1)[0];}},{key:\"getValue\",value:function getValue(){var namedPointers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var ecorePointers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var shapeless=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var keepempties=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var withmetainfo=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;return this.cannotCall(\"getValue\");}},{key:\"get_getValue\",value:function get_getValue(context){return function(){var namedPointers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var ecorePointers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var shapeless=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var keepempties=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var withmetainfo=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;return LValue.prototype.get_value(context,namedPointers,ecorePointers,shapeless,keepempties,withmetainfo);};}// multiple value getters\n},{key:\"get_values\",value:function get_values(context){var fitSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var namedPointers=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var ecorePointers=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var shapeless=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var keepempties=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;var withmetainfo=arguments.length>6?arguments[6]:undefined;var maxlimit=arguments.length>7?arguments[7]:undefined;var solveLiterals=arguments.length>8&&arguments[8]!==undefined?arguments[8]:\"literal_obj\";var ret=_toConsumableArray(context.data.values);var meta=shapeless?undefined:context.proxyObject.instanceof;var dmeta=meta===null||meta===void 0?void 0:meta.__raw;// if (meta && meta.className === DReference.name) ret = LPointerTargetable.fromArr(ret as DObject[]);\nvar typestr=this.get_typeString(context);ret.type=typestr;if(!Array.isArray(ret))ret=[];if(dmeta&&fitSize&&ret.length<dmeta.lowerBound&&dmeta.lowerBound>0){var times=dmeta.lowerBound-ret.length;while(times-->0){ret.push(undefined);}// ret.length = meta.lowerBound; not really working for expanding, it says \"emptyx10\" or so. doing .map() only iterates \"existing\" elements. behaves like as it's smaller.\n}if(maxlimit!==undefined)ret.length=maxlimit;else if(dmeta&&fitSize&&ret.length>dmeta.upperBound&&dmeta.upperBound>=0)ret.length=dmeta.upperBound;// console.log(\"get_values sizefixed\", {fitSize, arguments, upperbound:dmeta?.upperBound, lowerbound: dmeta?.lowerBound, len: ret.length, len0: context.data.values.length});\nvar numbermax=0,numbermin=0,round=true;// ret is always an array of raw values before this point, eventually padded with lowerbound or trimmed at upperbound\nvar index=0;if(withmetainfo){ret=ret.map(function(r){return{value:r,rawValue:r,index:index++,hidden:false};});}var mapperfunc=undefined;var numbercasting=function numbercasting(v){if(typeof v!==\"number\"){var _v$constructor;if(!v)v=0;else if(v===\"true\")v=1;else if(((_v$constructor=v.constructor)===null||_v$constructor===void 0?void 0:_v$constructor.name)===\"Date\")v=v.getTime();else if(typeof v===\"string\"){// console.log(\"number casting:\", v,  U.getFirstNumber(v+'', true), {numbermax, numbermin});\nv=U.getFirstNumber(v+'',!round);}else return NaN;}v=Math.min(numbermax,Math.max(numbermin,v));return round?Math.round(v):v;};switch(typestr){case\"shapeless\":var state=store.getState();mapperfunc=function mapperfunc(val){if(!val||typeof val!==\"string\")return val;var l=LPointerTargetable.fromPointer(val,state);if(!l)return val;if(l.className===DEnumLiteral.cname){l=l.literal;}else if(namedPointers){var _ref2,_ref2$__raw,_ref2$__raw$values;l=l.name?\"@\"+l.name:((_ref2=l[\"@\"+l.name])===null||_ref2===void 0?void 0:(_ref2$__raw=_ref2.__raw)===null||_ref2$__raw===void 0?void 0:(_ref2$__raw$values=_ref2$__raw.values)===null||_ref2$__raw$values===void 0?void 0:_ref2$__raw$values[0])||\"#\"+l.className;}else if(ecorePointers){l=l.ecorePointer();}return l;};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);break;default:// it's a reference or enum\nvar lenum=undefined;var _type2=meta===null||meta===void 0?void 0:meta.type;if((_type2===null||_type2===void 0?void 0:_type2.className)===DEnumerator.cname){lenum=_type2;mapperfunc=function mapperfunc(r){var _lit,_lit2;if(solveLiterals===\"original\")return r;numbermin=0;numbermax=solveLiterals===\"ordinals\"?Number.POSITIVE_INFINITY:0;var lit;if(typeof r===\"string\")lit=Pointers.isPointer(r)?LPointerTargetable.fromPointer(r):lenum[\"@\"+r];else if(typeof r===\"number\")lit=lenum.ordinals[r];switch(solveLiterals){default:case\"literal_obj\":return lit;// if r was a number and a valid ordinal (found literal through him) return r. if r was a string, don't return r but lenum[\"@\"+r].ordinal\ncase\"ordinals\":return typeof r===\"number\"?lit?r:undefined:(_lit=lit)===null||_lit===void 0?void 0:_lit.ordinal;case\"literal_str\":return typeof r===\"string\"?lit?r:undefined:(_lit2=lit)===null||_lit2===void 0?void 0:_lit2.literal;}};}else if(!_type2.isPrimitive&&(_type2===null||_type2===void 0?void 0:_type2.className)===DClass.cname)mapperfunc=function mapperfunc(r){return r&&LPointerTargetable.fromPointer(r);};else mapperfunc=function mapperfunc(r){return r;};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);// now ret is pointed DEnumLiteral or DObject or MetaInfoStructure<>\nif((_type2===null||_type2===void 0?void 0:_type2.className)===DEnumerator.cname){// replace numeric literals, mapped to literal ordinal. can happen with type switches\n/*\r\n                    if (solveLiterals) {\r\n                        mapperfunc = (lit: LEnumLiteral|number) => {\r\n                            numbermax = Number.POSITIVE_INFINITY;\r\n                            numbermin = 0;\r\n                            let ordinal = numbercasting(lit);\r\n                            return isNaN(ordinal) ? lit : (meta!.type as LEnumerator).ordinals[ordinal];\r\n                        }\r\n                        if (withmetainfo) ret.forEach((struct: ValueDetail) => { struct.value = mapperfunc(struct.value); });\r\n                        else ret = ret.map(mapperfunc);\r\n                    }*/var filterfunc=function filterfunc(l){var _l$father;if(!l)return keepempties;return((_l$father=l.father)===null||_l$father===void 0?void 0:_l$father.id)===meta.type.id;};if(withmetainfo)for(var _i12=0,_arr12=ret;_i12<_arr12.length;_i12++){var struct=_arr12[_i12];struct.hidden=!filterfunc(struct.value);}// && 'literal target is not of the correct type requested by metamodel'; }\nelse ret=ret.filter(filterfunc);// todo: questo comportamento implica che quando importo un literal come testo da .ecore, devo assegnargli\n//  il puntatore al suo literal se trovato, altrimenti resta val[i] di tipo string/shapeless\nif(namedPointers){mapperfunc=function mapperfunc(lit){return lit===null||lit===void 0?void 0:lit.name;};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);}break;}// is reference with assigned shape (and type) -> filter correct typed targets\nif(meta){var _filterfunc=function _filterfunc(l){// hide values with a value that is not a pointer to correct type (but keep empties if requested)\n//let isExtending = l.instanceof?.isExtending((meta as LReference).type); // damiano: todo test & debug isextending\nvar isExtending=true;return keepempties&&!l?true:isExtending;};if(withmetainfo)for(var _i13=0,_arr13=ret;_i13<_arr13.length;_i13++){var _struct=_arr13[_i13];_struct.hidden=!_filterfunc(_struct.value);}// && \"ref target is not of correct type\"; }\nelse ret=ret.filter(_filterfunc);}// shaped (with m2-reference) but pointing to a shapeless object. can happen\nif(namedPointers){var _mapperfunc=function _mapperfunc(l){var _ref3,_ref3$__raw,_ref3$__raw$values;return l&&(l.name?\"@\"+l.name:((_ref3=l[\"@\"+l.name])===null||_ref3===void 0?void 0:(_ref3$__raw=_ref3.__raw)===null||_ref3$__raw===void 0?void 0:(_ref3$__raw$values=_ref3$__raw.values)===null||_ref3$__raw$values===void 0?void 0:_ref3$__raw$values[0])||\"#\"+l.className);};if(withmetainfo)ret.forEach(function(struct){struct.value=_mapperfunc(struct.value);});else ret=ret.map(_mapperfunc);}else if(ecorePointers&&!meta.containment){mapperfunc=function mapperfunc(lval){return lval&&lval.ecorePointer();};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);// throw new Error(\"values as EcorePointers: todo. for containment do nothing, just nest the obj. for non-containment put the ecore reference string in array vals\")\n}break;case ShortAttribETypes.EByte:numbermin=-128;numbermax=127;break;case ShortAttribETypes.EShort:numbermin=-32768;numbermax=32767;break;case ShortAttribETypes.EInt:numbermin=-2147483648;numbermax=2147483647;break;case ShortAttribETypes.ELong:numbermin=-9223372036854775808;numbermax=9223372036854775807;break;case ShortAttribETypes.EFloat:case ShortAttribETypes.EDouble:numbermin=Number.NEGATIVE_INFINITY;numbermax=Number.POSITIVE_INFINITY;round=false;break;case ShortAttribETypes.EString:case ShortAttribETypes.EDate:mapperfunc=function mapperfunc(v){return v?v+'':'';};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);break;case ShortAttribETypes.EChar:mapperfunc=function mapperfunc(v){return v?(v+'')[0]:'A';};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);break;case ShortAttribETypes.EBoolean:mapperfunc=function mapperfunc(v){return typeof v===\"boolean\"?v:U.fromBoolString(v+'',(v===null||v===void 0?void 0:v.length)>0,false);};if(withmetainfo)ret.forEach(function(struct){struct.value=mapperfunc(struct.value);});else ret=ret.map(mapperfunc);break;case ShortAttribETypes.EVoid:if(withmetainfo)ret.forEach(function(struct){return struct.hidden=true;});else ret=[];break;}// some kind of numeric type\nif(numbermax!==0){if(withmetainfo)ret.forEach(function(struct){struct.value=numbercasting(struct.value);});else ret=ret.map(numbercasting);}return ret;}},{key:\"getValues\",value:function getValues(){var fitSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var namedPointers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var ecorePointers=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var shapeless=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var keepempties=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var withmetainfo=arguments.length>5?arguments[5]:undefined;var maxlimit=arguments.length>6?arguments[6]:undefined;return this.cannotCall(\"getValues\");}},{key:\"get_getValues\",value:function get_getValues(context){return function(){var fitSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var namedPointers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var ecorePointers=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var shapeless=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var keepempties=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var withmetainfo=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var limit=arguments.length>6?arguments[6]:undefined;return LValue.prototype.get_values(context,fitSize,namedPointers,ecorePointers,shapeless,keepempties,withmetainfo,limit);};}// stringified value getters\n},{key:\"valuesString\",value:function valuesString(keepemptyquotes){return this.cannotCall(\"valuestring\");}},{key:\"valuestring\",value:function valuestring(keepemptyquotes){return this.cannotCall(\"valuestring\");}},{key:\"get_valuestring\",value:function get_valuestring(context){var _this63=this;return function(keepemptyquotes){return _this63.valuestring_impl(context,keepemptyquotes);};}},{key:\"get_valuesString\",value:function get_valuesString(context){var _this64=this;return function(keepemptyquotes){return _this64.valuestring_impl(context,keepemptyquotes);};}},{key:\"valuestring_impl\",value:function valuestring_impl(context,keepemptyquotes){var val=this.get_values(context,true,true,false,false,true);// console.log(\"valuestring_impl\", {val});\nvar ret;switch(val.length){case 0:ret='';break;case 1:ret=val[0];break;default:var havestrings=val.type===ShortAttribETypes.EString;var havechars=val.type===ShortAttribETypes.EChar;var havepointers=false;var haveLelements=false;for(var _i14=0,_arr14=[val[0]];_i14<_arr14.length;_i14++){var vall=_arr14[_i14];if(vall===null||vall===void 0?void 0:vall.__isProxy)haveLelements=true;/*else if (typeof vall === \"string\") { havestrings = true; havepointers = havepointers || vall.includes(\"Pointer\"); }}\r\n                     */}/*if (havepointers) {\r\n                    val = LPointerTargetable.wrapAll(val);\r\n                    haveLelements = true;\r\n                }*/ /*\r\n                if (haveLelements) {\r\n                    val = val.map( l => l && (l.name ? (\"@\" + l.name) : (\"#\" + l.className)));\r\n                }*/if(havestrings||havechars){var valstr=JSON.stringify(val);if(!keepemptyquotes)valstr=U.replaceAll(valstr,\"\\\"\\\"\",\"\");ret=valstr.substring(1,valstr.length-1);break;}else ret=val.join(', ');}return(ret===undefined||ret===null?'':ret)+'';}},{key:\"setValueAtPosition\",value:function setValueAtPosition(index,val,info){return this.cannotCall(\"setValueAtPosition\");}// only use through setValueAtPosition\n},{key:\"_clearValueAtPosition\",value:function _clearValueAtPosition(context,index,info0){var skipSettingUndefined=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var info=info0||{};var oldVal=context.data.values[index];var oldTarget=typeof oldVal===\"string\"?LObject.fromPointer(oldVal):undefined;/////////////////////// if oldTarget is LObject, update his pointedBy\n// if (oldTarget) SetFieldAction.new(oldTarget, \"pointedBy\" '-=\", ... no need? reducer should do this)\n/////////////////////// if ref is containment assign oldTarget father to DModel\nif(info.isContainment===undefined){if(info.instanceof===undefined)info.instanceof=context.proxyObject.instanceof;if(info.instanceof){if(info.instanceof.className===DReference.cname){info.isContainment=info.instanceof.containment;}else info.isContainment=false;}else{info.isContainment=true;}}if(info.isContainment&&(oldTarget===null||oldTarget===void 0?void 0:oldTarget.className)===\"DObject\"){SetFieldAction.new(oldVal,\"father\",context.proxyObject.model.id,undefined,true);}if(!skipSettingUndefined)SetFieldAction.new(context.data,'values.'+index,undefined,'',info.isPtr);}},{key:\"get_setValueAtPosition\",value:function get_setValueAtPosition(context){var _this65=this;return function(index,val,info0){var _val,_val2;var isPtr=undefined;var lval=undefined;if(val===null)val=undefined;if(context.data.values[index]===val)return{success:false,reason:\"identical assignment\"};if(((_val=val)===null||_val===void 0?void 0:_val.id)&&((_val2=val)===null||_val2===void 0?void 0:_val2.className)){lval=val.__isProxy?val:LPointerTargetable.wrap(val);isPtr=!!lval;val=val.id;}var info=info0||{};if(isPtr===undefined)isPtr=info.isPtr===undefined?Pointers.isPointer(val):info.isPtr;// set sideeffect part\nif(val!==undefined){if(isPtr){if(info.type===undefined)info.type=context.proxyObject.type;if(info.instanceof===undefined)info.instanceof=context.proxyObject.instanceof;if(info.isContainment===undefined){info.isContainment=!info.instanceof||info.instanceof.className===DReference.cname&&info.instanceof.containment;}lval=LPointerTargetable.fromPointer(val);if(!lval)return{success:false,reason:\"invalid pointer: \"+lval};// is enum\nif(lval.className===DEnumLiteral.cname){var lvale=lval;if(info.instanceof&&info.type&&lvale.father.id!==info.type.id)return{success:false,reason:\"target is not of correct literal type\"};// no need to do checks / other sideeffects other than pointedBy i think.\n}// is ref\nif(lval.className===DObject.cname){var lvalo=lval;var lvalmeta=lvalo.instanceof;// if (info.instanceof && info.type && (!(lvalmeta as LClass)?.isExtending(info.type))) return {success: false, reason: \"target is not of correct type\"}; damiano todo: enable and implement isExtending\nif(info.fatherList===undefined)info.fatherList=context.proxyObject.fatherList;if(info.isContainment){if(info.fatherList.map(function(father){return father.id;}).includes(val))return{success:false,reason:\"cannot create a containment loop\"};// todo: in LReference.set_containment need to forbid setting to true if there is a loop\nvar oldContainer=lvalo.father;var oldContainerValue=oldContainer.className===DModel.cname?undefined:oldContainer;// detach contaied object from old parent\nif(oldContainerValue){var valarr=oldContainerValue.__raw.values;for(var i=0;i<valarr.length;i++){var v=valarr[i];if(v===val)oldContainerValue.setValueAtPosition(i,undefined,undefined);}}SetFieldAction.new(val,\"father\",context.data.id,undefined,true);}}// automatic? SetFieldAction.new(val as Pointer<DObject>, \"pointedBy\", PointedBy.fromID(context.data.id, \"values.\" + index as any), \"+=\");\n}else{var _info$instanceof;// loose checks, i can assign any primitive to any primitive (will cast on get)\nif(info.instanceof===undefined)info.instanceof=context.proxyObject.instanceof;var metatype=((_info$instanceof=info.instanceof)===null||_info$instanceof===void 0?void 0:_info$instanceof.typeToShortString())||\"shapeless\";if(typeof val===\"object\"){if(val.constructor===Date&&metatype!==\"EString\"&&metatype!==\"EDate\"&&metatype!==\"shapeless\")return{success:false,reason:\"dates can only be assigned to values of type string or Date\"};// return {success: false, reason: \"objects are not assignable except for dates\"}; maybe i allow this instead\n}}}// clear sideeffect part\n_this65._clearValueAtPosition(context,index,info,true);// actual set\nSetFieldAction.new(context.data,'values.'+index,val,'',isPtr);if(info.setMirage!==false)SetFieldAction.new(context.data,'isMirage',false,'',false);// assegnato a giordano todo: wrap this and set toaster with failure message if it fails or better launch Log.w and bind toasts of different colors to Log funcs\nreturn{success:true};};}},{key:\"set_values\",value:function set_values(val,context){var list=Array.isArray(val)?val:[val];var modified=false;for(var i=0;i<list.length;i++){modified=this.get_setValueAtPosition(context)(i,list[i],{setMirage:false}).success||modified;}if(modified)context.data.isMirage&&SetFieldAction.new(context.data,'isMirage',false,'',false);return true;// old implementation\nvar l=context.proxyObject;var instanceoff=l.instanceof;var isRef=!instanceoff?undefined:(instanceoff===null||instanceoff===void 0?void 0:instanceoff.className)===DReference.cname;SetFieldAction.new(context.data,'values',list,'',false);// console.log(\"pre set_values actions\", l, list, val, context);\nif(!l.instanceof||isRef&&instanceoff.containment){var _i15=0;var _iterator50=_createForOfIteratorHelper(list),_step50;try{for(_iterator50.s();!(_step50=_iterator50.n()).done;){var v0=_step50.value;// console.log(\"loop set_value actions\", v, context.data, isRef, instanceoff, Pointers.isPointer(v));\n_i15++;if((isRef||instanceoff===undefined)&&Pointers.isPointer(v0)){var _ret3=function(){// if shapeless obj need to check val by val\nvar v=v0;//Pointer<DObject> | Pointer<DEnumLiteral>;\n// console.log(\"loop set_value actions SET\", {v, data:context.data, isRef, instanceoff, isPtr:Pointers.isPointer(v)});\nvar lval=LPointerTargetable.fromPointer(v);var oldContainer=lval.father;SetFieldAction.new(v,\"pointedBy\",PointedBy.fromID(context.data.id,\"values.\"+_i15),\"+=\");SetFieldAction.new(v,\"father\",context.data.id,undefined,true);if(oldContainer.className===DModel.cname)return\"continue\";var containerValue=oldContainer;// let oldContainerValues = [...containerValue.__raw.value]; U.arrayRemoveAll(oldContainerValues, v);\nvar oldContainerValues=containerValue.__raw.values.map(function(va){return va===v?undefined:va;});SetFieldAction.new(containerValue.id,\"values\",oldContainerValues,\"\",true);// todo: verify if works: remove val from old container\nvar oldv=context.data.values[_i15];// if (Pointers.isPointer(oldv)) SetFieldAction.new(context.data.id, \"contains\", U.arrayRemoveAll([...context.data.contains], oldv), '', true);\n// SetFieldAction.new(context.data.id, \"contains\", oldv as DObject[\"id\"], undefined, true);\n}();if(_ret3===\"continue\")continue;}}}catch(err){_iterator50.e(err);}finally{_iterator50.f();}}context.data.isMirage&&SetFieldAction.new(context.data,'isMirage',false,'',false);return true;}},{key:\"set_value\",value:function set_value(val,context){var v=this.get_value(context,false,false,false,true,true);var r=this.get_setValueAtPosition(context)((v===null||v===void 0?void 0:v.index)||0,val);Log.e(!r.success,r.reason);return r.success;}},{key:\"generateEcoreJson_impl\",value:function generateEcoreJson_impl(context){var loopDetectionObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loopDetectionObj[context.data.id]=context.data;var values=this.get_values(context,true,false,true,false,false);delete values[\"type\"];var ret=[];var _iterator51=_createForOfIteratorHelper(values),_step51;try{the_loop:for(_iterator51.s();!(_step51=_iterator51.n()).done;){var v=_step51.value;var l=v;if(!(l===null||l===void 0?void 0:l.__isProxy)){ret.push(l);continue;}switch(l.className){case\"DOperation\":continue the_loop;case\"DEnumLiteral\":ret.push(l.generateEcoreJsonM1());break;default:ret.push(l.generateEcoreJson(loopDetectionObj));break;}}}catch(err){_iterator51.e(err);}finally{_iterator51.f();}// ret = ret.filter((j: any) => (j !== undefined || j !== ''));\nreturn ret.length<=1?ret[0]:ret;}},{key:\"get_toString\",value:function get_toString(context){var _this66=this;return function(){return _this66._toString(context);};}},{key:\"_toString\",value:function _toString(context){var val=this.get_values(context,true,true,false,false,true);if(!val)return val+'';if(!Array.isArray(val))val=[val];// if (!context.proxyObject.instanceof) val = val.map( (e: GObject) => { return  e.name ? \"@\" + e.name : e; });\n// else if (context.proxyObject.instanceof?.className === DReference.name) val = val.map( (e: GObject) => { return e.name ? \"@\" + e.name : e; });\nswitch(val.length){case 0:return'';case 1:return val[0]+'';default:return val+'';}}},{key:\"rawValues\",value:function rawValues(){_get(_getPrototypeOf(LValue.prototype),\"cannotCall\",this).call(this,'rawValues');}},{key:\"get_rawValues\",value:function get_rawValues(context){return this.get_getValues(context)(false,false,false,true,true,false,undefined);}},{key:\"get_topic\",value:function get_topic(context){return context.data.topic;}},{key:\"set_topic\",value:function set_topic(val,context){SetFieldAction.new(context.data,'topic',val,'',false);return true;}}],[{key:\"getInstantiableClasses\",value:function getInstantiableClasses(thiss,c,schema){var loose=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var eligibleClasses=arguments.length>4?arguments[4]:undefined;var favoriteMatch=arguments.length>5?arguments[5]:undefined;// find eligible classes\nvar isDValue=c.data.className===\"DValue\";var isDModel=c.data.className===\"DModel\";var isShapeless=!c.data.instanceof;var type=isShapeless||!isDValue?undefined:thiss.get_type(c);var isReference=!!type&&type.className===\"DClass\";if(isDValue&&!isReference&&!isShapeless)return[];// case DValue<Attribute>\nif(!eligibleClasses){if(isReference&&!isShapeless){eligibleClasses=[type].concat(_toConsumableArray(type.allSubClasses));}else{var _thiss$get_model$inst;eligibleClasses=((_thiss$get_model$inst=thiss.get_model(c).instanceof)===null||_thiss$get_model$inst===void 0?void 0:_thiss$get_model$inst.classes)||[];}}var scoreMap={};var _iterator52=_createForOfIteratorHelper(eligibleClasses),_step52;try{for(_iterator52.s();!(_step52=_iterator52.n()).done;){var _c3=_step52.value;var raw=_c3.__raw;var instantiable=!(raw.abstract||raw.interface);// if (!loose && instantiable) return false;\nif(scoreMap[raw.id])continue;else scoreMap[raw.id]={class:_c3,instantiable:instantiable,isPartial:raw.partial};}}catch(err){_iterator52.e(err);}finally{_iterator52.f();}if(schema){// const fix$ = (vals: string[]) => vals.map(v=> v[0] === \"$\" ? v.substring(1) : v);\nvar fix$=function fix$(obj){var ret={};for(var k in obj){var k1=k[0]===\"$\"?k.substring(1):k;ret[k1]=obj[k];}return ret;};schema=fix$(schema);var keys=Object.keys(schema);for(var ptr in scoreMap){var score=scoreMap[ptr];score.namesMap=U.objectFromArrayValues(score.class.childNames);var diff=U.objdiff(score.namesMap,schema);console.log(\"objDiff\",{schema:schema,names:score.namesMap,data:score.class});score.id=ptr;score.excessFeatures=diff.removed;score.missingFeatures=diff.added;score.matchingFeatures=_objectSpread(_objectSpread({},diff.changed),diff.unchanged);score.excessFeaturesCount=Object.keys(score.excessFeatures).length;score.missingFeaturesCount=Object.keys(score.missingFeatures).length;score.matchingFeaturesCount=Object.keys(score.matchingFeatures).length;score.score=Math.round(((score.instantiable?0:-1)+(keys.length?score.matchingFeaturesCount/keys.length:1))*100)/100;}}var sorted=Object.values(scoreMap);if(!loose)sorted=sorted.filter(function(s){return s.instantiable&&(!s.missingFeaturesCount||s.isPartial);});var favoriteMatchID=favoriteMatch===null||favoriteMatch===void 0?void 0:favoriteMatch.id;sorted=sorted.sort(function(a,b){// return negative if a is less than b, positive if a is greater than b, and zero if they are equal.\n// but since default order is ascending and i want descending, o reverse it.\nif(a.instantiable&&!b.instantiable)return-1;if(!a.instantiable&&b.instantiable)return+1;if(a.missingFeaturesCount===0&&b.missingFeaturesCount===0){// >100% match case (might have excess, take tighter)\n// nly if they are both valid full matches, explicit preference takes precedence. then tightness.\nif(a.id===favoriteMatchID)return-1;if(b.id===favoriteMatchID)return+1;if(a.matchingFeaturesCount!==b.matchingFeaturesCount)return-a.matchingFeaturesCount+b.matchingFeaturesCount;if(a.excessFeaturesCount!==b.excessFeaturesCount)return+a.excessFeaturesCount-b.excessFeaturesCount;}// <99% match, but might be valid for partial classes.\nif(a.isPartial&&!b.isPartial)return-1;if(!a.isPartial&&b.isPartial)return+1;if(a.isPartial&&b.isPartial){// only if they are both valid partial matches, explicit preference takes precedence. then tightness.\nif(a.id===favoriteMatchID)return-1;if(b.id===favoriteMatchID)return+1;}// if both partials or none is partial\n// if (a.missingFeaturesCount !== b.missingFeaturesCount) return -a.missingFeaturesCount + b.missingFeaturesCount; should be same as matchingFeaturesCount\nif(a.matchingFeaturesCount!==b.matchingFeaturesCount)return-a.matchingFeaturesCount+b.matchingFeaturesCount;if(a.excessFeaturesCount!==b.excessFeaturesCount)return+a.excessFeaturesCount-b.excessFeaturesCount;return 0;});if(loose)return sorted;return sorted.map(function(score){return score.class;});}}]);return LValue;}(LModelElement),_class90.subclasses=[],_class90._extends=[],_class90))||_class89);RuntimeAccessibleClass.set_extend(DNamedElement,DValue);RuntimeAccessibleClass.set_extend(LNamedElement,LValue);// export type WJavaObject = getWParams<LJavaObject, DJavaObject>;\nDModelElement.cname='DModelElement';LModelElement.cname='LModelElement';DAnnotationDetail.cname='DAnnotationDetail';LAnnotationDetail.cname='LAnnotationDetail';DAnnotation.cname='DAnnotation';LAnnotation.cname='LAnnotation';DNamedElement.cname='DNamedElement';LNamedElement.cname='LNamedElement';DTypedElement.cname='DTypedElement';LTypedElement.cname='LTypedElement';DClassifier.cname='DTypedElement';LClassifier.cname='LTypedElement';DPackage.cname='DPackage';LPackage.cname='LPackage';DOperation.cname='DOperation';LOperation.cname='LOperation';DParameter.cname='DParameter';LParameter.cname='LParameter';DClass.cname='DClass';LClass.cname='LClass';// ClassReferences.cname = 'ClassReferences';\nDDataType.cname='DDataType';LDataType.cname='LDataType';DStructuralFeature.cname='DStructuralFeature';LStructuralFeature.cname='LStructuralFeature';DReference.cname='DReference';LReference.cname='LReference';DAttribute.cname='DAttribute';LAttribute.cname='LAttribute';DEnumLiteral.cname='DEnumLiteral';LEnumLiteral.cname='LEnumLiteral';DModelM1.cname='DModelM1';LModelM1.cname='LModelM1';DEnumerator.cname='DEnumerator';LEnumerator.cname='LEnumerator';DModel.cname='DModel';LModel.cname='LModel';DMap.cname='DMap';LMap.cname='LMap';DObject.cname='DObject';LObject.cname='LObject';DValue.cname='DValue';LValue.cname='LValue';","map":{"version":3,"names":["Abstract","BEGIN","Constructors","Debug","DPointerTargetable","END","Instantiable","Leaf","Log","LPointerTargetable","Node","PointedBy","Pointers","RuntimeAccessible","RuntimeAccessibleClass","Selectors","SetFieldAction","SetRootFieldAction","ShortAttribETypes","ShortAttribSuperTypes","store","TargetableProxyHandler","TRANSACTION","U","AccessModifier","ECoreAnnotation","ECoreAttribute","ECoreClass","ECoreEnum","EcoreLiteral","ECoreOperation","ECorePackage","EcoreParser","ECoreReference","ECoreRoot","transientProperties","jsx","_jsx","jsxs","_jsxs","DModelElement","_dec","_class","_class2","_DPointerTargetable","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","id","parent","father","annotations","_createClass","key","value","_new","exx","new3","subclasses","_extends","DAnnotationDetail","_dec2","_class3","_DPointerTargetable2","_super2","LModelElement","_dec3","_class4","_class5","_LPointerTargetable","_super3","_this2","_len2","_key2","__raw","__info_of__father","type","txt","fatherList","children","__info_of_children__","nodes","node","model","package","class","enum","operation","subNodes","property","containers","name","isM1","__info_of__isM1","isM2","__info_of__isM2","isInstantiable","__info_of__isInstantiable","childNames","__info_of__childNames","_defaultSetter","val","c","k","_setterFor$stuff_canReturnFalse","includes","target","proxyObject","l","tClassName","className","navigationloop","DPackage","cname","DClass","DEnumerator","DObject","ex","data","DEnumLiteral","literal","ordinal","DValue","values","get_isM1","isMetamodel","M1Classes","get_isM2","_this3","get_isInstantiable","M2InstantiableClasses","get_childNames","get_children","map","filter","generateEcoreJson","loopDetectionloopDetectionObj","undefined","Error","get_generateEcoreJson","context","_this4","loopdetectionobj","generateEcoreJson_impl","loopDetectionObj","exDevv","duplicate","deep","cannotCall","constructor","addAnnotation","source","details","get_addAnnotation","DAnnotation","new","set_containers","cannotSet","get_containers","thiss","ret","push","get_namespace","get_subNodes","includingthis","lclass","$class","$","$subnodes","find","mapfunc","dataset","nodeid","nodehtmlarr","toArray","nodeidarr","html","state","getState","dnodes","idlookup","d","wrap","get_property","substring","toLowerCase","targetRemoved","field","delete","get_fatherList","loopdetection","current","get_father","console","error","get_until_parent","_l","oldd","get_nodes","_transientProperties$","Object","modelElement","get_node","_transientProperties$2","get_model","DModel","get_package","get_class","get_operation","DOperation","get_enum","from","get_children_idlist","_toConsumableArray","set_children","a","add_parent","logicContext","ptr","remove_parent","get_parent","set_parent","ptrs","add_annotation","remove_annotation","indexes","indexOf","p","get_annotations","fromPointer","set_annotations","get_addChild","_this5","_ref","_this5$get_class","_this5$get_class2","_this5$get_enum","_this5$get_class3","_this5$get_operation","fatherElement","ee","addPackage","packages","addClass","addEnumerator","addAttribute","addReference","addLiteral","addOperation","addParameter","get_addObject","addObject","_len3","_key3","get_addException","_context$data","dOperation","dClass","_len4","params","_key4","join","addException","exception","wrongAccessMessage","addChild","AbstractClasses","set_extend","_dec4","_class6","_class7","_DModelElement","_super4","_this6","_len5","_key5","persist","end","LAnnotation","_dec5","_class8","_class9","_LModelElement","_super5","_this7","_len6","_key6","__namee","json","write","get_duplicate","de","ldet","le","fromD","we","lchild","get_source","set_source","get_details","wrapAll","set_details","LAnnotationDetail","_dec6","_class10","_LModelElement2","_super6","_this8","_len7","_key7","_this9","DNamedElement","_dec7","_class12","_class13","_DPointerTargetable3","_super7","_this10","_len8","_key8","LNamedElement","_dec8","_class14","_class15","_LModelElement3","_super8","_this11","_len9","_key9","namespace","fullname","get_fullname","reverse","slice","get_name","set_name","check","child","alert","_autofix_name","replaceAll","get_autofix_name","_this12","autofix_name","DTypedElement","_dec9","_class16","_class17","_DPointerTargetable4","_super9","_this13","_len10","_key10","instances","ordered","unique","lowerBound","upperBound","many","required","LTypedElement","_dec10","_class18","_class19","_LNamedElement","_super10","_this14","_len11","_key11","primitiveType","classType","enumType","get_classType","get_type","isClass","get_enumType","isEnum","get_primitiveType","isPrimitive","set_type","get_ordered","set_ordered","get_unique","set_unique","get_lowerBound","set_lowerBound","isNaN","Math","max","get_upperBound","set_upperBound","get_many","set_many","get_required","set_required","typeToEcoreString","get_typeToEcoreString","typeEcoreString","typeToShortString","get_typeToShortString","typeString","canOverride","other","t1","t2","isExtending","DClassifier","_dec11","_class20","_class21","_DPointerTargetable5","_super11","_this15","_len12","_key12","instanceClassName","defaultValue","LClassifier","_dec12","_class22","_class23","_LNamedElement2","_super12","_this16","_len13","_key13","get_instanceClassName","set_instanceClassName","set_isPrimitive","set_isClass","set_isEnum","get_isPrimitive","get_isClass","get_isEnum","set_defaultValue","isPointer","get_typeEcoreString","classTypePrefix","get_typeString","_dec13","_class24","_class25","_DPointerTargetable6","_super13","_this17","_len14","_key14","classifiers","subpackages","uri","prefix","fatherType","dmodel","defaultname","callback","LPackage","_dec14","_class26","_class27","_LNamedElement3","_super14","_this18","_len15","_key15","classes","enums","enumerators","allSubPackages","allSubEnums","allSubClasses","operations","parameters","exceptions","attributes","references","literals","generateEcoreJson_impltemplate","classarr","enumarr","e","prototype","xmiversion","xmlnsxmi","xmlnsxsi","xmlnsecore","namee","nsURI","nsPrefix","eClassifiers","get_addPackage","log","isInterface","isAbstract","isPartial","partialDefaultName","get_addClass","addEnum","get_addEnum","get_addEnumerator","get_classes","setNameKeys","dclasses","dc","lclasses","i","get_enums","get_enumerators","denums","lenums","get_allSubClasses","s","arr","get_allSubPackages","_iterator","_createForOfIteratorHelper","_step","n","done","mergeNamedArray","err","f","get_allSubEnums","get_allSubEnumerators","_iterator2","_step2","tocheck","checked","newtocheck","_iterator3","_step3","dpackage","arrayMergeInPlace","darr","larr","fromArr","toNamedArray","_get","_getPrototypeOf","get_classifiers","pointer","set_classifiers","list","lItem","oldList","diff","arrayDifference","_iterator4","added","_step4","_i","_arr","removed","arrayRemoveAll","get_subpackages","set_subpackages","_iterator5","_step5","_i2","_arr2","get_uri","_context$proxyObject$","set_uri","pos","lastIndexOf","get_prefix","set_prefix","_dec15","_class28","_class29","_DPointerTargetable7","_super15","_this19","_len16","_key16","visibility","private","implementation","new2","setter","assign","LOperation","_dec16","_class30","_class31","_LTypedElement","_super16","_this20","_len17","_key17","signatureImplementation","eParameters","par","eType","eexceptions","get_addParameter","DParameter","execute","get_execute","_this21","func","eval","get_signatureImplementation","_len18","_key18","set_implementation","get_implementation","set_signatureImplementation","typedComments","typedcommentpre","typedcommentpost","replace","get_signature","get_exceptions","set_exceptions","get_parameters","set_parameters","_iterator6","_step6","_i3","_arr3","_mark","b","superchildren","override","_canOverride","_canPolymorph","_dec17","_class32","_class33","_DPointerTargetable8","_super17","_this22","_len19","_key19","getFirstPrimitiveTypes","LParameter","_dec18","_class34","_class35","_LTypedElement2","_super18","_this23","_len20","_key20","ClassReferences","features","referencedBy","extends","extendedBy","implements","implementedBy","_dec19","_class36","_class37","_DPointerTargetable9","_super19","_this24","_len21","_key21","abstract","interface","partial","partialdefaultname","window","LClass","_dec20","_class38","_class39","_LClassifier","_super20","_this25","_len22","_key22","__info_of__extends","extendsChain","superclasses","__info_of__superclasses","ownAttributes","ownReferences","ownOperations","ownChildren","inheritedAttributes","inheritedReferences","inheritedOperations","inheritedChildren","allAttributes","allReferences","allOperations","allChildren","__info_of__isSubclassOf","__info_of__isExtending","get_allChildren","get_ownAttributes","LAttribute","get_ownReferences","LReference","get_ownOperations","get_ownChildren","get_extendsChain","targets","alreadyParsed","nextTargets","_iterator7","_step7","_iterator8","_step8","Set","isSubClassOf","superClass","returnIfSameClass","isSuperClassOf","subClass","get_isSubClassOf","_this26","_iterator9","_step9","subclass","get_isSuperClassOf","get_inheritedAttributes","flatMap","get_inheritedReferences","get_inheritedOperations","get_inheritedChildren","get_allAttributes","get_allReferences","get_allOperations","featurearr","operationsarr","supertypesstr","_iterator10","_step10","att","_iterator11","_step11","ref","_iterator12","_step12","op","xsitype","toBoolString","instanceTypeName","eSuperTypes","superclass","eStructuralFeatures","eOperations","set_partial","get_partial","set_partialdefaultname","get_partialdefaultname","get_addAttribute","DAttribute","get_addReference","DReference","get_addOperation","get_abstract","set_abstract","get_interface","set_interface","get_instances","set_instances","get_operations","set_operations","_iterator13","_step13","_i4","_arr4","get_features","set_features","_iterator14","_step14","_i5","_arr5","get_references","set_references","_iterator15","_step15","_i6","_arr6","get_attributes","set_attributes","_iterator16","_step16","_i7","_arr7","get_referencedBy","set_referencedBy","get_extends","set_extends","add_extends","remove_extends","isArray","finalVal","elem","index","_iterator17","_step17","v","get_extendedBy","set_extendedBy","get_implements","set_implements","get_implementedBy","set_implementedBy","canExtend","output","reason","allTargetSuperClasses","get_canExtend","_this27","_canExtend","directly","isSubclassOf","get_isSubclassOf","plusThis","get_isExtending","_this28","get_superclasses","classe","visited","queue","_queue","_context$data$extende","ebyIDS","parsedSubclasses","stack","newstack","_iterator18","_step18","_iterator19","_step19","sid","sc","j","_loop","_loop2","superchild","setTimeout","_ret2","_ret","_isExtending","orEqual","add_Extends","force","out","unsetExtends","newextends","newextendedBy","instance","DDataType","_dec21","_class40","_class41","_DPointerTargetable10","_super21","_this29","_len23","_key23","serializable","LDataType","_dec22","_class42","_class43","_LClassifier2","_super22","_this30","_len24","_key24","get_serializable","set_serializable","DStructuralFeature","_dec23","_class44","_class45","_DPointerTargetable11","_super23","_this31","_len25","_key25","changeable","volatile","transient","unsettable","derived","LStructuralFeature","_dec24","_class46","_class47","_LTypedElement3","_super24","_this32","_len26","_key26","get_changeable","set_changeable","get_volatile","set_volatile","get_transient","set_transient","get_unsettable","set_unsettable","get_derived","set_derived","_dec25","_class48","_class49","_DPointerTargetable12","_super25","_this33","_len27","_key27","defaultValueLiteral","containment","container","resolveProxies","opposite","edges","_dec26","_class50","_class51","_LStructuralFeature","_super26","_this34","_len28","_key28","lowerbound","upperbound","_this35","dclass","get_containment","set_containment","get_container","set_container","get_resolveProxies","set_resolveProxies","get_opposite","set_opposite","get_defaultValue","get_edges","set_edges","has_opposite","oppositename","obsolete_attribute","_dec27","_class52","_class53","_DPointerTargetable13","_super27","_this36","_len29","_key29","isID","isIoT","_dec28","_class54","_class55","_LStructuralFeature2","_super28","_this37","_len30","_key30","_context$proxyObject$2","get_isID","set_isID","get_isIoT","set_isIoT","_iterator20","_step20","_dec29","_class56","_class57","_DPointerTargetable14","_super29","_this38","_len31","_key31","LEnumLiteral","_dec30","_class58","_class59","_LNamedElement4","_super30","_this39","_len32","_key32","generateEcoreJsonM1","get_generateEcoreJsonM1","impl_generateEcoreJsonM1","get_ordinal","get_value","set_ordinal","set_value","ordinalAssumedByPosition","ordinals","o","sameOrdinalLit","get_literal","set_literal","_dec31","_class60","_class61","_DPointerTargetable15","_super31","_this40","_len33","_key33","LEnumerator","_dec32","_class62","_class63","_LDataType","_super32","_this41","_len34","_key34","eLiterals","get_addLiteral","get_literals","set_literals","_iterator21","_step21","_i8","_arr8","get_ordinals","dliterals","currentOrdinal","DModelM1","_dec33","_class64","_DNamedElement","_super33","_this42","_len35","_key35","roots","LModelM1","_dec34","_class66","_LNamedElement5","_super34","_this43","_len36","_key36","_dec35","_class68","_class69","_DNamedElement2","_super35","_this44","_len37","_key37","objects","models","instanceof","instanceoff","dmodels","getAll","dmodelnames","EdgeStarter","_dec36","_class70","start","sn","en","_this$startSize","_this$startVertexSize","otherPossibleEnds","startNode","endNode","startVertex","endVertex","startSize","endSize","startVertexSize","endVertexSize","otherEnds","overlaps","vertexOverlaps","outerSize","vertex","isOverlapping","oneToMany","ends","rett","LModel","_dec37","_class72","_class73","_LNamedElement6","_super36","_this45","_len38","_key38","allSubAnnotations","allSubObjects","allSubValues","suggestedEdges","__info_of__suggestedEdges","otherObjects","otherInstances","__info_of__otherObjects","__info_of__otherInstances","__type_of__instancesOf","__info_of__addObject","__info_of__instantiableClasses","hidden","packageArr","_iterator22","_step22","pkg","ecoreEPackage","_iterator23","_step23","obj","ecoreRootName","_defaultGetter","ism1","ism","_defaultGetterM1","_defaultGetterM2","_iterator24","_step24","subelement","_iterator25","_step25","deepmatch","directSubObjects","objectFromArrayValues","_iterator26","get_allSubObjects","_step26","subobject","m2","get_instanceof","m2item","key1","get_instancesOf","m1","get_otherObjects","get_otherInstances","_this46","excludeInstances","includeSubclasses","otherObjectsTemp","dict","_objectSpread","_iterator27","otherObectsAccessedKeys","_step27","flat","_populateOtherObjects","dinstancetypes","namemap","reduce","acc","idtoname","allObjects","_iterator28","_step28","eDev","instancesOf","instancetypes0","_this47","w","instancetypes","namesORDObjectsToID","_iterator29","_step29","_dinstancetypes","_iterator30","_step30","LValue","singleton","instantiableClasses","loose","get_instantiableClasses","get_suggestedEdges","impl_get_suggestedEdgesM2","impl_get_suggestedEdgesM1","extend","reference","packageDependencies","lightMode","get_allSubValues","_iterator31","_step31","outer","lval","dval","_iterator32","_step32","inner","snode","ltarget","enode","r","_sn$component","_r$type","_r$type2","_r$type3","_r$type3$node","component","sh","eh","alreadyAdded","SkipExtendNodeHidden","rootCall","_iterator33","_step33","eid","secondTierExtends","es","dependencies","src","pkgdependencies","_iterator34","_step34","srcnode","_iterator35","_step35","ep","epnode","pd","get_models","set_models","_iterator36","_step36","_i10","_arr10","set_instanceof","get_isMetamodel","set_isMetamodel","get_objects","get_packages","set_packages","_iterator37","_step37","_i11","_arr11","get_roots","isRoot","pkgs","_iterator38","_step38","_iterator39","_step39","_iterator40","_step40","getClassByNameSpace","namespacedclass","get_getClassByNameSpace","_this48","pkguri","classname","get_getPackageByUri","getPackageByUri","get_values","namedCandidates","dnamedcandidates","dAllowedNamesMap","tmp","_iterator41","_step41","DFactory_useless_","_dec38","_class74","_class75","_DPointerTargetable16","_super37","_this49","_len39","_key40","ePackage","LFactory_useless_","_dec39","_class76","_class77","_LModelElement4","_super38","_this50","_len40","_key41","EJavaObject","_dec40","_class78","DMap","_dec41","_class79","_class80","_RuntimeAccessibleCla","_super39","_this51","__isDMap","LMap","_dec42","_class81","_class82","_LPointerTargetable2","_super40","_this52","_len41","_key42","__isLMap","_dec43","_class83","_class84","_DPointerTargetable17","_super41","_this53","_len42","_key43","meta","then","LObject","_dec44","_class85","_class86","_LNamedElement7","_super42","_this54","_len43","_key44","truechildren","deepSubObjects","subObjects","referenceFeatures","attributeFeatures","shapelessFeatures","_$name","get_truechildren","childs","isMirage","sort","conformchildren","_c$instanceof","_c$instanceof2","bymetaparent","_iterator42","_step42","vmeta","vmetaid","set_namespace","set_fullname","set_ecoreRootName","get_ecoreRootName","_context$proxyObject$3","targeting","pointedBy","_iterator43","getPathArr","_step43","get_subObjects","ref_features","get_referenceFeatures","shapeless_features","get_shapelessFeatures","vals","get_deepSubObjects","alreadyparsed","next","_iterator44","_step44","includeshapeless","get_attributeFeatures","get_isRoot","set_isRoot","feature","get_feature","lObject","_value$instanceof","matchedFeature","asEcoreRoot","lc","_iterator45","_step45","addValue","get_addValue","metaptr","_removeConformity","_forceConformity","forceConformity","oldinstanceof","lmeta","attrs","refs","idmap","_iterator46","_step46","_iterator47","_step47","_iterator48","_step48","valuesPre","toadd","_iterator49","_step49","ecorePointer","get_ecorePointer","_this55","lastvisited","_dec45","_class87","_class88","_DModelElement2","_super43","_this56","_len44","_key46","topic","_dec46","_class89","_class90","_LModelElement5","_super44","_this57","_len45","_key47","conformsTo","__info_of__add","__info_of__remove","__info_of__removeByIndex","typeStr","__info_of__typeStr","EString","__info_of__typeString","__defaultGetter","__defaultSetter","add","get_add","_this58","_len46","_key48","set_values","remove","get_remove","_this59","_len47","_key49","indices","get_removeByIndex","removeByIndex","_this60","_len48","_key50","indexMap","accumulator","currentValue","_this61","getInstantiableClasses","metaclass","_this62","lobj","isDValue","isDModel","dinstanceoff","isShapeless","isReference","isContainment","constructorPointers","lmetaclass","_c$proxyObject$model","_c$proxyObject$model$","m2classes","debugg","schema","this","matches","_matches$","_instanceoff$type","dobj","dobjkeys","keys","childnames","get_fromlfeature","iof","get_defaultderived","get_defaultunsettable","get_defaulttransient","get_isMirage","set_isMirage","get_typeStr","namedPointers","ecorePointers","shapeless","keepempties","withmetainfo","getValue","get_getValue","fitSize","maxlimit","solveLiterals","dmeta","typestr","times","numbermax","numbermin","round","rawValue","mapperfunc","numbercasting","_v$constructor","getTime","getFirstNumber","NaN","min","_ref2","_ref2$__raw","_ref2$__raw$values","forEach","struct","lenum","_lit","_lit2","Number","POSITIVE_INFINITY","lit","filterfunc","_l$father","_i12","_arr12","_i13","_arr13","_ref3","_ref3$__raw","_ref3$__raw$values","EByte","EShort","EInt","ELong","EFloat","EDouble","NEGATIVE_INFINITY","EDate","EChar","EBoolean","fromBoolString","EVoid","getValues","get_getValues","limit","valuesString","keepemptyquotes","valuestring","get_valuestring","_this63","valuestring_impl","get_valuesString","_this64","havestrings","havechars","havepointers","haveLelements","_i14","_arr14","vall","__isProxy","valstr","JSON","stringify","setValueAtPosition","info","_clearValueAtPosition","info0","skipSettingUndefined","oldVal","oldTarget","isPtr","get_setValueAtPosition","_this65","_val","_val2","success","lvale","lvalo","lvalmeta","oldContainer","oldContainerValue","valarr","_info$instanceof","metatype","Date","setMirage","modified","isRef","_iterator50","_step50","v0","_ret3","fromID","containerValue","oldContainerValues","va","oldv","_iterator51","_step51","the_loop","get_toString","_this66","_toString","rawValues","get_rawValues","get_topic","set_topic","eligibleClasses","favoriteMatch","_thiss$get_model$inst","scoreMap","_iterator52","_step52","raw","instantiable","fix$","k1","score","namesMap","objdiff","names","excessFeatures","missingFeatures","matchingFeatures","changed","unchanged","excessFeaturesCount","missingFeaturesCount","matchingFeaturesCount","sorted","favoriteMatchID"],"sources":["C:/d/Programming/web/jodel-mde/src/model/logicWrapper/LModelElement.tsx"],"sourcesContent":["import type {\r\n    LVoidVertex,\r\n    PackagePointers,\r\n    EdgePointers,\r\n    AnnotationPointers,\r\n    AttributePointers,\r\n    EnumPointers,\r\n    LiteralPointers,\r\n    OperationPointers,\r\n    ObjectPointers,\r\n    GraphPointers,\r\n    ParameterPointers,\r\n    ReferencePointers,\r\n    VertexPointers,\r\n    ModelPointers,\r\n    LtoD,\r\n} from \"../../joiner\";\r\nimport {\r\n    Abstract,\r\n    BEGIN,\r\n    ClassPointers,\r\n    Constructor,\r\n    Constructors,\r\n    Debug,\r\n    DEdge, DefaultNode,\r\n    Dictionary,\r\n    DocString,\r\n    DPointerTargetable,\r\n    DState,\r\n    DtoL,\r\n    END,\r\n    getWParams,\r\n    GObject,\r\n    GraphSize,\r\n    Instantiable,\r\n    Leaf,\r\n    LEdge,\r\n    LGraphElement,\r\n    Log,\r\n    LogicContext,\r\n    LPointerTargetable,\r\n    Node,\r\n    Pack,\r\n    Pack1,\r\n    PackArr,\r\n    PointedBy,\r\n    Pointer,\r\n    Pointers,\r\n    RuntimeAccessible,\r\n    RuntimeAccessibleClass,\r\n    Selectors,\r\n    SetFieldAction, SetRootFieldAction,\r\n    ShortAttribETypes,\r\n    ShortAttribSuperTypes,\r\n    store,\r\n    TargetableProxyHandler,\r\n    TRANSACTION,\r\n    U\r\n} from \"../../joiner\";\r\nimport type {Info, Json, ObjectWithoutPointers, orArr, PrimitiveType, unArr} from \"../../joiner/types\";\r\n\r\nimport {\r\n    AccessModifier,\r\n    ECoreAnnotation,\r\n    ECoreAttribute,\r\n    ECoreClass,\r\n    ECoreEnum,\r\n    EcoreLiteral,\r\n    ECoreOperation,\r\n    ECorePackage,\r\n    EcoreParser,\r\n    ECoreReference,\r\n    ECoreRoot\r\n} from \"../../api/data\";\r\nimport {ValuePointers} from \"./PointerDefinitions\";\r\nimport {ShortDefaultEClasses} from \"../../common/U\";\r\nimport {transientProperties} from \"../../joiner/classes\";\r\nimport {ReactNode} from \"react\";\r\n\r\n\r\n@Node\r\n@RuntimeAccessible('DModelElement')\r\nexport class DModelElement extends DPointerTargetable {\r\n    // static _super = DPointerTargetable;\r\n    // static logic: typeof LModelElement;\r\n    // static structure: typeof DModelElement;\r\n    // static singleton: LModelElement;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n\r\n    id!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    parent: Pointer<DModelElement, 0, 'N', LModelElement> = [];\r\n    father!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n\r\n    public static new(): DModelElement {\r\n        Log.exx(\"DModelElement is abstract, cannot instantiate\");\r\n        return null as any;\r\n        //return new Constructors(new DModelElement('dwc')).DPointerTargetable().DModelElement().end();\r\n    }\r\n    public static new3(...a:any): DModelElement {\r\n        Log.exx(\"DModelElement is abstract, cannot instantiate\");\r\n        return null as any; }\r\n}\r\n\r\n@Leaf\r\n@RuntimeAccessible('DAnnotationDetail')\r\nexport class DAnnotationDetail extends DPointerTargetable {\r\n    // todo\r\n}\r\n\r\n\r\n\r\n@Abstract\r\n@RuntimeAccessible('LModelElement')\r\nexport class LModelElement<Context extends LogicContext<DModelElement> = any, D extends DModelElement = DModelElement> extends LPointerTargetable {\r\n    // extends Mixin(DModelElement0, LPointerTargetable)\r\n    // static logic: typeof LModelElement;\r\n    // static structure: typeof DModelElement;\r\n    // static singleton: LModelElement;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    /*static ResolvePointer = resolvePointerFunction;\r\n    private static ResolvePointers? = resolvePointersFunction;\r\n    private resolvePointer<T extends DPointerTargetable = DPointerTargetable, LB extends number = 0, UB extends number = 0, RET extends LPointerTargetable = LPointerTargetable>(ptr: Pointer<T, LB, UB, RET>): RET | null {\r\n        return LModelElement.ResolvePointer(ptr); }\r\n    private resolvePointers<T extends DPointerTargetable = DPointerTargetable, LB extends number = 0, RET extends LPointerTargetable = LPointerTargetable>(ptr: Pointer<T, LB, 'N', RET>)\r\n        : (RET | null)[] { return resolvePointersFunction(ptr); }\r\n    */\r\n    public __raw!: DModelElement;\r\n    id!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    parent!: LModelElement[];\r\n    father!: LModelElement; // annotations can be children of everything. except them fathers are: Model, Package, Classifier(class+enum), Operation\r\n\r\n    private __info_of__father = {type: \"LModelElement\", txt:\"<a href=\\\"https://github.com/DamianoNaraku/jodel-react/wiki/LModelElement\\\"><span>The element containing this object.</span></a>\"};\r\n    public fatherList!: LModelElement[]; // chain of fathers going up recursively\r\n    annotations!: LAnnotation[];\r\n    children!: (LPackage | LClassifier | LTypedElement | LAnnotation | LObject | LValue)[];\r\n    __info_of_children__: Info = {type: \"LModelElement[]\", txt: <div>Merging of all the subelement collections (attributes, references, parameters...) except annotations</div>}\r\n    nodes!: LGraphElement[];\r\n    node!: LGraphElement | undefined;\r\n\r\n    // utilities to go up in the tree (singular names)\r\n    model!: LModel; // utility, follow father chain until get a Model parent or null\r\n    package!: LPackage | null;\r\n    class!: LClass | null;\r\n    enum!: LEnumerator | null;\r\n    operation!: LOperation | null;\r\n    subNodes!: LGraphElement[] | null;\r\n\r\n\r\n    property!: keyof DModelElement;\r\n    containers!: LNamedElement[]; // list of fathers until the model is reached.\r\n    name?:string;\r\n\r\n\r\n    [key: `@${string}`]: LModelElement;\r\n    [key: `$${string}`]: LModelElement;\r\n\r\n    // protected _defaultGetter(c: Context, k: keyof Context[\"data\"]): any {}\r\n\r\n    // this one must return true or the js engine throws an exception\r\n    protected _defaultSetter(val: any, c: GObject<Context>, k: any): true {\r\n        this._setterFor$stuff_canReturnFalse(val, c as any, k as any);\r\n        return true;\r\n    }\r\n    // this one must be able to return false because is called by DObject and DValue default setters and return type is checked\r\n    protected _setterFor$stuff_canReturnFalse(val: any, c: Context, k: keyof Context[\"data\"] & string): boolean {\r\n        if (![\"@\", \"$\"].includes(k[0])) return false;\r\n        let target: LPointerTargetable = (c.proxyObject as GObject)[k];\r\n        if (!target) return false;\r\n        let l;\r\n        let tClassName: string = target.className;\r\n\r\n        // messanger classNames (pass it to next sublevel)\r\n        navigationloop: while(true) {\r\n            switch (tClassName) {\r\n                default: break navigationloop;\r\n                case DPackage.cname:\r\n                case DClass.cname:\r\n                case DEnumerator.cname:\r\n                case DObject.cname:\r\n                    target = (target as LModelElement).children[0]; continue navigationloop;\r\n            }\r\n        }\r\n\r\n        // actiong classNames\r\n        switch (tClassName) {\r\n            default: Log.ex(\"default setter not supported for model element: \" + c.data.className, {c, k, val, target}); return false;\r\n            case DEnumLiteral.cname:\r\n                l = target as LEnumLiteral;\r\n                switch (typeof val){\r\n                    default: return false;\r\n                    case \"string\": l.literal = val; return true;\r\n                    case \"number\": l.ordinal = val; return true;\r\n                }\r\n                return false;\r\n            case DValue.cname:\r\n                // makes object.$x = 1      be equivalent to object.$x.value = 1 (or values if is arr)\r\n                l = target as LValue;\r\n                l.values = val;\r\n                return true;\r\n        }\r\n    }\r\n\r\n    public static M1Classes = ['DModel', 'DObject', 'DValue']; // Dstrudturalfeature in shapeless obj??\r\n    public static AbstractClasses = ['DModelElement', 'DNamedElement', '...'];\r\n    public static M2InstantiableClasses = ['DModel', 'DOperation', 'DClass', 'DReference', 'DAttribute'];\r\n    isM1!: (()=>boolean);\r\n    __info_of__isM1: Info = {type:'()=>boolean', txt:<div>Whether the element belong to the metamodel or the model.</div>}\r\n    get_isM1(c: Context): ()=>boolean {\r\n        // NB: if called with \"abstract classes\" like DModelElement, DTypedElement... responds they are in m2\r\n        return (() => (!(c.data as DModel).isMetamodel && LModelElement.M1Classes.includes(c.data.className)));\r\n    }\r\n    isM2!: (()=>boolean);\r\n    __info_of__isM2: Info = {type:'()=>boolean', txt:<div>Whether the element belong to the metamodel or the model.</div>}\r\n    get_isM2(c: Context): ()=>boolean { return (() => !(this.get_isM1(c))); }\r\n\r\n    isInstantiable!: (()=>boolean);\r\n    __info_of__isInstantiable: Info = {type:'()=>boolean', txt:<div>Whether the element can produce an instance in the model.</div>}\r\n    get_isInstantiable(c: Context): ()=>boolean { return (() => (LModelElement.M2InstantiableClasses.includes(c.data.className))); }\r\n\r\n    childNames!: string[];\r\n    __info_of__childNames: Info = {type: \"(json: object, instanceof?: LClass) => LObject\", txt: \"Array containing the names of all children subelements.\"};\r\n    get_childNames(c: Context): string[] { return this.get_children(c).map( (c: GObject<LModelElement>) => c.name).filter(c=>!!c) as string[]; }\r\n\r\n    public generateEcoreJson(loopDetectionloopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        throw new Error(\"cannot be called directly, should trigger getter. this is only for correct signature\");\r\n    }\r\n\r\n    private get_generateEcoreJson(context: Context): (loopdetectionobj: Dictionary<Pointer, DModelElement>) => Json {\r\n        return (loopdetectionobj) => this.generateEcoreJson_impl(context, loopdetectionobj);\r\n    }\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj?: Dictionary<Pointer, DModelElement>): Json {\r\n        return Log.exDevv(\"generateEcoreJson() should be overridden\", context);\r\n    }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall(((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate() class is abstract\");\r\n    }\r\n\r\n    public addAnnotation(source?: DAnnotation[\"source\"], details?: DAnnotation[\"details\"]): DAnnotation {\r\n        return this.cannotCall(\"addAnnotation\");\r\n    }\r\n\r\n    protected get_addAnnotation(context: Context): this[\"addAnnotation\"] {\r\n        return (source?: DAnnotation[\"source\"], details?: DAnnotation[\"details\"]) => DAnnotation.new(source, details, context.data.id, true);\r\n    }\r\n\r\n    protected set_containers(): boolean {\r\n        return this.cannotSet('containers');\r\n    }\r\n\r\n    protected get_containers(context: Context): LModelElement[\"containers\"] {\r\n        let thiss: LModelElement = context.proxyObject;\r\n        const ret: LModelElement[] = [thiss];\r\n        while (true) {\r\n            thiss = thiss.father;\r\n            if (!thiss) break;\r\n            ret.push(thiss);\r\n        }\r\n        return ret as LNamedElement[];\r\n    }\r\n\r\n\r\n    protected get_namespace(context: Context): string {\r\n        throw new Error(\"?? get namespace ?? todo\");\r\n        return \"\";\r\n    }\r\n\r\n    protected get_subNodes(context: LogicContext<LClass>, includingthis: boolean = false): LGraphElement[] {\r\n        const lclass: LClass = context.proxyObject as any;\r\n        let $class = $('[data-dataid=\"' + context.data.id + '\"]');\r\n        let $subnodes = $class.find('[data-nodeid]');\r\n\r\n        function mapfunc(this: HTMLElement) {\r\n            return this.dataset.nodeid;\r\n        }\r\n\r\n        let nodehtmlarr: HTMLElement[] = $subnodes.toArray();\r\n        if (includingthis) nodehtmlarr.push($class[0]);\r\n        let nodeidarr: string[] = nodehtmlarr.map((html: HTMLElement) => html.dataset.nodeid) as string[];\r\n        let state = store.getState();\r\n        let dnodes = nodeidarr.map(id => state.idlookup[id]).filter((d) => !!d);\r\n        return dnodes.map(d => LPointerTargetable.wrap(d)) as any;\r\n    }\r\n\r\n\r\n    // name -> redux (es. DClass -> classs)\r\n    protected get_property(context: Context): this[\"property\"] {\r\n        return (context.data.className.substring(1) + \"s\").toLowerCase() as any;\r\n    }\r\n\r\n    protected targetRemoved(context: Context, field: keyof DPointerTargetable): void {\r\n        context.proxyObject.delete();\r\n    }\r\n\r\n\r\n    protected get_fatherList(context: Context): LModelElement[] {\r\n        let ret: LModelElement[] = [context.proxyObject];\r\n        let loopdetection: Dictionary<Pointer, boolean> = {};\r\n        loopdetection[context.data.id] = true;\r\n        let current = this.get_father(context);\r\n        while (current) {\r\n            if (loopdetection[current.id]) { console.error(\"found loop\", {loopdetection, ret, current}); return ret; }\r\n            loopdetection[current.id] = true;\r\n            ret.push(current);\r\n            current = current.father;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    // @ts-ignore\r\n    private get_until_parent<D extends Constructor, L extends DtoL<InstanceType<D>>>(l: LModelElement, d: DModelElement, father: typeof D): L | null {\r\n        while (true) {\r\n            // console.log('get_until_parent', {l, d, father}, {dname: d.className, fname: father.name});\r\n            if (d.className === (father.cname || father.name)) return l as L;\r\n            l = l.father;\r\n            let oldd = d;\r\n            d = l?.__raw;\r\n            if (oldd === d || !l) return null; // reached end of father chain (a model) without finding the desired parent.\r\n        }\r\n    }\r\n\r\n    protected get_nodes(context: Context): this[\"nodes\"] {\r\n        return Object.values(transientProperties.modelElement[context.data.id]?.nodes || {});/*\r\n        const nodes: LGraphElement[] = [];\r\n        const nodeElements = $('[data-dataid=\"' + context.data.id + '\"]'); nope, this must become more efficient. when node is created set action to update data.nodes array? or to update a transient property (better)\r\n        for (let nodeElement of nodeElements) {\r\n            const nodeId = nodeElement.id;\r\n            if (nodeId) {\r\n                const lNode: LGraphElement | undefined = LPointerTargetable.wrap(nodeId);\r\n                if (lNode) nodes.push(lNode);\r\n            }\r\n        }\r\n        return nodes;*/\r\n    }\r\n\r\n    protected get_node(context: Context): this[\"node\"] {\r\n        return transientProperties.modelElement[context.data.id]?.node;\r\n        // const nodes = context.proxyObject.nodes;\r\n        // return nodes.filter( n => n.favoriteNode)[0] || nodes[0];\r\n    }\r\n\r\n    /*\r\n    protected get_nodes(context: Context): this[\"nodes\"] {\r\n        return context.data.nodes.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_nodes(val: PackArr<this[\"nodes\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'nodes', list);\r\n        return true;\r\n    }\r\n    */\r\n\r\n    protected get_model(context: Context): LModel {\r\n        return this.get_until_parent(context.proxyObject, context.data, DModel) as LModel;\r\n    }\r\n\r\n    protected get_package(context: Context): LPackage {\r\n        return this.get_until_parent(context.proxyObject, context.data, DPackage) as LPackage;\r\n    }\r\n\r\n    protected get_class(context: Context): LClass | null {\r\n        return this.get_until_parent(context.proxyObject, context.data, DClass);\r\n    } // todo: might be better for pergormance to erase this universal method and add implementations to every single L-class counting the correct amount of \"father\" navigations for each ( attrib to package? use attrib.father.father)\r\n    protected get_operation(context: Context): LOperation | null {\r\n        return this.get_until_parent(context.proxyObject, context.data, DOperation);\r\n    }\r\n\r\n    protected get_enum(context: Context): LEnumerator | null {\r\n        return this.get_until_parent(context.proxyObject, context.data, DEnumerator);\r\n    }\r\n\r\n    protected get_father(context: Context): LModelElement {\r\n        return LPointerTargetable.from(context.data.father);\r\n    }\r\n\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | DPackage | DClassifier | DEnumerator | DEnumLiteral | DParameter | DStructuralFeature | DOperation | DObject | DValue, 1, 'N'> { // LPackage | LClassifier | LTypedElement | LAnnotation | LEnumLiteral | LParameter | LStructuralFeature | LOperation\r\n        return context.data.annotations ? [...context.data.annotations] : [];\r\n    }\r\n\r\n    protected get_children(context: Context): this[\"children\"] {\r\n        // return this.get_children_idlist(context).map(e => LPointerTargetable.from(e));\r\n        return LPointerTargetable.from(this.get_children_idlist(context));\r\n    }\r\n\r\n    protected set_children(a: never, context: Context): boolean {\r\n        return Log.exx('children is a derived read-only collection', context.data);\r\n    }\r\n\r\n\r\n    add_parent(val: Pack<this[\"parent\"]>, logicContext: Context): boolean { // todo: when will be used?\r\n        const ptr = Pointers.from(val);\r\n        return SetFieldAction.new(logicContext.data, 'parent', ptr, '+=', true); // todo: need to update children of the old and new parents\r\n    }\r\n\r\n    protected remove_parent(logicContext: Context): boolean { // todo: perchè senza bersaglio? perchè sempre elimina tutti?\r\n        return SetFieldAction.new(logicContext.data, 'parent', [], '', true);\r\n    }\r\n\r\n    protected get_parent(context: Context): this[\"parent\"] {\r\n        return LPointerTargetable.from(context.data.id);\r\n    }\r\n\r\n    protected set_parent(val: Pack<LAnnotation>, context: Context): boolean { // val: Pack<DModelElement>\r\n        const ptrs = Pointers.from(val);\r\n        SetFieldAction.new(context.data, 'father', ptrs?.[0] || ptrs, '', true);\r\n        return SetFieldAction.new(context.data, 'parent', ptrs, '', true);\r\n    }\r\n\r\n    add_annotation(val: Pack<this[\"annotations\"]>, context: Context): boolean {\r\n        const ptrs = Pointers.from(val);\r\n        return SetFieldAction.new(context.data, 'annotations', ptrs, '+=', true);\r\n    }\r\n\r\n    remove_annotation(val: Pack<this[\"annotations\"]>, context: Context): boolean { // todo: when this will be ever used? this should be triggered by LObject but only get_ / set_ and delete of whole elements should be triggerable.\r\n        //todo: remove as any\r\n        const ptrs: Pointer<DAnnotation, 1, 'N', LAnnotation> = Pointers.from(val) as any;\r\n        let indexes = ptrs.map(ptr => context.data.annotations.indexOf(ptr)).filter(p => p >= 0);\r\n        return SetFieldAction.new(context.data, 'annotations', indexes, '-=', true);\r\n    }\r\n\r\n    protected get_annotations(context: Context): this[\"annotations\"] {\r\n        return LPointerTargetable.fromPointer(context.data.annotations);\r\n    }\r\n\r\n    protected set_annotations(val: Pack<LAnnotation>, context: Context): boolean {\r\n        //  if (!Array.isArray(val)) val = [val];\r\n        //         val = val.map( v => (v instanceof LAnnotation ? v.id : ( Pointers.filterValid(v) ? v : null ))) as Pointer<DAnnotation>[];\r\n        const ptrs = Pointers.from(val);\r\n        SetFieldAction.new(context.data, 'annotations', ptrs, '', true);\r\n        return true;\r\n    }\r\n\r\n    protected get_addChild(c: Context): (type?: string, ...params: any[]) => LModelElement { // just for add new, not for add pre-existing.\r\n        return (type, ...args: any) => {\r\n            let ret: undefined | ((...params: any[]) => LModelElement);\r\n            if (!type || type === \"auto\") {\r\n                switch(c.data.className){\r\n                    case DModel.cname: if ((c.data as DModel).isMetamodel) type = \"package\"; else type = \"object\"; break;\r\n                    case DObject.cname: type = \"value\"; break;\r\n                    case DPackage.cname: type = \"package\"; break;\r\n                    case DClass.cname: type = \"attribute\"; break;\r\n                    case DEnumerator.cname: type = \"literal\"; break;\r\n                    case DOperation.cname: type = \"parameter\"; break;\r\n                    default: type = \"annotation\"; break;\r\n                }\r\n            }\r\n            let fatherElement;\r\n            switch (type.toLowerCase()) {\r\n                default:\r\n                    Log.ee('cannot find children type requested to add:', {type: (type || '').toLowerCase(), c});\r\n                    ret = () => undefined as any;\r\n                    break;\r\n                case \"package\":\r\n                    ret = (this.get_package(c) || this.get_model(c))?.addPackage;\r\n                    break;\r\n                case \"class\":\r\n                    // let current = c.proxyObject;\r\n                    fatherElement = this.get_package(c);\r\n                    if (!fatherElement) {\r\n                        let model = this.get_model(c);\r\n                        fatherElement = model.packages[0];\r\n                        if (!fatherElement) fatherElement = model.addPackage();\r\n                    }\r\n                    ret = fatherElement.addClass;\r\n                    //ret = (this as any).get_addClass(context as any);\r\n                    break;\r\n                case \"enum\":\r\n                case \"enumerator\":\r\n                    fatherElement = this.get_package(c);\r\n                    if (!fatherElement) {\r\n                        let model = this.get_model(c);\r\n                        fatherElement = model.packages[0];\r\n                        if (!fatherElement) fatherElement = model.addPackage();\r\n                    }\r\n                    ret = fatherElement.addEnumerator;\r\n                    break;\r\n                case \"attribute\":\r\n                    ret = this.get_class(c)?.addAttribute;\r\n                    break;\r\n                case \"reference\":\r\n                    ret = this.get_class(c)?.addReference;\r\n                    break;\r\n                case \"literal\":\r\n                    ret = this.get_enum(c)?.addLiteral;\r\n                    break;\r\n                case \"operation\":\r\n                    ret = this.get_class(c)?.addOperation;\r\n                    break;\r\n                case \"parameter\":\r\n                    ret = this.get_operation(c)?.addParameter;\r\n                    break;\r\n                case \"object\":\r\n                    if (c.data.className === \"DValue\") {\r\n                        ret = (this as any as LValue).get_addObject(c as any as LogicContext<DValue>);\r\n                    }\r\n                    else {\r\n                        ret = this.get_model(c).addObject;\r\n                    }\r\n\r\n                //case \"exception\": ret = ((exception: Pack1<LClassifier>) => { let rett = this.get_addException(context as any); rett(exception); }) as any; break;\r\n                /*case \"exception\": exceptions should not be \"added\" here, this is for creating objects. exceptions are not created but just linked. they are classes.\r\n                    ret = (this as any).get_addException(c as any);\r\n                    break; */\r\n            }\r\n            return ret ? ret(...args) : null as any;\r\n        }\r\n    }\r\n\r\n    protected get_addException(context: Context): () => void {\r\n        let ret = () => {\r\n        };\r\n        const dOperation: DOperation | null = (context.data?.className === \"DOperation\") ? context.data as DOperation : null;\r\n        if (dOperation) {\r\n            const dClass = DPointerTargetable.from(dOperation.father);\r\n            ret = () => {\r\n                SetFieldAction.new(dOperation, \"exceptions\", dClass.id, '+=', true);\r\n            }\r\n        }\r\n        ret();\r\n        return ret;\r\n    }\r\n\r\n    // activated by user in JSX\r\n    // todo: this.wrongAccessMessage(\"addClass\");\r\n    protected cannotCall(name: string, ...params: string[]): any {\r\n        Log.exDevv(name + ' should never be called directly, but should trigger get_' + name + '(' + params.join(', ') + '), this is only a signature for type checking.');\r\n    }\r\n\r\n    public addClass(): void {\r\n        this.cannotCall('addClass');\r\n    }\r\n\r\n    public addAttribute(): void {\r\n        this.cannotCall('addAttribute');\r\n    }\r\n\r\n    public addReference(): void {\r\n        this.cannotCall('addReference');\r\n    }\r\n\r\n    public addEnumerator(): void {\r\n        this.cannotCall('addEnumerator');\r\n    }\r\n\r\n    public addParameter(): void {\r\n        this.cannotCall('addParameter');\r\n    }\r\n\r\n    // chiedere al prof: cosa può lanciato come eccezione: se tutte le classi o se solo quelle che estendono Exception\r\n    public addException(exception?: DClassifier): () => void {\r\n        throw this.wrongAccessMessage(\"AddException\");\r\n    }\r\n\r\n    public addChild(type: string): DModelElement {\r\n        return this.cannotCall('addChild', type);\r\n    }\r\n\r\n}\r\n\r\n/*function isValidPointer<T extends DPointerTargetable = DModelElement, LB extends number = 0, UB extends number = 1, RET extends LPointerTargetable = LModelElement>\r\n(p: Pointer<T, LB, UB, RET>, constraintType?: typeof DPointerTargetable): boolean {\r\n    const pointerval: RET | null = LModelElement.ResolvePointer(p);\r\n    if (!pointerval) return false;\r\n    if (!constraintType) return true;\r\n    return (pointerval instanceof constraintType); }*/\r\n\r\n/* todo:\r\nnel proxy aggiungi regola di default, se prendi qualcosa che inizia con \"set_X\" esplicitamente (dovrebbe farlo solo il dev)\r\nrichiama _set_X(context, ...params)     <---- nuova funzione set di default, anche this.x = x richiama _set_x\r\n\r\nil dev specifica set_x come public di sola firma senza implementazione (throw exception) e senza context\r\nil dev specifica _set_x come implementazione private\r\n\r\nper la get esiste solo _get_x, non \"get_x\"\r\n\r\n todo2: aggiungi readonly a tutti i campi L per non sbagliarsi e fare in modo che il dev usi sempre i \"set_\" che sono correttamente tipizzati\r\n*\r\n* */\r\n\r\n/*todo:\r\n* for every feature X: typed L, in CLASS_L0 with a side effects when they are edited (like need to update other data for consistency)\r\n*\r\n* dev will use this\r\n* protected set_X(val: D | L | Pointer<D> ) { throw new Error(\"set_X should never be executed, the proxy should redirect to get_set_X.\"); }\r\n* protected get_set_X( val: D | L | Pointer<D>, otherparams, ContextD>) { throw new Error(\"set_X should never be executed, the proxy should redirect to get_set_X.\"); }\r\n*\r\n*\r\n* */\r\n// export type WModelElement = DModelElement | LModelElement | _WModelElement;\r\nRuntimeAccessibleClass.set_extend(DPointerTargetable, DModelElement);\r\nRuntimeAccessibleClass.set_extend(DPointerTargetable, LModelElement);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DAnnotation')\r\nexport class DAnnotation extends DModelElement { // extends Mixin(DAnnotation0, DModelElement)\r\n    // static singleton: LAnnotation;\r\n    // static logic: typeof LAnnotation;\r\n    // static structure: typeof DAnnotation;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // inherit redefine\r\n    id!: Pointer<DAnnotation, 1, 1, LAnnotation>;\r\n    parent: Pointer<DModelElement, 0, 'N', LModelElement> = [];\r\n    father!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    // personal\r\n    source!: string;\r\n    details!: DAnnotationDetail[];//Dictionary<string, string>;\r\n\r\n    public static new(source?: DAnnotation[\"source\"], details?: DAnnotation[\"details\"], father?: Pointer, persist: boolean = true): DAnnotation {\r\n        // if (!name) name = this.defaultname(\"annotation \", father);\r\n        return new Constructors(new DAnnotation('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DAnnotation(source, details).end();\r\n    }\r\n}\r\n\r\n@Node\r\n@RuntimeAccessible('LAnnotation')\r\nexport class LAnnotation<Context extends LogicContext<DAnnotation> = any, D extends DAnnotation = DAnnotation> extends LModelElement {\r\n    // Mixin(DAnnotation0, LModelElement)\r\n    // @ts-ignore\r\n    __namee!: \"LAnnotation\" = \"LAnnotation\";\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DAnnotation;\r\n    id!: Pointer<DAnnotation, 1, 1, LAnnotation>;\r\n    // static singleton: LAnnotation;\r\n    // static logic: typeof LAnnotation;\r\n    // static structure: typeof DAnnotation;\r\n\r\n    // inherit redefine\r\n    parent!: LModelElement[];\r\n    father!: LModelElement;\r\n    annotations!: LAnnotation[];\r\n    // personal\r\n    source!: string;\r\n    details!: LAnnotationDetail[];// Dictionary<string, string> = {};\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: Json = {};\r\n        EcoreParser.write(json, ECoreAnnotation.source, context.data.source);\r\n        // EcoreParser.write(json, ECoreAnnotation.references, context.proxyObject.referencesStr);\r\n        EcoreParser.write(json, ECoreAnnotation.details, context.proxyObject.details.map(d => d.generateEcoreJson(loopDetectionObj)));\r\n        return json;\r\n    }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall(((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\");\r\n    }\r\n\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => this) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let de = context.proxyObject.father.addAnnotation(context.data.source, (deep ? context.proxyObject.details.map(ldet => ldet.duplicate().__raw) : context.data.details));\r\n            let le: this = LPointerTargetable.fromD(de);\r\n            let we: WAnnotation = le as any;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            END()\r\n            return le;\r\n        }\r\n    }\r\n\r\n    protected get_source(context: Context): this[\"source\"] {\r\n        return context.data.source;\r\n    }\r\n\r\n    protected set_source(val: this[\"source\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'source', val, '', false);\r\n        return true;\r\n    }\r\n\r\n    protected get_details(context: Context): this[\"details\"] {\r\n        return TargetableProxyHandler.wrapAll(context.data.details);\r\n    }\r\n\r\n    protected set_details(val: this[\"details\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'details', val);\r\n        return true;\r\n    }\r\n}\r\n\r\nRuntimeAccessibleClass.set_extend(DModelElement, DAnnotation);\r\nRuntimeAccessibleClass.set_extend(LModelElement, LAnnotation);\r\n@Leaf\r\n@RuntimeAccessible('LAnnotationDetail')\r\nexport class LAnnotationDetail<Context extends LogicContext<DAnnotationDetail> = any> extends LModelElement { // todo\r\n    father!: LAnnotation;\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        // loopDetectionObj[context.data.id] = context.data;\r\n        const json: Json = {};\r\n        // if (context.data.name !== null) EcoreParser.write(json, ECoreDetail.key, context.data.name);\r\n        // if (context.data.value !== null) EcoreParser.write(json, ECoreDetail.value, context.data.value);\r\n        return json;\r\n    }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall(((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\");\r\n    }\r\n\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => this) {\r\n        Log.exDevv(\"LAnnotationDetail.getDuplicate(): todo\");\r\n        return () => this;\r\n        // return (deep: boolean = false) => (context.proxyObject as LAnnotationDetail).father.addAnnotationDetail( {...context.data._subMaps})\r\n    }\r\n}\r\n\r\nRuntimeAccessibleClass.set_extend(DModelElement, DAnnotationDetail);\r\nRuntimeAccessibleClass.set_extend(LModelElement, LAnnotationDetail);\r\n@Node\r\n@RuntimeAccessible('DNamedElement')\r\nexport class DNamedElement extends DPointerTargetable { // Mixin(DNamedElement0, DAnnotation)\r\n    // static _super = DAnnotation;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LNamedElement;\r\n    // static logic: typeof LNamedElement;\r\n    // static structure: typeof DNamedElement;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DNamedElement, 1, 1, LNamedElement>;\r\n    parent: Pointer<DModelElement, 0, 'N', LModelElement> = [];\r\n    father!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    // personal\r\n    name!: string;\r\n\r\n    public static new(name?: DNamedElement[\"name\"]): DNamedElement {\r\n        Log.exx(\"DNamedElement is abstract, cannot instantiate\");\r\n        return null as any;\r\n        // return new Constructors(new DNamedElement('dwc')).DPointerTargetable().DModelElement().DNamedElement(name).end();\r\n    }\r\n\r\n}\r\n\r\n@Abstract\r\n@RuntimeAccessible('LNamedElement')\r\nexport class LNamedElement<Context extends LogicContext<DNamedElement> = any> extends LModelElement { // Mixin(DNamedElement0, DAnnotation)\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // public __raw!: DNamedElement;\r\n    id!: Pointer<DNamedElement, 1, 1, LNamedElement>;\r\n    // static singleton: LNamedElement;\r\n    // static logic: typeof LNamedElement;\r\n    // static structure: typeof DNamedElement;\r\n\r\n    // inherit redefine\r\n    parent!: LModelElement[];\r\n    father!: LModelElement;\r\n    annotations!: LAnnotation[];\r\n    // personal\r\n    name!: string;\r\n    namespace!: string;\r\n    fullname!: string;\r\n\r\n    protected set_containers(): boolean {\r\n        return this.cannotSet('containers');\r\n    }\r\n\r\n    protected get_containers(context: Context): LNamedElement[\"containers\"] {\r\n        let thiss: LNamedElement = context.proxyObject;\r\n        const ret: LNamedElement[] = [thiss];\r\n        while (true) {\r\n            thiss = thiss.father as LNamedElement;\r\n            if (!thiss) break;\r\n            ret.push(thiss);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    // protected get_namespace(context: Context): string { throw new Error(\"?? get namespace ?? todo\"); return \"\"; }\r\n\r\n    protected get_fullname(context: Context): this[\"fullname\"] {\r\n        const containers = this.get_containers(context);\r\n        let fullname: string = containers.reverse().slice(1, containers.length).map(c => c.name).join('.');\r\n        return fullname;\r\n    }\r\n\r\n\r\n    protected get_name(context: Context): this[\"name\"] {\r\n        return context.data.name;\r\n    }\r\n\r\n    protected set_name(val: this[\"name\"], context: Context): boolean {\r\n        let name = val;\r\n        const father = context.proxyObject.father;\r\n        if (father) {\r\n            const check = father.children.filter((child) => {\r\n                return (DNamedElement.fromPointer(child.id) as DNamedElement).name === name\r\n            });\r\n            if (check.length > 0) {\r\n                U.alert('error', 'Cannot rename the selected element since this name is already taken.');\r\n                return true\r\n            }\r\n        }\r\n        SetFieldAction.new(context.data, 'name', name, '', false);\r\n        return true;\r\n\r\n        /*\r\n        // this autofix removes spaces with _\r\n        if (val.match(/\\s/)) val = this._autofix_name(val, context);\r\n        // todo: validate if operation can be completed or need autocorrection, then either return false (invalid parameter cannot complete) or send newVal at redux\r\n        const fixedVal: string = val;\r\n        SetFieldAction.new(context.data, 'name', fixedVal, '', false);\r\n        return true;\r\n        */\r\n    }\r\n\r\n    protected _autofix_name(val: string, context: Context): string {\r\n        // NB: NON fare autofix di univocità nome tra i children o qualsiasi cosa dipendente dal contesto, questo potrebbe essere valido in alcuni modelli e invalido in altri e modificare un oggetto condiviso.\r\n        return val.replaceAll(/\\s/g, '_');\r\n    }\r\n\r\n    protected get_autofix_name(val: string, context: Context): (val: string) => string {\r\n        return (val: string) => this._autofix_name(val, context);\r\n    }\r\n\r\n    public autofix_name(val: string): string {\r\n        return this.wrongAccessMessage(\"autofix_name\");\r\n    }\r\n}\r\n\r\n\r\n// export type WNamedElement = DNamedElement | LNamedElement | _WNamedElement;\r\nRuntimeAccessibleClass.set_extend(DModelElement, DNamedElement);\r\nRuntimeAccessibleClass.set_extend(LModelElement, LNamedElement);\r\n@RuntimeAccessible('DTypedElement')\r\nexport class DTypedElement extends DPointerTargetable { // Mixin(DTypedElement0, DNamedElement)\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LTypedElement;\r\n    // static logic: typeof LTypedElement;\r\n    // static structure: typeof DTypedElement;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DTypedElement, 1, 1, LTypedElement>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    parent: Pointer<DModelElement, 0, 'N', LModelElement> = [];\r\n    father!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    name!: string;\r\n    instances!: Pointer<DValue, 0, 'N', LValue>;\r\n    // personal\r\n    type!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean; // ?\r\n    required!: boolean; // ?\r\n\r\n\r\n    public static new(name?: DNamedElement[\"name\"], type?: DTypedElement[\"type\"], father?: Pointer, persist: boolean = true): DTypedElement {\r\n        Log.exx(\"DTypedElement is abstract, cannot instantiate\");\r\n        return null as any;\r\n        //return new Constructors(new DTypedElement('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).end();\r\n    }\r\n}\r\n\r\n@Abstract\r\n@RuntimeAccessible('LTypedElement')\r\nexport class LTypedElement<Context extends LogicContext<DTypedElement> = any> extends LNamedElement { // extends Mixin(DTypedElement0, LNamedElement)\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DTypedElement;\r\n    id!: Pointer<DTypedElement, 1, 1, LTypedElement>;\r\n    // static singleton: LTypedElement;\r\n    // static logic: typeof LTypedElement;\r\n    // static structure: typeof DTypedElement;\r\n\r\n    // inherit redefine\r\n    parent!: LModelElement[];\r\n    father!: LModelElement;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    instances!: LValue[];\r\n    // personal\r\n    type!: LClassifier;\r\n\r\n    primitiveType?: LClass;\r\n    classType?: LClass;\r\n    enumType?: LEnumerator;\r\n\r\n    ordered!: boolean;\r\n    unique!: boolean;\r\n    lowerBound!: number;\r\n    upperBound!: number;\r\n    many!: boolean;\r\n    required!: boolean;\r\n\r\n\r\n    protected get_classType(context: Context): this[\"classType\"] {\r\n        let type = this.get_type(context);\r\n        return type.isClass ? type as LClass : undefined;\r\n    }\r\n\r\n    protected get_enumType(context: Context): this[\"enumType\"] {\r\n        let type = this.get_type(context);\r\n        return type.isEnum ? type as LEnumerator : undefined;\r\n    }\r\n\r\n    protected get_primitiveType(context: Context): this[\"primitiveType\"] {\r\n        let type = this.get_type(context);\r\n        return type.isPrimitive ? type as LClass : undefined;\r\n    }\r\n\r\n    protected get_type(context: Context): this[\"type\"] {\r\n        return LPointerTargetable.from(context.data.type);\r\n    }\r\n\r\n    protected set_type(val: Pack1<this[\"type\"]>, context: Context): boolean {\r\n        const data = context.data;\r\n        let instances: LValue[] = context.proxyObject.instances;\r\n        SetFieldAction.new(context.data, 'type', Pointers.from(val), \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_ordered(context: Context): this[\"ordered\"] {\r\n        return context.data.ordered;\r\n    }\r\n\r\n    protected set_ordered(val: this[\"ordered\"], logicContext: Context): boolean {\r\n        return SetFieldAction.new(logicContext.data, 'ordered', val);\r\n    }\r\n\r\n    protected get_unique(context: Context): this[\"unique\"] {\r\n        return context.data.unique;\r\n    }\r\n\r\n    protected set_unique(val: this[\"unique\"], logicContext: Context): boolean {\r\n        return SetFieldAction.new(logicContext.data, 'unique', val);\r\n    }\r\n\r\n    protected get_lowerBound(context: Context): this[\"lowerBound\"] {\r\n        return context.data.lowerBound;\r\n    }\r\n\r\n    protected set_lowerBound(val: this[\"lowerBound\"], context: Context): boolean {\r\n        val = +val;\r\n        if (isNaN(val)) val = 0;\r\n        else val = Math.max(0, val);\r\n        SetFieldAction.new(context.data, 'lowerBound', val);\r\n        if (context.data.upperBound !=-1 && val > context.data.upperBound) SetFieldAction.new(context.data, 'upperBound', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_upperBound(context: Context): this[\"upperBound\"] {\r\n        return context.data.upperBound;\r\n    }\r\n\r\n    protected set_upperBound(val: this[\"upperBound\"], context: Context): boolean {\r\n        val = +val;\r\n        if (isNaN(val)) val = -1;\r\n        else val = Math.max(-1, val);\r\n        SetFieldAction.new(context.data, 'upperBound', val);\r\n        if (val !== -1 && val < context.data.lowerBound) SetFieldAction.new(context.data, 'lowerBound', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_many(context: Context): this[\"many\"] {\r\n        return context.data.many;\r\n    }\r\n\r\n    protected set_many(val: this[\"many\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'many', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_required(context: Context): this[\"required\"] {\r\n        return context.data.required;\r\n    }\r\n\r\n    protected set_required(val: this[\"required\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'required', val);\r\n        return true;\r\n    }\r\n\r\n    public typeToEcoreString(): string {\r\n        return this.cannotCall(\"typeToEcoreString\");\r\n    }\r\n\r\n    protected get_typeToEcoreString(context: Context): () => string {\r\n        // if (context.data.classType) return EcoreParser.classTypePrefix + context.proxyObject.classType.name;\r\n        // if (context.data.enumType) return EcoreParser.classTypePrefix + context.proxyObject.enumType.name;\r\n        // if (context.data.primitiveType) return context.proxyObject.primitiveType.long;\r\n        return () => context.proxyObject.type.typeEcoreString;\r\n    }\r\n\r\n    public typeToShortString(): string {\r\n        return this.cannotCall(\"typeToShortString\");\r\n    }\r\n\r\n    protected get_typeToShortString(context: Context): () => string {\r\n        // if (context.data.classType) return '' + context.data.classType.name;\r\n        // if (context.data.enumType) return '' + context.data.enumType.name;\r\n        // if (context.data.primitiveType) return '' + context.data.primitiveType.getName();\r\n        return () => context.proxyObject.type.typeString;\r\n    }\r\n\r\n    canOverride(context: Context, other: LTypedElement): boolean {\r\n        // i primitivi identici sono compatibili\r\n        if (context.data.type === other.type.id) return true;\r\n        let t1 = context.proxyObject.type;\r\n        let t2 = other.type;\r\n        // se entrambi primitivi\r\n        if (context.proxyObject.primitiveType && other.primitiveType) {\r\n            ShortAttribSuperTypes[t1.name as ShortAttribETypes].includes(other.name as ShortAttribETypes);\r\n        }\r\n        if (context.proxyObject.enumType) return t1 === t2; // only if they are same enumerator\r\n        // now assumed to be class type\r\n        if (other.classType === other.classType) return true;\r\n        return (context.proxyObject.classType as LClass).isExtending(other.classType as LClass);\r\n    }\r\n\r\n}\r\n\r\n// @RuntimeAccessible('') export class _WTypedElement extends _WNamedElement { }\r\n// export type WTypedElement = DTypedElement | LTypedElement | _WTypedElement;\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DTypedElement);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LTypedElement);\r\n@RuntimeAccessible('DClassifier')\r\nexport class DClassifier extends DPointerTargetable { // extends DNamedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LClassifier;\r\n    // static logic: typeof LClassifier;\r\n    // static structure: typeof DClassifier;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    parent: Pointer<DPackage, 0, 'N', LPackage> = [];\r\n    father!: Pointer<DPackage, 1, 1, LPackage>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    // personal\r\n    instanceClassName!: string;\r\n    // instanceClass: EJavaClass // ?\r\n    defaultValue!: Pointer<DObject, 1, 1, LObject>[] | string[];\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n\r\n    public static new(name?: DNamedElement[\"name\"], father?: Pointer, persist: boolean = true): DClassifier {\r\n        Log.exx(\"DClassifier is abstract, cannot instantiate\");\r\n        return null as any;\r\n        // return new Constructors(new DClassifier('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DClassifier().end();\r\n    }\r\n}\r\n\r\n@Abstract\r\n@RuntimeAccessible('LClassifier')\r\nexport class LClassifier<Context extends LogicContext<DClassifier> = any> extends LNamedElement { // extends DNamedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DClassifier;\r\n    id!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    // static singleton: LClassifier;\r\n    // static logic: typeof LClassifier;\r\n    // static structure: typeof DClassifier;\r\n\r\n    // inherit redefine\r\n    parent!: LPackage[];\r\n    father!: LPackage;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    // personal\r\n    instanceClassName!: string;\r\n    // instanceClass: EJavaClass // ?\r\n    defaultValue!: LObject[] | string[];\r\n    isPrimitive!: boolean;\r\n    isClass!: boolean;\r\n    isEnum!: boolean;\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n\r\n    protected get_instanceClassName(context: Context): this[\"instanceClassName\"] {\r\n        return context.data.instanceClassName;\r\n    }\r\n\r\n    protected set_instanceClassName(val: this[\"instanceClassName\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'instanceClassName', val, \"\", false);\r\n        return true;\r\n    }\r\n\r\n    protected set_isPrimitive(val: this[\"isPrimitive\"], context: Context): boolean {\r\n        return this.cannotSet(\"isPrimitive\");\r\n    }\r\n\r\n    protected set_isClass(val: this[\"isClass\"], context: Context): boolean {\r\n        return this.cannotSet(\"isClass\");\r\n    }\r\n\r\n    protected set_isEnum(val: this[\"isEnum\"], context: Context): boolean {\r\n        return this.cannotSet(\"isEnum\");\r\n    }\r\n\r\n    protected get_isPrimitive(context: Context): this[\"isPrimitive\"] {\r\n        return !!((context.data as DClass).isPrimitive as unknown);\r\n    }\r\n\r\n    protected get_isClass(context: Context): this[\"isClass\"] {\r\n        return (context.data as DClass).isPrimitive ? false : context.data.className === DClass.cname;\r\n    }\r\n\r\n    protected get_isEnum(context: Context): this[\"isEnum\"] {\r\n        return context.data.className === DEnumerator.cname;\r\n    }\r\n\r\n    protected set_defaultValue(val: this[\"defaultValue\"] | DClassifier[\"defaultValue\"], context: Context): boolean {\r\n        if (typeof val !== \"object\" && !Pointers.isPointer(val)) {\r\n            // primitive default value for enums\r\n            SetFieldAction.new(context.data, 'defaultValue', val, \"\", false);\r\n        } else {\r\n            SetFieldAction.new(context.data, 'defaultValue', Pointers.from(val as Pointer[]) || [], \"\", true);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    typeEcoreString!: string;\r\n    typeString!: string;\r\n\r\n    private get_typeEcoreString(context: Context) {\r\n        return EcoreParser.classTypePrefix + context.data.name;\r\n    }\r\n\r\n    private get_typeString(context: Context) {\r\n        return context.data.name;\r\n    }\r\n}\r\n\r\n// @RuntimeAccessible('') export class _WClassifier extends _WNamedElement { }\r\n// export type WClassifier = DClassifier | LClassifier | _WClassifier;\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DClassifier);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LClassifier);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DPackage')\r\nexport class DPackage extends DPointerTargetable { // extends DNamedElement\r\n    // static _super = DNamedElement;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LPackage;\r\n    // static logic: typeof LPackage;\r\n    // static structure: typeof DPackage;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DPackage, 1, 1, LPackage>;\r\n    parent: Pointer<DPackage | DModel, 0, 'N', LPackage | LModel> = [];\r\n    father!: Pointer<DPackage | DModel, 1, 1, LPackage | LModel>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    // personal\r\n    classifiers: Pointer<DClassifier, 0, 'N', LClassifier> = [];\r\n    subpackages: Pointer<DPackage, 0, 'N', LPackage> = [];\r\n    uri!: string;\r\n    prefix!: string;\r\n\r\n    public static new(name?: DNamedElement[\"name\"], uri?: DPackage[\"uri\"], prefix?: DPackage[\"prefix\"], father?: Pointer, persist: boolean = true, fatherType?: Constructor): DPackage {\r\n        let dmodel: DModel | undefined;\r\n        if (!name) {\r\n            dmodel = father && DPointerTargetable.from(father);\r\n            name = this.defaultname(\"pkg_\", dmodel);\r\n        }\r\n        /*if (!uri) {\r\n            dmodel = dmodel || father && DPointerTargetable.from(father);\r\n            uri = ('org.jodel-react.') + (dmodel?.name || \"username\"); // (DPointerTargetable.from(DUser.current)).name) todo: when DUser is done\r\n        }*/\r\n        return new Constructors(new DPackage('dwc'), father, persist, fatherType).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DPackage(uri, prefix).end();\r\n    }/*\r\n    static new15(setter: (d: DPackage) => void, father: DPackage[\"father\"], fatherType: Constructor, name?: string): DPackage {\r\n        if (!name) name = this.defaultname(\"pkg_\", father);\r\n        return new Constructors(new DPackage('dwc'), father, true, fatherType).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DPackage().end(setter);\r\n    }\r\n    static new2(setter: Partial<ObjectWithoutPointers<DPackage>>, fatherType: Constructor, persist: boolean = true): DPackage {\r\n        if (!name) name = this.defaultname(\"pkg_\", father);\r\n        return new Constructors(new DPackage('dwc'), father, true, fatherType).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DPackage().end((d)=> { Object.assign(d, setter); });\r\n    }*/\r\n    static new3(a: Partial<PackagePointers>, callback: undefined | ((d: DPackage, c: Constructors) => void), fatherType: Constructor, persist: boolean = true): DPackage {\r\n        if (!a.name) a.name = this.defaultname(\"pkg_\", a.father);\r\n        return new Constructors(new DPackage('dwc'), a.father, persist, fatherType, a.id).DPointerTargetable().DModelElement()\r\n            .DNamedElement(a.name).DPackage().end(callback);\r\n    }\r\n}\r\n\r\n@Leaf\r\n@RuntimeAccessible('LPackage')\r\nexport class LPackage<Context extends LogicContext<DPackage> = any, C extends Context = Context, D extends DPackage = DPackage> extends LNamedElement { // extends DNamedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DPackage;\r\n    id!: Pointer<DPackage, 1, 1, LPackage>;\r\n    // static singleton: LPackage;\r\n    // static logic: typeof LPackage;\r\n    // static structure: typeof DPackage;\r\n    // inherit redefine\r\n    parent!: (LPackage| LModel)[];  // ype 'LPackage' is missing the following properties from type 'LModelElement': get_set_parent, set_parent\r\n    father!: LPackage | LModel;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    // personal\r\n    classifiers!: LClassifier[];\r\n    subpackages!: LPackage[];\r\n    uri!: string;\r\n    prefix: string = '';\r\n    // derived\r\n    classes!: LClass[] & Dictionary<DocString<\"$name\">, LClass>;\r\n    enums!: LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>;\r\n    enumerators!: LEnumerator[];\r\n\r\n    // utilities to go down in the tree (plural names)\r\n    allSubPackages!: LPackage[];\r\n    allSubEnums!: LEnumerator[];\r\n    allSubClasses!: LClass[];\r\n    operations!: LOperation[];\r\n    parameters!: LParameter[];\r\n    exceptions!: LClassifier[];\r\n    attributes!: LAttribute[];\r\n    references!: LReference[];\r\n    literals!: LEnumLiteral[];\r\n\r\n    protected generateEcoreJson_impltemplate(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: GObject = {};\r\n        return json; }\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const model: GObject = {};\r\n        const d = context.data;\r\n        let classarr = context.proxyObject.classes.map( c => c.generateEcoreJson(loopDetectionObj));\r\n        let enumarr = context.proxyObject.enums.map(e => e.generateEcoreJson(loopDetectionObj));\r\n        const classifiers: Json[] = Array.prototype.concat.call(classarr, enumarr);\r\n        model[ECorePackage.xmiversion] = '2.0';\r\n        model[ECorePackage.xmlnsxmi] = 'http://www.omg.org/XMI';\r\n        model[ECorePackage.xmlnsxsi] = 'http://www.w3.org/2001/XMLSchema-instance';\r\n        model[ECorePackage.xmlnsecore] = 'http://www.eclipse.org/emf/2002/Ecore';\r\n        model[ECorePackage.namee] = d.name;\r\n        model[ECorePackage.nsURI] = d.uri;\r\n        model[ECorePackage.nsPrefix] = d.prefix;//getModelRoot().namespace();\r\n        model[ECorePackage.eClassifiers] = classifiers;\r\n        return model; }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LPackage) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LPackage = context.proxyObject.father.addPackage(context.data.name, context.data.uri, context.data.prefix);\r\n            let de: D = le.__raw as D;\r\n            let we: WPackage = le as any;\r\n            we.subpackages = deep ? context.proxyObject.subpackages.map( lchild => lchild.duplicate(deep).id) : context.data.subpackages;\r\n            we.classifiers = deep ? context.proxyObject.classifiers.map( lchild => lchild.duplicate(deep).id) : context.data.classifiers;\r\n            we.annotations = deep ? context.proxyObject.annotations.map( lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            END()\r\n            return le;\r\n        }\r\n    }\r\n\r\n    public addPackage(name?: D[\"name\"], uri?: D[\"uri\"], prefix?: D[\"prefix\"]): LPackage { return this.cannotCall(\"addPackage\"); }\r\n    protected get_addPackage(context: Context): this[\"addPackage\"] {\r\n        console.log(\"Package.get_addPackage()\", {context, thiss:this});\r\n        return (name?: D[\"name\"], uri?: D[\"uri\"], prefix?: D[\"prefix\"]) => {\r\n            return LPointerTargetable.fromD(DPackage.new(name, uri, prefix, context.data.id, true, DPackage));\r\n        }\r\n    }\r\n\r\n    public addClass(name?: DClass[\"name\"], isInterface?: DClass[\"interface\"], isAbstract?: DClass[\"abstract\"], isPrimitive?: DClass[\"isPrimitive\"],\r\n                    isPartial?: DClass[\"partial\"], partialDefaultName?: DClass[\"partialdefaultname\"]): LClass {\r\n        return this.cannotCall(\"addClass\"); }\r\n    protected get_addClass(context: Context): this[\"addClass\"] {\r\n        return (name?: DClass[\"name\"], isInterface?: DClass[\"interface\"], isAbstract?: DClass[\"abstract\"], isPrimitive?: DClass[\"isPrimitive\"],\r\n                isPartial?: DClass[\"partial\"], partialDefaultName?: DClass[\"partialdefaultname\"]\r\n        ) => LPointerTargetable.fromD(DClass.new(name, isInterface, isAbstract, isPrimitive, isPartial, partialDefaultName, context.data.id, true));\r\n    }\r\n\r\n    public addEnum(...p:Parameters<this[\"addEnumerator\"]>): LEnumerator { return this.addEnumerator(...p); }\r\n    protected get_addEnum(context: Context): this[\"addEnumerator\"] { return this.get_addEnumerator(context); }\r\n    public addEnumerator(name?: DEnumerator[\"name\"]): LEnumerator { return this.cannotCall(\"addEnumerator\"); }\r\n    protected get_addEnumerator(context: Context): this[\"addEnumerator\"] {\r\n        return (name?: DEnumerator[\"name\"]) => LPointerTargetable.fromD(DEnumerator.new(name, context.data.id, true)); }\r\n\r\n    protected get_classes(context: Context, state?: DState, setNameKeys: boolean = true): LClass[] & Dictionary<DocString<\"$name\">, LClass> {\r\n        if (!context.data.classifiers.length) return [] as any;\r\n        if (!state) state = store.getState();\r\n        let classifiers = DPointerTargetable.fromPointer(context.data.classifiers as Pointer<DClassifier, 1, 1, LClassifier>[], state);\r\n        let dclasses = classifiers.filter(dc => dc?.className === DClass.cname) as DClass[];\r\n        let lclasses: LClass[] & Dictionary<DocString<\"$name\">, LClass> = LPointerTargetable.fromD(dclasses) as any;\r\n        if (setNameKeys) for (let i = 0; i < dclasses.length; i++) lclasses[\"$\"+dclasses[i].name] = lclasses[i];\r\n        return lclasses;\r\n    }\r\n    protected get_enums(context: Context): (LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>) { return this.get_enumerators(context); }\r\n    protected get_enumerators(context: Context, state?: DState, setNameKeys: boolean = true): (LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>) {\r\n        if (!context.data.classifiers.length) return [] as any;\r\n        if (!state) state = store.getState();\r\n        let classifiers = DPointerTargetable.fromPointer(context.data.classifiers as Pointer<DClassifier, 1, 1, LClassifier>[], state);\r\n        let denums = classifiers.filter(dc => dc?.className === DEnumerator.cname) as DEnumerator[];\r\n        let lenums: LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator> = LPointerTargetable.fromD(denums) as any;\r\n        if (setNameKeys) for (let i = 0; i < denums.length; i++) (lenums as GObject)[\"$\"+denums[i].name] = lenums[i];\r\n        return lenums;\r\n    }\r\n    //private get_allClasses(context: Context): LClass[] & Dictionary<DocString<\"$name\">, LClass> { return this.get_allSubClasses(c); }\r\n    private get_allSubClasses(context: Context): LClass[] & Dictionary<DocString<\"$name\">, LClass> {\r\n        // if (!context.data.isMetamodel) return (context.data.instanceof?.allSubClasses(context) || [] as any);\r\n        const s: DState = store.getState();\r\n        let arr = this.get_allSubPackages(context, s);\r\n        let ret: (LClass[] & Dictionary<DocString<\"$name\">, LClass>) = [] as any;\r\n        // this.get_allSubPackages(context, s).flatMap(p => (p.classes || [])); this was losing the naming $keys!\r\n        for (let a of arr) {\r\n            let classarr: LClass[] & Dictionary<DocString<\"$name\">, LClass> = (a.classes || []) as any;\r\n            U.mergeNamedArray(ret, classarr);\r\n        }\r\n        return ret; }\r\n\r\n    private get_allSubEnums(context: Context): (LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>) { return this.get_allSubEnumerators(context); }\r\n    private get_allSubEnumerators(context: Context): (LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>) {\r\n        const s: DState = store.getState();\r\n        let arr = this.get_allSubPackages(context, s);\r\n        let ret: (LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>) = [] as any;\r\n        // this.get_allSubPackages(context, s).flatMap(p => (p.enums || [])); this was losing the naming $keys!\r\n        for (let a of arr) {\r\n            let enumarr: (LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>) = (a.enumerators || []) as any;\r\n            U.mergeNamedArray(ret, enumarr);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    protected get_allSubPackages(c: Context, state?: DState): this[\"allSubPackages\"] {\r\n        // return context.data.packages.map(p => LPointerTargetable.from(p));\r\n        state = state || store.getState();\r\n        let tocheck: Pointer<DPackage>[] = c.data.subpackages || [];\r\n        let checked: Dictionary<Pointer, DPackage> = {};\r\n        checked[c.data.id] = c.data;\r\n        while (tocheck.length) {\r\n            let newtocheck: Pointer<DPackage>[] = [];\r\n            for (let ptr of tocheck) {\r\n                if (checked[ptr]) throw new Error(\"loop in packages containing themselves\");\r\n                let dpackage: DPackage = DPointerTargetable.from(ptr, state);\r\n                checked[ptr] = dpackage;\r\n                U.arrayMergeInPlace(newtocheck, dpackage?.subpackages);\r\n            }\r\n            tocheck = newtocheck;\r\n        }\r\n        let darr: DPackage[] = Object.values(checked);\r\n        let larr: LPackage[] & Dictionary<DocString<\"$name\">, LPackage> = LPointerTargetable.fromArr(darr, state);\r\n        U.toNamedArray(larr, darr);\r\n        return larr;\r\n    }\r\n\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | DPackage | DClassifier, 1, 'N'> {\r\n        return [...super.get_children_idlist(context) as Pointer<DAnnotation | DPackage | DClassifier, 1, 'N'>, ...context.data.subpackages, ...context.data.classifiers]; }\r\n\r\n    protected get_classifiers(context: Context): this[\"classifiers\"] {\r\n        return context.data.classifiers.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_classifiers(val: PackArr<this[\"classifiers\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.classifiers;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'classifiers', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_subpackages(context: Context): this[\"subpackages\"] {\r\n        return context.data.subpackages.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_subpackages(val: PackArr<this[\"subpackages\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.subpackages;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'subpackages', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_uri(context: Context): this[\"uri\"] {\r\n        if (context.data.uri) return context.data.uri + \".\" + context.data.name;\r\n        return ('org.jodel-react.') + (context.proxyObject.model?.name || \"username\") + \".\" + context.data.name;\r\n    }\r\n    protected set_uri(val: this[\"uri\"], context: Context): boolean {\r\n        val = val || '';\r\n        let pos = val.lastIndexOf(context.data.name);\r\n        if (pos) val = val.substring(0, pos - 1); // removes final name and dot, to keep the name part dinamically added in the getter.\r\n        SetFieldAction.new(context.data, 'uri', val, \"\", false);\r\n        return true;\r\n    }\r\n    protected get_prefix(context: Context): this[\"uri\"] { return context.data.prefix; }\r\n    protected set_prefix(val: this[\"prefix\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'prefix', val, \"\", false);\r\n        return true;\r\n    }\r\n\r\n}\r\n// @RuntimeAccessible('') export class _WPackage extends _WNamedElement { }\r\n// export type WPackage = DPackage | LPackage | _WPackage;\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DPackage);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LPackage);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DOperation')\r\nexport class DOperation extends DPointerTargetable { // extends DTypedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LOperation;\r\n    // static logic: typeof LOperation;\r\n    // static structure: typeof DOperation;\r\n\r\n    // inherit redefine\r\n    instances!: never[];\r\n    id!: Pointer<DOperation, 1, 1, LObject>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    parent: Pointer<DClass, 0, 'N', LClass> = [];\r\n    father!: Pointer<DClass, 1, 1, LClass>;\r\n    name!: string;\r\n    type!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    // personal\r\n    exceptions: Pointer<DClassifier, 0, 'N', LClassifier> = [];\r\n    parameters: Pointer<DParameter, 0, 'N', LParameter> = [];\r\n    visibility: AccessModifier = AccessModifier.private;\r\n    implementation!: string;\r\n\r\n    public static new(name?: DNamedElement[\"name\"], type?: DOperation[\"type\"], exceptions: DOperation[\"exceptions\"] = [], father?: DOperation[\"father\"], persist: boolean = true): DOperation {\r\n        if (!name) name = this.defaultname(\"fx_\", father);\r\n        if (!type) type = father;\r\n        return new Constructors(new DOperation('dwc'), father, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DOperation(exceptions).end();\r\n    }\r\n\r\n    static new2(setter: Partial<ObjectWithoutPointers<DOperation>>, father: DOperation[\"father\"], type?: DOperation[\"type\"], name?: string): DOperation {\r\n        if (!name) name = this.defaultname(\"fx_\", father);\r\n        if (!type) type = father;\r\n        return new Constructors(new DOperation('dwc'), father, true).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DOperation().end((d)=> { Object.assign(d, setter); });\r\n    }\r\n\r\n    static new3(a: Partial<OperationPointers>, callback: undefined | ((d: DOperation, c: Constructors) => void), persist: boolean = true): DOperation {\r\n        if (!a.name) a.name = this.defaultname(\"fx_\", a.father);\r\n        if (!a.type) a.type = a.father;\r\n        return new Constructors(new DOperation('dwc'), a.father, persist, undefined, a.id).DPointerTargetable().DModelElement()\r\n            .DNamedElement(a.name).DTypedElement(a.type).DOperation().end(callback);\r\n    }\r\n\r\n\r\n}\r\n\r\n@Node\r\n@RuntimeAccessible('LOperation')\r\nexport class LOperation<Context extends LogicContext<DOperation> = any, C extends Context = Context, D extends DOperation = DOperation>  extends LTypedElement { // extends DTypedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DOperation;\r\n    id!: Pointer<DOperation, 1, 1, LOperation>;\r\n    // static singleton: LOperation;\r\n    // static logic: typeof LOperation;\r\n    // static structure: typeof DOperation;\r\n\r\n    // inherit redefine\r\n    instances!: never[];\r\n    annotations!: LAnnotation[];\r\n    parent!: LClass[];\r\n    father!: LClass;\r\n    name!: string;\r\n    namespace!: string;\r\n    type!: LClassifier;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    // personal\r\n    implementation!: string;\r\n    signatureImplementation!: string; // (param1 /*type*/, param2 = value, ...) => /*return type*/\r\n    exceptions!: LClassifier[];\r\n    parameters!: LParameter[];\r\n    visibility!: AccessModifier;\r\n\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: Json = {};\r\n        json[ECoreOperation.eParameters] = context.proxyObject.parameters.map( par => par.generateEcoreJson(loopDetectionObj));\r\n        EcoreParser.write(json, ECoreOperation.namee, context.data.name);\r\n        EcoreParser.write(json, ECoreOperation.eType, context.proxyObject.type.typeEcoreString);\r\n        EcoreParser.write(json, ECoreOperation.lowerBound, '' + context.data.lowerBound);\r\n        EcoreParser.write(json, ECoreOperation.upperBound, '' + context.data.upperBound);\r\n        EcoreParser.write(json, ECoreOperation.eexceptions, context.proxyObject.exceptions.map( (l: LClassifier) => l.typeEcoreString).join(' ')); // todo: not really sure it's this format\r\n        EcoreParser.write(json, ECoreOperation.ordered, '' + context.data.ordered);\r\n        EcoreParser.write(json, ECoreOperation.unique, '' + context.data.unique);\r\n        return json; }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LOperation) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LOperation = context.proxyObject.father.addOperation(context.data.name, context.data.type);\r\n            let de: D = le.__raw as D;\r\n            de.many = context.data.many;\r\n            de.lowerBound = context.data.lowerBound;\r\n            de.upperBound = context.data.upperBound;\r\n            de.ordered = context.data.ordered;\r\n            de.required = context.data.required;\r\n            de.unique = context.data.unique;\r\n            de.visibility = context.data.visibility;\r\n            de.exceptions = context.data.exceptions;\r\n            let we: WOperation = le as any;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            we.parameters = deep ? context.proxyObject.parameters.map(lchild => lchild.duplicate(deep).id) : context.data.parameters;\r\n            we.exceptions = context.data.exceptions;\r\n            END()\r\n            return le; }\r\n    }\r\n\r\n    public addParameter(name?: DParameter[\"name\"], type?: DParameter[\"type\"]): LParameter { return this.cannotCall(\"addParameter\"); }\r\n    protected get_addParameter(context: Context): this[\"addParameter\"] {\r\n        return (name?: DParameter[\"name\"], type?: DParameter[\"type\"]) => LPointerTargetable.fromD(DParameter.new(name, type, context.data.id, true)); }\r\n\r\n    public execute(thiss: LObject, ...params: any): any { return this.cannotCall(\"execute\"); }\r\n    protected get_execute(context: Context): ((thiss: LObject, ...params: any[])=>any) {\r\n        return (thiss: LObject, ...params: any) => {\r\n            let func: Function = eval(this.get_signatureImplementation(context, true) + \" {\\n\"+ context.data.implementation + \"\\n}\");\r\n            func.apply(thiss, params);\r\n        };\r\n    }\r\n    public set_implementation(val: this[\"implementation\"], context: Context): boolean { return SetFieldAction.new(context.data.id, \"implementation\", val, undefined, false); }\r\n    public get_implementation(context: Context): this[\"implementation\"] { return context.data.implementation; }\r\n    public set_signatureImplementation(val: this[\"signatureImplementation\"], context: Context): boolean { return this.cannotSet(\"signatureImplementation\"); }\r\n    public get_signatureImplementation(context: Context, typedComments: boolean = true): this[\"signatureImplementation\"] {\r\n        let operation = context.proxyObject;\r\n        let typedcommentpre = typedComments ? \"/* :\" : ': ' ;\r\n        let typedcommentpost = typedComments ? \" */\" : '';\r\n        return \"(\" +\r\n            operation.parameters.map(\r\n                (p) => p.name + (p.defaultValue !== undefined ? \"=\" + p.defaultValue : typedcommentpre + p.typeToShortString() + typedcommentpost)\r\n            ).join(\", \")\r\n            + \") => \" +typedcommentpre.replace(\":\", \"\") + operation.type + typedcommentpost;\r\n    }\r\n    public get_signature(context: Context): this[\"signatureImplementation\"] { return this.get_signatureImplementation(context, false); }\r\n\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | DClassifier | DParameter, 1, 'N'> {\r\n        return [...super.get_children_idlist(context) as Pointer<DAnnotation | DParameter | DClassifier, 1, 'N'>, ...context.data.exceptions, ...context.data.parameters]; }\r\n\r\n    protected get_exceptions(context: Context): this[\"exceptions\"] {\r\n        return context.data.exceptions.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_exceptions(val: PackArr<this[\"exceptions\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'exceptions', list, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_parameters(context: Context): this[\"parameters\"] {\r\n        return context.data.parameters.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_parameters(val: PackArr<this[\"parameters\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.parameters;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'parameters', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    // protected get_type(context: Context): this[\"type\"] { return context.proxyObject.parameters[0].type; }\r\n    // protected set_type(val: Pack1<this[\"type\"]>, context: Context): this[\"type\"] { return super.set_type(val, context); }\r\n\r\n    _mark(b: boolean, superchildren: LOperation, override: string) {\r\n\r\n    }\r\n\r\n    _canOverride(superchildren: LOperation) {\r\n        return undefined;\r\n    }\r\n\r\n    _canPolymorph(superchildren: LOperation) {\r\n        return undefined;\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DTypedElement, DOperation);\r\nRuntimeAccessibleClass.set_extend(LTypedElement, LOperation);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DParameter')\r\nexport class DParameter extends DPointerTargetable { // extends DTypedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LParameter;\r\n    // static logic: typeof LParameter;\r\n    // static structure: typeof DParameter;\r\n\r\n    // inherit redefine\r\n    instances!: never[];\r\n    id!: Pointer<DParameter, 1, 1, LParameter>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    parent: Pointer<DOperation, 0, 'N', LOperation> = [];\r\n    father!: Pointer<DOperation, 1, 1, LOperation>;\r\n    name!: string;\r\n    type!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    defaultValue!: any;\r\n    // personal\r\n\r\n    public static new(name?: DNamedElement[\"name\"], type?: DTypedElement[\"type\"], father?: Pointer, persist: boolean = true): DParameter {\r\n        if (!type) type = LPointerTargetable.from(Selectors.getFirstPrimitiveTypes()).id; // default type as string\r\n        if (!name) name = this.defaultname(\"arg\", father);\r\n        return new Constructors(new DParameter('dwc'), father, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DParameter().end();\r\n    }\r\n\r\n    static new2(setter: Partial<ObjectWithoutPointers<DParameter>>, father: DParameter[\"father\"], type?: DParameter[\"type\"], name?: DParameter[\"name\"]): DParameter {\r\n        if (!name) name = this.defaultname((name || \"arg\"), father);\r\n        return new Constructors(new DParameter('dwc'), father, true).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).end((d) => { Object.assign(d, setter); });\r\n    }\r\n\r\n    static new3(a: Partial<ParameterPointers>, callback: undefined | ((d: DParameter, c: Constructors) => void), persist: boolean = true): DParameter {\r\n        if (!a.name) a.name = this.defaultname(\"arg\", a.father);\r\n        return new Constructors(new DParameter('dwc'), a.father, persist, undefined, a.id).DPointerTargetable().DModelElement()\r\n            .DNamedElement(a.name).DTypedElement(a.type).DOperation().end(callback);\r\n    }\r\n}\r\n\r\n@Leaf\r\n@RuntimeAccessible('LParameter')\r\nexport class LParameter<Context extends LogicContext<DParameter> = any, C extends Context = Context, D extends DParameter = DParameter>  extends LTypedElement { // extends DTypedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DParameter;\r\n    id!: Pointer<DParameter, 1, 1, LParameter>;\r\n    // static singleton: LParameter;\r\n    // static logic: typeof LParameter;\r\n    // static structure: typeof DParameter;\r\n\r\n    // inherit redefine\r\n    instances!: never[];\r\n    annotations!: LAnnotation[];\r\n    parent!: LOperation[];\r\n    father!: LOperation;\r\n    name!: string;\r\n    namespace!: string;\r\n    type!: LClassifier;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    // personal\r\n    defaultValue!: any;\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: Json = {};\r\n        const l = context.proxyObject;\r\n        const d = context.data;\r\n        EcoreParser.write(json, ECoreOperation.lowerBound, '' + d.lowerBound);\r\n        EcoreParser.write(json, ECoreOperation.upperBound, '' + d.upperBound);\r\n        EcoreParser.write(json, ECoreOperation.ordered, '' + d.ordered);\r\n        EcoreParser.write(json, ECoreOperation.unique, '' + d.unique);\r\n        EcoreParser.write(json, ECoreOperation.eType, '' + l.type.typeEcoreString);\r\n        return json; }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LParameter) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LParameter = context.proxyObject.father.addParameter(context.data.name, context.data.type);\r\n            let de: D = le.__raw as D;\r\n            de.many = context.data.many;\r\n            de.lowerBound = context.data.lowerBound;\r\n            de.upperBound = context.data.upperBound;\r\n            de.ordered = context.data.ordered;\r\n            de.required = context.data.required;\r\n            de.unique = context.data.unique;\r\n            let we: WParameter = le as any;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            END()\r\n            return le; }\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DTypedElement, DParameter);\r\nRuntimeAccessibleClass.set_extend(LTypedElement, LParameter);\r\nexport class ClassReferences{\r\n    id?: Pack1<LClass>\r\n    parent?: this[\"father\"][];\r\n    father?: Pack1<LPackage>;\r\n    instances?: Pointer<DObject, 0, 'N', LObject> = [];\r\n    operations?: Pointer<DOperation, 0, 'N', LOperation> = [];\r\n    features?: Pointer<DStructuralFeature, 0, 'N', LStructuralFeature> = [];\r\n    references?: Pointer<DReference, 0, 'N', LReference> = [];\r\n    attributes?: Pointer<DAttribute, 0, 'N', LAttribute> = [];\r\n    referencedBy?: Pointer<DReference, 0, 'N', LReference> = [];\r\n    extends?: Pointer<DClass, 0, 'N', LClass> = [];\r\n    extendedBy?: Pointer<DClass, 0, 'N', LClass> = [];\r\n    implements?: Pointer<DClass, 0, 'N', LClass> = [];\r\n    implementedBy?: Pointer<DClass, 0, 'N', LClass> = [];\r\n}\r\n\r\n@RuntimeAccessible('DClass')\r\nexport class DClass extends DPointerTargetable { // extends DClassifier\r\n    // static _super = DClassifier;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LClass;\r\n    // static logic: typeof LClass;\r\n    // static structure: typeof DClass;\r\n\r\n    // inherit redefine\r\n    // instanceClass: EJavaClass // ?\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n    id!: Pointer<DClass, 1, 1, LClass>;\r\n    instanceClassName!: string;\r\n    parent: Pointer<DPackage, 0, 'N', LPackage> = [];\r\n    father!: Pointer<DPackage, 1, 1, LPackage>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    defaultValue!: Pointer<DObject, 1, 1, LObject>[];\r\n    // personal\r\n    // isSuperTypeOf(someClass: DClassifier): boolean { return todoret; }\r\n    // getEstructuralFeatureByID(featureID: number): DStructuralFeature { return todoret; }\r\n    // getEstructuralFeature(featureName: string): DStructuralFeature { return todoret; }\r\n    abstract: boolean = false;\r\n    interface: boolean = false;\r\n    instances: Pointer<DObject, 0, 'N', LObject> = [];\r\n    operations: Pointer<DOperation, 0, 'N', LOperation> = [];\r\n    features: Pointer<DStructuralFeature, 0, 'N', LStructuralFeature> = [];\r\n    references: Pointer<DReference, 0, 'N', LReference> = [];\r\n    attributes: Pointer<DAttribute, 0, 'N', LAttribute> = [];\r\n    referencedBy: Pointer<DReference, 0, 'N', LReference> = [];\r\n    extends: Pointer<DClass, 0, 'N', LClass> = [];\r\n    extendedBy: Pointer<DClass, 0, 'N', LClass> = [];\r\n\r\n    // mia aggiunta:\r\n    isPrimitive!: boolean;\r\n    implements: Pointer<DClass, 0, 'N', LClass> = [];\r\n    implementedBy: Pointer<DClass, 0, 'N', LClass> = [];\r\n    partial!: boolean;\r\n    partialdefaultname!: string;\r\n\r\n    // for m1:\r\n    // hideExcessFeatures: boolean = true; // isn't it like partial?? // old comment: se attivo questo e creo una DClass di sistema senza nessuna feature e di nome Object, ho creato lo schema di un oggetto schema-less a cui tutti sono conformi\r\n\r\n    public static new(name?: DNamedElement[\"name\"], isInterface: DClass[\"interface\"] = false, isAbstract: DClass[\"abstract\"] = false, isPrimitive: DClass[\"isPrimitive\"] = false, partial?: DClass[\"partial\"],\r\n                      partialDefaultName?: DClass[\"partialdefaultname\"], father?: Pointer, persist: boolean = true, id?: string): DClass {\r\n        if (!name) name = this.defaultname(\"Concept \", father);\r\n        return new Constructors(new DClass('dwc'), father, persist, undefined, id).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DClassifier().DClass(isInterface, isAbstract, isPrimitive, partial, partialDefaultName).end();\r\n    }\r\n\r\n    static new2(setter: Partial<ObjectWithoutPointers<DClass>>, father: DClass[\"father\"], name?: DClass[\"name\"]): DClass {\r\n        if (!name) name = this.defaultname((name || \"Concept \"), father);\r\n        return new Constructors(new DClass('dwc'), father, true, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DClassifier().DClass().end((d) => { Object.assign(d, setter); });\r\n    }\r\n\r\n    static new3(a: Partial<ClassPointers>, callback: undefined | ((d: DClass, c: Constructors) => void), persist: boolean = true): DClass {\r\n        if (!a.name) a.name = this.defaultname(\"Concept \", a.father);\r\n        return new Constructors(new DClass('dwc'), a.father, persist, undefined, a.id).DPointerTargetable().DModelElement()\r\n            .DNamedElement(a.name).DClassifier().DClass().end(callback);\r\n    }\r\n\r\n}\r\n\r\n(window as any).dc = DClassifier;\r\n(window as any).c = DClass;\r\n@Instantiable // (LObject)\r\n@Node\r\n@RuntimeAccessible('LClass')\r\nexport class LClass<D extends DClass = DClass, Context extends LogicContext<DClass> = any, C extends Context = Context>  extends LClassifier{ // extends DClassifier\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DClass;\r\n    id!: Pointer<DClass, 1, 1, LClass>;\r\n    // static singleton: LClass;\r\n    // static logic: typeof LClass;\r\n    // static structure: typeof DClass;\r\n\r\n    // inherit redefine\r\n    // instanceClass: EJavaClass // ?\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n    instanceClassName!: string;\r\n    parent!: LPackage[];\r\n    father!: LPackage;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    defaultValue!: LObject[];\r\n    // personal\r\n    // isSuperTypeOf(someClass: DClassifier): boolean { return todoret; }\r\n    // getEstructuralFeatureByID(featureID: number): DStructuralFeature { return todoret; }\r\n    // getEstructuralFeature(featureName: string): DStructuralFeature { return todoret; }\r\n    abstract!: boolean;\r\n    interface!: boolean;\r\n    instances!: LObject[];\r\n    operations!: LOperation[];\r\n    features!: LStructuralFeature[];\r\n    references!: LReference[];\r\n    attributes!: LAttribute[];\r\n    referencedBy!: LReference[];\r\n    extends!: LClass[];\r\n    __info_of__extends: Info = {type:\"LClass[]\", txt: \"classes directly extended by this. check also: \\\"superclasses\\\".\"}\r\n    extendsChain!: LClass[];  // list of all super classes (father, father of father, ...)  todo: isn't this the same as \"superclasses\" ? check implementation differeces, eventually remove one.\r\n    extendedBy!: LClass[];\r\n    nodes!: LGraphElement[]; // ipotesi, non so se tenerlo\r\n\r\n    // fittizi:\r\n    public superclasses!: LClass[];\r\n    __info_of__superclasses: Info = {type:\"LClass[]\", txt: \"all classes directly and indirectly extended by this. same as check also: \\\"extends\\\".\"}\r\n    public allSubClasses!: LClass[];\r\n\r\n    partial!: boolean;\r\n    partialdefaultname!: string;\r\n    isPrimitive!: boolean;\r\n    isClass!: boolean; // false if it's primitive type\r\n    isEnum!: false;\r\n    implements: Pointer<DClass, 0, 'N', LClass> = [];  //todo: interface\r\n    implementedBy: Pointer<DClass, 0, 'N', LClass> = [];\r\n\r\n    ownAttributes!: LAttribute[];\r\n    ownReferences!: LReference[];\r\n    ownOperations!: LOperation[];\r\n    ownChildren!: (LStructuralFeature|LOperation)[];\r\n\r\n    inheritedAttributes!: LAttribute[];\r\n    inheritedReferences!: LReference[];\r\n    inheritedOperations!: LOperation[];\r\n    inheritedChildren!: (LStructuralFeature|LOperation)[];\r\n\r\n    allAttributes!: LAttribute[];\r\n    allReferences!: LReference[];\r\n    allOperations!: LOperation[]; // includes inherited and shadowed features\r\n    allChildren!: (LStructuralFeature|LOperation)[];\r\n\r\n\r\n\r\n    // utilities to go down in the tree (plural names)\r\n    exceptions!: LClassifier[] | null;\r\n    parameters!: LParameter[] | null;\r\n    // [`@${string}`]: LModelElement; todo: try to put it\r\n\r\n    get_childNames(c: Context): string[] { return this.get_allChildren(c).map( c => c.name).filter(c=>!!c) as string[]; }\r\n    protected get_ownAttributes(context: Context): this['ownAttributes'] {\r\n        return LAttribute.fromPointer(context.data.attributes);\r\n    }\r\n    protected get_ownReferences(context: Context): this['ownReferences'] {\r\n        return LReference.fromPointer(context.data.references);\r\n    }\r\n    protected get_ownOperations(context: Context): this['ownOperations'] {\r\n        return LOperation.fromPointer(context.data.operations);\r\n    }\r\n    protected get_ownChildren(context: Context): this['ownChildren'] {\r\n        return U.arrayMergeInPlace<any>(this.get_ownAttributes(context), this.get_ownReferences(context),\r\n            this.get_ownOperations(context));\r\n    }\r\n\r\n    private get_extendsChain(context: Context): this['extendsChain'] {\r\n        let targets: LClass[] = LClass.fromArr(context.data.extends);\r\n        let alreadyParsed: Dictionary<Pointer, LClass> = {};\r\n        while(targets.length) {\r\n            let nextTargets = [];\r\n            for(let target of targets){\r\n                if(alreadyParsed[target.id]) continue;\r\n                alreadyParsed[target.id] = target;\r\n                for(let father of target.extends) nextTargets.push(father);\r\n            }\r\n            targets = nextTargets;\r\n        }\r\n        return [...new Set<LClass>(Object.values(alreadyParsed))];\r\n    }\r\n\r\n    public isSubClassOf(superClass: LClass, returnIfSameClass: boolean = true): boolean { return this.cannotCall(\"isSubClassOf\"); }\r\n    public isSuperClassOf(subClass: LClass, returnIfSameClass: boolean = true): boolean { return this.cannotCall(\"isSuperClassOf\"); }\r\n    protected get_isSubClassOf(c: Context): ((superClass: LClass, returnIfSameClass?: boolean) => boolean) {\r\n        return (superClass: LClass, returnIfSameClass: boolean = true) => {\r\n            if (!superClass) return false;\r\n            if (superClass.id === c.data.id) return returnIfSameClass;\r\n            for (let subclass of this.get_extendsChain(c)) {\r\n                if (subclass.id === superClass.id) return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    protected get_isSuperClassOf(c: Context): ((subClass: LClass, returnIfSameClass?: boolean) => boolean) {\r\n        return (subClass: LClass, returnIfSameClass: boolean = true) => {\r\n            if (!subClass) return false;\r\n            if (subClass.id === c.data.id) return returnIfSameClass;\r\n            return subClass.isSubClassOf(c.proxyObject, returnIfSameClass);\r\n        }\r\n    }\r\n\r\n    protected get_inheritedAttributes(context: Context): this['inheritedAttributes'] {\r\n        return this.get_extendsChain(context).flatMap((superClass) => superClass.ownAttributes);\r\n    }\r\n    protected get_inheritedReferences(context: Context): this['inheritedReferences'] {\r\n        return this.get_extendsChain(context).flatMap((superClass) => superClass.ownReferences);\r\n    }\r\n    protected get_inheritedOperations(context: Context): this['inheritedOperations'] {\r\n        return this.get_extendsChain(context).flatMap((superClass) => superClass.ownOperations);\r\n    }\r\n    protected get_inheritedChildren(context: Context): this['inheritedChildren'] {\r\n        return U.arrayMergeInPlace<any>(this.get_inheritedAttributes(context), this.get_inheritedReferences(context),\r\n            this.get_inheritedOperations(context));\r\n    }\r\n\r\n    protected get_allAttributes(context: Context): this['allAttributes'] {\r\n        return U.arrayMergeInPlace<any>(this.get_ownAttributes(context), this.get_inheritedAttributes(context));\r\n    }\r\n    protected get_allReferences(context: Context): this['allReferences'] {\r\n        return U.arrayMergeInPlace<any>(this.get_ownReferences(context), this.get_inheritedReferences(context));\r\n    }\r\n    protected get_allOperations(context: Context): this['allOperations'] {\r\n        return U.arrayMergeInPlace<any>(this.get_ownOperations(context), this.get_inheritedOperations(context));\r\n    }\r\n    protected get_allChildren(context: Context): this['allChildren'] {\r\n        return U.arrayMergeInPlace<any>(this.get_ownChildren(context), this.get_inheritedChildren(context));\r\n    }\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: GObject = {};\r\n        const featurearr: Json[] = [];\r\n        const operationsarr: Json[] = [];\r\n        let supertypesstr = [];\r\n        const d = context.data;\r\n        const l = context.proxyObject;\r\n        for (let att of l.attributes) { featurearr.push(att.generateEcoreJson(loopDetectionObj)); }\r\n        for (let ref of l.references) { featurearr.push(ref.generateEcoreJson(loopDetectionObj)); }\r\n        for (let op of l.operations) { operationsarr.push(op.generateEcoreJson(loopDetectionObj)); }\r\n\r\n        json[ECoreClass.xsitype] = 'ecore:EClass';\r\n        json[ECoreClass.namee] = d.name;\r\n        json[ECoreClass.interface] = U.toBoolString(d.interface, false);\r\n        json[ECoreClass.abstract] = U.toBoolString(d.abstract, false);\r\n        if (d.instanceClassName) json[ECoreClass.instanceTypeName] = d.instanceClassName;\r\n        json[ECoreClass.eSuperTypes] = l.extends.map( superclass => superclass.typeEcoreString).join(\" \");\r\n        if (featurearr) json[ECoreClass.eStructuralFeatures] = featurearr;\r\n        if (operationsarr) json[ECoreClass.eOperations] = operationsarr;\r\n        return json; }\r\n\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LClass) {\r\n        return (deep: boolean = false) => {\r\n            let ret: LClass = undefined as any;\r\n            TRANSACTION( () => {\r\n                let le: LClass = context.proxyObject.father.addClass(context.data.name, context.data.interface, context.data.abstract, context.data.isPrimitive);\r\n                let de: D = le.__raw as D;\r\n                // de.hideExcessFeatures = context.data.hideExcessFeatures;\r\n                let we: WClass = le as any;\r\n                we.defaultValue = context.data.defaultValue;\r\n                we.extends = context.data.extends;\r\n                we.attributes = deep ? context.proxyObject.attributes.map(lchild => lchild.duplicate(deep).id) : context.data.attributes;\r\n                we.references = deep ? context.proxyObject.references.map(lchild => lchild.duplicate(deep).id) : context.data.references;\r\n                we.operations = deep ? context.proxyObject.operations.map(lchild => lchild.duplicate(deep).id) : context.data.operations;\r\n                ret = le; // set ret = le only if the transaction is complete.\r\n            });\r\n            return ret; }\r\n    }\r\n\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | DStructuralFeature | DOperation, 1, 'N'> {\r\n        return [...super.get_children_idlist(context) as Pointer<DAnnotation | DStructuralFeature, 1, 'N'>, ...context.data.attributes, ...context.data.references, ...context.data.operations];\r\n    }\r\n\r\n\r\n    protected set_name(val: this[\"name\"], context: Context): boolean {\r\n        if (context.data.name === val) return true;\r\n        super.set_name(val, context);\r\n        SetRootFieldAction.new('ClassNameChanged.'+context.data.id, val, '', false); // it is pointer, but related to transient stuff, so don't need pointedBy's\r\n        return true;\r\n    }\r\n\r\n    protected set_partial(val: D[\"partial\"], context: Context): boolean { return SetFieldAction.new(context.data.id, \"partial\", val); }\r\n    protected get_partial(context: Context): D[\"partial\"] { return context.data.partial; }\r\n    protected set_partialdefaultname(val: D[\"partialdefaultname\"], context: Context): boolean { return SetFieldAction.new(context.data.id, \"partialdefaultname\", val, undefined, false); }\r\n    protected get_partialdefaultname(context: Context): D[\"partialdefaultname\"] { return context.data.partialdefaultname; }\r\n\r\n    public addAttribute(name?: DAttribute[\"name\"], type?: DAttribute[\"type\"]): LAttribute { return this.cannotCall(\"addAttribute\"); }\r\n    protected get_addAttribute(context: Context): this[\"addAttribute\"] {\r\n        return (name?: DAttribute[\"name\"], type?: DAttribute[\"type\"]) => LPointerTargetable.fromD(DAttribute.new(name, type, context.data.id, true));\r\n    }\r\n\r\n    public addReference(name?: DReference[\"name\"], type?: DReference[\"type\"]): LReference { return this.cannotCall(\"addReference\"); }\r\n    protected get_addReference(context: Context): this[\"addReference\"] {\r\n        return (name?: DReference[\"name\"], type?: DReference[\"type\"]) => LPointerTargetable.fromD(DReference.new(name, type, context.data.id, true));\r\n    }\r\n\r\n    public addOperation(name?: DOperation[\"name\"], type?: DOperation[\"type\"]): LOperation { return this.cannotCall(\"addOperation\"); }\r\n    protected get_addOperation(context: Context): this[\"addOperation\"] {\r\n        return (name?: DOperation[\"name\"], type?: DOperation[\"type\"]) => LPointerTargetable.fromD(DOperation.new(name, type, [], context.data.id, true));\r\n    }\r\n\r\n\r\n    protected get_abstract(context: Context): this[\"abstract\"] { return context.data.abstract; }\r\n    protected set_abstract(val: this[\"abstract\"], context: Context): boolean {\r\n        const data = context.data;\r\n        if(val && data.instances.length > 0) {\r\n            U.alert('error', 'Cannot change the abstraction level since there are instances.');\r\n        } else {\r\n            SetFieldAction.new(data, 'abstract', val);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    protected set_isPrimitive(val: this[\"isPrimitive\"], context: Context): boolean { SetFieldAction.new(context. data, 'isPrimitive', val); return true; }\r\n    // get is in classifier with all other \"type\"s getter and setter\r\n\r\n    protected get_interface(context: Context): this[\"interface\"] { return context.data.interface; }\r\n    protected set_interface(val: this[\"interface\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'interface', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_instances(context: Context): this[\"instances\"] {\r\n        return context.data.instances.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_instances(val: PackArr<this[\"instances\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'instances', list, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_operations(context: Context): this[\"operations\"] {\r\n        return context.data.operations.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_operations(val: PackArr<this[\"operations\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.operations;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'operations', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_features(context: Context): this[\"features\"] {\r\n        return context.data.features.map((pointer) => { return LPointerTargetable.from(pointer) });\r\n    }\r\n    protected set_features(val: PackArr<this[\"features\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.features;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'features', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_references(context: Context): this[\"references\"] {\r\n        return context.data.references.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_references(val: PackArr<this[\"references\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.references;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'references', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_attributes(context: Context): this[\"attributes\"] {\r\n        return context.data.attributes.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_attributes(val: PackArr<this[\"attributes\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.attributes;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'attributes', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_referencedBy(context: Context): this[\"referencedBy\"] {\r\n        return context.data.referencedBy.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_referencedBy(val: PackArr<this[\"referencedBy\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'referencedBy', list, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_extends(context: Context): this[\"extends\"] {\r\n        return context.data.extends.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_extends(val: PackArr<this[\"extends\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'extends', list, \"\", true);\r\n        return true;\r\n    }\r\n    protected add_extends(val: PackArr<this[\"extends\"]>, context: Context): void {\r\n        let ptrs: Pointer<DClass> = Pointers.from(val) as any;\r\n        SetFieldAction.new(context.data, 'extends', [...context.data.extends, ...ptrs], '', true);\r\n    }\r\n\r\n    protected remove_extends(val: PackArr<this[\"extends\"]> | number | number[], context: Context): void {\r\n        if (!Array.isArray(val)) val = [val];\r\n        if (!val.length) return;\r\n        let finalVal: D[\"extends\"];\r\n        if (typeof val[0] === \"number\") { finalVal = context.data.extends.filter((elem,index,arr)=> { return (val as any[]).includes(index); }); }\r\n        else {\r\n            finalVal = [...context.data.extends];\r\n            let ptrs: Pointer<DClass> = Pointers.from(val as PackArr<this[\"extends\"]>) as any;\r\n            for (let v of ptrs) { U.arrayRemoveAll(finalVal, v); }\r\n        }\r\n        SetFieldAction.new(context.data, 'extends', finalVal, '', true);\r\n    }\r\n\r\n    protected get_extendedBy(context: Context): this[\"extendedBy\"] {\r\n        return context.data.extendedBy.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_extendedBy(val: PackArr<this[\"extendedBy\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'extendedBy', list, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_implements(context: Context): this[\"implements\"] { return context.data.implements; }\r\n    protected set_implements(val: this[\"implements\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'implements', val, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_implementedBy(context: Context): this[\"implementedBy\"] { return context.data.implementedBy; }\r\n    protected set_implementedBy(val: this[\"implementedBy\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'implementedBy', val, \"\", true);\r\n        return true;\r\n    }\r\n\r\n\r\n    public canExtend(superclass: LClass, output: {reason: string, allTargetSuperClasses: LClass[]} = {reason: '', allTargetSuperClasses: []}): boolean {\r\n        this.cannotCall(\"canExtend\"); return false;\r\n    }\r\n\r\n    private get_canExtend(context: Context): (superclass: LClass, output: {reason: string, allTargetSuperClasses: LClass[]}) => boolean {\r\n        return (superclass: LClass, output: {reason: string, allTargetSuperClasses: LClass[]} =\r\n            {reason: '', allTargetSuperClasses: []}) => this._canExtend(context, superclass, output);\r\n    }\r\n\r\n    public isExtending(superclass: Pack1<LClass>, directly: boolean = false): boolean { return this.cannotCall(\"isExtending\"); }\r\n    public isSubclassOf(superclass: Pack1<LClass>, directly: boolean = false): boolean { return this.cannotCall(\"isSubclassOf\"); }\r\n    __info_of__isSubclassOf: Info = {type: \"(superclass: Pointer | LClass, directly: boolean = false) => boolean\", txt: \"Alias for isExtending\"};\r\n    __info_of__isExtending: Info = {type: \"(superclass: Pointer | LClass, directly: boolean = false) => boolean\",\r\n        txt:<div>Tells if \"this\" is a subclass of the \"superclass\" parameter.\r\n            <br/>- If \"directly\" is set to true, it will only include direct subclassing as in \"class A extends C\" not considering chains.\r\n            <br/>    If \"directly\" is set to true: \"class A extends B\" & \"Class B extends C\". In that case A.isExtending(C, true) will return false.</div>};\r\n\r\n    private get_isSubclassOf(c: Context, plusThis: boolean = true): this[\"isExtending\"] { return this.get_isExtending(c, plusThis); }\r\n    private get_isExtending(c: Context, plusThis: boolean = true): this[\"isExtending\"] {\r\n        return (superclass: Pack1<LClass>, directly: boolean = false): boolean => {\r\n            let ptr = Pointers.from(superclass);\r\n            if (directly) return c.data.extends.includes(ptr);\r\n            return this.get_superclasses(c, plusThis).map(classe=>classe.id).includes(ptr);\r\n        }\r\n    }\r\n\r\n    private get_superclasses(context: Context, plusThis: boolean = false): LClass[] {\r\n        let i: number;\r\n        const thiss: LClass = context.proxyObject;\r\n        const visited: Dictionary<Pointer, LClass> = {};\r\n        let queue: LClass[] = thiss.extends;\r\n        if (plusThis) queue = [thiss, ...queue];\r\n        const ret: LClass[] = [];\r\n        for (i = 0; i < queue.length; i++) {\r\n            let elem: LClass = queue[i];\r\n            if (visited[elem.id]) continue;\r\n            visited[elem.id] = elem;\r\n            ret.push(elem);\r\n            queue.push(...elem.extends);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    private get_allSubClasses(context: Context, plusThis: boolean = false, state?: DState): LClass[] {\r\n        const thiss: LClass = context.proxyObject;\r\n        let extendedBy = thiss.extendedBy;\r\n        let ebyIDS = extendedBy.map(e => e.id);\r\n        /* old version, remade longer but more efficient\r\n        const set: Set<LClass> = plusThis ? new Set<LClass>([thiss.id, ...ebyIDS]) : new Set(ebyIDS);\r\n        for (let i = 0; i < extendedBy.length; i++) { U.SetMerge(true, set, extendedBy[i].allSubClasses.map(e=>e.id)); }*/\r\n        let parsedSubclasses: Dictionary<Pointer, DClass> = {}\r\n        parsedSubclasses[context.data.id] = context.data;\r\n        let stack: DClass[] = [context.data];\r\n        if (!state && !context.data.extendedBy?.length) state = store.getState();\r\n        while (stack.length) {\r\n            let newstack: DClass[] = [];\r\n            for (let d of stack) {\r\n                for (let sid of d.extendedBy) {\r\n                    if (!sid || parsedSubclasses[sid]) continue;\r\n                    let d: DClass = DClass.from(sid, state);\r\n                    if (!d) continue;\r\n                    parsedSubclasses[sid] = d;\r\n                    newstack.push(d);\r\n                }\r\n            }\r\n            stack = newstack;\r\n        }\r\n        if (!plusThis) delete parsedSubclasses[context.data.id];\r\n        return Object.values(parsedSubclasses).map(d=>LPointerTargetable.fromD(d)); }\r\n\r\n\r\n    private _canExtend(context: Context, superclass: LClass, output: {reason: string, allTargetSuperClasses: LClass[]} = {reason: '', allTargetSuperClasses: []}): boolean {\r\n        if (!superclass) { output.reason = 'Invalid extend target: ' + superclass; return false; }\r\n        const thiss: LClass = context.proxyObject;\r\n        if (superclass.id === thiss.id) { output.reason = 'Classes cannot extend themselves.'; return false; }\r\n        // todo: se diversi proxy dello stesso oggetto sono considerati diversi questo fallisce, in tal caso fai thiss.extends.map( l => l.id).indexof(superclass.id)\r\n        if (thiss.extends.map(sc=>sc.id).indexOf(superclass.id) >= 0) { output.reason = 'Target class is already directly extended.'; return false; }\r\n        output.allTargetSuperClasses = superclass.superclasses;\r\n        if (thiss.superclasses.map(sc=> sc.id).indexOf(superclass.id) >= 0) { output.reason = 'Target class is already indirectly extended.'; return false; }\r\n        if (output.allTargetSuperClasses.map(sc=>sc.id).indexOf(thiss.id) >= 0) { output.reason = 'Cannot set this extend, it would cause a inheritance loop.'; return false; }\r\n        if (thiss.interface && !superclass.interface) { output.reason = 'An interface cannot extend a class.'; return false; }\r\n        // ora verifico se causa delle violazioni di override (attibuti omonimi string e boolean non possono overridarsi)\r\n        let i: number;\r\n        let j: number;\r\n        let children: LOperation[] =  thiss.operations; //[...thiss.getBasicOperations()];\r\n        let superchildren: LOperation[] = superclass.operations; //[...superclass.getBasicOperations()];\r\n        for (i = 0; i < children.length; i++) {\r\n            let op: LOperation = children[i];\r\n            for (j = 0; j < superchildren.length; j++){\r\n                let superchild: LOperation = superchildren[j];\r\n                if (op.name !== superchild.name) continue;\r\n                if (op._canOverride(superchild) || op._canPolymorph(superchild)) continue;\r\n                output.reason = 'Marked homonymous operations cannot override nor polymorph each others.';\r\n                setTimeout( () => {\r\n                    op._mark(true, superchild, 'override'); //  mark op && superchildren\r\n                    setTimeout( () => { op._mark(false, superchild, 'override'); }, 3000); // unmark\r\n                }, 1);\r\n                return false;\r\n            }\r\n        }\r\n        return true; }\r\n\r\n    private _isExtending(context: Context, superclass: LClass, orEqual: boolean = true): boolean {\r\n        if (!superclass) return false;\r\n        return this.get_superclasses(context, orEqual).includes(superclass); }\r\n\r\n    private add_Extends(context: Context, superclass: LClass, force: boolean = false): boolean {\r\n        let out: {reason: string, allTargetSuperClasses: LClass[]} = {reason: '', allTargetSuperClasses: []};\r\n        const thiss: LClass = context.proxyObject;\r\n        if (!force && !this._canExtend(context, superclass, out)) {  return false; }\r\n        SetFieldAction.new(thiss.__raw, 'extends', [superclass.id], '+=', true);\r\n        SetFieldAction.new(superclass.__raw, 'extendedBy', [thiss.id], '+=', true);\r\n        // const extendChildren: LClass[] =  [thiss, ...thiss.superclasses];\r\n        // console.log('calculateViolationsExtend children:'  + extendChildren, this);\r\n        // for (let extChild of extendChildren) { extChild._checkViolations(false); } // after instances have their meta-class changed, they might need to change shape or values.\r\n        return true; }\r\n\r\n    unsetExtends(context: Context, superclass: LClass): void {\r\n        if (!superclass) return;\r\n        console.log('UnsetExtend:', context);\r\n        // todo: when Object is loaded in m3, set him there for easy access.\r\n        //  if (superclass.id === LClass.genericObjectid) { Log.w(true, 'Cannot un-extend \"Object\"'); return; }\r\n        const thiss: LClass = context.proxyObject;\r\n        let index: number = thiss.extends.indexOf(superclass);\r\n        if (index < 0) return;\r\n\r\n        let newextends = thiss.extends.map(l => l.id);\r\n        let newextendedBy = superclass.extendedBy.map(l => l.id);\r\n        U.arrayRemoveAll(newextends, superclass.id)\r\n        U.arrayRemoveAll(newextendedBy, thiss.id)\r\n        SetFieldAction.new(thiss, 'extends', (newextends), '', true); // -=\r\n        SetFieldAction.new(superclass, 'extendedBy', (newextendedBy), '', true); // -=\r\n        // todo: update instances for (i = 0; i < thiss.instances.length; i++) { thiss.instances[i].unsetExtends(superclass); }\r\n        // todo: remove extend edge? here?\r\n\r\n        // todo: check violations\r\n        // const extendedby: LClass[] = [thiss, ...thiss.allSubClasses];\r\n        // for (i = 0; i < extendedby.length; i++) { extendedby[i].checkViolations(true); }\r\n    }\r\n\r\n    public instance(): DObject { return this.cannotCall('instance'); }\r\n    /*private get_instance_old(context: Context): () => DObject {\r\n        return () => {\r\n            const dClass: DClass = context.data;\r\n            const lClass: LClass = LClass.from(dClass);\r\n            const dObject = DObject.new(lClass.name.toLowerCase());\r\n            CreateElementAction.new(dObject);\r\n            BEGIN()\r\n            SetFieldAction.new(dObject, 'instanceof', dClass.id, '', true);\r\n            SetFieldAction.new(dClass, 'instances', dObject.id, '+=', true);\r\n\r\n            let father: LClass|undefined = lClass;\r\n            while(father) {\r\n                for(let dFeature of [...father.attributes, ...father.references]) {\r\n                    const dValue = DValue.new(dFeature.name); dValue.value = [U.initializeValue(dFeature.type)];\r\n                    CreateElementAction.new(dValue);\r\n\r\n                    SetFieldAction.new(dValue, 'father', dObject.id, '', true);\r\n                    SetFieldAction.new(dValue, 'instanceof', dFeature.id, '', true);\r\n                    SetFieldAction.new(dFeature, 'instances', dValue.id, '+=', true);\r\n                    SetFieldAction.new(dObject, 'features', dValue.id, '+=', true);\r\n\r\n                }\r\n                father = (father.extends.length > 0) ? father.extends[0] : undefined;\r\n            }\r\n            END()\r\n            return dObject;\r\n        };\r\n    }*/\r\n\r\n}\r\nRuntimeAccessibleClass.set_extend(DClassifier, DClass);\r\nRuntimeAccessibleClass.set_extend(LClassifier, LClass);\r\n@RuntimeAccessible('DDataType')\r\nexport class DDataType extends DPointerTargetable { // extends DClassifier\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LDataType;\r\n    // static logic: typeof LDataType;\r\n    // static structure: typeof DDataType;\r\n\r\n    // inherit redefine\r\n    // instanceClass: EJavaClass // ?\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n    id!: Pointer<DDataType, 1, 1, LDataType>;\r\n    instanceClassName!: string;\r\n    parent: Pointer<DPackage, 0, 'N', LPackage> = [];\r\n    father!: Pointer<DPackage, 1, 1, LPackage>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    defaultValue!: Pointer<DObject, 1, 1, LObject>[] | string[];\r\n    // personal\r\n    serializable: boolean = true;\r\n    // usedBy: Pointer<DAttribute, 0, 'N', LAttribute> = [];\r\n\r\n\r\n    public static new(name?: DNamedElement[\"name\"], father?: Pointer, persist: boolean = true): DDataType {\r\n        Log.exx(\"DDataType is abstract, cannot instantiate\");\r\n        return null as any;\r\n        // if (!name) name = this.defaultname(\"datatype_\", father);\r\n        // return new Constructors(new DDataType('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DClassifier().DDataType().end();\r\n    }\r\n}\r\n\r\n@Abstract\r\n@RuntimeAccessible('LDataType')\r\nexport class LDataType<Context extends LogicContext<DDataType> = any, C extends Context = Context> extends LClassifier { // extends DClassifier\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DDataType;\r\n    id!: Pointer<DDataType, 1, 1, LDataType>;\r\n    // static singleton: LDataType;\r\n    // static logic: typeof LDataType;\r\n    // static structure: typeof DDataType;\r\n\r\n    // inherit redefine\r\n    // instanceClass: EJavaClass // ?\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n    instanceClassName!: string;\r\n    parent!: LPackage[];\r\n    father!: LPackage;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    defaultValue!: LObject[] | string[];\r\n    isPrimitive!: false;\r\n    isClass!: false;\r\n    isEnum!: true;\r\n    // personal\r\n    serializable!: boolean;\r\n\r\n\r\n    protected get_serializable(context: Context): this[\"serializable\"] { return context.data.serializable; }\r\n    protected set_serializable(val: this[\"serializable\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'serializable', val);\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\nRuntimeAccessibleClass.set_extend(DClassifier, DDataType);\r\nRuntimeAccessibleClass.set_extend(LClassifier, LDataType);\r\n@RuntimeAccessible('DStructuralFeature')\r\nexport class DStructuralFeature extends DPointerTargetable { // DTypedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LStructuralFeature;\r\n    // static logic: typeof LStructuralFeature;\r\n    // static structure: typeof DStructuralFeature;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DStructuralFeature, 1, 1, LStructuralFeature>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    parent: Pointer<DClass, 0, 'N', LClass> = [];\r\n    father!: Pointer<DClass, 1, 1, LClass>;\r\n    name!: string;\r\n    type!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    // personal\r\n    instances: Pointer<DValue, 0, 'N', LValue> = [];\r\n    changeable: boolean = true;\r\n    volatile: boolean = true;\r\n    transient: boolean = false;\r\n    unsettable: boolean = false;\r\n    derived: boolean = false;\r\n    defaultValue!: (Pointer<DObject, 1, 1, LObject> | PrimitiveType)[];\r\n\r\n    public static new(name?: DNamedElement[\"name\"], type?: DTypedElement[\"type\"], father?: Pointer, persist: boolean = true): DStructuralFeature {\r\n        Log.exx(\"DStructuralFeature is abstract, cannot instantiate\");\r\n        return null as any;\r\n        // if (!name) name = this.defaultname(\"feature \", father);\r\n        // return new Constructors(new DStructuralFeature('dwc'), father, persist, undefined).DPointerTargetable().DModelElement().DNamedElement(name).DTypedElement(type).DStructuralFeature().end();\r\n    }\r\n    // getFeatureID(): number;\r\n    // getContainerClass(): EJavaClass\r\n}\r\n\r\n@Abstract\r\n@RuntimeAccessible('LStructuralFeature')\r\nexport class LStructuralFeature<Context extends LogicContext<DStructuralFeature> = any, C extends Context = Context>  extends LTypedElement { // DTypedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DStructuralFeature;\r\n    id!: Pointer<DStructuralFeature, 1, 1, LStructuralFeature>;\r\n    // static singleton: LStructuralFeature;\r\n    // static logic: typeof LStructuralFeature;\r\n    // static structure: typeof DStructuralFeature;\r\n\r\n    // inherit redefine\r\n    annotations!: LAnnotation[];\r\n    parent!: LClass[];\r\n    father!: LClass;\r\n    name!: string;\r\n    namespace!: string;\r\n    type!: LClassifier;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    // personal\r\n    instances!: LValue[];\r\n    changeable!: boolean;\r\n    volatile!: boolean;\r\n    transient!: boolean;\r\n    unsettable!: boolean;\r\n    derived!: boolean;\r\n    // defaultValueLiteral!: string;\r\n    defaultValue!: (LObject[] | PrimitiveType[]);\r\n    // getFeatureID(): number;\r\n    // getContainerClass(): EJavaClass\r\n\r\n    protected get_instances(context: Context): this[\"instances\"] {\r\n        return context.data.instances.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_instances(val: PackArr<this[\"instances\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'instances', list, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_changeable(context: Context): this[\"changeable\"] { return context.data.changeable; }\r\n    protected set_changeable(val: this[\"changeable\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'changeable', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_volatile(context: Context): this[\"volatile\"] { return context.data.volatile; }\r\n    protected set_volatile(val: this[\"volatile\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'volatile', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_transient(context: Context): this[\"transient\"] { return context.data.transient; }\r\n    protected set_transient(val: this[\"transient\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'transient', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_unsettable(context: Context): this[\"unsettable\"] { return context.data.unsettable; }\r\n    protected set_unsettable(val: this[\"unsettable\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'unsettable', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_derived(context: Context): this[\"derived\"] { return context.data.derived; }\r\n    protected set_derived(val: this[\"derived\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'derived', val);\r\n        return true;\r\n    }\r\n    /*\r\n        protected get_defaultValueLiteral(context: Context): this[\"defaultValueLiteral\"] { return context.data.defaultValueLiteral; }\r\n        protected set_defaultValueLiteral(val: this[\"defaultValueLiteral\"], context: Context): boolean {\r\n            SetFieldAction.new(context.data, 'defaultValueLiteral', val, \"\", false);\r\n            return true;\r\n        }*/\r\n}\r\nRuntimeAccessibleClass.set_extend(DTypedElement, DStructuralFeature);\r\nRuntimeAccessibleClass.set_extend(LTypedElement, LStructuralFeature);\r\n\r\n@Instantiable // DValue\r\n@Leaf\r\n@RuntimeAccessible('DReference')\r\nexport class DReference extends DPointerTargetable { // DStructuralFeature\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LReference;\r\n    // static logic: typeof LReference;\r\n    // static structure: typeof DReference;\r\n\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DReference, 1, 1, LReference>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    type!: Pointer<DClass, 1, 1, LClass>;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    changeable: boolean = true;\r\n    volatile: boolean = true;\r\n    transient: boolean = false;\r\n    unsettable: boolean = false;\r\n    derived: boolean = false;\r\n    defaultValueLiteral: string = '';\r\n    parent: Pointer<DClass, 0, 'N', LClass> = [];\r\n    father!: Pointer<DClass, 1, 1, LClass>;\r\n    instances: Pointer<DValue, 0, 'N', LValue> = [];\r\n    defaultValue!: Pointer<DObject, 1, 1, LObject>[];\r\n\r\n    // personal\r\n    containment: boolean = false;\r\n    container: boolean = false; // ?\r\n    resolveProxies: boolean = true; // ?\r\n    opposite?: Pointer<DReference>;\r\n    target: Pointer<DClass, 0, 'N', LClass> = [];\r\n    edges: Pointer<DEdge, 0, 'N', LEdge> = [];\r\n\r\n    public static new(name?: DReference[\"name\"], type?: DReference[\"type\"], father?: DReference[\"father\"], persist: boolean = true): DReference {\r\n        if (!type) type = father // default type is self-reference\r\n        if (!name) name = this.defaultname(\"ref_\", father);\r\n        return new Constructors(new DReference('dwc'), father, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DStructuralFeature().DReference().end();\r\n    }\r\n\r\n    static new2(setter: Partial<ObjectWithoutPointers<DReference>>, father: DReference[\"father\"], type?: DReference[\"type\"], name?: DReference[\"name\"]): DReference {\r\n        if (!name) name = this.defaultname((name || \"ref_\"), father);\r\n        return new Constructors(new DReference('dwc'), father, true, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DStructuralFeature().DReference()\r\n            .end((d) => { Object.assign(d, setter); });\r\n    }\r\n\r\n    static new3(a: Partial<ReferencePointers>, callback: undefined | ((d: DReference, c: Constructors) => void), persist: boolean = true): DReference {\r\n        if (!a.name) a.name = this.defaultname(\"ref_\", a.father);\r\n        return new Constructors(new DReference('dwc'), a.father, persist, undefined, a.id).DPointerTargetable().DModelElement()\r\n            .DPointerTargetable().DModelElement().DNamedElement(a.name)\r\n            .DTypedElement(a.type).DStructuralFeature().DReference()\r\n            .end(callback);\r\n    }\r\n\r\n}\r\n\r\n@Instantiable // LValue\r\n@Leaf\r\n@RuntimeAccessible('LReference')\r\nexport class LReference<Context extends LogicContext<DReference> = any, C extends Context = Context, D extends DReference = DReference>  extends LStructuralFeature {\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DReference;\r\n    id!: Pointer<DReference, 1, 1, LReference>;\r\n    // static singleton: LReference;\r\n    // static logic: typeof LReference;\r\n    // static structure: typeof DReference;\r\n\r\n    // inherit redefine\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    type!: LClass;\r\n    ordered!: boolean;\r\n    unique!: boolean;\r\n    lowerBound!: number;\r\n    upperBound!: number;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    changeable!: boolean;\r\n    volatile!: boolean;\r\n    transient!: boolean;\r\n    unsettable!: boolean;\r\n    derived!: boolean;\r\n    defaultValueLiteral!: string;\r\n    parent!: LClass[];\r\n    father!: LClass;\r\n    instances!: LValue[];\r\n    defaultValue!: LObject[];\r\n\r\n    // personal\r\n    containment!: boolean;\r\n    container!: boolean; //??\r\n    resolveProxies!: boolean;\r\n    opposite?: LReference;\r\n    // target!: LClass[]; replaced by type\r\n    edges!: LEdge[];\r\n\r\n\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const model: GObject = {};\r\n        const d = context.data;\r\n        const l = context.proxyObject;\r\n        model[ECoreReference.xsitype] = 'ecore:EReference';\r\n        model[ECoreReference.eType] = l.type.typeEcoreString;\r\n        model[ECoreReference.namee] = d.name;\r\n        if (d.lowerBound != null && !isNaN(+d.lowerBound)) { model[ECoreReference.lowerbound] = +d.lowerBound; }\r\n        if (d.upperBound != null && !isNaN(+d.upperBound)) { model[ECoreReference.upperbound] = +d.upperBound; }\r\n        if (d.containment != null) { model[ECoreReference.containment] = d.containment; }\r\n        return model; }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LReference) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LReference = context.proxyObject.father.addReference(context.data.name, context.data.type);\r\n            let de: D = le.__raw as D;\r\n\r\n            de.many = context.data.many;\r\n            de.lowerBound = context.data.lowerBound;\r\n            de.upperBound = context.data.upperBound;\r\n            de.ordered = context.data.ordered;\r\n            de.required = context.data.required;\r\n            de.unique = context.data.unique;\r\n            de.changeable = context.data.changeable;\r\n            de.container = context.data.container;\r\n            de.containment = context.data.containment;\r\n            de.defaultValueLiteral = context.data.defaultValueLiteral;\r\n            de.derived = context.data.derived;\r\n            de.transient = context.data.transient;\r\n            de.unsettable = context.data.unsettable;\r\n            de.volatile = context.data.unsettable;\r\n            let we: WReference = le as any;\r\n            we.opposite = context.data.opposite || undefined;\r\n            we.defaultValue = context.data.defaultValue;\r\n            we.type = context.data.type;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            // we.target = deep ? context.proxyObject.target.map(lchild => lchild.duplicate(deep).id) : context.data.target;\r\n            END()\r\n            return le; }\r\n    }\r\n\r\n    protected set_type(val: Pack1<this[\"type\"]>, context: Context): boolean { return super.set_type(val, context); }\r\n\r\n    public addClass(name?: DClass[\"name\"], isInterface?: DClass[\"interface\"], isAbstract?: DClass[\"abstract\"], isPrimitive?: DClass[\"isPrimitive\"],\r\n                    isPartial?: DClass[\"partial\"], partialDefaultName?: DClass[\"partialdefaultname\"]): LClass {\r\n        return this.cannotCall(\"LReference.addClass\"); }\r\n    protected get_addClass(context: Context): this[\"addClass\"] {\r\n        return (name?: DClass[\"name\"], isInterface?: DClass[\"interface\"], isAbstract?: DClass[\"abstract\"], isPrimitive?: DClass[\"isPrimitive\"],\r\n                isPartial?: DClass[\"partial\"], partialDefaultName?: DClass[\"partialdefaultname\"]) => {\r\n            BEGIN()\r\n            let dclass = DClass.new(name, isInterface, isAbstract, isPrimitive, isPartial, partialDefaultName, context.proxyObject.package!.id, true);\r\n            // SetFieldAction.new(context.data.id, \"type\", dclass.id);\r\n            this.set_type(dclass.id as any, context);\r\n            END();\r\n            return LPointerTargetable.fromD(dclass);\r\n        } }\r\n\r\n\r\n    protected get_containment(context: Context): this[\"containment\"] { return context.data.containment; }\r\n    protected set_containment(val: this[\"containment\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'containment', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_container(context: Context): this[\"container\"] { return context.data.container; }\r\n    protected set_container(val: this[\"container\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'container', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_resolveProxies(context: Context): this[\"resolveProxies\"] { return context.data.resolveProxies; }\r\n    protected set_resolveProxies(val: this[\"resolveProxies\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'resolveProxies', val);\r\n        return true;\r\n    }\r\n\r\n    protected get_opposite(context: Context): this[\"opposite\"] { return context.data.opposite && LPointerTargetable.from(context.data.opposite); }\r\n    protected set_opposite(val: Pack<LReference | undefined>, context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'opposite', Pointers.from(val) as any as LAnnotation[\"id\"], \"\", true);\r\n        return true;\r\n    }\r\n    /*\r\n        /// todo: why this exist?  why not type?\r\n        protected get_target(context: Context): this[\"target\"] { return context.data.target.map(pointer => LPointerTargetable.from(pointer)); }\r\n        protected set_target(val: PackArr<this[\"target\"]>, context: Context): boolean {\r\n            const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n            SetFieldAction.new(context.data, 'target', list, \"\", true);\r\n            return true;\r\n        }*/\r\n\r\n    protected get_defaultValue(context: Context): this[\"defaultValue\"] { return LPointerTargetable.fromPointer(context.data.defaultValue); }\r\n    protected set_defaultValue(val: PackArr<this[\"defaultValue\"]>, context: Context): boolean {\r\n        // @ts-ignore\r\n        if (!val) (val) = []; else if (!Array.isArray(val)) val = [val];\r\n        let ptrs = Pointers.from(val);\r\n        SetFieldAction.new(context.data, 'defaultValue', ptrs, '', false);\r\n        return true; }\r\n\r\n    protected get_edges(context: Context): this[\"edges\"] {\r\n        return context.data.edges.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n    protected set_edges(val: PackArr<this[\"edges\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        SetFieldAction.new(context.data, 'edges', list, \"\", true);\r\n        return true;\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DStructuralFeature, DReference);\r\nRuntimeAccessibleClass.set_extend(LStructuralFeature, LReference);\r\nfunction has_opposite(oppositename: string, ...comments: string[]): any {\r\n    // return (c:Constructor, key:string, ):any =>{}\r\n}\r\nfunction obsolete_attribute(...comments: string[]) {\r\n    return undefined as any; // function(c:Constructor, key:string,): any {}\r\n}\r\n\r\n@Leaf\r\n@RuntimeAccessible('DAttribute')\r\nexport class DAttribute extends DPointerTargetable { // DStructuralFeature\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LAttribute;\r\n    // static logic: typeof LAttribute;\r\n    // static structure: typeof DAttribute;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DAttribute, 1, 1, LAttribute>;\r\n    // @has_opposite(\"father\")\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    type!: Pointer<DClassifier, 1, 1, LClassifier>;\r\n    ordered: boolean = true;\r\n    unique: boolean = true;\r\n    lowerBound: number = 0;\r\n    upperBound: number = 1;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    changeable: boolean = true;\r\n    volatile: boolean = true;\r\n    transient: boolean = false;\r\n    unsettable: boolean = false;\r\n    derived: boolean = false;\r\n    defaultValueLiteral: string = '';\r\n    //@obsolete_attribute()\r\n    parent: Pointer<DClass, 0, 'N', LClass> = [];\r\n\r\n    //@has_opposite(\"attributes\")\r\n    father!: Pointer<DClass, 1, 1, LClass>;\r\n\r\n    //@has_opposite(\"instanceof\")\r\n    instances: Pointer<DValue, 0, 'N', LValue> = [];\r\n    defaultValue!: PrimitiveType[];\r\n\r\n    // personal\r\n    isID: boolean = false; // ? exist in ecore as \"iD\" ?\r\n    isIoT: boolean = false;\r\n\r\n    public static new(name?: DAttribute[\"name\"], type?: DAttribute[\"type\"], father?: DAttribute[\"father\"], persist: boolean = true): DAttribute {\r\n        if (!name) name = this.defaultname(\"attr_\", father);\r\n        if (!type) type = LPointerTargetable.from(Selectors.getFirstPrimitiveTypes()).id; // default type as string\r\n        return new Constructors(new DAttribute('dwc'), father, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DStructuralFeature().DAttribute().end();\r\n    }\r\n    static new2(setter: Partial<ObjectWithoutPointers<DReference>>, father: DAttribute[\"father\"], type?: DAttribute[\"type\"], name?: DAttribute[\"name\"]): DAttribute {\r\n        if (!name) name = this.defaultname((name || \"ref_\"), father);\r\n        return new Constructors(new DAttribute('dwc'), father, true, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DTypedElement(type).DStructuralFeature().DAttribute()\r\n            .end((d) => { Object.assign(d, setter); });\r\n    }\r\n    static new3(a: Partial<AttributePointers>, callback: undefined | ((d: DAttribute, c: Constructors) => void), persist: boolean = true): DAttribute {\r\n        if (!a.name) a.name = this.defaultname(\"attr_\", a.father);\r\n        return new Constructors(new DAttribute('dwc'), a.father, persist, undefined, a.id)\r\n            .DPointerTargetable().DModelElement().DNamedElement(a.name)\r\n            .DTypedElement(a.type).DStructuralFeature().DAttribute()\r\n            .end(callback);\r\n    }\r\n}\r\n\r\n\r\n@Leaf\r\n@Instantiable // (LValue)\r\n@RuntimeAccessible('LAttribute')\r\nexport class LAttribute <Context extends LogicContext<DAttribute> = any, C extends Context = Context, D extends DAttribute = DAttribute> extends LStructuralFeature { // DStructuralFeature\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DAttribute;\r\n    id!: Pointer<DAttribute, 1, 1, LAttribute>;\r\n    // static singleton: LAttribute;\r\n    // static logic: typeof LAttribute;\r\n    // static structure: typeof DAttribute;\r\n\r\n    // inherit redefine\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    type!: LClassifier;\r\n    ordered!: boolean;\r\n    unique!: boolean;\r\n    lowerBound!: number;\r\n    upperBound!: number;\r\n    many!: boolean;\r\n    required!: boolean;\r\n    changeable!: boolean;\r\n    volatile!: boolean;\r\n    transient!: boolean;\r\n    unsettable!: boolean;\r\n    derived!: boolean;\r\n    // defaultValueLiteral!: string;\r\n    defaultValue!: PrimitiveType[];\r\n    parent!: LClass[];\r\n    father!: LClass;\r\n    instances!: LValue[];\r\n\r\n    // personal\r\n    isID: boolean = false; // ? exist in ecore as \"iD\" ?\r\n    isIoT: boolean = false;\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const model = {};\r\n        const d = context.data;\r\n        const l = context.proxyObject;\r\n        EcoreParser.write(model, ECoreAttribute.xsitype, 'ecore:EAttribute');\r\n        EcoreParser.write(model, ECoreAttribute.eType, l.type.typeEcoreString);\r\n        EcoreParser.write(model, ECoreAttribute.namee, d.name);\r\n        EcoreParser.write(model, ECoreAttribute.lowerbound, '' + d.lowerBound);\r\n        EcoreParser.write(model, ECoreAttribute.upperbound, '' + d.upperBound);\r\n        return model; }\r\n\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LAttribute) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LAttribute = context.proxyObject.father.addAttribute(context.data.name, context.data.type);\r\n            let de: D = le.__raw as D;\r\n            de.many = context.data.many;\r\n            de.lowerBound = context.data.lowerBound;\r\n            de.upperBound = context.data.upperBound;\r\n            de.ordered = context.data.ordered;\r\n            de.required = context.data.required;\r\n            de.unique = context.data.unique;\r\n            de.changeable = context.data.changeable;\r\n            de.defaultValue = context.data.defaultValue;\r\n            de.defaultValueLiteral = context.data.defaultValueLiteral;\r\n            de.derived = context.data.derived;\r\n            de.transient = context.data.transient;\r\n            de.unsettable = context.data.unsettable;\r\n            de.volatile = context.data.volatile;\r\n            de.isID = context.data.isID;\r\n            de.isIoT = context.data.isIoT;\r\n            let we: WAttribute = le as any;\r\n            we.type = context.data.type;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            END()\r\n            return le; }\r\n    }\r\n\r\n    public addEnum(...p:Parameters<this[\"addEnumerator\"]>): LEnumerator { return this.addEnumerator(...p); }\r\n    protected get_addEnum(context: Context): this[\"addEnumerator\"] { return this.get_addEnumerator(context); }\r\n    public addEnumerator(name?: DEnumerator[\"name\"], father?: DEnumerator[\"father\"]): LEnumerator { return this.cannotCall(\"Attribute.addEnumerator\"); }\r\n    protected get_addEnumerator(context: Context): this[\"addEnumerator\"] {\r\n        return (name?: DEnumerator[\"name\"], father?: DEnumerator[\"father\"]) => LPointerTargetable.fromD(DEnumerator.new(name, context.proxyObject.package?.id, true)); }\r\n\r\n    protected get_isID(context: Context): this[\"isID\"] { return context.data.isID; }\r\n    protected set_isID(val: this[\"isID\"], context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'isID', val);\r\n        return true;\r\n    }\r\n    protected get_isIoT(context: Context): this[\"isIoT\"] { return context.data.isIoT; }\r\n    protected set_isIoT(val: this[\"isIoT\"], context: Context): boolean {\r\n        TRANSACTION(() => {\r\n            for(const value of context.proxyObject.instances) {\r\n                SetFieldAction.new(value, 'topic', '', '', false);\r\n            }\r\n            SetFieldAction.new(context.data, 'isIoT', val);\r\n        })\r\n        return true;\r\n    }\r\n    protected get_defaultValue(context: Context): this[\"defaultValue\"] { return context.data.defaultValue; }\r\n    protected set_defaultValue(val: unArr<this[\"defaultValue\"]>, context: Context): boolean {\r\n        // @ts-ignore\r\n        if (!val) (val) = []; else if (!Array.isArray(val)) val = [val];\r\n        SetFieldAction.new(context.data, 'defaultValue', val, '', false);\r\n        return true; }\r\n\r\n}\r\nRuntimeAccessibleClass.set_extend(DStructuralFeature, DAttribute);\r\nRuntimeAccessibleClass.set_extend(LStructuralFeature, LAttribute);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DEnumLiteral')\r\nexport class DEnumLiteral extends DPointerTargetable { // DNamedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LAttribute;\r\n    // static logic: typeof LAttribute;\r\n    // static structure: typeof DAttribute;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DEnumLiteral, 1, 1, LEnumLiteral>;\r\n    parent: Pointer<DEnumerator, 0, 'N', LEnumerator> = [];\r\n    father!: Pointer<DEnumerator, 1, 1, LEnumerator>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    // personal\r\n    value!: number;\r\n    // ordinal: number=1; replaced by value\r\n    literal!: string;\r\n\r\n    public static new(name?: DNamedElement[\"name\"], value?: DEnumLiteral[\"value\"], father?: Pointer, persist: boolean = true): DEnumLiteral { //vv4\r\n        if (!name) name = this.defaultname(\"literal \", father);\r\n        return new Constructors(new DEnumLiteral('dwc'), father, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DEnumLiteral(value).end();\r\n    }\r\n    static new2(setter: Partial<ObjectWithoutPointers<DEnumLiteral>>, father: DEnumLiteral[\"father\"], name?: DEnumLiteral[\"name\"]): DEnumLiteral {\r\n        if (!name) name = this.defaultname(\"literal \", father);\r\n        return new Constructors(new DEnumLiteral('dwc'), father, true, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DEnumLiteral()\r\n            .end((d) => { Object.assign(d, setter); });\r\n    }\r\n    static new3(a: Partial<LiteralPointers>, callback: undefined | ((d: DEnumLiteral, c: Constructors) => void), persist: boolean = true): DEnumLiteral {\r\n        if (!a.name) a.name = this.defaultname(\"literal_\", a.father);\r\n        return new Constructors(new DEnumLiteral('dwc'), a.father, persist, undefined, a.id)\r\n            .DPointerTargetable().DModelElement().DNamedElement(a.name)\r\n            .DEnumLiteral()\r\n            .end(callback);\r\n    }\r\n}\r\n\r\n@Leaf\r\n@RuntimeAccessible('LEnumLiteral')\r\nexport class LEnumLiteral<Context extends LogicContext<DEnumLiteral> = any, C extends Context = Context, D extends DEnumLiteral = DEnumLiteral>  extends LNamedElement { // DNamedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DEnumLiteral;\r\n    id!: Pointer<DEnumLiteral, 1, 1, LEnumLiteral>;\r\n    // static singleton: LAttribute;\r\n    // static logic: typeof LAttribute;\r\n    // static structure: typeof DAttribute;\r\n\r\n    // inherit redefine\r\n    parent!: LEnumerator[];\r\n    father!: LEnumerator;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    // personal\r\n    value!: this[\"ordinal\"];\r\n    ordinal!: number;\r\n    literal!: string;\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: Json = {};\r\n        const d = context.data;\r\n        json[EcoreLiteral.value] = d.value;\r\n        json[EcoreLiteral.literal] = d.literal;\r\n        json[EcoreLiteral.namee] = d.name;\r\n        return json; }\r\n\r\n    public generateEcoreJsonM1(): this[\"ordinal\"] { return this.cannotCall(\"GenerateEcoreJsonM1\"); }\r\n    protected get_generateEcoreJsonM1(context: Context): () => this[\"ordinal\"] { return this.impl_generateEcoreJsonM1(context); }\r\n    protected impl_generateEcoreJsonM1(context: Context): () => this[\"ordinal\"] {\r\n        // loopDetectionObj[context.data.id] = context.data; no loop detection here, the same literal can be exported multiple times in m1\r\n        // return context.data.literal;\r\n        // return context.data.name;\r\n        return () => context.data.value; }\r\n\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LEnumLiteral) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LEnumLiteral = context.proxyObject.father.addLiteral(context.data.name, context.data.value);\r\n            let de: D = le.__raw as D;\r\n            de.literal = context.data.literal;\r\n            de.value = context.data.value;\r\n            let we: WEnumLiteral = le as any;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            END()\r\n            return le; }\r\n    }\r\n\r\n\r\n    protected get_ordinal(context: Context): this[\"ordinal\"] { return this.get_value(context); }\r\n    protected set_ordinal(val: this[\"ordinal\"], context: Context): boolean { return this.set_value(val, context); }\r\n\r\n    protected get_value(context: Context): this[\"value\"] {\r\n        let ordinalAssumedByPosition = true; // per ottimizzazione forse è disattivabile\r\n        if (!ordinalAssumedByPosition) return context.data.value || 0;\r\n        return context.proxyObject.father.ordinals.map( o => o?.id).indexOf(context.data.id);\r\n    }\r\n    protected set_value(val: this[\"value\"], context: Context): boolean {\r\n        if (val === context.data.value) return true;\r\n        let ordinals = context.proxyObject.father.ordinals;\r\n        if (ordinals[val]) {\r\n            Log.e(true, \"that ordinal place is already taken by \" + ordinals[val].name, {sameOrdinalLit:ordinals[val], ordinals, thiss:context.data});\r\n            return true; }\r\n        return SetFieldAction.new(context.data, 'value', val); }\r\n    /*\r\n        protected get_literal(context: Context): this[\"literal\"] { return context.data.literal; }\r\n        protected set_literal(val: this[\"literal\"], context: Context): boolean {\r\n            return SetFieldAction.new(context.data, 'literal', val, '', false); }*/\r\n    protected get_literal(context: Context): this[\"literal\"] { return context.data.name; }\r\n    protected set_literal(val: this[\"literal\"], context: Context): boolean {\r\n        if (val === context.data.name) return true;\r\n        return SetFieldAction.new(context.data, 'name', val, '', false); }\r\n\r\n\r\n}\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DEnumLiteral);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LEnumLiteral);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DEnumerator')\r\nexport class DEnumerator extends DPointerTargetable { // DDataType\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LEnumerator;\r\n    // static logic: typeof LEnumerator;\r\n    // static structure: typeof DEnumerator;\r\n\r\n    // inherit redefine\r\n    // instanceClass: EJavaClass // ?\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n    id!: Pointer<DEnumerator, 1, 1, LEnumerator>;\r\n    instanceClassName!: string;\r\n    parent: Pointer<DPackage, 0, 'N', LPackage> = [];\r\n    father!: Pointer<DPackage, 1, 1, LPackage>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    defaultValue!: string[];\r\n    serializable: boolean = true;\r\n    // usedBy: Pointer<DAttribute, 0, 'N', LAttribute> = []; obsolete?\r\n    // personal\r\n    literals: Pointer<DEnumLiteral, 0, 'N', LEnumLiteral> = [];\r\n\r\n    public static new(name?: DNamedElement[\"name\"], father?: DEnumerator[\"father\"], persist: boolean = true): DEnumerator {\r\n        if (!name) name = this.defaultname(\"enum \", father);\r\n        return new Constructors(new DEnumerator('dwc'), father, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DEnumerator().end();\r\n    }\r\n    static new2(setter: Partial<ObjectWithoutPointers<DEnumerator>>, father: DEnumerator[\"father\"], name?: DEnumerator[\"name\"]): DEnumerator {\r\n        if (!name) name = this.defaultname(\"enum \", father);\r\n        return new Constructors(new DEnumerator('dwc'), father, true, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DEnumerator().end((d) => { Object.assign(d, setter); });\r\n    }\r\n\r\n    static new3(a: Partial<EnumPointers>, callback: undefined | ((d: DEnumerator, c: Constructors) => void), persist: boolean = true): DEnumerator {\r\n        if (!a.name) a.name = this.defaultname(\"enum \", a.father);\r\n        return new Constructors(new DEnumerator('dwc'), a.father, persist, undefined, a.id)\r\n            .DPointerTargetable().DModelElement().DNamedElement(a.name)\r\n            .DEnumerator()\r\n            .end(callback);\r\n    }\r\n}\r\n\r\n@Node\r\n@RuntimeAccessible('LEnumerator')\r\nexport class LEnumerator<Context extends LogicContext<DEnumerator> = any, C extends Context = Context, D extends DEnumerator = DEnumerator> extends LDataType { // DDataType\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DEnumerator;\r\n    id!: Pointer<DEnumerator, 1, 1, LEnumerator>;\r\n    // static singleton: LEnumerator;\r\n    // static logic: typeof LEnumerator;\r\n    // static structure: typeof DEnumerator;\r\n\r\n    // inherit redefine\r\n    // instanceClass: EJavaClass // ?\r\n    // isInstance(object: EJavaObject): boolean; ?\r\n    // getClassifierID(): number;\r\n    instanceClassName!: string;\r\n    parent!: LPackage [];\r\n    father!: LPackage;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    defaultValue!:string[];\r\n    serializable!: boolean;\r\n    // usedBy!: LAttribute[];\r\n    isPrimitive!: false;\r\n    isClass!: false;\r\n    isEnum!: true;\r\n    // personal\r\n    literals!: LEnumLiteral[];\r\n    ordinals!: LEnumLiteral[]; // literal array ordered by ordinal number\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: Json = {};\r\n        let d = context.data;\r\n        if (d.instanceClassName) json[ECoreEnum.instanceTypeName] = d.instanceClassName;\r\n        json[ECoreEnum.xsitype] = 'ecore:EEnum';\r\n        json[ECoreEnum.namee] = d.name;\r\n        json[ECoreEnum.serializable] = d.serializable ? \"true\" : \"false\";\r\n        json[ECoreEnum.eLiterals] = context.proxyObject.literals.map(l => l.generateEcoreJson(loopDetectionObj));\r\n        return json; }\r\n\r\n    public duplicate(deep: boolean = true): this {\r\n        return this.cannotCall( ((this.constructor as typeof RuntimeAccessibleClass).cname || this.constructor.name) + \"duplicate()\"); }\r\n    protected get_duplicate(context: Context): ((deep?: boolean) => LEnumerator) {\r\n        return (deep: boolean = false) => {\r\n            BEGIN()\r\n            let le: LEnumerator = context.proxyObject.father.addEnumerator(context.data.name);\r\n            let de: D = le.__raw as D;\r\n            de.defaultValue = context.data.defaultValue;\r\n            de.serializable = context.data.serializable;\r\n            let we: WEnumerator = le as any;\r\n            we.annotations = deep ? context.proxyObject.annotations.map(lchild => lchild.duplicate(deep).id) : context.data.annotations;\r\n            we.literals = deep ? context.proxyObject.literals.map(lchild => lchild.duplicate(deep).id) : context.data.literals;\r\n            END()\r\n            return le; }\r\n    }\r\n\r\n\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | DEnumLiteral, 1, 'N'> {\r\n        return [...super.get_children_idlist(context) as Pointer<DAnnotation | DEnumLiteral, 1, 'N'>, ...context.data.literals]; }\r\n\r\n    public addLiteral(name?: DEnumLiteral[\"name\"], value?: DEnumLiteral[\"value\"]): LEnumLiteral { return this.cannotCall(\"addLiteral\"); }\r\n    protected get_addLiteral(context: Context): this[\"addLiteral\"] {\r\n        return (name?: DEnumLiteral[\"name\"], value?: DEnumLiteral[\"value\"]) => LPointerTargetable.fromD(DEnumLiteral.new(name, value, context.data.id, true)); }\r\n\r\n    protected get_literals(context: Context): this[\"literals\"] {\r\n        return context.data.literals.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        }); }\r\n\r\n    protected set_literals(val: PackArr<this[\"literals\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.literals;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'literals', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true; }\r\n\r\n    protected get_ordinals(context: Context): this[\"ordinals\"]{\r\n        let ret: LEnumLiteral[] = [];\r\n        let literals: LEnumLiteral[] = context.proxyObject.literals;\r\n        let dliterals: DEnumLiteral[] = literals.map(d => d.__raw);\r\n        /*\r\n        if it happens like:   second=2, third, fourth=4, fifth=3, sixth.(six would be 4 but 4 already exist)\r\n        there are 2 problems:\r\n        1) [3] is already occupied by third, but fith is correctly being the only one explicitly declaring his ordinal 3.\r\n           fixed by first assigning all known ordinals, then starting with the assumed ordinals.\r\n        2) sixth would get in position fourth, but that is already occupied\r\n         */\r\n\r\n        // adressing 1)\r\n        for (let i = 0; i < dliterals.length; i++) {\r\n            let v = dliterals[i].value;\r\n            if (v) { ret[v] = literals[i]; }\r\n        }\r\n\r\n        // setting assumed literals\r\n        let currentOrdinal = 0;\r\n        for (let i = 0; i < dliterals.length; i++) {\r\n            let v = dliterals[i].value;\r\n            if (v) { currentOrdinal = v; continue; }\r\n            while (ret[currentOrdinal]) currentOrdinal++; // adressing 2)\r\n            ret[currentOrdinal] = literals[i];\r\n        }\r\n        return ret;\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DDataType, DEnumerator);\r\nRuntimeAccessibleClass.set_extend(LDataType, LEnumerator);\r\n@RuntimeAccessible('DModelM1')\r\nexport class DModelM1 extends DNamedElement{\r\n    name!: string;\r\n    roots!: Pointer<DObject, 1, 'N', LObject> // no package ma LObjects[] (solo quelli isRoot)\r\n    children!: DModelM1[\"roots\"];\r\n}\r\n\r\n@RuntimeAccessible('LModelM1')\r\nexport class LModelM1 extends LNamedElement{\r\n    name!: string;\r\n    roots!: LObject[];\r\n    children!: LModelM1[\"roots\"];\r\n\r\n}\r\nRuntimeAccessibleClass.set_extend(DModelM1, DNamedElement);\r\nRuntimeAccessibleClass.set_extend(LModelM1, LNamedElement);\r\ntype DPrimitiveType = DClass;\r\ntype LPrimitiveType = LClass;\r\n\r\n\r\n// problema: o costringo l'utente a fare sempre .value per ricevere il valore invece dei metadati\r\n// oppure ritorno il valore da subito ma dal valore non posso accedere ai metadati (upperbound...) a meno che non trovi un altor sistema.\r\n\r\n// possibile fix: LValue.toString() che ritorna il .value\r\n\r\n\r\n\r\n\r\n\r\n@RuntimeAccessible('DModel')\r\nexport class DModel extends DNamedElement { // DNamedElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LModel;\r\n    // static logic: typeof LModel;\r\n    // static structure: typeof DModel;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DModel, 1, 1, LModel>;\r\n    parent: Pointer<DModelElement, 0, 'N', LModelElement> = [];\r\n    father!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n    // personal\r\n    packages: Pointer<DPackage, 0, 'N', LPackage> = [];\r\n    isMetamodel: boolean = true;\r\n    objects: Pointer<DObject, 0, 'N', LObject> = [];\r\n    models: Pointer<DModel, 0, 'N', LModel> = [];\r\n    instanceof?: Pointer<DModel>;\r\n\r\n    public static new(name?: DNamedElement[\"name\"], instanceoff?: DModel[\"instanceof\"], isMetamodel?: DModel[\"isMetamodel\"], persist: boolean = true): DModel {\r\n        let dmodels: DModel[] = Selectors.getAll(DModel, undefined, undefined, true, false);\r\n        let dmodelnames: string[] = dmodels.map((d: DModel) => d.name);\r\n        if (!name) name = this.defaultname(\"model_\", ((name: string) => dmodelnames.includes(name)));\r\n        return new Constructors(new DModel('dwc'), undefined, persist, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DModel(instanceoff, isMetamodel).end();\r\n    }\r\n    static new2(setter: Partial<ObjectWithoutPointers<DModel>>, name?: DModel[\"name\"], instanceoff?: DModel[\"instanceof\"]): DModel {\r\n        let dmodels: DModel[] = Selectors.getAll(DModel, undefined, undefined, true, false);\r\n        let dmodelnames: string[] = dmodels.map((d: DModel) => d.name);\r\n        if (!name) name = this.defaultname(\"model_\", ((name: string) => dmodelnames.includes(name)));\r\n        return new Constructors(new DModel('dwc'), undefined, true, undefined).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DModel(instanceoff).end((d) => { Object.assign(d, setter); });\r\n    }\r\n\r\n    static new3(a: Partial<ModelPointers>, callback: undefined | ((d: DModel, c: Constructors) => void), persist: boolean = true): DModel {\r\n        let dmodels: DModel[] = Selectors.getAll(DModel, undefined, undefined, true, false);\r\n        let dmodelnames: string[] = dmodels.map((d: DModel) => d.name);\r\n        if (!a.name) a.name = this.defaultname(\"model_\", ((name: string) => dmodelnames.includes(name)));\r\n        return new Constructors(new DModel('dwc'), a.father, persist, undefined, a.id)\r\n            .DPointerTargetable().DModelElement().DNamedElement(a.name)\r\n            .DModel(a.instanceof, !a.instanceof)\r\n            .end(callback);\r\n    }\r\n}\r\n\r\n@RuntimeAccessible('EdgeStarter')\r\nexport class EdgeStarter<T1=any, T2=any>{ // <T1 extends LPointerTargetable = LPointerTargetable, T2 extends LPointerTargetable = LPointerTargetable>{\r\n    start: LModelElement;\r\n    end: LModelElement;\r\n    startNode: LGraphElement;\r\n    endNode: LGraphElement;\r\n    startVertex: LVoidVertex;\r\n    endVertex: LVoidVertex;\r\n    startSize: GraphSize;\r\n    endSize: GraphSize;\r\n    startVertexSize: GraphSize;\r\n    endVertexSize: GraphSize;\r\n    otherEnds: LGraphElement[];\r\n    overlaps: boolean;\r\n    vertexOverlaps: boolean;\r\n    constructor(start: LModelElement, end: LModelElement, sn: LGraphElement, en: LGraphElement, otherPossibleEnds: LGraphElement[] = []) {\r\n        this.start = start;\r\n        this.end = end;\r\n        this.startNode = sn;\r\n        this.endNode = en;\r\n        this.otherEnds = otherPossibleEnds || end.nodes;\r\n        this.startSize = sn.outerSize;\r\n        this.endSize = en.outerSize;\r\n        this.startVertex = sn.vertex as any;\r\n        this.endVertex = en.vertex as any;\r\n        this.startVertexSize = this.startVertex === sn ? this.startSize : this.startVertex.outerSize;\r\n        this.endVertexSize = this.endVertex === en ? this.endSize : this.endVertex.outerSize;\r\n        this.overlaps = this.startSize?.isOverlapping(this.endSize);\r\n        this.vertexOverlaps = this.startVertexSize?.isOverlapping(this.endVertexSize);\r\n    }\r\n    static oneToMany<T1 extends LModelElement = LModelElement, T2 extends LModelElement = LModelElement>(start: T1, ends:T2[]): EdgeStarter<T1, T2>[] {\r\n        let sn = start.node;\r\n        if (!sn) return [];\r\n        let rett: (EdgeStarter | undefined)[] = ends.map( (e) => {\r\n            if(!e) return undefined;\r\n            let en = e.node;\r\n            return en ? new EdgeStarter(start, e, sn as LGraphElement, en) : undefined;\r\n        });\r\n        let ret: (EdgeStarter)[] = rett.filter<EdgeStarter>(function(e: EdgeStarter|undefined): e is EdgeStarter { return !!e });\r\n        // let ret: (EdgeStarter)[] = rett.filter<EdgeStarter>((e): (e is EdgeStarter) => { return !!e });\r\n        return ret;\r\n    }\r\n}\r\n\r\n@RuntimeAccessible('LModel')\r\nexport class LModel<Context extends LogicContext<DModel> = any, C extends Context = Context, D extends DModel = DModel> extends LNamedElement {\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DModel;\r\n    id!: Pointer<DModel, 1, 1, LModel>;\r\n    // static singleton: LModel;\r\n    // static logic: typeof LModel;\r\n    // static structure: typeof DModel;\r\n\r\n    // inherit redefine\r\n    parent!: LModel[];\r\n    father!: LModel;\r\n    annotations!: LAnnotation[];\r\n    name!: string;\r\n    namespace!: string;\r\n    // personal\r\n    isMetamodel!: boolean;\r\n\r\n    // Metamodel\r\n    packages!: LPackage[];\r\n    models!: LModel[];\r\n\r\n    // Model\r\n    instanceof?: LModel;\r\n    objects!: LObject[];\r\n    roots!: LObject[];\r\n\r\n    // utilities to go down in the tree (plural names)\r\n    enums!: LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>; // alias for enumerators\r\n    enumerators!: LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator>;\r\n    classes!: LClass[] & Dictionary<DocString<\"$name\">, LClass>;\r\n    operations!: LOperation[];\r\n    parameters!: LParameter[];\r\n    exceptions!: LClassifier[];\r\n    attributes!: LAttribute[];\r\n    references!: LReference[];\r\n    literals!: LEnumLiteral[];\r\n    values!: LValue[];\r\n    allSubAnnotations!: LAnnotation[];\r\n    allSubPackages!: LPackage[];\r\n    allSubObjects!: LObject[];\r\n    allSubValues!: LValue[];\r\n    suggestedEdges!: {extend: EdgeStarter[], reference:EdgeStarter[], packageDependencies: EdgeStarter[]}; //, model: EdgeStarter[], package:EdgeStarter[], class:EdgeStarter[]};\r\n    __info_of__suggestedEdges: Info = {type: 'Dictionary<\"extend\" | \"reference\" | \"packageDependencies\" | DmodelName, EdgeStarter[]>', txt: \"A map to access all possible kind of edges based on model data.\" +\r\n            \"<br/>extend and reference are the most commonly used for horizontal references (outside the containment tree schema).\" +\r\n            \"<br/>packageDependencies links packages using classes from other packages.\" +\r\n            // \"<br/>other keys are the names of container data types (mode, package, class, object...) from them to their childrens rendered as Nodes (vertical tree schema).\" +\r\n            // todo: implement the commented part as LGrahElement.vertexs.map(v=>{start:v.parentnode.isVertex ? v.parentnode.id : undefined, end:v.id}).filter(e=>e.start) instead. it's a thing of graph more than model.\r\n            \"<br/> EdgeStarter is a collection of data useful to start a &lt;Edge /&gt; in JSX.\"}\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        const json: GObject = {};\r\n\r\n        // if it's M2 metamodel\r\n        if (context.data.isMetamodel) {\r\n            const packageArr: Json[] = [];\r\n            for (let pkg of context.proxyObject.packages) { packageArr.push(pkg.generateEcoreJson(loopDetectionObj)); }\r\n            // return (context.proxyObject.packages[0])?.generateEcoreJson(loopDetectionObj);\r\n            json[ECoreRoot.ecoreEPackage] = packageArr;\r\n            return json;\r\n        }\r\n\r\n        // if it's M1 model\r\n        // let serializeasroot = context.proxyObject.isRoot && loopDetectionObj.length; // if rootobj is nested because you started the serialization from another node, i prevent it generating root content\r\n        for (let obj of context.proxyObject.roots) { json[obj.ecoreRootName] = obj.generateEcoreJson(loopDetectionObj); }\r\n\r\n        return json; }\r\n\r\n    public addPackage(name?: DPackage[\"name\"], uri?: DPackage[\"uri\"], prefix?: DPackage[\"prefix\"]): LPackage { return this.cannotCall(\"addPackage\"); }\r\n    public get_addPackage(context: Context): ((name?: DPackage[\"name\"], uri?: DPackage[\"uri\"], prefix?: DPackage[\"prefix\"]) => LPackage) {\r\n        console.log(\"Model.addPackage()\", {context, thiss: this});\r\n        return (name?: DPackage[\"name\"], uri?: DPackage[\"uri\"], prefix?: DPackage[\"prefix\"]) => {\r\n            return LPointerTargetable.fromD(DPackage.new(name, uri, prefix, context.data.id, true, DModel));\r\n        }\r\n    }\r\n\r\n    public static namesORDObjectsToID<T extends DPointerTargetable = DPointerTargetable>(a: T): Pointer<T>[];\r\n    public static namesORDObjectsToID<T extends DPointerTargetable = DPointerTargetable>(a: T[]): Pointer<T>[];\r\n    public static namesORDObjectsToID<L extends LPointerTargetable = LPointerTargetable>(a: L): Pointer<LtoD<L>>[];\r\n    public static namesORDObjectsToID<L extends LPointerTargetable = LPointerTargetable>(a: L[]): Pointer<LtoD<L>>[];\r\n    public static namesORDObjectsToID<T extends DPointerTargetable = DPointerTargetable>(a: Pointer<T>): Pointer<T>[];\r\n    public static namesORDObjectsToID<T extends DPointerTargetable = DPointerTargetable>(a: Pointer<T>[]): Pointer<T>[];\r\n    public static namesORDObjectsToID(a: string, namedCandidates: LModelElement[]): Pointer[];\r\n    public static namesORDObjectsToID(a: string[], namedCandidates: LModelElement[]): Pointer[];\r\n    public static namesORDObjectsToID(a: string | LClass | DClass | Pointer, namedCandidates: LModelElement[]): Pointer[];\r\n    public static namesORDObjectsToID(a: (string | LClass | DClass | Pointer)[], namedCandidates: LModelElement[]): Pointer[];\r\n    public static namesORDObjectsToID<T extends DPointerTargetable = DPointerTargetable>(a: orArr<(string | T | Pointer<T>)>): Pointer<T>[];\r\n    // return the first array parameter converted in an array of pointers. The second parameter is the scope where names are allowed to match. if empty all class.names will fail mapping to id's.\r\n    // second parameter is mandatory when the array contain names, to prevent looking into class names of different models.\r\n    public static namesORDObjectsToID<T extends DPointerTargetable = DPointerTargetable>(targets: orArr<(string | T | Pointer<T>)>, namedCandidates?: LModelElement[]): Pointer<T>[] {\r\n        // let targets = any[] = (!Array.isArray(targets0)) ? targets0 : [targets0];\r\n        if (!targets) return [];\r\n        let ret: Pointer<T>[] = [];\r\n        let state: DState = store.getState();\r\n        if (targets && !Array.isArray(targets)) targets = [targets];\r\n        let dnamedcandidates: DNamedElement[] = namedCandidates ? DPointerTargetable.fromArr(namedCandidates as any) as DNamedElement[] : [];\r\n        let dAllowedNamesMap: Dictionary<DocString<\"name\">, Pointer<T>> = (dnamedcandidates as any[]).reduce( (acc, val) => { acc[val.name] = val.id; return acc; }, {});\r\n        //let dtargets: DNamedElement[] = targets ? DPointerTargetable.fromArr(targets) as DNamedElement[] : [];\r\n        let tmp: Pointer<T> | undefined;\r\n        for (let target of targets) {\r\n            // try as name\r\n            tmp = dAllowedNamesMap[target as string];\r\n            if (tmp) { ret.push(tmp); continue; }\r\n            // try as $name\r\n            tmp = dAllowedNamesMap[\"$\" + target as string];\r\n            if (tmp) { ret.push(tmp); continue; }\r\n            // try as id\r\n            let d: DNamedElement = DPointerTargetable.from(target as Pointer, state);\r\n            if (d && dAllowedNamesMap[d.name]) { ret.push(target as Pointer<T>); continue; }\r\n            Log.w(\"namesORDObjectsToID() could not resolve name:\", {name: target, namedCandidates, targets});\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    _defaultGetter(c: Context, key: string): any {\r\n        console.log(\"$getter 000\", {key, ism1:!c.data.isMetamodel, ism:c.data.isMetamodel, data:c.data});\r\n        if (!c.data.isMetamodel) return this._defaultGetterM1(c, key);\r\n        return this._defaultGetterM2(c, key);\r\n    }\r\n    _defaultGetterM2(c: Context, key: string): any{\r\n        Log.ee(\"Could not find property \" + key + \" on MetaModel\", {c, key});\r\n        let s = store.getState();\r\n        if (key[0] === \"$\"){\r\n            // look for m1 matches\r\n            let k = key.substring(1).toLowerCase();\r\n            console.log(\"$getter m2 0\", {k, key});\r\n\r\n            for (let subelement of this.get_allSubPackages(c, s)){\r\n                let n = subelement.__raw.name;\r\n                if (n && n.toLowerCase() === k) return subelement;\r\n            }\r\n            for (let subelement of this.get_classes(c, s)){\r\n                let n = subelement.__raw.name;\r\n                if (n && n.toLowerCase() === k) return subelement;\r\n            }\r\n        }\r\n    }\r\n    _defaultGetterM1(c: Context, key: string): any{\r\n        // if m1.$m1RootObjectName then --> return that root object\r\n        // if m1.$m1ObjectName then --> return that sub object nested somewhere in the model.\r\n        // if m1.$m2classname\"s\" then --> this.instancesOf(\"m2classname\")\r\n        // if m1.$m2classname then ---> m2.$m2classname (lower priority, if there are 2 metaclasses differing only by final s,\r\n        // the one with 1 more final \"s\" if shadowed by the instances of the one with 1 less final \"s\",\r\n        // in that case you can access the shadowed one through m1.instanceof.$classnames\r\n        // priorities: 1) m1 name natch --> m1object. 2) m2 exact name match --> m2item, 3) m2 name+\"s\" match --> instances\r\n        // to access m2 classes within a package, need to navigate it like model.$packagename.Ssubcpackagename.$classname,\r\n        // path + \"s\" won't work in that case, and need to use this.getInstancesOf instead\r\n        if (key[0] === \"$\"){\r\n            // look for m1 matches\r\n            let deepmatch: LObject | undefined;\r\n            let k = key.substring(1).toLowerCase();\r\n            console.log(\"$getter 0\", {k, key, deepmatch});\r\n\r\n            const directSubObjects: Dictionary<Pointer, boolean> = U.objectFromArrayValues(c.data.objects);\r\n            for (let subobject of this.get_allSubObjects(c)){\r\n                let n = subobject.name;\r\n                if (!n || n.toLowerCase() !== k) continue;\r\n                // A0) perfect match with direct child object\r\n                if (directSubObjects[subobject.id]) return subobject; // actually cannot do direct match, because proxy get function will solve it directly before calling _defaultGetter\r\n                else if (!deepmatch) deepmatch = subobject;\r\n            }\r\n            console.log(\"$getter 1\", {k, key, deepmatch});\r\n            // A1) match with deep sub-object\r\n            if (deepmatch) return deepmatch;\r\n\r\n            // look for m2 matches\r\n            let m2: LModel | undefined = this.get_instanceof(c);\r\n            console.log(\"$getter 2\", {k, key, m2});\r\n            if (!m2) return Log.ee(\"Could not find m1 match for data.$name. And the metamodel is missing, so cannot get instances by type.\", {c, key, m2});\r\n            let m2item: LClass | LPackage;\r\n            // check for a perfect m2 name match and return it\r\n            m2item = (m2 as GObject)[key];\r\n            console.log(\"$getter 3\", {k, key, m2, m2item});\r\n            if (m2item) return m2item; //this.instancesOf(key);\r\n            if (!m2) Log.ee(\"Could not find property \" + key + \" on M1 Model\", {c, key, m2});\r\n            // if not a perfect name match, i try name+s match for instances\r\n            if (key[key.length - 1] === \"s\") {\r\n                let key1 = key.substring(0, key.length - 1);\r\n                m2item = (m2 as GObject)[key1];\r\n                console.log(\"$getter 4\", {k, key, key1, m2, m2item});\r\n                if (m2item) {\r\n                    if (m2item.className === \"DClass\") return this.get_instancesOf(c)(m2item as LClass);\r\n                    else return Log.ee(\"Could not get instances of \" + key1 + \".\", {c, key, m2});\r\n                }\r\n            }\r\n            console.log(\"$getter 5\", {k, key, m2, m2item});\r\n            if (!m2) return Log.ee(\"Could not find any subelement with name \" + key + \" on M1 or M2 Models\", {c, key, m1: c.data, m2});\r\n        }\r\n    }\r\n    private static otherObjectsTemp: Dictionary<DocString<\"className\">, LObject[]> = undefined as any;\r\n    private static otherObectsAccessedKeys: DocString<\"className\">[] = [];\r\n    // public otherObjectsSetup(){ LModel.otherObjectsTemp = undefined; LModel.otherObectsAccessedKeys = []; }\r\n    otherObjects!: (excludeInstances: orArr<(string | LClass | Pointer)>, excludeSubclasses?: boolean)=>LObject[];\r\n    otherInstances!: (excludeInstances: orArr<(string | LClass | Pointer)>, excludeSubclasses?: boolean)=>LObject[];\r\n    __info_of__otherObjects: Info = {type:\"(...excludeInstances: (string|LClass|Pointer)[], excludeSubclasses: boolean = false)=>LObject[]\", txt:<div>Alias for this.otherInstances.</div>};\r\n    __info_of__otherInstances: Info = {type:\"(...excludeInstances: (string|LClass|Pointer)[], excludeSubclasses: boolean = false)=>LObject[]\", txt:<div>Read this.instancesOf documentation first.\r\n            <br/>Retrieves all the objects not obtained between previous calls of this.instancesOf and the last call of this method.\r\n            <br/>Meaning calling it twice without any instancesOf in between, it will return all objects.</div>};\r\n\r\n    public get_otherObjects(c: Context): (excludeInstances: orArr<(string | LClass | Pointer)>, excludeSubclasses?: boolean)=>LObject[]{\r\n        return this.get_otherInstances(c); }\r\n    public get_otherInstances(c: Context): (excludeInstances: orArr<(string | LClass | Pointer)>, excludeSubclasses?: boolean)=>LObject[]{\r\n        // todo:\r\n        return (excludeInstances: orArr<(string | LClass | Pointer)>, includeSubclasses: boolean = false)=>{\r\n            let ret: LObject[];\r\n            this.get_instancesOf(c)(excludeInstances, includeSubclasses) // and drop the result\r\n            if (!LModel.otherObjectsTemp) { ret = this.get_allSubObjects(c); }\r\n            else {\r\n                let dict = {...LModel.otherObjectsTemp};\r\n                for (let key of LModel.otherObectsAccessedKeys) delete dict[key];\r\n                delete (LModel as any).otherObjectsTemp;\r\n                delete (LModel as any).otherObectsAccessedKeys;\r\n                ret = Object.values(dict).flat();\r\n            }\r\n            return ret;\r\n        }\r\n    }\r\n    // not meant to be called directly.\r\n    private _populateOtherObjects(c:Context, classes?: LClass[]): void {\r\n        // from names, DClass and ptrs, make them only ptrs. all classes of this model are valid name targets.\r\n        // nb: cannot optimize getting only instantiated classes from this.get_allSubObjects because if a class have 0 instances should have an empty array instead of undefined (risk jsx crash)\r\n        let state: DState = store.getState();\r\n        let dinstancetypes: DClass[] = (classes || this.get_classes(c, state)).map(c => c.__raw);\r\n        let namemap: Dictionary<DocString<\"className\">, DClass> = {};\r\n        namemap = dinstancetypes.reduce( (acc, current) => { namemap[current.name] = current; return namemap; }, namemap);\r\n        let idtoname: Dictionary<Pointer, string> = {};\r\n        for (let n in namemap) {idtoname[namemap[n].id] = n; }\r\n        // make it more general, first make a dictionary holding all selected types as keys, including \"_other\"\r\n        // then a SEPARATE (split this) function to return only the selected keys, merging the subarrays in the global naming instance map.\r\n        LModel.otherObjectsTemp = {};\r\n        LModel.otherObectsAccessedKeys = [];\r\n        // part 1: i add empty arrays for all instances, but not include shapeless objects.\r\n        for (let name in namemap) { LModel.otherObjectsTemp[name] = []; } //LPointerTargetable.fromPointer(namemap[name].instances); }\r\n        // part 2: for shapeless objs too\r\n        LModel.otherObjectsTemp[undefined as any] = [];\r\n        let allObjects: LObject[] = this.get_allSubObjects(c, state);\r\n        // part 3: now i populate the Model.otherObjectsTemp dictionary arrays\r\n        for (let o of allObjects) {\r\n            // if (o.__instanceof) continue;\r\n            let name: string | undefined = idtoname[o.__raw.instanceof];\r\n            if (!LModel.otherObjectsTemp[name]) {\r\n                LModel.otherObjectsTemp[name] = [o];\r\n                Log.eDev(\"model._populateOtherObjects() this case should never happen\", {name, o, allObjects, namemap, idtoname});\r\n            }\r\n            else LModel.otherObjectsTemp[name].push(o);\r\n        }\r\n    }\r\n\r\n    public instancesOf(instancetypes0: orArr<(string | LClass | Pointer)>, includeSubclasses: boolean = false): LObject[]{ return this.cannotCall(\"instancesOf\"); }\r\n    public __type_of__instancesOf: Info = {type: \"(instancetypes: orArr<(string | LClass | Pointer)>, includeSubclasses: boolean = false) => LObject[]\",\r\n        txt:<div>Retrieves all objects instancing a target class.\r\n            <br/>The first parameter is the targeted class, which can be his name, pointer or object.\r\n            <br/>The second parameter tells if instances of his subclasses needs to be retreieved as well.</div>\r\n    }\r\n    // M1\r\n    public get_instancesOf(c:Context): (this[\"instancesOf\"]){\r\n        if (c.data.isMetamodel) { return (...a:any) => { Log.w(\"cannot call instancesOf() on a metamodel\"); return []; } }\r\n        return (instancetypes0: orArr<(string | LClass | Pointer)>, includeSubclasses: boolean = false): LObject[] => {\r\n            let state: DState = store.getState();\r\n            let classes = this.get_classes(c, state);\r\n            if (!LModel.otherObjectsTemp) this._populateOtherObjects(c, classes);\r\n            if (!Array.isArray(instancetypes0)) instancetypes0 = [instancetypes0];\r\n            // from names, DClass and ptrs, make them only ptrs. all classes of this model are valid name targets.\r\n            let instancetypes: Pointer<DClass>[] = LModel.namesORDObjectsToID(instancetypes0, classes) as any;\r\n            let dinstancetypes: DClass[] = DClass.fromPointer(instancetypes, state);\r\n            if (includeSubclasses) {\r\n                let arr: LClass[] = dinstancetypes.map(d => LPointerTargetable.fromD(d));\r\n                for (let c of arr) dinstancetypes.push(...(c.allSubClasses.map(l => l.__raw) || []));\r\n                dinstancetypes = [...new Set(dinstancetypes)];\r\n            }\r\n            let ret: LObject[] = []\r\n            for (let c of dinstancetypes) {\r\n                let arr: LObject[] = LModel.otherObjectsTemp[c.name]\r\n                if (!arr || !arr.length) continue;\r\n                ret.push(...arr);\r\n                LModel.otherObectsAccessedKeys.push(c.name);\r\n            }\r\n            return ret;\r\n        }\r\n    }\r\n/*\r\n* instanceof === some class -> instantiate object and forces to conform to that class\r\ninstanceof === null  --> shapeless object\r\ninstanceof === undefined or missing  --> auto-detect and assign the type\r\n */\r\n    addObject(json: GObject, instanceoff: LClass | Pointer<DClass> | DocString<\"ClassName\"> | undefined | null = undefined): ReturnType<LValue[\"addObject\"]>{ return this.cannotCall(\"LValue.addObject\"); }\r\n    __info_of__addObject: Info = {type: \"(json: object, instanceof?: LClass) => LObject\",\r\n        txt: \"Appends an object instancing \\\"instanceof\\\" to the model.\\n<br>Setting his own properties, and DValues according to the content of the parameter object.\"}\r\n    get_addObject(c: Context): ReturnType<LValue[\"get_addObject\"]> { return (LValue.singleton as LValue).get_addObject.call(this, c); }\r\n\r\n    instantiableClasses(o?: GObject, loose: boolean = false):LClass[] { return this.cannotCall(\"instantiableClasses\"); }\r\n    __info_of__instantiableClasses: Info = {type: \"(o?: object, loose?: boolean) => LClass[]\",\r\n        txt: \"List of all classes which can be used to instantiate an object.\" +\r\n            \"\\n<br>Abstract and Interface classes are excluded.\" +\r\n            \"\\n<br>If the parameter \\\"o\\\" is specified, it will filter only the instances conforming to the object schema.\" +\r\n            \"\\n<br>Results are sorted from tightest fit to loosest fit.\" +\r\n            \"\\n<br>loose parameter set to true makes return instead a list of matching scores of all subclasses.\", hidden: true}\r\n    // M1\r\n    get_instantiableClasses(c: Context): LValue[\"instantiableClasses\"] {\r\n        if (c.data.isMetamodel) { return (...a:any)=> { Log.w(\"cannot call instantiableClasses() on a metamodel\"); return []; } }\r\n        return (LValue.singleton as LValue).get_instantiableClasses.call(this, c)\r\n    }\r\n\r\n    public get_suggestedEdges(context: Context): this[\"suggestedEdges\"]{\r\n        let ret: this[\"suggestedEdges\"];\r\n        if (context.data.isMetamodel) ret = this.impl_get_suggestedEdgesM2(context);\r\n        else ret = this.impl_get_suggestedEdgesM1(context);\r\n\r\n        return ret;\r\n    }\r\n\r\n    private impl_get_suggestedEdgesM1(context: Context, state?: DState): this[\"suggestedEdges\"]{\r\n        let ret: this[\"suggestedEdges\"] = {extend: [], reference: [], packageDependencies: []};\r\n        if (context.data.isMetamodel) { Log.w(\"cannot call suggestedEdgesM1() on a metamodel\"); return ret; }\r\n        if (Debug.lightMode) { return ret; }\r\n        let s: DState = store.getState();\r\n        let values: LValue[] = this.get_allSubValues(context, s);\r\n        let map: Dictionary<DocString<\"starting dvalue id\">, EdgeStarter[]> = {};\r\n        if (!state) state = store.getState();\r\n        outer:\r\n            for (let lval of values) {\r\n                if (!lval) continue;\r\n                let dval = lval.__raw;\r\n                // NB: ELiterals can be pointers in L, but string or ordinal numbers in D, but they won't make edges, so i use .__raw\r\n                inner:\r\n                    for (let v of (dval.values || [])) {\r\n                        if (!Pointers.isPointer(v, state)) continue inner;\r\n                        let snode = lval.node;\r\n                        if (!snode || !snode.html) continue outer;\r\n                        if (v === dval.id) continue inner; // pointing to itself\r\n                        let ltarget: undefined | LEnumLiteral | LObject = LPointerTargetable.fromPointer(v, state);\r\n                        if (!ltarget) continue;\r\n                        if (ltarget.className !== DObject.cname) continue inner;\r\n                        let enode = ltarget.node;\r\n                        if (!enode || !enode.html) continue inner;\r\n                        if (!map[dval.id]) map[dval.id] = [];\r\n                        map[dval.id].push(new EdgeStarter(lval, ltarget, snode, enode, undefined));\r\n                    }\r\n            }\r\n        ret.reference = Object.values(map).flat();\r\n        return ret;\r\n    }\r\n    private impl_get_suggestedEdgesM2(context: Context): this[\"suggestedEdges\"]{\r\n        let ret: this[\"suggestedEdges\"] = {extend: [], reference: [], packageDependencies: []};\r\n        if (!context.data.isMetamodel) { Log.w(\"cannot call suggestedEdgesM2() on a model\"); return ret; }\r\n        let s: DState = store.getState();\r\n        let classes: LClass[] = this.get_classes(context, s);\r\n        let references: LReference[] = Debug.lightMode ? [] : classes.flatMap(c=>c.references);\r\n        ret.reference = references.map( (r) => {\r\n            let sn = r?.node;\r\n            console.log('ex51', {sc:sn?.component?.id, s:r?.name, e:r?.type?.name, sn, sh:sn?.html, en:r?.type?.node, eh:r?.type?.node?.html});\r\n            if (!sn || !sn.html) return undefined;\r\n            let end = r.type;\r\n            // if (end.id === r.id) return undefined;\r\n            let en = end?.node;\r\n            if (!en || !en.html) return undefined;\r\n            return new EdgeStarter(r, end, sn, en);\r\n        }).filter<EdgeStarter>(function(e):e is EdgeStarter{ return !!e});\r\n        // ret.extend = classes.flatMap( c => EdgeStarter.oneToMany(c, c.extends));\r\n\r\n        let alreadyAdded: Dictionary<Pointer, LClass> = {};\r\n        // if A extends B1, B2;    B1 extends C1, C2;    and node B1 is hidden. instead of edge from A to B, i display edge from A~C1, A~C2, A~B2\r\n        function SkipExtendNodeHidden(start: LClass, end: LClass[], rootCall: boolean = true): ({start: LClass, end: LClass, sn: LGraphElement, en: LGraphElement})[] {\r\n            let ret: {start: LClass, end: LClass, sn: LGraphElement, en: LGraphElement}[] = [] as any;\r\n            if (rootCall) { alreadyAdded = {}; alreadyAdded[start.id] = start; } // end classes can get added twice if from a different starting subclass path (in classes.flatMap -> each one should have his own dict).\r\n            // ret.start = start;\r\n            let sn = start.node;\r\n            if (!sn || !sn.html) return [];\r\n            //  let end: LClass[] = start.extends;\r\n            for (let e of end) {\r\n                if (!e) continue;\r\n                let eid = e.id;\r\n                if (alreadyAdded[eid]) continue; // without this there might be duplicates if A extends B1, B2;  and both B1 & B2 extends C\r\n                alreadyAdded[eid] = e;\r\n                let en = e.node;\r\n                if (en && en.html) { ret.push({start, end:e, sn, en}); continue; }\r\n                let secondTierExtends = e.extends;\r\n                // for (let eend of secondTierExtends) {\r\n                ret.push(...SkipExtendNodeHidden(start, secondTierExtends, false));\r\n                //}\r\n            }\r\n            return ret;\r\n        }\r\n        ret.extend = classes.flatMap(c => SkipExtendNodeHidden(c, c.extends, true)).map( (es) => new EdgeStarter(es.start, es.end, es.sn, es.en));\r\n\r\n        let dependencies: {src:LModelElement, ends: LModelElement[]}[] =\r\n            Debug.lightMode ? [] : [...(classes.map(c=>{ return {src:c, ends:c.superclasses}})), ...(references.map(r=> { return {src:r, ends:[r.type]}}))]\r\n        let pkgdependencies: {src: LPackage, sn: LGraphElement, ends: Dictionary<Pointer, {end:LPackage, en:LGraphElement}>}[] = []; // transform form in dictionary to prevent duplicates\r\n        //dependencies.map( d=> { let end = d.end.package; return {src:d.src.package, end, endid:end.id}})\r\n\r\n        for (let d of dependencies) {\r\n            let src: LPackage | null = d.src.package;\r\n            if (!src) continue;\r\n            let srcnode: LGraphElement | undefined = src.node;\r\n            if (!srcnode || !srcnode.html) continue;\r\n            let ends: Dictionary<Pointer, {end:LPackage, en:LGraphElement}> = {};\r\n            for (let end of d.ends) {\r\n                let ep: LPackage|null = end.package;\r\n                if (!ep) continue;\r\n                let epnode: LGraphElement | undefined = ep.node;\r\n                if (!epnode || !epnode.html) continue;\r\n                ends[ep.id] = {end:ep, en:epnode};\r\n            }\r\n            pkgdependencies.push( {src, sn:srcnode, ends});\r\n        }\r\n        // todo: check\r\n        ret.packageDependencies = pkgdependencies.flatMap(\r\n            (pd) => ( Object.values(pd.ends).map((end) => new EdgeStarter(pd.src, end.end, pd.sn, end.en)))\r\n        );\r\n        return ret;\r\n    }\r\n\r\n\r\n    protected get_models(context: Context): LModel[] { // todo: should this not be data.instances instead?\r\n        return LModel.fromPointer(context.data.models);\r\n    }\r\n    protected set_models(val: PackArr<this['models']>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.models;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'models', list, '', true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    public duplicate(deep: boolean = true): this { throw new Error(\"Model.duplicate(): use export/import ecore instead.\"); }\r\n\r\n    protected set_instanceof(val: Pack1<this[\"instanceof\"]>, context: Context): boolean {\r\n        let ptr = Pointers.from(val);\r\n        SetFieldAction.new(context.data.id, \"instanceof\", ptr, undefined, true);\r\n        // update father's collections (pointedby's here are set automatically)\r\n        // todo: ptr && SetFieldAction.new(ptr, \"instances\", context.data.id, '+=', true);\r\n        return true; }\r\n    protected get_instanceof(context: Context): this[\"instanceof\"] { return context.data.instanceof ? LPointerTargetable.fromPointer(context.data.instanceof) : undefined; }\r\n\r\n    protected set_name(val: this['name'], context: Context): boolean {\r\n        const models: LModel[] = LModel.fromPointer(store.getState()['models']);\r\n        if(models.filter((model) => { return model.name === val }).length > 0) {\r\n            U.alert('error', 'Cannot rename the selected element since this name is already taken.');\r\n        } else {\r\n            SetFieldAction.new(context.data, 'name', val, '', false);\r\n        }\r\n        return true;\r\n    }\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | (DPackage|DObject), 1, 'N'> {\r\n        let children: Pointer<(DPackage|DObject), 0, 'N', (LPackage|LObject)>;\r\n        if(context.data.isMetamodel) children = context.data.packages;\r\n        else children = context.proxyObject.allSubObjects.map(o => o.id);\r\n        return [...super.get_children_idlist(context) as Pointer<DAnnotation | (DPackage|DObject), 1, 'N'>,\r\n            ...children];\r\n    }\r\n\r\n    protected get_isMetamodel(context: Context): this['isMetamodel'] {\r\n        return context.data.isMetamodel;\r\n    }\r\n    protected set_isMetamodel(val: this['isMetamodel'], context: Context): boolean {\r\n        if (context.data.isMetamodel !== val) SetFieldAction.new(context.data, 'isMetamodel', val, '', false);\r\n        return true;\r\n    }\r\n\r\n    protected get_objects(context: Context): this['objects'] {\r\n        return context.data.objects.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n\r\n    protected get_packages(context: Context): this[\"packages\"] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).packages : []; }\r\n        return context.data.packages.map((pointer) => {\r\n            return LPointerTargetable.from(pointer)\r\n        });\r\n    }\r\n\r\n    protected set_packages(val: PackArr<this[\"packages\"]>, context: Context): boolean {\r\n        const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        const oldList = context.data.packages;\r\n        const diff = U.arrayDifference(oldList, list);\r\n        BEGIN();\r\n        SetFieldAction.new(context.data, 'packages', list, \"\", true);\r\n        for (let id of diff.added) {\r\n            SetFieldAction.new(id, 'father', context.data.id, '', true);\r\n            SetFieldAction.new(id, 'parent', context.data.id, '+=', true);\r\n        }\r\n        for (let id of diff.removed as Pointer<DModelElement>[]) {\r\n            SetFieldAction.new(id, 'father', undefined, '', true);\r\n            const parent = DPointerTargetable.from(id).parent;\r\n            U.arrayRemoveAll(parent, context.data.id);\r\n            SetFieldAction.new(id, 'parent', parent, '', true);\r\n        }\r\n        END();\r\n        return true;\r\n    }\r\n\r\n    protected get_roots(context: Context): this[\"roots\"] {\r\n        return this.get_objects(context).filter( o => o.isRoot);\r\n    }\r\n    protected get_classes(context: Context, s?: DState): this[\"classes\"] {\r\n        //if (!s) s = store.getState();+\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).classes : [] as any; }\r\n        const ret: LClass[] & Dictionary<DocString<\"$name\">, LClass> = [] as any;\r\n        const pkgs: LPackage[] = this.get_packages(context);  // it's ok not having deep packages\r\n        for (let p of pkgs) {\r\n            const classes: LClass[] & Dictionary<DocString<\"$name\">> = p.allSubClasses || [];\r\n            U.mergeNamedArray(ret, classes);\r\n        }\r\n        return ret;\r\n    }\r\n    protected get_references(context: Context, s?: DState): this[\"references\"] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).references : []; }\r\n        s = s||store.getState();\r\n        return this.get_classes(context, s).flatMap(p => p.references || []);\r\n    }\r\n\r\n    protected get_enums(context: Context): this[\"enums\"] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).enumerators : [] as any; }\r\n        return this.get_enumerators(context);\r\n    }\r\n\r\n    protected get_enumerators(context: Context, s?: DState): this[\"enums\"] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).enumerators : [] as any; }\r\n        // if (!s) s = store.getState();\r\n        const ret: LEnumerator[] & Dictionary<DocString<\"$name\">, LEnumerator> = [] as any;\r\n        const pkgs: LPackage[] = this.get_packages(context);  // it's ok not having deep packages\r\n        for (let p of pkgs) {\r\n            const enums: LEnumerator[] & Dictionary<DocString<\"$name\">> = p.allSubEnums || [];\r\n            U.mergeNamedArray(ret, enums);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    protected get_allSubPackages(context: Context, state?: DState): this[\"allSubPackages\"] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).allSubPackages : []; }\r\n        state = state || store.getState();\r\n        let tocheck: Pointer<DPackage>[] = context.data.packages || [];\r\n        let checked: Dictionary<Pointer, DPackage> = {};\r\n        while (tocheck.length) {\r\n            let newtocheck: Pointer<DPackage>[] = [];\r\n            for (let ptr of tocheck) {\r\n                if (checked[ptr]) throw new Error(\"loop in packages containing themselves\");\r\n                let dpackage: DPackage = DPointerTargetable.from(ptr, state);\r\n                checked[ptr] = dpackage;\r\n                U.arrayMergeInPlace(newtocheck, dpackage?.subpackages);\r\n            }\r\n            tocheck = newtocheck;\r\n        }\r\n        let darr: DPackage[] = Object.values(checked);\r\n        let larr: LPackage[] & Dictionary<DocString<\"$name\">, LPackage> = LPointerTargetable.fromArr(darr, state);\r\n        U.toNamedArray(larr, darr);\r\n        return larr;\r\n    }\r\n\r\n    protected get_allSubValues(context: Context, state?: DState): this[\"allSubValues\"] {\r\n        state = state || store.getState();\r\n        let darr = Selectors.getAll(DValue, undefined, state, true, false) as DValue[];\r\n        let larr = [];\r\n        for (let i = 0; i < darr.length; i++){\r\n            let l = LPointerTargetable.fromD(darr[i]);\r\n            if (!l || l.model.id !== context.data.id) {\r\n                darr[i] = undefined as any;\r\n                continue;\r\n            }\r\n            larr.push(l);\r\n        }\r\n        darr = darr.filter(d=>!!d);\r\n        U.toNamedArray(larr, darr);\r\n        return larr;\r\n    }\r\n\r\n    protected get_allSubObjects(context: Context, state?: DState): this[\"allSubObjects\"] {\r\n        state = state || store.getState();\r\n        let darr = Selectors.getAll(DObject, undefined, state, true, false) as DObject[];\r\n        // console.log(\"gao\", {darr:[...darr]});\r\n        let larr = [];\r\n        for (let i = 0; i < darr.length; i++){\r\n            let l = LPointerTargetable.fromD(darr[i]);\r\n            if (!l || l.model.id !== context.data.id) {\r\n                darr[i] = undefined as any;\r\n                continue;\r\n            }\r\n            larr.push(l);\r\n        }\r\n        // console.log(\"gao\", {darr:[...darr], larr});\r\n        darr = darr.filter(d=>!!d);\r\n        // console.log(\"gao\", {darr, larr});\r\n        U.toNamedArray(larr, darr);\r\n        return larr;\r\n    }\r\n\r\n    public getClassByNameSpace(namespacedclass: string): LClass | undefined { return this.cannotCall(\"getClassByNameSpace\"); }\r\n    protected get_getClassByNameSpace(context: Context): this[\"getClassByNameSpace\"] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).getClassByNameSpace : undefined as any; }\r\n        return (namespacedclass: string): LClass | undefined => {\r\n            let pos = namespacedclass.lastIndexOf(\":\");\r\n            let pkguri = namespacedclass.substring(0, pos);\r\n            let classname = namespacedclass.substring(pos+1);\r\n            let pkg: LPackage | undefined = this.get_getPackageByUri(context)(pkguri);\r\n            if (!pkg) return undefined;\r\n            // return pkg[\"@\" + classname];\r\n            return pkg.classes.filter((c) => c.name === classname)[0];\r\n        }; }\r\n    public getPackageByUri(uri: string): LPackage | undefined { return this.cannotCall(\"getPackageByUri\"); }\r\n    protected get_getPackageByUri(context: Context): this[\"getPackageByUri\"] {\r\n        return (uri: string)=>context.proxyObject.allSubPackages.filter((p)=>p.uri === uri)[0]; }\r\n\r\n\r\n    /* See src/api/persistance/save.ts */\r\n\r\n    protected get_attributes(context: Context): this['attributes'] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).attributes : []; }\r\n        return context.proxyObject.classes.flatMap(c => c.attributes);\r\n    }\r\n\r\n    protected get_literals(context: Context): this['literals'] {\r\n        if (!context.data.isMetamodel) { return context.data.instanceof ? (this.get_instanceof(context) as LModel).literals : []; }\r\n        return context.proxyObject.enumerators.flatMap(e => e.literals);\r\n    }\r\n\r\n    protected get_values(context: Context): this['values'] {\r\n        return context.proxyObject.objects.flatMap(o => o.features);\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DModel);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LModel);\r\n\r\n\r\n@RuntimeAccessible('DFactory_useless_')\r\nexport abstract class DFactory_useless_ extends DPointerTargetable { // DModelElement\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LFactory_useless_;\r\n    // static logic: typeof LFactory_useless_;\r\n    // static structure: typeof DFactory_useless_;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DFactory_useless_, 1, 1, LFactory_useless_>;\r\n    parent: Pointer<DModelElement, 0, 'N', LModelElement> = [];\r\n    father!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    // personal\r\n    ePackage: Pointer<DPackage, 1, 1, LPackage> = '';\r\n    abstract create(DClass: DClass): DObject;\r\n    abstract createFromString(eDataType: DDataType, literalValue: string): EJavaObject;\r\n    abstract convertFromString(eDataType: DDataType, instanceValue: EJavaObject): string;\r\n    // ********************** my additions inherited ********************* //\r\n    // ********************** my additions personal ********************** //\r\n}\r\n@RuntimeAccessible('LFactory_useless_')\r\nexport abstract class LFactory_useless_<Context extends LogicContext<DFactory_useless_> = any, C extends Context = Context>  extends LModelElement {\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DFactory_useless_;\r\n    id!: Pointer<DFactory_useless_, 1, 1, LFactory_useless_>;\r\n    // static singleton: LFactory_useless_;\r\n    // static logic: typeof LFactory_useless_;\r\n    // static structure: typeof DFactory_useless_;\r\n\r\n    // inherit redefine\r\n    parent!: LModelElement[];\r\n    father!: LModelElement;\r\n    annotations!: LAnnotation[];\r\n    // personal\r\n    ePackage!: LPackage;\r\n    abstract create(DClass: DClass): DObject;\r\n    abstract createFromString(eDataType: DDataType, literalValue: string): EJavaObject;\r\n    abstract convertFromString(eDataType: DDataType, instanceValue: EJavaObject): string;\r\n    // ********************** my additions inherited ********************* //\r\n    // ********************** my additions personal ********************** //\r\n}\r\n\r\n// DModelElement.subclasses.push('DFactory_useless_'); // because it's abstract and cannot be used as a value, it's pure type definition\r\n// DModelElement.subclasses.push('LFactory_useless_'); // because it's abstract and cannot be used as a value, it's pure type definition\r\n// RuntimeAccessibleClass.set_extend(DModelElement, DFactory_useless_);\r\n// RuntimeAccessibleClass.set_extend(LModelElement, LFactory_useless_);\r\n\r\n@RuntimeAccessible('EJavaObject')\r\nexport class EJavaObject{\r\n\r\n}// ??? EDataType instance?\r\n\r\n\r\n@RuntimeAccessible('DMap')\r\nexport class DMap extends RuntimeAccessibleClass { // DPointerTargetable\r\n    // static logic: typeof LModelElement;\r\n    // static structure: typeof DModelElement;\r\n    // static singleton: LModelElement;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    __isDMap!: true;\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    // id!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n}\r\n\r\n@RuntimeAccessible('LMap')\r\nexport class LMap<Context extends LogicContext<DMap> = any, C extends Context = Context>  extends LPointerTargetable {\r\n    // static logic: typeof LModelElement;\r\n    // static structure: typeof DModelElement;\r\n    // static singleton: LModelElement;\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    __isLMap!: true;\r\n    // id!: Pointer<DModelElement, 1, 1, LModelElement>;\r\n}\r\nRuntimeAccessibleClass.set_extend(DPointerTargetable, DMap as any);\r\nRuntimeAccessibleClass.set_extend(LPointerTargetable, LMap);\r\n\r\n\r\n@Leaf\r\n@RuntimeAccessible('DObject')\r\nexport class DObject extends DPointerTargetable { // extends DNamedElement, m1 class instance\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n\r\n    // inherit redefine\r\n    annotations!: never[];\r\n    id!: Pointer<DObject, 1, 1, LObject>;\r\n    parent: Pointer<DModel | DValue, 0, 'N', LModel | LValue> = [];\r\n    father!: Pointer<DModel, 1, 1, LModel> |  Pointer<DValue, 1, 1, LValue>;\r\n    // annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name!: string;\r\n\r\n    // personal\r\n    instanceof!: Pointer<DClass>; // actually nullable now, but takes too much type refactoring. be careful to check if it's present\r\n    features: Pointer<DValue>[] = [];\r\n\r\n\r\n    public static new(instanceoff?: DObject[\"instanceof\"], father?: DObject[\"father\"], fatherType?: typeof DModel | typeof DValue, name?: DNamedElement[\"name\"], persist: boolean = true): DObject {\r\n        // if (!name) name = this.defaultname(((meta: LNamedElement) => meta.name + \" \"), father);\r\n        if (!name) name = this.defaultname(((meta: LNamedElement) => (meta?.name || \"obj\") + \"_\"), father, instanceoff);\r\n        let ret = new Constructors(new DObject('dwc'), father, persist, fatherType).DPointerTargetable().DModelElement()\r\n            .DNamedElement(name).DObject(instanceoff).end();\r\n        return ret;\r\n    }\r\n\r\n    public static new3(ptrs:Partial<ObjectPointers>, then:(d:DObject, c: Constructors)=>void, fatherType?: typeof DModel | typeof DValue, persist: boolean = true): DObject{\r\n        if (!ptrs.name) ptrs.name = this.defaultname(((meta: LNamedElement) => (meta?.name || \"obj\") + \"_\"), ptrs.father, ptrs.instanceof);\r\n        return new Constructors(new DObject('dwc'), ptrs.father, persist, fatherType, ptrs.id)\r\n            .DPointerTargetable().DModelElement()\r\n            .DNamedElement(ptrs.name).DObject(ptrs.instanceof).end(then);\r\n    }\r\n\r\n\r\n}\r\n\r\n@RuntimeAccessible('LObject')\r\nexport class LObject<Context extends LogicContext<DObject> = any, C extends Context = Context, D extends DObject = DObject> extends LNamedElement { // extends DNamedElement, m1 class instance\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DObject;\r\n    id!: Pointer<DObject, 1, 1, LObject>;\r\n\r\n    // inherit redefine\r\n    annotations!: never[];\r\n    children!: LValue[];\r\n    allChildren!: LValue[]; // including hidden values\r\n    truechildren!: LValue[]; // real shape without \"mirage\" values\r\n    parent!: (LModel | LValue)[];\r\n    father!: LModel | LValue;\r\n    model!: LModel;\r\n    // annotations!: LAnnotation[];\r\n    // from LClass\r\n\r\n    name!: string;\r\n    ecoreRootName!: string;\r\n    namespace!: string;\r\n    fullname!:string;\r\n    defaultValue!: DClass[\"defaultValue\"];\r\n    // abstract!: boolean;\r\n    // interface!: boolean;\r\n    // references!: LReference[];\r\n    // attributes!: LAttribute[];\r\n    // operations!: LOperation[];\r\n\r\n    // personal\r\n    deepSubObjects!: LObject[]; // todo: itera features (lvalue[]) deep e vitando di inserire doppioni (salva una mappatura di di già aggiunti e skip se ricompaiono)\r\n    subObjects!: LObject[];\r\n    referenceFeatures!: LValue[]; // subset of features that are references.\r\n    attributeFeatures!: LValue[]; // subset of features that are attributes.\r\n    shapelessFeatures!: LValue[]; // subset of features that are not mapped and can have any kind of values.\r\n    // + tutte le funzioni di comodità navigazionale del modello, trattarlo un pò come se fosse un modello (e quasi può esserlo)\r\n    instanceof!: LClass;\r\n    features!: LValue[];\r\n    referencedBy!: LObject[];\r\n    isRoot!: boolean;\r\n    readonly partial!: boolean;\r\n\r\n    protected get_name(context: Context): this['name'] {\r\n        return (context.proxyObject as GObject)['$name']?.value || context.data.name || context.proxyObject.instanceof.name;\r\n    }\r\n\r\n    protected get_truechildren(context: Context): this[\"children\"] {\r\n        let childs: LValue[] = super.get_children(context);\r\n        if (!context.data.instanceof) return childs;\r\n        return childs.filter( (c) => !c.isMirage);\r\n    }\r\n\r\n    protected get_allChildren(context: Context): this[\"children\"] { return super.get_children(context); }\r\n\r\n    protected get_children(context: Context, sort: boolean = true): this[\"children\"] {\r\n        let childs: LValue[] = super.get_children(context);\r\n        let meta: LClass = context.proxyObject.instanceof;\r\n        // if (!sort && (!meta || meta.partial)) return childs;\r\n        let conformchildren: undefined | Pointer[] = meta && !meta.partial ? meta.allChildren.map(c => c.id) : undefined;\r\n        if (!sort) {\r\n            // console.log(\"return get features:\", {context, meta, childs, conformchildren, ret:childs.filter((c) => (c.instanceof?.id) && conformchildren!.includes(c.instanceof?.id))});\r\n            if (!conformchildren) return childs;\r\n            return childs.filter((c) => (c.instanceof?.id) && conformchildren!.includes(c.instanceof?.id));\r\n        }\r\n\r\n        let bymetaparent: Dictionary<DocString<\"metaparent pointer\">, LValue[]> = {};\r\n        for (let v of childs) {\r\n            let vmeta = v.instanceof;\r\n            // console.log(\"get features filtering:\", {context, meta, vmeta, v, childs, conformchildren});\r\n\r\n            if (conformchildren && (!vmeta || !conformchildren.includes(vmeta.id))) continue;\r\n            let vmetaid: string = vmeta?.id as string; // undef as key is fine even if compiler complains, so i cast it\r\n            if (!bymetaparent[vmetaid]) bymetaparent[vmetaid] = [v]; else bymetaparent[vmetaid as any].push(v);\r\n        }\r\n        // console.log(\"return get features:\", {context, meta, childs, conformchildren, ret:Object.values(bymetaparent).flat()});\r\n        return Object.values(bymetaparent).flat();\r\n    }\r\n\r\n\r\n    // protected get_fromlclass<T extends keyof (LClass)>(meta: LClass, key: T): LClass[T] { return meta[key]; }\r\n    protected get_model(context: Context): LModelElement[\"model\"] {\r\n        let l: LValue | LObject | LModel = context.proxyObject;\r\n        while (l && l.className !== DModel.cname) l = l.father;\r\n        return l as LModel; }\r\n    // protected set_name(val: string, context: Context): boolean { return this.cannotSet(\"name\"); }\r\n    protected set_namespace(val: string, context: Context): boolean { return this.cannotSet(\"namespace\"); }\r\n    // protected get_namespace(context: Context): LClass[\"namespace\"] { return context.proxyObject.instanceof.namespace; }\r\n    protected set_fullname(val: string, context: Context): boolean { return this.cannotSet(\"fullname\"); }\r\n    protected get_fullname(context: Context): LClass[\"fullname\"] { return context.proxyObject.instanceof.fullname; }\r\n    protected set_ecoreRootName(val: string, context: Context): boolean { return this.cannotSet(\"ecoreRootName\"); }\r\n    protected get_ecoreRootName(context: Context): LObject[\"ecoreRootName\"] {\r\n        let instanceoff: LClass = context.proxyObject.instanceof;\r\n        if (!instanceoff) return \"schemaless:Object\";\r\n        return this.get_uri(context) + \":\" + instanceoff.name; // optimize later in instanceoff.namespace + \":\" + instanceoff.name; and implement namespace all around\r\n    }\r\n    protected set_partialdefaultname(val: DClass[\"partialdefaultname\"], context: Context): boolean { return this.cannotSet(\"DObject.partialdefaultname()\"); }\r\n    protected get_partialdefaultname(context: Context): DClass[\"partialdefaultname\"] { return context.data.instanceof ? context.proxyObject.instanceof.partialdefaultname : \"val_\"; }\r\n    protected set_partial(val: DClass[\"partial\"], context: Context): boolean { return this.cannotSet(\"DObject.set_partial()\"); }\r\n    protected get_partial(context: Context): DClass[\"partial\"] { return context.data.instanceof ? context.proxyObject.instanceof?.partial : true; }\r\n\r\n    /*    protected set_abstract(val: string, context: Context): boolean { return this.cannotSet(\"abstract\"); }\r\n        protected get_abstract(context: Context): LClass[\"abstract\"] { return context.proxyObject.instanceof.abstract; }\r\n        protected set_interface(val: string, context: Context): boolean { return this.cannotSet(\"interface\"); }\r\n        protected get_interface(context: Context): LClass[\"interface\"] { return context.proxyObject.instanceof.interface; }*/\r\n    protected set_defaultValue(val: string, context: Context): boolean { return this.cannotSet(\"defaultValue\"); }\r\n    protected get_defaultValue(context: Context): LClass[\"defaultValue\"] { return context.proxyObject.instanceof.defaultValue; }\r\n    protected set_referencedBy(val: string, context: Context): boolean { return this.wrongAccessMessage(\"referencedBy cannot be set directly. It should be updated automatically as side effect\"); }\r\n    protected get_referencedBy(context: Context): LObject[\"referencedBy\"] {\r\n        let state: DState = store.getState();\r\n        let targeting: LObject[] = LPointerTargetable.fromArr(context.data.pointedBy.map( p => {\r\n            let s: GObject = state;\r\n            for (let key of PointedBy.getPathArr(p)) {\r\n                s = s[key];\r\n                if (!s) return null;\r\n                if (s.className === DObject.cname) return s.id;\r\n            }\r\n        }));\r\n        return targeting; }\r\n\r\n    protected get_subObjects(context: Context): this[\"subObjects\"] {\r\n        let ref_features: LValue[] = this.get_referenceFeatures(context, false).filter( (f) => (f.instanceof as LReference)!.containment );\r\n        let shapeless_features: LValue[] = this.get_shapelessFeatures(context);\r\n        let vals: LObject[] = [\r\n            ...ref_features.flatMap((f) => (f.values as LObject[])).filter((val)=>!!val),\r\n            ...shapeless_features.flatMap((f) => (f.values as any))\r\n                .filter((val)=>(!!val && val.className === DObject.cname)) as LObject[]\r\n        ];\r\n        return vals;\r\n    }\r\n\r\n    protected get_deepSubObjects(context: Context): this[\"deepSubObjects\"] {\r\n        let alreadyparsed: Dictionary<Pointer, LObject> = {};\r\n        let arr: LObject[] = this.get_subObjects(context);\r\n        while(arr.length) {\r\n            let next: LObject[] = [];\r\n            for (let obj of arr) {\r\n                if (alreadyparsed[obj.id]) continue;\r\n                alreadyparsed[obj.id] = obj;\r\n                next.push(...obj.subObjects);\r\n            }\r\n            arr = next;\r\n        }\r\n        return Object.values(alreadyparsed) || [];\r\n    }\r\n\r\n    protected get_referenceFeatures(context: Context, includeshapeless: boolean = false): this[\"referenceFeatures\"] {\r\n        return context.proxyObject.features.filter((f) => (!f.instanceof ? includeshapeless : f.instanceof.className === DReference.cname));\r\n    }\r\n    protected get_attributeFeatures(context: Context, includeshapeless: boolean = false): this[\"attributeFeatures\"] {\r\n        return context.proxyObject.features.filter((f) => (!f.instanceof ? includeshapeless : f.instanceof.className === DAttribute.cname));\r\n    }\r\n\r\n    protected get_shapelessFeatures(context: Context): this[\"shapelessFeatures\"] {\r\n        return context.proxyObject.features.filter((f) => (!f.instanceof));\r\n    }\r\n\r\n    protected get_isRoot(context: Context): LObject[\"isRoot\"] { return context.proxyObject.father.className === DModel.cname; }\r\n    protected set_isRoot(val: never, context: Context): boolean { return this.wrongAccessMessage(\"isRoot cannot be set directly, change father element instead.\"); }\r\n\r\n    public feature(name: string): (PrimitiveType|LObject)|(PrimitiveType|LObject)[] { this.cannotCall('feature'); return null; }\r\n    private get_feature(context: Context): (name: string) => LValue[\"value\"] | LValue[\"values\"] {\r\n        return (name: string) => {\r\n            const lObject = context.proxyObject;\r\n            const features = lObject.features.filter((value) => {\r\n                return value.instanceof?.name === name\r\n            });\r\n            if(features.length > 0) {\r\n                const matchedFeature = features[0];\r\n                switch(matchedFeature.values.length) {\r\n                    case 0: return '';\r\n                    case 1: return matchedFeature.value;\r\n                    default: return matchedFeature.values;\r\n                }\r\n            } return '';\r\n        }\r\n    }\r\n\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        let asEcoreRoot = (context.proxyObject.isRoot);\r\n        // todo: actually use this loopdetectionobj\r\n        const json: GObject = {};\r\n        if (asEcoreRoot) {\r\n            console.log(\"generate object ecore\", {context, asEcoreRoot, json});\r\n            const lc: LClass = context.proxyObject.instanceof;\r\n            json[ECorePackage.xmiversion] = '2.0';\r\n            json[ECorePackage.xmlnsxmi] = 'http://www.omg.org/XMI';\r\n            // json[ECorePackage.xmlnsxsi] = 'http://www.w3.org/2001/XMLSchema-instance';\r\n            json[\"xmlns:\" + ( lc ? (lc.father.uri + \".\" +lc.father.name) : \"shapeless.model.uri\")] = 'http://www.eclipse.org/emf/2002/Ecore';\r\n        }\r\n\r\n        let features = context.proxyObject.features || [];\r\n        console.log(\"features\", {features});\r\n        for (let f of features) (!json[f.name]) && (json[f.name] = f.generateEcoreJson(loopDetectionObj));\r\n        return json; }\r\n\r\n    public addValue(name?: DValue[\"name\"], instanceoff?: DValue[\"instanceof\"], value?: DValue[\"values\"], isMirage?: boolean): LValue { return this.cannotCall(\"addValue\"); }\r\n    protected get_addValue(context: Context): this[\"addValue\"] {\r\n        return (name?: DValue[\"name\"], instanceoff?: DValue[\"instanceof\"], value?: DValue[\"values\"], isMirage?: boolean) => {\r\n            return LPointerTargetable.fromD(DValue.new(name, instanceoff, value, context.data.id, true, isMirage));\r\n        }\r\n    }\r\n\r\n    protected get_namespace(context: Context): string {\r\n        return context.data.instanceof ? context.proxyObject.instanceof.father.prefix : \"schemaless\"; }\r\n    protected get_uri(context: Context): string {\r\n        if (!context.data.instanceof) return \"schemaless\";\r\n        let pkg = context.proxyObject.instanceof.father;\r\n        return pkg.uri;// + \".\" + pkg.name;\r\n    }\r\n    // protected get_namespace(context: Context): string { if (!context.data.instanceof) return \"schemaless\"; return context.proxyObject.instanceof.namespace; }\r\n\r\n    protected get_children_idlist(context: Context): Pointer<DAnnotation | DValue, 1, 'N'> {\r\n        return [...super.get_children_idlist(context) as Pointer<DAnnotation | DValue, 1, 'N'>,\r\n            ...context.data.features];\r\n    }\r\n\r\n    protected get_instanceof(context: Context): this[\"instanceof\"] {\r\n        const pointer = context.data.instanceof;\r\n        return pointer && LPointerTargetable.from(pointer)\r\n    }\r\n    protected set_instanceof(val: Pack1<this[\"instanceof\"]>, context: Context): boolean {\r\n        const metaptr: D[\"instanceof\"] = Pointers.from(val);\r\n        this._removeConformity(context);\r\n        SetFieldAction.new(context.data.id, \"instanceof\", metaptr, undefined, true);\r\n        // update father's collections (pointedby's here are set automatically)\r\n        metaptr && SetFieldAction.new(metaptr as Pointer<DClass>, \"instances\", context.data.id, '+=', true);\r\n        if (metaptr) this._forceConformity(context, metaptr);\r\n        return true;\r\n    }\r\n\r\n    private forceConformity(context: Context, meta: D[\"instanceof\"]): void {\r\n        let oldinstanceof = context.data.instanceof;\r\n        // context.data.instanceof = meta;\r\n        let ret = this._forceConformity(context, meta);\r\n        // context.data.instanceof = oldinstanceof;\r\n        return ret;\r\n    }\r\n    private _forceConformity(context: Context, meta: D[\"instanceof\"]): void {\r\n        let lmeta = meta && LPointerTargetable.wrap(meta) as this[\"instanceof\"];\r\n        if (!lmeta) return;\r\n        let attrs = lmeta.allAttributes;\r\n        let refs = lmeta.allReferences;\r\n        let values = context.proxyObject.allChildren;\r\n        let idmap: Dictionary<string, LAttribute | LReference> = {};\r\n        for (let a of attrs) { idmap[a.id] = a; }\r\n        for (let a of refs) { idmap[a.id] = a; }\r\n        console.log({idmap, values, data: context.data, l:context.proxyObject});\r\n        // damiano: todo quando viene cancellato una feature il puntatore in features e values rimane. use pointedby's\r\n        // then remove attributes and references that are already instantiated in the object\r\n        for (let v of values) { if(v && v.__raw.instanceof) delete idmap[v.__raw.instanceof]; }\r\n        console.log(\"forceconformity\", {attrs, refs, valuesPre: values.map(v => v && v.__raw.instanceof), toadd:idmap});\r\n        for (let id in idmap) {\r\n            // let l = idmap[id];\r\n            context.proxyObject.addValue(undefined, id, [],true);\r\n        }\r\n    }\r\n    private _removeConformity(context: Context): void {\r\n        let childs = context.proxyObject.features;\r\n        for (let child of childs) if (child.isMirage) child.delete();\r\n    }\r\n\r\n    protected get_features(context: Context): this['features'] {\r\n        return this.get_children(context);\r\n        // return context.data.features.map((feature) => { return LPointerTargetable.from(feature) });\r\n    }\r\n\r\n    public ecorePointer(): string { return this.cannotCall(\"ecorePointer\"); }\r\n    protected get_ecorePointer(context: Context): () => string {\r\n        let lastvisited: Pointer<DObject, 1, 1, LObject> = context.data.id;\r\n        return () => \"@//\" + this.get_fatherList(context).map( (f: LModelElement | LObject | LValue) => {\r\n            if (f.className === DObject.cname) { lastvisited = (f as LObject).id; return ''; }\r\n            if (f.className === DModel.cname) { return ''; }\r\n            console.log(\"get_ecorepointer\", f, f.__raw, lastvisited);\r\n            return (f as LValue).name + \".\" + ((f as LValue).__raw.values.indexOf(lastvisited));\r\n        }).filter(v=>!!v).join(\"@/\");\r\n    }\r\n\r\n}\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DObject);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LObject);\r\n\r\n@Leaf\r\n@RuntimeAccessible('DValue')\r\nexport class DValue extends DModelElement { // extends DModelElement, m1 value (attribute | reference)\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    // static singleton: LValue;\r\n    // static logic: typeof LModelElement;\r\n    // static structure: typeof DValue;\r\n\r\n    // inherit redefine\r\n    id!: Pointer<DValue, 1, 1, LValue>;\r\n    parent: Pointer<DObject, 0, 'N', LObject> = [];\r\n    father!: Pointer<DObject, 1, 1, LObject>;\r\n    annotations: Pointer<DAnnotation, 0, 'N', LAnnotation> = [];\r\n    name?: string; // nome opzionale solo per modelli schema-less\r\n\r\n    // personal\r\n    // value: PrimitiveType | Pointer<DObject, 1, 1, LObject>; // vv4\r\n    // values: PrimitiveType[] | Pointer<DObject, 1, 'N', LObject> | Pointer<DEnumLiteral, 1, 'N', LEnumLiteral> = []; // vv4\r\n    values: PrimitiveType[] | Pointer<DObject|DEnumLiteral, 1, 'N', LObject|LEnumLiteral> = [];\r\n    instanceof!: Pointer<DAttribute, 1, 1, LAttribute > | Pointer<DReference, 1, 1, LReference> | undefined; // todo: maybe min lowerbound 0 if you want to allow free shape objects chiedere prof\r\n    edges!: Pointer<DEdge, 0, 'N', LEdge>;\r\n    // conformsTo!: Pointer<DStructuralFeature, 0, 'N', LStructuralFeature>; // low priority to do: attributo fittizio controlla a quali elementi m2 è conforme quando viene richiesto\r\n    isMirage!: boolean;\r\n    // IoT Section\r\n    topic: string = '';\r\n\r\n    public static new(name?: DNamedElement[\"name\"], instanceoff?: DValue[\"instanceof\"], val?: DValue[\"values\"],\r\n                      father?: DValue[\"father\"] | DObject, persist: boolean = true, isMirage: boolean = false): DValue {\r\n        if (!name) name = this.defaultname(\"property_\", father);\r\n        return new Constructors(new DValue('dwc'), (typeof father === \"string\" ? father : (father as DObject)?.id), persist, undefined)\r\n            .DPointerTargetable().DModelElement()\r\n            .DNamedElement(name)\r\n            .DValue(instanceoff, val, isMirage).end();\r\n    }\r\n\r\n    public static new3(a:Partial<ValuePointers>, then?:((d:DValue, c: Constructors)=>void), persist: boolean = true): DValue{\r\n        if (!a.name) a.name = this.defaultname(\"property_\", a.father);\r\n        return new Constructors(new DValue('dwc'), a.father, persist, undefined, a.id)\r\n            .DPointerTargetable().DModelElement()\r\n            .DNamedElement(a.name)\r\n            .DValue(a.instanceof, a.values)\r\n            .end(then);\r\n    }\r\n}\r\n@RuntimeAccessible('LValue')\r\nexport class LValue<Context extends LogicContext<DValue> = any, C extends Context = Context, D extends DValue = DValue> extends LModelElement { // extends DModelElement, m1 value (attribute | reference)\r\n    static subclasses: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    static _extends: (typeof RuntimeAccessibleClass | string)[] = [];\r\n    public __raw!: DValue;\r\n    id!: Pointer<DValue, 1, 1, LValue>;\r\n\r\n    // inherit redefine\r\n    parent!: (LObject | LModel)[];\r\n    father!: LObject | LModel;\r\n    model!: LModel;\r\n    // from namedelement\r\n    name!: string;\r\n    namespace!: string;\r\n    fullname!:string;\r\n    type!: LClassifier; // Classifiers describing PrimitiveTypes or the classes that can be pointed.\r\n    primitiveType!: LClass;\r\n    classType!: LClass;\r\n    enumType!: LEnumerator;\r\n// from structuralfeature (ref + attr)\r\n    ordered!: boolean;\r\n    unique!: boolean;\r\n    lowerBound!: number;\r\n    upperBound!: number;\r\n    many!: boolean;\r\n    required!: boolean;\r\n\r\n    changeable!: boolean;\r\n    volatile!: boolean;\r\n    transient!: boolean;\r\n    unsettable!: boolean;\r\n    derived!: boolean;\r\n    defaultValue!: DStructuralFeature[\"defaultValue\"];\r\n    // defaultValueLiteral!: string;\r\n// from reference\r\n    containment!: boolean;\r\n    container!: boolean;\r\n    // resolveProxies!: boolean;\r\n    opposite?: LValue; // if DRef have opposite DRef, when you set a value ref you also set a opposite value ref from target to this src. they are always mirroring.\r\n    // target!: LClass[]; is value[]\r\n    edges!: LEdge[];\r\n    // IoT Section\r\n    topic!: string;\r\n\r\n\r\n    // personal\r\n    value!: PrimitiveType | LObject | LEnumLiteral;\r\n    isMirage!: boolean;\r\n    // value!: PrimitiveType | LObject;\r\n    values!: PrimitiveType[] | LObject[] | LEnumLiteral[];\r\n    instanceof!: LAttribute | LReference | undefined;\r\n    conformsTo!:( LAttribute | LReference)[]; // low priority to do: attributo fittizio controlla a quali elementi m2 è conforme quando viene richiesto\r\n\r\n\r\n    protected _defaultGetter(c: Context, k: keyof Context[\"data\"]): any {\r\n        if (k in c.data) return this.__defaultGetter(c, k);\r\n        // if value not found in node, check in view.\r\n        return (this.get_instanceof(c) as any)[k];\r\n    }\r\n\r\n    protected _defaultSetter(v: any, c: Context, k: keyof Context[\"data\"]): true {\r\n        if (super._setterFor$stuff_canReturnFalse(v, c, k as string)) return true; // try setter for data.$feature = value; shortcut for data.$feature.value = value;\r\n        this.__defaultSetter(v, c, k);\r\n        return true;\r\n    }\r\n\r\n    add(...val: any[]): void { return this.cannotCall(\"LValue.add\"); }\r\n    __info_of__add: Info = {type: \"(...val: any|any[]) => void\", txt: \"Adds a value in the current value collection\"}\r\n    get_add(c: Context): (...val: any[] | this[\"values\"])=>void{\r\n        return (...val: any[] | this[\"values\"]) => { this.set_values([...c.data.values, ...val.map(v => v?.id || v)], c); }\r\n    }\r\n    remove(...val: any[]): void{ return this.cannotCall(\"LValue.remove\"); }\r\n    __info_of__remove: Info = {type: \"(...val: any) => void\", txt: \"Deletes a value in the current value collection, or none if the element is not found.\"}\r\n    get_remove(c: Context): (...val: this[\"values\"])=>void {\r\n        return (...val: any[] | this[\"values\"]) => {\r\n            val = val.map(v => v?.id || v);\r\n            let indices = [];\r\n            let values = c.data.values;\r\n            for (let i = 0; i < values.length; i++) {\r\n                if (val.includes(values[i])) indices.push(i);\r\n            }\r\n            this.get_removeByIndex(c)(...indices); }\r\n    }\r\n    removeByIndex(...val: number[]): void{ return this.cannotCall(\"LValue.removeByIndex\"); }\r\n    __info_of__removeByIndex: Info = {type: \"(...indices: number) => removed[]\", txt: \"Deletes a value in the current value collection, or none if the element is not found.\"}\r\n    get_removeByIndex(c: Context): (...indices: number[])=>void{ return (...indices: number[]) => {\r\n        // reducer is ill-typed, so must force typings\r\n        const indexMap: GObject = indices.reduce<GObject|number>(((accumulator: GObject, currentValue: number) => { accumulator[currentValue] = true; return accumulator;}) as any, {} as GObject) as any;\r\n        this.set_values(c.data.values.filter((v,index) => !indexMap[index]), c);\r\n        // this.set_values(c.data.values.filter((v,index) => indices.includes(index)));\r\n    }\r\n    }\r\n\r\n    instantiableClasses(o?: GObject, loose: boolean = false):LClass[] { return this.cannotCall(\"instantiableClasses\"); }\r\n    __info_of__instantiableClasses: Info = {type: \"(o?: object, loose?: boolean) => LClass[]\",\r\n        txt: \"List of all subclasses of the specified type, which can be used as reference values.\" +\r\n            \"\\n<br>Abstract and Interface classes are excluded.\" +\r\n            \"\\n<br>If the parameter \\\"o\\\" is specified, it will filter only the instances conforming to the object schema.\" +\r\n            \"\\n<br>Results are sorted from tightest fit to loosest fit.\" +\r\n            \"\\n<br>loose parameter set to true makes return instead a list of matching scores of all subclasses.\", hidden: true}\r\n\r\n    // warning: this can be called through model, c.data might be either a value or a model.\r\n    get_instantiableClasses(c: Context): this[\"instantiableClasses\"] {\r\n        return (o?: GObject, loose: boolean = false) => LValue.getInstantiableClasses(this, c, o, loose); }\r\n\r\n\r\n    // @eligibleClasses: search only between those targets.\r\n    // @favoritematch: if this class is a valid match, it is given topmost priority regardless of tightness of excess features over the schema.\r\n    // if a class name actually starts with $ character, it needs to be placed twice to get a match, as in class.$$name\r\n    public static getInstantiableClasses(thiss: LValue, c: LogicContext<DValue> | LogicContext<DModel>, schema?: GObject, loose: boolean = false, eligibleClasses?: LClass[], favoriteMatch?: LClass): LClass[] {\r\n        // find eligible classes\r\n        let isDValue: boolean =  c.data.className === \"DValue\";\r\n        let isDModel: boolean =  c.data.className === \"DModel\";\r\n        let isShapeless = !c.data.instanceof;\r\n        let type: LClass | undefined = isShapeless || !isDValue ? undefined : thiss.get_type(c) as LClass;\r\n        let isReference = !!type && type.className === \"DClass\";\r\n        if (isDValue && !isReference && !isShapeless) return []; // case DValue<Attribute>\r\n        if (!eligibleClasses) {\r\n            if (isReference && !isShapeless) { eligibleClasses = [type as LClass, ...(type as LClass).allSubClasses]; }\r\n            else { eligibleClasses = thiss.get_model(c).instanceof?.classes || []; }\r\n        }\r\n        let scoreMap: Dictionary<Pointer, {\r\n            id: Pointer, score: number,\r\n            excessFeatures: Dictionary<string>, matchingFeatures: Dictionary<string>, missingFeatures: Dictionary<string>,\r\n            excessFeaturesCount: number, matchingFeaturesCount: number, missingFeaturesCount: number,\r\n            isPartial: boolean,\r\n            class:LClass, instantiable: boolean, namesMap: Dictionary<DocString<\"feature name\">>}> = {};\r\n        for (let c of eligibleClasses) {\r\n            let raw = c.__raw as DClass;\r\n            let instantiable = !(raw.abstract || raw.interface);\r\n            // if (!loose && instantiable) return false;\r\n            if (scoreMap[raw.id]) continue;\r\n            else scoreMap[raw.id] = {class:c, instantiable, isPartial: raw.partial} as any;\r\n        }\r\n        if (schema) {\r\n            // const fix$ = (vals: string[]) => vals.map(v=> v[0] === \"$\" ? v.substring(1) : v);\r\n            const fix$ = (obj: GObject) => {\r\n                let ret: GObject = {};\r\n                for (let k in obj) {\r\n                    let k1:string = k[0] === \"$\" ? k.substring(1) : k;\r\n                    ret[k1] = obj[k];\r\n                }\r\n                return ret;\r\n            }\r\n            schema = fix$(schema);\r\n            let keys: string[] = Object.keys(schema);\r\n            for (let ptr in scoreMap) {\r\n                let score = scoreMap[ptr];\r\n                score.namesMap = U.objectFromArrayValues(score.class.childNames);\r\n                let diff = U.objdiff(score.namesMap, schema);\r\n                console.log( \"objDiff\", {schema, names:score.namesMap, data:score.class});\r\n                score.id = ptr;\r\n                score.excessFeatures = diff.removed;\r\n                score.missingFeatures = diff.added;\r\n                score.matchingFeatures = {...diff.changed, ...diff.unchanged}\r\n                score.excessFeaturesCount = Object.keys(score.excessFeatures).length;\r\n                score.missingFeaturesCount = Object.keys(score.missingFeatures).length;\r\n                score.matchingFeaturesCount = Object.keys(score.matchingFeatures).length;\r\n                score.score = Math.round(((score.instantiable ? 0 : -1) + (keys.length ? score.matchingFeaturesCount / keys.length : 1))*100)/100;\r\n            }\r\n        }\r\n        let sorted = Object.values(scoreMap);\r\n        if (!loose) sorted = sorted.filter((s) => s.instantiable && (!s.missingFeaturesCount || s.isPartial));\r\n        let favoriteMatchID: undefined | Pointer = favoriteMatch?.id;\r\n        sorted = sorted.sort((a, b): number => {\r\n            // return negative if a is less than b, positive if a is greater than b, and zero if they are equal.\r\n            // but since default order is ascending and i want descending, o reverse it.\r\n            if (a.instantiable && !b.instantiable) return -1;\r\n            if (!a.instantiable && b.instantiable) return +1;\r\n            if (a.missingFeaturesCount === 0 && b.missingFeaturesCount === 0) { // >100% match case (might have excess, take tighter)\r\n                // nly if they are both valid full matches, explicit preference takes precedence. then tightness.\r\n                if (a.id === favoriteMatchID) return -1;\r\n                if (b.id === favoriteMatchID) return +1;\r\n                if (a.matchingFeaturesCount !== b.matchingFeaturesCount) return -a.matchingFeaturesCount + b.matchingFeaturesCount;\r\n                if (a.excessFeaturesCount !== b.excessFeaturesCount) return +a.excessFeaturesCount - b.excessFeaturesCount;\r\n            }\r\n            // <99% match, but might be valid for partial classes.\r\n            if (a.isPartial && !b.isPartial) return -1;\r\n            if (!a.isPartial && b.isPartial) return +1;\r\n            if (a.isPartial && b.isPartial) {\r\n                // only if they are both valid partial matches, explicit preference takes precedence. then tightness.\r\n                if (a.id === favoriteMatchID) return -1;\r\n                if (b.id === favoriteMatchID) return +1;\r\n            }\r\n            // if both partials or none is partial\r\n            // if (a.missingFeaturesCount !== b.missingFeaturesCount) return -a.missingFeaturesCount + b.missingFeaturesCount; should be same as matchingFeaturesCount\r\n            if (a.matchingFeaturesCount !== b.matchingFeaturesCount) return -a.matchingFeaturesCount + b.matchingFeaturesCount;\r\n            if (a.excessFeaturesCount !== b.excessFeaturesCount) return +a.excessFeaturesCount - b.excessFeaturesCount;\r\n            return 0;\r\n        });\r\n        if (loose) return sorted as any;\r\n        return sorted.map(score => score.class);\r\n    }\r\n\r\n    addObject(json?: GObject, metaclass: LClass | Pointer<DClass> | DocString<\"ClassName\"> | undefined | null = undefined): LObject{ return this.cannotCall(\"LValue.addObject\"); }\r\n    __info_of__addObject: Info = {type: \"(json: object, instanceof?: LClass | string | null) => LObject\",\r\n        txt: \"Appends an object instancing \\\"instanceof\\\" to the values.\\n<br>Setting his own properties, and DValues according to the content of the parameter object.\\n<br>\" +\r\n            \"If instanceof is:<ul><li><b>a class or a class name</b>, it will instance that class, or a valid non-abstract subclass.\" +\r\n            \"\\n<br/><b>null</b>, it will instantiate a shapeless object.\" +\r\n            \"\\n<br/><b>undefined or missing</b>, it will first try to find a valid type in m2 or fail.</ul\"}\r\n\r\n    // warning: this can be called through model, c.data might be either a value or a model.\r\n    /*\r\n    @param metaclass: null means \"shapeless\", undefined means automatic or failure, never shapeless.\r\n    type assignment priority:\r\n    1) by explicit type argument\r\n    1.1) treating it as a pointer\r\n    1.2) treating it as a $class_name\r\n    1.3) treating it as a DClass\r\n*/\r\n    get_addObject(c: LogicContext<DValue> | LogicContext<DModel>): (json: GObject)=>LObject{\r\n        return (json: GObject = {}, metaclass: LClass | Pointer<DClass> | DocString<\"ClassName\"> | undefined | null = undefined): LObject => {\r\n            let lobj: LObject = undefined as any;\r\n            TRANSACTION(() => {\r\n                let father: Pointer<DValue> | Pointer<DModel> = '';\r\n                let isDValue = c.data.className === \"DValue\";\r\n                let isDModel = c.data.className === \"DModel\";\r\n                let instanceoff: undefined | LAttribute | LReference = isDValue ? this.get_instanceof(c as Context) : undefined;\r\n                let dinstanceoff: undefined | DAttribute | DReference = instanceoff && instanceoff.__raw;\r\n                // let ShapelessObjectID =\r\n                let isShapeless: boolean = !dinstanceoff; // || dinstanceoff && ((dinstanceoff?.id | dinstanceoff) === ShapelessObjectID);\r\n                let isReference: boolean = !!(dinstanceoff && dinstanceoff.className === \"DReference\");\r\n                if (isDValue && !isReference && !isShapeless) return Log.ee(\"cannot call addObject() on a DValue implementing an attribute\", {dinstanceoff, thiss:c.data});\r\n                let isContainment: boolean = isDValue && this.get_containment(c as Context) || isDModel;\r\n                // if (metaclass === undefined) metaclass = \"object\"; // in this case, i first check if a class \"object\" exist, then make a shapeless object if not.\r\n                let state: DState = store.getState();\r\n\r\n                father = isContainment ? c.data.id : this.get_model(c).id;\r\n                let constructorPointers: Partial<ObjectPointers> = {...json, father};\r\n\r\n                // if undefined = explicitely told to make it shapeless. if null, it's automatic selectyion by value.type or m2-model classes.\r\n                if (metaclass !== null) {\r\n                    let lmetaclass: LClass | undefined;\r\n                    // find instance schema: 1) by explicit type argument\r\n                    if (metaclass) {\r\n                        // find instance schema: 1.1) by pointer AND 1.3) by Dclass\r\n                        lmetaclass = LPointerTargetable.from(metaclass, state);\r\n                        // find instance schema: 1.2) by $class_name\r\n                        if ((!lmetaclass || lmetaclass.className !== \"DClass\") && typeof metaclass === \"string\") {\r\n                            let m2classes = c.proxyObject.model?.instanceof?.classes;\r\n                            if (m2classes) lmetaclass = LPointerTargetable.from(m2classes[\"$\" + metaclass] || m2classes[metaclass], state);\r\n                            // if (!lmetaclass && typeof metaclass === \"string\" && metaclass.toLowerCase() === \"object\") lmetaclass = undefined;\r\n                        }\r\n                        (window as any).debugg = LValue.getInstantiableClasses(this, c, json, true, lmetaclass ? [lmetaclass, ...lmetaclass.allSubClasses] : []);\r\n                        // check if metaclass is found\r\n                        if (!lmetaclass || lmetaclass.className !== \"DClass\") return Log.ee(\"provided schema type does not belong to a Class, cannot intantiate.\", {lmetaclass, schema:metaclass, this:c.data});\r\n                        // check if metaclass is valid (instantiable in the callee collection: .values or .objects)\r\n                        // console.log(\"isExtending\", {lmetaclass, type: isDValue && this.get_type?.(c as any)});\r\n                        if (isDValue && !lmetaclass.isExtending(this.get_type(c as Context) as LClass)) return Log.ee(\"provided schema type does not extend this.type, cannot intantiate.\", {lmetaclass, schema:metaclass, this:c.data});\r\n                    }\r\n                    // find instance schema: 2) by dvalue.type\r\n                    else if (isDValue && !isShapeless) {\r\n                        lmetaclass = this.get_type(c as Context) as LClass;\r\n                    }\r\n                    // phase 2: using lmetaclass (if found), i set constructorPointers.instanceof\r\n                    // if requested type is found. but might be abstract, so i filter the best subclass match\r\n                    if (lmetaclass) {\r\n                        constructorPointers.instanceof = LValue.getInstantiableClasses(this, c, json, false, [lmetaclass, ...lmetaclass.allSubClasses], lmetaclass)[0] as any // actually a L-class, but \"ObjectPointers\" can accept them too.\r\n                        if (!constructorPointers.instanceof) { // the whole if is just printing error.\r\n                            let matches = LValue.getInstantiableClasses(this, c, json, true, [lmetaclass, ...lmetaclass.allSubClasses]);\r\n                            return Log.ee(\"addObject(schema) could not find a valid subtype of \" + metaclass +\r\n                                \" conforming ot that schema to instantiate an object.\\n\" + (matches.length ? \"closest match was: \" + matches[0].name : \"\"), {json, matches, this: c.data});\r\n                        }\r\n                    }\r\n                    // if not found, i look among all m2classes\r\n                    else if (!isDValue || isShapeless) {\r\n                        // if shapelessvalue.addObject() --> infer schema from json keys and ref sub-types best match\r\n                        // if model.addObject() --> find best match within all classes\r\n                        (window as any).debugg = this.get_model(c).instantiableClasses(json, true);\r\n                        constructorPointers.instanceof = this.get_model(c).instantiableClasses(json, false)[0] as any // actually a L-class, but \"ObjectPointers\" can accept them too.\r\n                        if (!constructorPointers.instanceof) { // the whole if is just printing error.\r\n                            let matches = isDValue ? this.get_instantiableClasses(c as Context)(json, true) : this.get_model(c).instantiableClasses(json, true);\r\n                            let type: LClassifier = isDValue ? this.get_type(c as Context) : undefined as any;\r\n                            return Log.ee(\"LValue.addObject(schema) could not find a valid \" + (c.data.className === \"DValue\" ? \"subtype of \" + type.name : \"type\") +\r\n                                \" conforming ot that schema to instantiate an object.\\n\" + (matches.length ? \"closest match was: \" + (matches[0] as any)?.class.name : \"\"), {json, type, matches, thiss: c.data});\r\n                        }\r\n                    }\r\n                    if (!constructorPointers.instanceof && isDValue && !isShapeless) {\r\n                        return Log.ee(\"could not find an instantiable subtype for given schema and type \" + instanceoff?.type?.name, {schema: json, type: instanceoff?.type})\r\n                    }\r\n                }\r\n                // both dmodel.objects nad dvalue.values are updated by the Constructors by passing father parameter.\r\n                // phase 3: create object according to schema (or shapeless) and update parent container collection.\r\n                console.log(\"Object.new3\", {constructorPointers});\r\n                let dobj = DObject.new3(constructorPointers, () => { }, DValue, true);\r\n                if (isReference && !isContainment){\r\n                    // if is ref containment, object.father is set to value, which also appends the object to this.values\r\n                    // if it's model, object.father = model, and it goes in model.objects and not in values.\r\n                    // if it's non-containment value, it goes in model but also appended to this.values\r\n                    // ? if schemaless acts like a containment ref so still fine ?\r\n                    this.set_values([...(c as Context).data.values, dobj.id], c as Context)\r\n                }\r\n                // phase 4: set sub-DDalues.values according to json data provided, or create them if they were missing in partial class match.\r\n                lobj = LPointerTargetable.fromD(dobj);\r\n                let dobjkeys = Object.keys(dobj);\r\n\r\n                // update lmetaclass from candidate root, to selected instance (sub-type)\r\n                let lmetaclass: LClass | undefined = constructorPointers.instanceof && LPointerTargetable.wrap(constructorPointers.instanceof);\r\n                let isPartial: boolean = !!lmetaclass?.partial;\r\n                let childnames: Dictionary<string> = lmetaclass ? U.objectFromArrayValues(lmetaclass.childNames) : {};\r\n                // because at current time Constructor.setPtr actions are not executed yet. so dobject.features is empty, even through LPoint.from(valueid) canaccess the \"pending\" local dvalue not in store.\r\n                setTimeout(()=>TRANSACTION(()=>{\r\n                    for (let key in json) {\r\n                        if (key[0] === \"$\") { // if $ is prepended, priority is first and only child values check\r\n                            if (key in childnames) { // if child dvalue with that name including char $ exist, like in \"$\" + \"$name\"\r\n                                (lobj as GObject<LObject>)[\"$\" + key].values = json[key];\r\n                                continue;\r\n                            }\r\n                            let key1 = key.substring(1);\r\n                            if (key1 in childnames) { // if child dvalue with that name excluding char $ exist, like in \"$\" + \"name\" (as normal)\r\n                                (lobj as GObject<LObject>)[\"$\" + key1].values = json[key];\r\n                                continue;\r\n                            }\r\n                            // if child dvalue with that name do not exist\r\n                            if (isShapeless || isPartial) { lobj.addValue(key, undefined, json[key], false); continue; }\r\n                            // this should never happen, if there is a mismatch in finding the correct type conforming to the schema, the function should have already stopped and returned before.\r\n                            Log.eDev('addObject(schema) error: cannot find value collection named \"' + key + ' \" as defined in the schema parameter.',\r\n                                {lmetaclass, this:c.data, instanceof: constructorPointers.instanceof});\r\n                            continue;\r\n                        }\r\n                        // if $ is NOT prepended, priority is inverted: first DObject properties, then child values\r\n                        if (key in dobjkeys) { (lobj as GObject<LObject>)[key] = json[key]; continue; }\r\n                        else {\r\n                            // redoing the whole childmatch attempt for shaped and shapeless, when first char is not $, as a fallback.\r\n                            if (key in childnames) { // if child dvalue with that name excluding char $ exist, like in \"$\" + \"name\" (as normal)\r\n                                console.log(\"get_addObject() adding values\", {lobj, key, json, childnames, d:constructorPointers.instanceof});\r\n                                (lobj as GObject<LObject>)[\"$\" + key].values = json[key];\r\n                                continue;\r\n                            }\r\n                            else if (isShapeless || isPartial) { lobj.addValue(key, undefined, json[key], false); continue; }\r\n                            Log.eDev('addObject(schema) error: cannot find value collection named \"' + key + ' \" as defined in the schema parameter.',\r\n                                {lmetaclass, this:c.data, instanceof: constructorPointers.instanceof, dobjkeys});\r\n                            continue;\r\n                        }\r\n                    }\r\n                }), 100);\r\n            });\r\n            return lobj;\r\n        }\r\n    }\r\n\r\n\r\n    protected get_edges(context: Context): this[\"edges\"] { return LPointerTargetable.fromPointer(context.data.edges) || []; }\r\n    protected get_fromlfeature<C, T extends keyof (NonNullable<C>)>(meta: C, key: T): NonNullable<C>[T] { return meta ? (meta as any)[key] : undefined; }\r\n    protected get_opposite(context: Context): LReference[\"opposite\"] { return this.get_fromlfeature(context.proxyObject.instanceof as LReference, \"opposite\"); }\r\n    protected get_container(context: Context): LReference[\"container\"] { return this.get_fromlfeature(context.proxyObject.instanceof as LReference, \"container\"); }\r\n    protected get_containment(context: Context): LReference[\"containment\"] {\r\n        let iof = context.proxyObject.instanceof;\r\n        if (!iof) return true; // shapeless\r\n        return this.get_fromlfeature(iof as LReference, \"containment\"); }\r\n    // protected get_defaultValueLiteral(context: Context): LStructuralFeature[\"defaultValueLiteral\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"defaultValueLiteral\"); }\r\n    protected get_defaultValue(context: Context): LStructuralFeature[\"defaultValue\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"defaultValue\"); }\r\n    protected get_defaultderived(context: Context): LStructuralFeature[\"derived\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"derived\"); }\r\n    protected get_defaultunsettable(context: Context): LStructuralFeature[\"unsettable\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"unsettable\"); }\r\n    protected get_defaulttransient(context: Context): LStructuralFeature[\"transient\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"transient\"); }\r\n    protected get_volatile(context: Context): LStructuralFeature[\"volatile\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"volatile\"); }\r\n    protected get_changeable(context: Context): LStructuralFeature[\"changeable\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"changeable\"); }\r\n    protected get_required(context: Context): LStructuralFeature[\"required\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"required\"); }\r\n    protected get_unique(context: Context): LStructuralFeature[\"unique\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"unique\"); }\r\n    protected get_many(context: Context): LStructuralFeature[\"many\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"many\"); }\r\n    protected get_upperBound(context: Context): LStructuralFeature[\"upperBound\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"upperBound\"); }\r\n    protected get_lowerBound(context: Context): LStructuralFeature[\"lowerBound\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"lowerBound\"); }\r\n    protected get_ordered(context: Context): LStructuralFeature[\"ordered\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"ordered\"); }\r\n    protected get_enumType(context: Context): LStructuralFeature[\"enumType\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"enumType\"); }\r\n    protected get_classType(context: Context): LStructuralFeature[\"classType\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"classType\"); }\r\n    protected get_primitiveType(context: Context): LStructuralFeature[\"primitiveType\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"primitiveType\"); }\r\n    protected get_type(context: Context): LStructuralFeature[\"type\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"type\"); }\r\n    protected get_fullname(context: Context): LStructuralFeature[\"fullname\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"fullname\"); }\r\n    protected get_namespace(context: Context): LStructuralFeature[\"namespace\"] { return this.get_fromlfeature(context.proxyObject.instanceof, \"namespace\"); }\r\n    protected get_name(context: Context): LStructuralFeature[\"name\"] { return context.data.instanceof ? this.get_fromlfeature(context.proxyObject.instanceof, \"name\") : context.data.name || ''; }\r\n\r\n    protected get_instanceof(context: Context): this[\"instanceof\"] {\r\n        const pointer = context.data.instanceof;\r\n        if (!pointer) return undefined;\r\n        return LPointerTargetable.from(pointer)\r\n    }\r\n    protected set_instanceof(val: Pack1<this[\"instanceof\"]>, context: Context): boolean {\r\n        // const list = val.map((lItem) => { return Pointers.from(lItem) });\r\n        let ptr = Pointers.from(val);\r\n        SetFieldAction.new(context.data, 'instanceof', ptr, \"\", true);\r\n        return true;\r\n    }\r\n\r\n    protected get_isMirage(context: Context): this[\"isMirage\"] { return context.data.isMirage; }\r\n    protected set_isMirage(val: this[\"isMirage\"], context: Context): boolean { SetFieldAction.new(context.data, 'isMirage', val, \"\", false); return true; }\r\n\r\n    typeStr!:string; // derivate attribute, abstract\r\n    typeString!:string; // derivate attribute, abstract\r\n    __info_of__typeStr: Info = {type: ShortAttribETypes.EString, txt: <div>Alias of<i>this.typeString</i></div>}\r\n    __info_of__typeString: Info = {type: ShortAttribETypes.EString, txt: <div>Stringified version of <i>this.type</i></div>}\r\n    protected get_typeString(c: Context): string { return this.get_typeStr(c); }\r\n    protected get_typeStr(c: Context): string {\r\n        let meta = this.get_instanceof(c);\r\n        return meta ? meta.typeToShortString() : \"shapeless\"; }\r\n\r\n    // individual value getters\r\n    // if withMetaInfo, returns a wrapper for the first non-empty value found containing his index and metainfo\r\n    protected get_value<T extends boolean>(context: Context, namedPointers: boolean = false, ecorePointers: boolean = false,\r\n                                           shapeless: boolean = false, keepempties: boolean = true, withmetainfo: T = false as T): T extends true ? ValueDetail : this[\"value\"]{\r\n        return this.get_values(context, true, namedPointers, ecorePointers, shapeless, keepempties, withmetainfo, 1)[0] as any;\r\n    }\r\n    public getValue<T extends boolean>(namedPointers: boolean = false, ecorePointers: boolean = false, shapeless: boolean = false, keepempties: boolean = true,\r\n                                       withmetainfo: T = false as T): T extends true ? ValueDetail : this[\"value\"]{ return this.cannotCall(\"getValue\"); }\r\n    protected get_getValue(context: Context): this[\"getValue\"] {\r\n        return function (namedPointers: boolean = false, ecorePointers: boolean = false, shapeless: boolean = false,\r\n                         keepempties: boolean = true, withmetainfo: boolean = false) {\r\n            return LValue.prototype.get_value(context, namedPointers, ecorePointers, shapeless, keepempties, withmetainfo) as any;\r\n        }\r\n    }\r\n\r\n    // multiple value getters\r\n    protected get_values<T extends boolean>(context: Context, fitSize: boolean = true, namedPointers: boolean = false, ecorePointers: boolean = false,\r\n                                            shapeless: boolean = false, keepempties: boolean = true, withmetainfo?: T, maxlimit?: number,\r\n                                            solveLiterals: \"ordinals\" | \"literal_obj\" | \"literal_str\" | \"original\" = \"literal_obj\")\r\n        : (T extends undefined ? this[\"values\"] : T extends false ? this[\"values\"] : ValueDetail[]) & {type?: string}  {\r\n\r\n        let ret: any[] = [...context.data.values] as [];\r\n        let meta: LAttribute | LReference | undefined = shapeless ? undefined : context.proxyObject.instanceof;\r\n        let dmeta: undefined | DAttribute | DReference = meta?.__raw;\r\n\r\n        // if (meta && meta.className === DReference.name) ret = LPointerTargetable.fromArr(ret as DObject[]);\r\n        let typestr: string = this.get_typeString(context);\r\n        (ret as GObject).type = typestr;\r\n        if (!Array.isArray(ret)) ret = [];\r\n        if (dmeta && fitSize && ret.length < dmeta.lowerBound && dmeta.lowerBound > 0) {\r\n            let times = dmeta.lowerBound - ret.length;\r\n            while (times-- > 0) ret.push(undefined);\r\n            // ret.length = meta.lowerBound; not really working for expanding, it says \"emptyx10\" or so. doing .map() only iterates \"existing\" elements. behaves like as it's smaller.\r\n        }\r\n        if (maxlimit !== undefined) ret.length = maxlimit;\r\n        else if (dmeta && fitSize && ret.length > dmeta.upperBound && dmeta.upperBound >= 0) ret.length = dmeta.upperBound;\r\n\r\n        // console.log(\"get_values sizefixed\", {fitSize, arguments, upperbound:dmeta?.upperBound, lowerbound: dmeta?.lowerBound, len: ret.length, len0: context.data.values.length});\r\n        let numbermax = 0, numbermin = 0, round = true;\r\n        // ret is always an array of raw values before this point, eventually padded with lowerbound or trimmed at upperbound\r\n\r\n        let index = 0;\r\n        if (withmetainfo) { ret = ret.map(r => {return {value:r, rawValue: r, index: index++, hidden: false} as ValueDetail}); }\r\n        let mapperfunc: (a:any)=>any = undefined as any;\r\n        let numbercasting = (v: any): number => {\r\n            if (typeof v !== \"number\") {\r\n                if (!v) v = 0;\r\n                else if (v === \"true\") v = 1;\r\n                else if (v.constructor?.name=== \"Date\") v = v.getTime();\r\n                else if (typeof v === \"string\") {\r\n                    // console.log(\"number casting:\", v,  U.getFirstNumber(v+'', true), {numbermax, numbermin});\r\n                    v = U.getFirstNumber(v+'', !round);\r\n                } else return NaN;\r\n            }\r\n            v = Math.min(numbermax, Math.max(numbermin, v));\r\n            return round ? Math.round(v) : v;\r\n        };\r\n        switch (typestr) {\r\n            case \"shapeless\":\r\n                let state: DState = store.getState();\r\n                mapperfunc = (val: any) => {\r\n                    if (!val || typeof val !== \"string\") return val;\r\n                    let l: any = LPointerTargetable.fromPointer(val, state);\r\n                    if (!l) return val;\r\n                    if (l.className === DEnumLiteral.cname) { l = (l as DEnumLiteral).literal; } else\r\n                    if (namedPointers) { l = (l.name ? (\"@\" + l.name) : (l as GObject)[\"@\"+l.name]?.__raw?.values?.[0] || (\"#\" + l.className));}\r\n                    else if (ecorePointers){ l = l.ecorePointer(); }\r\n                    return l;\r\n                };\r\n                if (withmetainfo) ret.forEach((struct: ValueDetail) => { struct.value = mapperfunc(struct.value); });\r\n                else ret = ret.map(mapperfunc);\r\n                break;\r\n            default: // it's a reference or enum\r\n                let lenum: LEnumerator = undefined as any;\r\n                let type: LClassifier = (meta as LStructuralFeature)?.type;\r\n                if (type?.className === DEnumerator.cname) {\r\n                    lenum = type as LEnumerator;\r\n                    mapperfunc = (r: any) => {\r\n                        if (solveLiterals === \"original\") return r;\r\n                        numbermin = 0;\r\n                        numbermax = (solveLiterals === \"ordinals\") ? Number.POSITIVE_INFINITY : 0;\r\n                        let lit: LEnumLiteral | undefined\r\n                        if (typeof r === \"string\") lit = Pointers.isPointer(r) ? LPointerTargetable.fromPointer(r) : (lenum as any)[\"@\"+r];\r\n                        else if (typeof r === \"number\") lit = lenum.ordinals[r];\r\n                        switch (solveLiterals) {\r\n                            default:\r\n                            case \"literal_obj\": return lit;\r\n                            // if r was a number and a valid ordinal (found literal through him) return r. if r was a string, don't return r but lenum[\"@\"+r].ordinal\r\n                            case \"ordinals\": return (typeof r === \"number\" ? (lit ? r : undefined) : lit?.ordinal);\r\n                            case \"literal_str\": return (typeof r === \"string\" ? (lit ? r : undefined) : lit?.literal);\r\n                        }\r\n                    }\r\n                } else if (!type.isPrimitive && type?.className === DClass.cname) mapperfunc = (r: any) => r && LPointerTargetable.fromPointer(r);\r\n                else mapperfunc = (r: any) => r;\r\n                if (withmetainfo) ret.forEach((struct: ValueDetail) => { struct.value = mapperfunc(struct.value); });\r\n                else ret = ret.map(mapperfunc);\r\n\r\n                // now ret is pointed DEnumLiteral or DObject or MetaInfoStructure<>\r\n                if (type?.className === DEnumerator.cname) {\r\n                    // replace numeric literals, mapped to literal ordinal. can happen with type switches\r\n                    /*\r\n                    if (solveLiterals) {\r\n                        mapperfunc = (lit: LEnumLiteral|number) => {\r\n                            numbermax = Number.POSITIVE_INFINITY;\r\n                            numbermin = 0;\r\n                            let ordinal = numbercasting(lit);\r\n                            return isNaN(ordinal) ? lit : (meta!.type as LEnumerator).ordinals[ordinal];\r\n                        }\r\n                        if (withmetainfo) ret.forEach((struct: ValueDetail) => { struct.value = mapperfunc(struct.value); });\r\n                        else ret = ret.map(mapperfunc);\r\n                    }*/\r\n                    let filterfunc = (l: LEnumLiteral) => { if (!l) return keepempties; return l.father?.id === (meta as LAttribute).type.id; };\r\n                    if (withmetainfo) for(let struct of ret as ValueDetail[]) { struct.hidden = !filterfunc(struct.value as LEnumLiteral); } // && 'literal target is not of the correct type requested by metamodel'; }\r\n                    else ret = ret.filter(filterfunc);\r\n                    // todo: questo comportamento implica che quando importo un literal come testo da .ecore, devo assegnargli\r\n                    //  il puntatore al suo literal se trovato, altrimenti resta val[i] di tipo string/shapeless\r\n                    if (namedPointers) {\r\n                        mapperfunc = (lit?: LEnumLiteral) => lit?.name;\r\n                        if (withmetainfo) ret.forEach((struct: ValueDetail) => { struct.value = mapperfunc(struct.value); });\r\n                        else ret = ret.map(mapperfunc);\r\n                    }\r\n                    break;\r\n                }\r\n                // is reference with assigned shape (and type) -> filter correct typed targets\r\n                if (meta) {\r\n                    let filterfunc = (l: LObject) => {\r\n                        // hide values with a value that is not a pointer to correct type (but keep empties if requested)\r\n                        //let isExtending = l.instanceof?.isExtending((meta as LReference).type); // damiano: todo test & debug isextending\r\n                        let isExtending = true;\r\n                        return keepempties && !l ? true : isExtending;\r\n                    };\r\n                    if (withmetainfo) for(let struct of ret as ValueDetail[]) { struct.hidden = !filterfunc(struct.value as LObject); } // && \"ref target is not of correct type\"; }\r\n                    else ret = ret.filter(filterfunc);\r\n                }\r\n                // shaped (with m2-reference) but pointing to a shapeless object. can happen\r\n                if (namedPointers) {\r\n                    let mapperfunc = (l:LObject) => l && (l.name ? (\"@\" + l.name) : (l as GObject)[\"@\"+l.name]?.__raw?.values?.[0] || (\"#\" + l.className));\r\n                    if (withmetainfo) ret.forEach((struct: ValueDetail)=>{ struct.value = mapperfunc(struct.value as LObject); });\r\n                    else ret = ret.map(mapperfunc);\r\n                }\r\n                else if (ecorePointers && !(meta as LReference).containment){\r\n                    mapperfunc = (lval: LObject) => lval && lval.ecorePointer();\r\n                    if (withmetainfo) ret.forEach((struct: ValueDetail)=>{ struct.value = mapperfunc(struct.value as LObject); });\r\n                    else ret = ret.map(mapperfunc);\r\n                    // throw new Error(\"values as EcorePointers: todo. for containment do nothing, just nest the obj. for non-containment put the ecore reference string in array vals\")\r\n                }\r\n                break;\r\n            case ShortAttribETypes.EByte:\r\n                numbermin = -128;\r\n                numbermax = 127;\r\n                break;\r\n            case ShortAttribETypes.EShort:\r\n                numbermin = -32768;\r\n                numbermax = 32767;\r\n                break;\r\n            case ShortAttribETypes.EInt:\r\n                numbermin = -2147483648;\r\n                numbermax = 2147483647;\r\n                break\r\n            case ShortAttribETypes.ELong:\r\n                numbermin = -9223372036854775808;\r\n                numbermax = 9223372036854775807;\r\n                break;\r\n            case ShortAttribETypes.EFloat:\r\n            case ShortAttribETypes.EDouble:\r\n                numbermin = Number.NEGATIVE_INFINITY;\r\n                numbermax = Number.POSITIVE_INFINITY;\r\n                round = false;\r\n                break;\r\n            case ShortAttribETypes.EString:\r\n            case ShortAttribETypes.EDate:\r\n                mapperfunc = v => v ? v + '' : ''\r\n                if (withmetainfo) ret.forEach((struct: ValueDetail)=>{ struct.value = mapperfunc(struct.value); });\r\n                else ret = ret.map(mapperfunc);\r\n                break;\r\n            case ShortAttribETypes.EChar:\r\n                mapperfunc = v => v ? (v + '')[0] : 'A';\r\n                if (withmetainfo) ret.forEach((struct: ValueDetail)=>{ struct.value = mapperfunc(struct.value); });\r\n                else ret = ret.map(mapperfunc);\r\n                break;\r\n            case ShortAttribETypes.EBoolean:\r\n                mapperfunc = v => typeof v === \"boolean\" ? v : U.fromBoolString(v+'', v?.length>0, false);\r\n                if (withmetainfo) ret.forEach((struct: ValueDetail)=>{ struct.value = mapperfunc(struct.value); });\r\n                else ret = ret.map(mapperfunc);\r\n                break;\r\n            case ShortAttribETypes.EVoid:\r\n                if (withmetainfo) ret.forEach((struct: ValueDetail)=>struct.hidden = true);\r\n                else ret = [];\r\n                break;\r\n        }\r\n        // some kind of numeric type\r\n        if (numbermax !== 0) {\r\n            if (withmetainfo) ret.forEach((struct: ValueDetail)=>{ struct.value = numbercasting(struct.value); });\r\n            else ret = ret.map(numbercasting);\r\n        }\r\n        return ret as any;\r\n    }\r\n\r\n    public getValues<T extends boolean>(fitSize: boolean = true, namedPointers: boolean = false, ecorePointers: boolean = false, shapeless: boolean = false,\r\n                                        keepempties: boolean = true, withmetainfo?: T, maxlimit?: number)\r\n        : (T extends undefined ? this[\"values\"] : T extends false ? this[\"values\"] : ValueDetail[]) & {type?: string} {\r\n        return this.cannotCall(\"getValues\"); }\r\n    protected get_getValues(context: Context): this[\"getValues\"] {\r\n        return function (fitSize: boolean = true, namedPointers: boolean = true, ecorePointers: boolean = false,\r\n                         shapeless: boolean = false, keepempties: boolean = false, withmetainfo: any = false, limit?: number) {\r\n            return LValue.prototype.get_values(context, fitSize, namedPointers, ecorePointers, shapeless, keepempties, withmetainfo, limit) as any;\r\n        }\r\n    }\r\n    // stringified value getters\r\n    public valuesString(keepemptyquotes?: boolean): string { return this.cannotCall(\"valuestring\"); }\r\n    public valuestring(keepemptyquotes?: boolean): string { return this.cannotCall(\"valuestring\"); }\r\n    private get_valuestring(context: Context): this[\"valuestring\"] { return (keepemptyquotes?: boolean) => this.valuestring_impl(context, keepemptyquotes); }\r\n    private get_valuesString(context: Context): this[\"valuestring\"] { return (keepemptyquotes?: boolean) => this.valuestring_impl(context, keepemptyquotes); }\r\n    private valuestring_impl(context: Context, keepemptyquotes?: boolean): string {\r\n        let val = this.get_values(context, true, true, false, false, true);\r\n        // console.log(\"valuestring_impl\", {val});\r\n        let ret: any;\r\n        switch (val.length) {\r\n            case 0: ret = ''; break;\r\n            case 1: ret = val[0]; break;\r\n            default:\r\n                let havestrings: boolean = val.type === ShortAttribETypes.EString;\r\n                let havechars: boolean = val.type === ShortAttribETypes.EChar;\r\n                let havepointers: boolean = false;\r\n                let haveLelements: boolean = false;\r\n                for (let vall of [val[0]]) {\r\n                    if ((vall as any)?.__isProxy) haveLelements = true;\r\n                    /*else if (typeof vall === \"string\") { havestrings = true; havepointers = havepointers || vall.includes(\"Pointer\"); }}\r\n                     */\r\n                }\r\n                /*if (havepointers) {\r\n                    val = LPointerTargetable.wrapAll(val);\r\n                    haveLelements = true;\r\n                }*//*\r\n                if (haveLelements) {\r\n                    val = val.map( l => l && (l.name ? (\"@\" + l.name) : (\"#\" + l.className)));\r\n                }*/\r\n                if (havestrings || havechars) {\r\n                    let valstr = JSON.stringify(val);\r\n                    if (!keepemptyquotes) valstr = U.replaceAll(valstr, \"\\\"\\\"\", \"\");\r\n                    ret = valstr.substring(1, valstr.length-1);\r\n                    break;\r\n                }\r\n                else ret = val.join(', ');\r\n        }\r\n        return (ret === undefined || ret === null ? '' : ret) + '';\r\n    }\r\n\r\n    public setValueAtPosition(index: number, val: this[\"values\"][0], info?: Partial<SetValueAtPositionInfoType>): {success: boolean, reason?: string} {\r\n        return this.cannotCall(\"setValueAtPosition\"); }\r\n\r\n    // only use through setValueAtPosition\r\n    protected _clearValueAtPosition(context: Context, index: number, info0?: Partial<SetValueAtPositionInfoType>, skipSettingUndefined: boolean = false) {\r\n        let info = (info0 || {}) as unknown as SetValueAtPositionInfoType;\r\n        let oldVal = context.data.values[index];\r\n        let oldTarget: LObject | undefined = typeof oldVal === \"string\" ? LObject.fromPointer(oldVal) : undefined;\r\n        /////////////////////// if oldTarget is LObject, update his pointedBy\r\n        // if (oldTarget) SetFieldAction.new(oldTarget, \"pointedBy\" '-=\", ... no need? reducer should do this)\r\n\r\n        /////////////////////// if ref is containment assign oldTarget father to DModel\r\n\r\n        if (info.isContainment === undefined) {\r\n            if (info.instanceof === undefined) info.instanceof = context.proxyObject.instanceof;\r\n            if (info.instanceof){\r\n                if (info.instanceof.className === DReference.cname) { info.isContainment = (info.instanceof as LReference).containment; }\r\n                else info.isContainment = false;\r\n            }\r\n            else { info.isContainment = true; }\r\n        }\r\n        if (info.isContainment && oldTarget?.className === \"DObject\") {\r\n            SetFieldAction.new(oldVal as Pointer<DObject>, \"father\", context.proxyObject.model.id, undefined, true);\r\n        }\r\n        if (!skipSettingUndefined) SetFieldAction.new(context.data, 'values.' + index as any, undefined, '', info.isPtr);\r\n    }\r\n    protected get_setValueAtPosition(context: Context): ((index: number, val: this[\"values\"][0], info?: Partial<SetValueAtPositionInfoType>) => {success: boolean, reason?: string}) {\r\n        return (index: number, val: this[\"values\"][0] | any, info0?: Partial<SetValueAtPositionInfoType>): { success: boolean, reason?: string } => {\r\n            let isPtr: boolean = undefined as any;\r\n            let lval: LObject | LEnumLiteral = undefined as any;\r\n            if (val === null) val = undefined;\r\n            if (context.data.values[index] === val) return { success: false, reason: \"identical assignment\" };\r\n            if ((val as any)?.id && (val as any)?.className) {\r\n                lval = (val.__isProxy ? val : LPointerTargetable.wrap<DObject>(val));\r\n                isPtr = !!lval;\r\n                val = (val as any).id;\r\n            }\r\n            let info = (info0 || {}) as unknown as SetValueAtPositionInfoType;\r\n            if (isPtr === undefined) isPtr = (info.isPtr === undefined ? Pointers.isPointer(val) : info.isPtr);\r\n\r\n            // set sideeffect part\r\n            if (val !== undefined) {\r\n                if (isPtr) {\r\n                    if (info.type === undefined) info.type = context.proxyObject.type;\r\n                    if (info.instanceof === undefined) info.instanceof = context.proxyObject.instanceof;\r\n                    if (info.isContainment === undefined) {\r\n                        info.isContainment = !info.instanceof || (info.instanceof.className === DReference.cname && (info.instanceof as LReference).containment);\r\n                    }\r\n                    lval = LPointerTargetable.fromPointer(val);\r\n                    if (!lval) return {success: false, reason: \"invalid pointer: \" + lval};\r\n                    // is enum\r\n                    if (lval.className === DEnumLiteral.cname) {\r\n                        let lvale: LEnumLiteral = lval as LEnumLiteral;\r\n                        if (info.instanceof && info.type && (lvale.father.id !== info.type.id)) return {success: false, reason: \"target is not of correct literal type\"};\r\n                        // no need to do checks / other sideeffects other than pointedBy i think.\r\n                    }\r\n                    // is ref\r\n                    if (lval.className === DObject.cname){\r\n                        let lvalo = lval as LObject;\r\n                        let lvalmeta: LClassifier | undefined = lvalo.instanceof;\r\n                        // if (info.instanceof && info.type && (!(lvalmeta as LClass)?.isExtending(info.type))) return {success: false, reason: \"target is not of correct type\"}; damiano todo: enable and implement isExtending\r\n                        if (info.fatherList === undefined) info.fatherList = context.proxyObject.fatherList;\r\n                        if (info.isContainment) {\r\n                            if ((info.fatherList as LPointerTargetable[]).map(father => father.id).includes(val))\r\n                                return {success: false, reason: \"cannot create a containment loop\"}; // todo: in LReference.set_containment need to forbid setting to true if there is a loop\r\n                            let oldContainer: LValue | LModel = lvalo.father;\r\n                            let oldContainerValue: LValue = (oldContainer.className === DModel.cname) ? undefined as any : (oldContainer as LValue);\r\n                            // detach contaied object from old parent\r\n                            if (oldContainerValue) {\r\n                                let valarr: any[] = oldContainerValue.__raw.values;\r\n                                for (let i = 0; i < valarr.length; i++) {\r\n                                    let v = valarr[i];\r\n                                    if (v === val) oldContainerValue.setValueAtPosition(i, undefined as any, undefined);\r\n                                }\r\n                            }\r\n                            SetFieldAction.new(val as Pointer<DObject>, \"father\", context.data.id, undefined, true);\r\n                        }\r\n                    }\r\n                    // automatic? SetFieldAction.new(val as Pointer<DObject>, \"pointedBy\", PointedBy.fromID(context.data.id, \"values.\" + index as any), \"+=\");\r\n                } else {\r\n                    // loose checks, i can assign any primitive to any primitive (will cast on get)\r\n                    if (info.instanceof === undefined) info.instanceof = context.proxyObject.instanceof;\r\n                    let metatype: string = (info.instanceof as LAttribute)?.typeToShortString() || \"shapeless\";\r\n                    if (typeof val === \"object\") {\r\n                        if (val.constructor === Date && (metatype !== \"EString\" && metatype !== \"EDate\" && metatype !== \"shapeless\"))\r\n                            return {\r\n                                success: false,\r\n                                reason: \"dates can only be assigned to values of type string or Date\"\r\n                            };\r\n                        // return {success: false, reason: \"objects are not assignable except for dates\"}; maybe i allow this instead\r\n                    }\r\n                }\r\n            }\r\n\r\n            // clear sideeffect part\r\n            this._clearValueAtPosition(context, index, info, true);\r\n\r\n            // actual set\r\n            SetFieldAction.new(context.data, 'values.' + index as any, val, '', isPtr);\r\n            if (info.setMirage !== false) SetFieldAction.new(context.data, 'isMirage', false, '', false);\r\n\r\n            // assegnato a giordano todo: wrap this and set toaster with failure message if it fails or better launch Log.w and bind toasts of different colors to Log funcs\r\n            return {success: true};\r\n        }\r\n    }\r\n    protected set_values(val: orArr<D[\"values\"]>, context: Context): boolean {\r\n        const list: D[\"values\"] = ((Array.isArray(val)) ? val : [val]) as D[\"values\"];\r\n        let modified = false;\r\n        for (let i = 0; i < list.length; i++) {\r\n            modified = this.get_setValueAtPosition(context)(i, list[i], {setMirage: false} as any).success || modified;\r\n        }\r\n        if (modified) context.data.isMirage && SetFieldAction.new(context.data, 'isMirage', false, '', false);\r\n        return true;\r\n\r\n        // old implementation\r\n        let l = context.proxyObject;\r\n        let instanceoff: LReference | LAttribute | undefined = l.instanceof;\r\n        let isRef: boolean | undefined = (!instanceoff ? undefined : instanceoff?.className === DReference.cname);\r\n        SetFieldAction.new(context.data, 'values', list as any, '', false);\r\n        // console.log(\"pre set_values actions\", l, list, val, context);\r\n\r\n        if (!l.instanceof || isRef && (instanceoff as LReference).containment) {\r\n            let i = 0;\r\n\r\n            for (let v0 of list) {\r\n                // console.log(\"loop set_value actions\", v, context.data, isRef, instanceoff, Pointers.isPointer(v));\r\n                i++;\r\n                if ((isRef || instanceoff === undefined) && Pointers.isPointer(v0)) { // if shapeless obj need to check val by val\r\n                    let v = v0 as Pointer<DModelElement> //Pointer<DObject> | Pointer<DEnumLiteral>;\r\n                    // console.log(\"loop set_value actions SET\", {v, data:context.data, isRef, instanceoff, isPtr:Pointers.isPointer(v)});\r\n                    let lval: LObject = LPointerTargetable.fromPointer(v);\r\n                    let oldContainer: LValue | LModel = lval.father;\r\n                    SetFieldAction.new(v, \"pointedBy\", PointedBy.fromID(context.data.id, \"values.\" + i as any), \"+=\");\r\n                    SetFieldAction.new(v, \"father\", context.data.id, undefined, true);\r\n                    if (oldContainer.className === DModel.cname) continue;\r\n                    let containerValue = (oldContainer as LValue);\r\n                    // let oldContainerValues = [...containerValue.__raw.value]; U.arrayRemoveAll(oldContainerValues, v);\r\n                    let oldContainerValues: Pointer[] = containerValue.__raw.values.map( va => va===v ? undefined as any : va);\r\n                    SetFieldAction.new(containerValue.id, \"values\", oldContainerValues, \"\", true);\r\n\r\n                    // todo: verify if works: remove val from old container\r\n                    let oldv = context.data.values[i];\r\n                    // if (Pointers.isPointer(oldv)) SetFieldAction.new(context.data.id, \"contains\", U.arrayRemoveAll([...context.data.contains], oldv), '', true);\r\n                    // SetFieldAction.new(context.data.id, \"contains\", oldv as DObject[\"id\"], undefined, true);\r\n\r\n                }\r\n            }\r\n        }\r\n        context.data.isMirage && SetFieldAction.new(context.data, 'isMirage', false, '', false);\r\n        return true;\r\n    }\r\n\r\n    protected set_value(val: D[\"values\"][0], context: Context): boolean {\r\n        let v: ValueDetail = this.get_value(context, false, false, false, true, true);\r\n        let r = this.get_setValueAtPosition(context)(v?.index || 0, val);\r\n        Log.e(!r.success,  r.reason);\r\n        return r.success;\r\n    }\r\n\r\n    protected generateEcoreJson_impl(context: Context, loopDetectionObj: Dictionary<Pointer, DModelElement> = {}): Json {\r\n        loopDetectionObj[context.data.id] = context.data;\r\n        let values = this.get_values(context, true, false, true, false, false);\r\n        delete values[\"type\"];\r\n        let ret: any = [];\r\n        the_loop: for (let v of values){\r\n            let l: LObject | LEnumLiteral = v as any;\r\n            if (!l?.__isProxy) { ret.push(l); continue; }\r\n            switch (l.className){\r\n                case \"DOperation\": continue the_loop;\r\n                case \"DEnumLiteral\": ret.push((l as LEnumLiteral).generateEcoreJsonM1()); break;\r\n                default: ret.push(l.generateEcoreJson(loopDetectionObj)); break;\r\n            }\r\n        }\r\n        // ret = ret.filter((j: any) => (j !== undefined || j !== ''));\r\n        return (ret.length <= 1) ? ret[0] : ret; }\r\n\r\n    protected get_toString(context: Context): () => string { return () => this._toString(context); }\r\n    protected _toString(context: Context): string {\r\n        let val: any = this.get_values(context, true, true, false, false, true);\r\n        if (!val) return val + '';\r\n        if (!Array.isArray(val)) val = [val];\r\n        // if (!context.proxyObject.instanceof) val = val.map( (e: GObject) => { return  e.name ? \"@\" + e.name : e; });\r\n        // else if (context.proxyObject.instanceof?.className === DReference.name) val = val.map( (e: GObject) => { return e.name ? \"@\" + e.name : e; });\r\n        switch(val.length) {\r\n            case 0: return '';\r\n            case 1: return val[0] + '';\r\n            default: return val + '';\r\n        }\r\n    }\r\n\r\n    public rawValues(): void { super.cannotCall('rawValues'); }\r\n    public get_rawValues(context: Context): this[\"values\"]{\r\n        return (this.get_getValues(context))(false, false, false, true, true, false, undefined);\r\n    }\r\n\r\n    protected get_topic(context: Context): this[\"topic\"] {\r\n        return context.data.topic;\r\n    }\r\n    protected set_topic(val: string, context: Context): boolean {\r\n        SetFieldAction.new(context.data, 'topic', val, '', false);\r\n        return true;\r\n    }\r\n}\r\nRuntimeAccessibleClass.set_extend(DNamedElement, DValue);\r\nRuntimeAccessibleClass.set_extend(LNamedElement, LValue);\r\n\r\nexport type ValueDetail = {\r\n    value: LValue['value'];\r\n    rawValue: DValue['values'][0]; // PrimitiveType | Pointer<DObject> | Pointer<DEnumLiteral>\r\n    index: number;\r\n    hidden: boolean;\r\n};\r\nexport type SetValueAtPositionInfoType = {setMirage: boolean, isPtr: boolean, type: LValue['type'], instanceof: LValue['instanceof'], isContainment: boolean, fatherList: LValue['fatherList']};\r\n\r\nexport type WModelElement = getWParams<LModelElement, DModelElement>;\r\nexport type WModel = getWParams<LModel, DModel>;\r\nexport type WValue = getWParams<LValue, DValue>;\r\nexport type WNamedElement = getWParams<LNamedElement, DNamedElement>;\r\nexport type WObject = getWParams<LObject, DObject>;\r\nexport type WEnumerator = getWParams<LEnumerator, DEnumerator>;\r\nexport type WEnumLiteral = getWParams<LEnumLiteral, DEnumLiteral>;\r\nexport type WAttribute = getWParams<LAttribute, DAttribute>;\r\nexport type WReference = getWParams<LReference, DReference>;\r\nexport type WStructuralFeature = getWParams<LStructuralFeature, DStructuralFeature>;\r\nexport type WClassifier = getWParams<LClassifier, DClassifier>;\r\nexport type WDataType = getWParams<LDataType, DDataType>;\r\nexport type WClass = getWParams<LClass, DClass>;\r\nexport type WParameter = getWParams<LParameter, DParameter>;\r\nexport type WOperation = getWParams<LOperation, DOperation>;\r\nexport type WPackage = getWParams<LPackage, DPackage>;\r\nexport type WTypedElement = getWParams<LTypedElement, DTypedElement>;\r\nexport type WAnnotation = getWParams<LAnnotation, DAnnotation>;\r\n// export type WJavaObject = getWParams<LJavaObject, DJavaObject>;\r\nexport type WMap = getWParams<LMap, DMap>;\r\nexport type WFactory_useless_ = getWParams<LFactory_useless_, DFactory_useless_>;\r\n\r\nDModelElement.cname = 'DModelElement';\r\nLModelElement.cname = 'LModelElement';\r\nDAnnotationDetail.cname = 'DAnnotationDetail';\r\nLAnnotationDetail.cname = 'LAnnotationDetail';\r\nDAnnotation.cname = 'DAnnotation';\r\nLAnnotation.cname = 'LAnnotation';\r\nDNamedElement.cname = 'DNamedElement';\r\nLNamedElement.cname = 'LNamedElement';\r\nDTypedElement.cname = 'DTypedElement';\r\nLTypedElement.cname = 'LTypedElement';\r\nDClassifier.cname = 'DTypedElement';\r\nLClassifier.cname = 'LTypedElement';\r\nDPackage.cname = 'DPackage';\r\nLPackage.cname = 'LPackage';\r\nDOperation.cname = 'DOperation';\r\nLOperation.cname = 'LOperation';\r\nDParameter.cname = 'DParameter';\r\nLParameter.cname = 'LParameter';\r\nDClass.cname = 'DClass';\r\nLClass.cname = 'LClass';\r\n// ClassReferences.cname = 'ClassReferences';\r\nDDataType.cname = 'DDataType';\r\nLDataType.cname = 'LDataType';\r\nDStructuralFeature.cname = 'DStructuralFeature';\r\nLStructuralFeature.cname = 'LStructuralFeature';\r\nDReference.cname = 'DReference';\r\nLReference.cname = 'LReference';\r\nDAttribute.cname = 'DAttribute';\r\nLAttribute.cname = 'LAttribute';\r\nDEnumLiteral.cname = 'DEnumLiteral';\r\nLEnumLiteral.cname = 'LEnumLiteral';\r\nDModelM1.cname = 'DModelM1';\r\nLModelM1.cname = 'LModelM1';\r\nDEnumerator.cname = 'DEnumerator';\r\nLEnumerator.cname = 'LEnumerator';\r\nDModel.cname = 'DModel';\r\nLModel.cname = 'LModel';\r\nDMap.cname = 'DMap';\r\nLMap.cname = 'LMap';\r\nDObject.cname = 'DObject';\r\nLObject.cname = 'LObject';\r\nDValue.cname = 'DValue';\r\nLValue.cname = 'LValue';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}