{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import{Input,DUser,LUser}from'../../../joiner';import React from'react';import{connect}from'react-redux';import DockManager from\"../DockManager\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function m2Row(model){return mRow(model,false);}function m1Row(model){return mRow(model,true);}// too small to justify a separate file\nfunction mRow(model){var _model$instanceof;var showInstanceOf=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!model)return/*#__PURE__*/_jsx(_Fragment,{});return/*#__PURE__*/_jsxs(\"label\",{className:'ms-3 d-block',onClick:function onClick(){return DockManager.open2(model);},style:{cursor:'pointer'},children:[\"- \",model.name,showInstanceOf&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"b\",{className:'text-success',children:[\" \",model.instanceof?'conforms to':'is shapeless']}),\" \",(_model$instanceof=model.instanceof)===null||_model$instanceof===void 0?void 0:_model$instanceof.name]}),/*#__PURE__*/_jsx(\"button\",{className:'ms-1 btn-outline-secondary btn bi bi-arrow-right-short',style:{border:'none'},onClick:function onClick(){return DockManager.open2(model);}})]},model.id);}function InfoTabComponent(props){var project=props.project;var metamodels=project.metamodels;var models=project.models;var modelmap={};var _iterator=_createForOfIteratorHelper(models),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var m=_step.value;var m2=m.instanceof;var m2name=m2===null||m2===void 0?void 0:m2.name;if(!modelmap[m2name])modelmap[m2name]=[];modelmap[m2name].push(m);}}catch(err){_iterator.e(err);}finally{_iterator.f();}models=Object.values(modelmap).flat();// this way they are sorted by metamodel\nreturn/*#__PURE__*/_jsxs(\"div\",{className:'p-3',children:[/*#__PURE__*/_jsx(\"h3\",{className:'text-primary',children:project.name}),/*#__PURE__*/_jsx(Input,{data:project.id,field:'name',jsxLabel:/*#__PURE__*/_jsx(\"b\",{className:'text-primary my-auto me-2',children:\"Name\"}),hidden:true}),project.type==='collaborative'&&/*#__PURE__*/_jsxs(\"b\",{className:'d-block',children:[/*#__PURE__*/_jsx(\"label\",{className:'text-primary ',children:\"Online Users:\"}),\" \",project.onlineUsers]}),/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsxs(\"label\",{className:'text-primary',children:[\"Metamodels (\",metamodels.length,\"):\"]})}),/*#__PURE__*/_jsx(\"section\",{children:metamodels.map(m2Row)}),/*#__PURE__*/_jsx(\"b\",{children:/*#__PURE__*/_jsxs(\"label\",{className:'text-primary',children:[\"Models (\",models.length,\"):\"]})}),/*#__PURE__*/_jsx(\"section\",{children:models.map(m1Row)})]});}function mapStateToProps(state,ownProps){var ret={};var luser=LUser.fromPointer(DUser.current,state);ret.project=luser.project;return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var InfoTabConnected=connect(mapStateToProps,mapDispatchToProps)(InfoTabComponent);export var InfoTab=function InfoTab(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(InfoTabConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export default InfoTab;","map":{"version":3,"names":["Input","DUser","LUser","React","connect","DockManager","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","m2Row","model","mRow","m1Row","_model$instanceof","showInstanceOf","arguments","length","undefined","className","onClick","open2","style","cursor","children","name","instanceof","border","id","InfoTabComponent","props","project","metamodels","models","modelmap","_iterator","_createForOfIteratorHelper","_step","s","n","done","m","value","m2","m2name","push","err","e","f","Object","values","flat","data","field","jsxLabel","hidden","type","onlineUsers","map","mapStateToProps","state","ownProps","ret","luser","fromPointer","current","mapDispatchToProps","dispatch","InfoTabConnected","InfoTab","_objectSpread"],"sources":["C:/d/Programming/web/jodel-mde/src/components/abstract/tabs/ModelsSummaryTab.tsx"],"sourcesContent":["import type {DState, LProject} from '../../../joiner';\r\nimport {U, Input, DUser, LUser, LModel} from '../../../joiner';\r\nimport React, {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport type {Dictionary, FakeStateProps} from '../../../joiner/types';\r\nimport DockManager from \"../DockManager\";\r\n\r\nfunction m2Row(model: LModel) { return mRow(model, false) }\r\nfunction m1Row(model: LModel) { return mRow(model, true) }\r\n// too small to justify a separate file\r\nfunction mRow(model: LModel, showInstanceOf: boolean = false) {\r\n    if(!model) return(<></>);\r\n    return (\r\n        <label className={'ms-3 d-block'} key={model.id} onClick={()=>DockManager.open2(model)} style={{cursor: 'pointer'}}>\r\n            - {model.name}{\r\n            showInstanceOf && <><b className={'text-success'}> {model.instanceof ? 'conforms to' : 'is shapeless'}</b> {model.instanceof?.name}</>\r\n            }\r\n            <button className={'ms-1 btn-outline-secondary btn bi bi-arrow-right-short'} style={{border:'none'}} onClick={()=>DockManager.open2(model)} />\r\n        </label>)\r\n}\r\n\r\nfunction InfoTabComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const metamodels = project.metamodels;\r\n    let models = project.models;\r\n    let modelmap: Dictionary<string, LModel[]> = {}\r\n    for (let m of models) {\r\n        let m2 = m.instanceof;\r\n        let m2name = m2?.name as string;\r\n        if (!modelmap[m2name]) modelmap[m2name] = [];\r\n        modelmap[m2name].push(m);\r\n    }\r\n    models = Object.values(modelmap).flat();  // this way they are sorted by metamodel\r\n\r\n    return(<div className={'p-3'}>\r\n        <h3 className={'text-primary'}>{project.name}</h3>\r\n        <Input data={project.id} field={'name'} jsxLabel={<b className={'text-primary my-auto me-2'}>Name</b>} hidden={true} />\r\n        {(project.type === 'collaborative') &&\r\n            <b className={'d-block'}><label className={'text-primary '}>Online Users:</label> {project.onlineUsers}</b>\r\n        }\r\n        <b><label className={'text-primary'}>Metamodels ({metamodels.length}):</label></b>\r\n        <section>\r\n            {metamodels.map(m2Row)}\r\n        </section>\r\n        <b><label className={'text-primary'}>Models ({models.length}):</label></b>\r\n        <section>\r\n            {models.map(m1Row)}\r\n        </section>\r\n    </div>);\r\n}\r\n\r\ninterface OwnProps {}\r\ninterface StateProps {project: LProject}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const luser = LUser.fromPointer(DUser.current, state);\r\n    ret.project = luser.project as LProject;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const InfoTabConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(InfoTabComponent);\r\n\r\nexport const InfoTab = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <InfoTabConnected {...{...props, children}} />;\r\n}\r\nexport default InfoTab;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}