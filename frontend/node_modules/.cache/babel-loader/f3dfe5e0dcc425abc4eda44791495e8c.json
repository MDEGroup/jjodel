{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{connect}from'react-redux';import Editor from'@monaco-editor/react';import{LViewElement,Defaults}from'../../../joiner';import{useStateIfMounted}from'use-state-if-mounted';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OclEditorComponent(props){var view=props.view;var _useStateIfMounted=useStateIfMounted(view.oclCondition),_useStateIfMounted2=_slicedToArray(_useStateIfMounted,2),ocl=_useStateIfMounted2[0],setOcl=_useStateIfMounted2[1];var _useStateIfMounted3=useStateIfMounted(true),_useStateIfMounted4=_slicedToArray(_useStateIfMounted3,2),show=_useStateIfMounted4[0],setShow=_useStateIfMounted4[1];if(!view)return/*#__PURE__*/_jsx(_Fragment,{});var readOnly=props.readonly!==undefined?props.readonly:Defaults.check(view.id);var change=function change(value){// save in local state for frequent changes.\nif(value!==undefined)setOcl(value);};var blur=function blur(){view.oclCondition=ocl;};// confirm in redux state for final state\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},props.style||{}),className:'d-flex',children:[/*#__PURE__*/_jsx(\"span\",{className:'cursor-pointer my-auto',tabIndex:-1,onClick:function onClick(e){return setShow(!show);},children:show?/*#__PURE__*/_jsx(\"i\",{className:'bi bi-eye-fill'}):/*#__PURE__*/_jsx(\"i\",{className:'bi bi-eye-slash-fill'})}),/*#__PURE__*/_jsxs(\"label\",{className:'ms-2 mb-1 my-auto',children:[\"OCL Editor (OCL engine by Stephan K\\xF6ninger,\",/*#__PURE__*/_jsx(\"a\",{className:'ms-1',target:'_blank',href:'https://ocl.stekoe.de/#examples',children:\"Supported instructions\"}),\")\"]})]}),show&&/*#__PURE__*/_jsx(\"div\",{className:\"monaco-editor-wrapper\",style:{padding:'5px',minHeight:'20px',height:'100px',resize:'vertical',overflow:'hidden'},tabIndex:-1,onBlur:blur,children:/*#__PURE__*/_jsx(Editor,{className:'mx-1',onChange:change,options:{fontSize:12,scrollbar:{vertical:'hidden',horizontalScrollbarSize:5},minimap:{enabled:false},readOnly:readOnly},defaultLanguage:'js',value:view.oclCondition})})]});}function mapStateToProps(state,ownProps){var ret={};ret.view=LViewElement.fromPointer(ownProps.viewID);return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}export var OclEditorConnected=connect(mapStateToProps,mapDispatchToProps)(OclEditorComponent);export var OclEditor=function OclEditor(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(OclEditorConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};OclEditorComponent.cname='OclEditorComponent';OclEditorConnected.cname='OclEditorConnected';OclEditor.cname='OclEditor';export default OclEditor;","map":{"version":3,"names":["React","connect","Editor","LViewElement","Defaults","useStateIfMounted","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","OclEditorComponent","props","view","_useStateIfMounted","oclCondition","_useStateIfMounted2","_slicedToArray","ocl","setOcl","_useStateIfMounted3","_useStateIfMounted4","show","setShow","readOnly","readonly","undefined","check","id","change","value","blur","children","style","_objectSpread","className","tabIndex","onClick","e","target","href","padding","minHeight","height","resize","overflow","onBlur","onChange","options","fontSize","scrollbar","vertical","horizontalScrollbarSize","minimap","enabled","defaultLanguage","mapStateToProps","state","ownProps","ret","fromPointer","viewID","mapDispatchToProps","dispatch","OclEditorConnected","OclEditor","arguments","length","cname"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/oclEditor/OclEditor.tsx"],"sourcesContent":["import React, {CSSProperties, Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Editor from '@monaco-editor/react';\r\nimport {DState, DViewElement, LViewElement, Pointer, Defaults} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\n\r\nfunction OclEditorComponent(props: AllProps) {\r\n    const view = props.view;\r\n    const [ocl, setOcl] = useStateIfMounted(view.oclCondition);\r\n    const [show, setShow] = useStateIfMounted(true);\r\n    if(!view) return(<></>);\r\n    const readOnly = props.readonly !== undefined ? props.readonly : Defaults.check(view.id);\r\n    const change = (value: string|undefined) => { // save in local state for frequent changes.\r\n        if(value !== undefined) setOcl(value);\r\n    }\r\n    const blur = () => { view.oclCondition = ocl } // confirm in redux state for final state\r\n\r\n    return <>\r\n        <div style={{...(props.style || {})}} className={'d-flex'}>\r\n            <span className={'cursor-pointer my-auto'} tabIndex={-1} onClick={e => setShow(!show)}>\r\n                {show ? <i className={'bi bi-eye-fill'} /> : <i className={'bi bi-eye-slash-fill'} /> }\r\n            </span>\r\n            <label className={'ms-2 mb-1 my-auto'}>\r\n                OCL Editor (OCL engine by Stephan KÃ¶ninger,\r\n                <a className={'ms-1'} target={'_blank'} href={'https://ocl.stekoe.de/#examples'}>Supported instructions</a>)\r\n            </label>\r\n        </div>\r\n\r\n        {show && <div className={\"monaco-editor-wrapper\"}\r\n                style={{padding: '5px', minHeight: '20px', height:'100px', resize: 'vertical', overflow:'hidden'}}\r\n                      tabIndex={-1} onBlur={blur}>\r\n            <Editor className={'mx-1'} onChange={change}\r\n                    options={{fontSize: 12, scrollbar: {vertical: 'hidden', horizontalScrollbarSize: 5}, minimap: {enabled: false}, readOnly: readOnly}}\r\n                    defaultLanguage={'js'} value={view.oclCondition} />\r\n        </div>}\r\n    </>;\r\n}\r\ninterface OwnProps {\r\n    readonly?: boolean;\r\n    viewID: Pointer<DViewElement, 1, 1, LViewElement>;\r\n    style?: CSSProperties;\r\n}\r\ninterface StateProps { view: LViewElement }\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.view = LViewElement.fromPointer(ownProps.viewID);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const OclEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(OclEditorComponent);\r\n\r\nexport const OclEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <OclEditorConnected {...{...props, children}} />;\r\n}\r\n\r\nOclEditorComponent.cname = 'OclEditorComponent';\r\nOclEditorConnected.cname = 'OclEditorConnected';\r\nOclEditor.cname = 'OclEditor';\r\nexport default OclEditor;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}