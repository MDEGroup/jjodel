{"ast":null,"code":"import Axios from 'axios';\nimport Storage from \"./storage\";\nclass Api {\n  static headers() {\n    let token = Storage.read('token') || '';\n    return {\n      'auth-token': token\n    };\n  }\n  static async get(path) {\n    try {\n      const response = await Axios.get(path, {\n        headers: this.headers()\n      });\n      return {\n        code: response.status,\n        data: response.data\n      };\n    } catch (e) {\n      return {\n        code: 400,\n        data: null\n      };\n    }\n  }\n  static async post(path, obj) {\n    try {\n      const response = await Axios.post(path, obj, {\n        headers: this.headers()\n      });\n      return {\n        code: response.status,\n        data: response.data\n      };\n    } catch (e) {\n      return {\n        code: 400,\n        data: null\n      };\n    }\n  }\n  static async patch(path, obj) {\n    try {\n      const response = await Axios.patch(path, obj, {\n        headers: this.headers()\n      });\n      return {\n        code: response.status,\n        data: response.data\n      };\n    } catch (e) {\n      return {\n        code: 400,\n        data: null\n      };\n    }\n  }\n  static async delete(path) {\n    try {\n      const response = await Axios.delete(path, {\n        headers: this.headers()\n      });\n      return {\n        code: response.status,\n        data: response.data\n      };\n    } catch (e) {\n      return {\n        code: 400,\n        data: null\n      };\n    }\n  }\n}\nApi.persistance = `${process.env['REACT_APP_PERSISTANCE']}/persistance`;\nApi.memorec = `${process.env['REACT_APP_MEMOREC']}/memorec`;\nexport default Api;","map":{"version":3,"names":["Axios","Storage","Api","headers","token","read","get","path","response","code","status","data","e","post","obj","patch","delete","persistance","process","env","memorec"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/data/api.ts"],"sourcesContent":["import Axios from 'axios';\r\nimport {Json, DUser} from '../joiner';\r\nimport Storage from \"./storage\";\r\n\r\nexport type Response = {code: number, data: Json|null}\r\nclass Api {\r\n    static persistance = `${process.env['REACT_APP_PERSISTANCE']}/persistance`;\r\n    static memorec = `${process.env['REACT_APP_MEMOREC']}/memorec`;\r\n\r\n    private static headers(): {'auth-token': string} {\r\n        let token: string = Storage.read('token') || '';\r\n        return {'auth-token': token};\r\n    }\r\n    static async get(path: string): Promise<Response> {\r\n        try {\r\n            const response = await Axios.get(path, {headers: this.headers()});\r\n            return {code: response.status, data: response.data};\r\n        } catch (e) {\r\n            return {code: 400, data: null};\r\n        }\r\n    }\r\n    static async post(path: string, obj: Json): Promise<Response> {\r\n        try {\r\n            const response = await Axios.post(path, obj, {headers: this.headers()});\r\n            return {code: response.status, data: response.data};\r\n        } catch (e) {\r\n            return {code: 400, data: null};\r\n        }\r\n    }\r\n    static async patch(path: string, obj: Json): Promise<Response> {\r\n        try {\r\n            const response = await Axios.patch(path, obj, {headers: this.headers()});\r\n            return {code: response.status, data: response.data};\r\n        } catch (e) {\r\n            return {code: 400, data: null};\r\n        }\r\n    }\r\n    static async delete(path: string): Promise<Response> {\r\n        try {\r\n            const response = await Axios.delete(path, {headers: this.headers()});\r\n            return {code: response.status, data: response.data};\r\n        } catch (e) {\r\n            return {code: 400, data: null};\r\n        }\r\n    }\r\n}\r\n\r\nexport default Api;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAOC,OAAO,MAAM,WAAW;AAG/B,MAAMC,GAAG,CAAC;EAIN,OAAeC,OAAOA,CAAA,EAA2B;IAC7C,IAAIC,KAAa,GAAGH,OAAO,CAACI,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;IAC/C,OAAO;MAAC,YAAY,EAAED;IAAK,CAAC;EAChC;EACA,aAAaE,GAAGA,CAACC,IAAY,EAAqB;IAC9C,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACM,GAAG,CAACC,IAAI,EAAE;QAACJ,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;MAAC,CAAC,CAAC;MACjE,OAAO;QAACM,IAAI,EAAED,QAAQ,CAACE,MAAM;QAAEC,IAAI,EAAEH,QAAQ,CAACG;MAAI,CAAC;IACvD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACR,OAAO;QAACH,IAAI,EAAE,GAAG;QAAEE,IAAI,EAAE;MAAI,CAAC;IAClC;EACJ;EACA,aAAaE,IAAIA,CAACN,IAAY,EAAEO,GAAS,EAAqB;IAC1D,IAAI;MACA,MAAMN,QAAQ,GAAG,MAAMR,KAAK,CAACa,IAAI,CAACN,IAAI,EAAEO,GAAG,EAAE;QAACX,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;MAAC,CAAC,CAAC;MACvE,OAAO;QAACM,IAAI,EAAED,QAAQ,CAACE,MAAM;QAAEC,IAAI,EAAEH,QAAQ,CAACG;MAAI,CAAC;IACvD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACR,OAAO;QAACH,IAAI,EAAE,GAAG;QAAEE,IAAI,EAAE;MAAI,CAAC;IAClC;EACJ;EACA,aAAaI,KAAKA,CAACR,IAAY,EAAEO,GAAS,EAAqB;IAC3D,IAAI;MACA,MAAMN,QAAQ,GAAG,MAAMR,KAAK,CAACe,KAAK,CAACR,IAAI,EAAEO,GAAG,EAAE;QAACX,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;MAAC,CAAC,CAAC;MACxE,OAAO;QAACM,IAAI,EAAED,QAAQ,CAACE,MAAM;QAAEC,IAAI,EAAEH,QAAQ,CAACG;MAAI,CAAC;IACvD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACR,OAAO;QAACH,IAAI,EAAE,GAAG;QAAEE,IAAI,EAAE;MAAI,CAAC;IAClC;EACJ;EACA,aAAaK,MAAMA,CAACT,IAAY,EAAqB;IACjD,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACgB,MAAM,CAACT,IAAI,EAAE;QAACJ,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC;MAAC,CAAC,CAAC;MACpE,OAAO;QAACM,IAAI,EAAED,QAAQ,CAACE,MAAM;QAAEC,IAAI,EAAEH,QAAQ,CAACG;MAAI,CAAC;IACvD,CAAC,CAAC,OAAOC,CAAC,EAAE;MACR,OAAO;QAACH,IAAI,EAAE,GAAG;QAAEE,IAAI,EAAE;MAAI,CAAC;IAClC;EACJ;AACJ;AAxCMT,GAAG,CACEe,WAAW,GAAG,GAAGC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,cAAc;AADxEjB,GAAG,CAEEkB,OAAO,GAAG,GAAGF,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,UAAU;AAwClE,eAAejB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module"}