{"ast":null,"code":"import{DUser,LUser}from'../../../joiner';import React from'react';import{connect}from'react-redux';import DockManager from\"../DockManager\";import{LeftBar}from'../../../pages/components';import{ProjectCatalog,Title}from'../../../pages/components/Dashboard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Project=props=>{const{name,metamodels,models}=props;const project=props.data;return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",tabIndex:-1,children:[/*#__PURE__*/_jsx(LeftBar,{active:'Project',project:project}),/*#__PURE__*/_jsx(\"div\",{className:'user',children:/*#__PURE__*/_jsxs(\"div\",{className:'name',children:[/*#__PURE__*/_jsx(Title,{projectID:project.id,active:'Project',title:project.name,icon:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-p-square\"}),description:project.description}),/*#__PURE__*/_jsx(ProjectCatalog,{project:project})]})})]})});};function m2Row(model){return mRow(model,false);}function m1Row(model){return mRow(model,true);}// too small to justify a separate file\nfunction mRow(model){var _model$instanceof;let showInstanceOf=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!model)return/*#__PURE__*/_jsx(_Fragment,{});return/*#__PURE__*/_jsxs(\"p\",{className:'d-block',onClick:()=>DockManager.open2(model),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-folder\"}),\" \",model.name,showInstanceOf&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:'text-success',children:[\" \",model.instanceof?'conforming to':'is shapeless']}),\" \",(_model$instanceof=model.instanceof)===null||_model$instanceof===void 0?void 0:_model$instanceof.name]}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chevron-down hoverable\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content context-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:'col item',children:\"Open\"}),/*#__PURE__*/_jsx(\"div\",{className:'col item',children:\"Duplicate\"}),/*#__PURE__*/_jsx(\"div\",{className:'col item',children:\"Close\"}),/*#__PURE__*/_jsx(\"hr\",{className:'my-1'}),/*#__PURE__*/_jsx(\"div\",{className:'col item',children:\"Delete\"})]})})]},model.id);}function InfoTabComponent(props){const project=props.project;const metamodels=project.metamodels;let models=project.models;let modelmap={};for(let m of models){let m2=m.instanceof;let m2name=m2===null||m2===void 0?void 0:m2.name;if(!modelmap[m2name])modelmap[m2name]=[];modelmap[m2name].push(m);}models=Object.values(modelmap).flat();// this way they are sorted by metamodel\nreturn/*#__PURE__*/_jsx(Project,{name:project.name,data:project,metamodels:metamodels,models:models},project.id);}function mapStateToProps(state,ownProps){const ret={};const luser=LUser.fromPointer(DUser.current,state);ret.project=luser.project;return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const InfoTabConnected=connect(mapStateToProps,mapDispatchToProps)(InfoTabComponent);export const InfoTab=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(InfoTabConnected,{...props,children});};export default InfoTab;","map":{"version":3,"names":["DUser","LUser","React","connect","DockManager","LeftBar","ProjectCatalog","Title","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Project","props","name","metamodels","models","project","data","children","className","tabIndex","active","projectID","id","title","icon","description","m2Row","model","mRow","m1Row","_model$instanceof","showInstanceOf","arguments","length","undefined","onClick","open2","style","cursor","instanceof","InfoTabComponent","modelmap","m","m2","m2name","push","Object","values","flat","mapStateToProps","state","ownProps","ret","luser","fromPointer","current","mapDispatchToProps","dispatch","InfoTabConnected","InfoTab"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/abstract/tabs/ModelsSummaryTab.tsx"],"sourcesContent":["import type {DState, LProject} from '../../../joiner';\r\nimport {DUser, LModel, LUser} from '../../../joiner';\r\nimport React, {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport type {Dictionary, FakeStateProps} from '../../../joiner/types';\r\nimport DockManager from \"../DockManager\";\r\nimport {LeftBar} from '../../../pages/components';\r\nimport {ProjectCatalog, Title} from '../../../pages/components/Dashboard';\r\n\r\n\r\ntype Props = {\r\n    key: string;\r\n    name: string;\r\n    data: any;\r\n    metamodels: any;\r\n    models: any;\r\n};\r\n\r\nconst Project = (props: Props) => {\r\n    const {name, metamodels, models} = props;\r\n    const project = props.data;\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className={\"dashboard-container\"} tabIndex={-1}>\r\n                <LeftBar active={'Project'} project={project} />\r\n                <div className={'user'}>\r\n                    <div className={'name'}>\r\n                        <Title projectID={project.id} active={'Project'} title={project.name} icon={<i className=\"bi bi-p-square\"></i>} description={project.description}/>\r\n                        <ProjectCatalog project={project} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nfunction m2Row(model: LModel) { return mRow(model, false) }\r\nfunction m1Row(model: LModel) { return mRow(model, true) }\r\n// too small to justify a separate file\r\n\r\nfunction mRow(model: LModel, showInstanceOf: boolean = false) {\r\n    if(!model) return(<></>);\r\n    return (\r\n        <p className={'d-block'} key={model.id} onClick={()=>DockManager.open2(model)} style={{cursor: 'pointer'}}>\r\n            <i className=\"bi bi-folder\"></i> {model.name}{\r\n                showInstanceOf && <><span className={'text-success'}> {model.instanceof ? 'conforming to' : 'is shapeless'}</span> {model.instanceof?.name}</>\r\n            }\r\n            <i className=\"bi bi-chevron-down hoverable\">\r\n                <div className=\"content context-menu\">\r\n                    <div className={'col item'}>Open</div>\r\n                    <div className={'col item'}>Duplicate</div>\r\n                    <div className={'col item'}>Close</div>\r\n                    <hr className={'my-1'} />\r\n                    <div className={'col item'}>Delete</div>\r\n                </div>\r\n            </i>\r\n        </p>)\r\n}\r\n\r\nfunction InfoTabComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const metamodels = project.metamodels;\r\n    let models = project.models;\r\n    let modelmap: Dictionary<string, LModel[]> = {}\r\n    for (let m of models) {\r\n        let m2 = m.instanceof;\r\n        let m2name = m2?.name as string;\r\n        if (!modelmap[m2name]) modelmap[m2name] = [];\r\n        modelmap[m2name].push(m);\r\n    }\r\n    models = Object.values(modelmap).flat();  // this way they are sorted by metamodel\r\n    return(<Project key={project.id} name={project.name} data={project} metamodels={metamodels} models={models}/>);\r\n}\r\n\r\ninterface OwnProps {}\r\ninterface StateProps {project: LProject}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const luser = LUser.fromPointer(DUser.current, state);\r\n    ret.project = luser.project as LProject;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const InfoTabConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(InfoTabComponent);\r\n\r\nexport const InfoTab = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <InfoTabConnected {...{...props, children}} />;\r\n}\r\nexport default InfoTab;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}