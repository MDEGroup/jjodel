{"ast":null,"code":"import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import axios from'axios';import{LNamedElement}from\"../joiner\";var MemoRec=/*#__PURE__*/function(){function MemoRec(){_classCallCheck(this,MemoRec);}_createClass(MemoRec,null,[{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(path,obj){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/memorec/'+path,obj);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));function post(_x,_x2){return _post.apply(this,arguments);}return post;}()},{key:\"structuralFeature\",value:function(){var _structuralFeature=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(me){var named,model,classes,memorecClasses,_iterator,_step,myClass,attributes,references,memorecModel,memorecObject,response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:named=LNamedElement.fromPointer(me.id);model=me.model;classes=model.classes;memorecClasses=[];_iterator=_createForOfIteratorHelper(classes);try{for(_iterator.s();!(_step=_iterator.n()).done;){myClass=_step.value;attributes=myClass.attributes.map(function(x){return x.name;});references=myClass.references.map(function(x){return x.name;});memorecClasses.push({name:myClass.name,methodInvocations:[].concat(_toConsumableArray(attributes),_toConsumableArray(references))});}}catch(err){_iterator.e(err);}finally{_iterator.f();}memorecModel={name:model.name,methodDeclarations:memorecClasses};memorecObject={context:named.name,model:memorecModel};console.log('input',memorecObject);_context2.next=11;return MemoRec.post('structuralFeatures',memorecObject);case 11:response=_context2.sent;console.log(response);data=response.data;data.sort(function(a,b){return b.score-a.score;});return _context2.abrupt(\"return\",{data:data,type:'class'});case 16:case\"end\":return _context2.stop();}}},_callee2);}));function structuralFeature(_x3){return _structuralFeature.apply(this,arguments);}return structuralFeature;}()},{key:\"classifier\",value:function(){var _classifier=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(me){var named,model,packages,memorecPackages,_iterator2,_step2,myPackage,classes,memorecModel,memorecObject,response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.clear();named=LNamedElement.fromPointer(me.id);model=me.model;packages=model.packages;memorecPackages=[];_iterator2=_createForOfIteratorHelper(packages);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){myPackage=_step2.value;classes=myPackage.classes.map(function(x){return x.name;});memorecPackages.push({name:myPackage.name,methodInvocations:classes});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}memorecModel={name:model.name,methodDeclarations:memorecPackages};memorecObject={context:named.name,model:memorecModel};console.log('input',memorecObject);_context3.next=12;return MemoRec.post('classes',memorecObject);case 12:response=_context3.sent;console.log(response);data=response.data;data.sort(function(a,b){return b.score-a.score;});return _context3.abrupt(\"return\",{data:data,type:'package'});case 17:case\"end\":return _context3.stop();}}},_callee3);}));function classifier(_x4){return _classifier.apply(this,arguments);}return classifier;}()}]);return MemoRec;}();export{MemoRec as default};","map":{"version":3,"names":["axios","LNamedElement","MemoRec","_classCallCheck","_createClass","key","value","_post","_asyncToGenerator","_regeneratorRuntime","mark","_callee","path","obj","wrap","_callee$","_context","prev","next","post","abrupt","sent","stop","_x","_x2","apply","arguments","_structuralFeature","_callee2","me","named","model","classes","memorecClasses","_iterator","_step","myClass","attributes","references","memorecModel","memorecObject","response","data","_callee2$","_context2","fromPointer","id","_createForOfIteratorHelper","s","n","done","map","x","name","push","methodInvocations","concat","_toConsumableArray","err","e","f","methodDeclarations","context","console","log","sort","a","b","score","type","structuralFeature","_x3","_classifier","_callee3","packages","memorecPackages","_iterator2","_step2","myPackage","_callee3$","_context3","clear","classifier","_x4","default"],"sources":["C:/d/Programming/web/jodel-mde/src/memorec/api.ts"],"sourcesContent":["import axios, {AxiosResponse} from 'axios';\r\nimport {GObject, LModelElement, LNamedElement} from \"../joiner\";\r\nimport {MemoRecModel, MemoRecNamed, MemoRecObject} from \"./types\";\r\n\r\n\r\nexport default class MemoRec {\r\n    static async post(path: string, obj: MemoRecObject): Promise<AxiosResponse> {\r\n        return await axios.post('/memorec/' + path, obj);\r\n    }\r\n\r\n    static async structuralFeature(me: LModelElement): Promise<{data:GObject[], type:'class'|'package'}> {\r\n\r\n        const named: LNamedElement = LNamedElement.fromPointer(me.id);\r\n        const model = me.model;\r\n        const classes = model.classes;\r\n\r\n        const memorecClasses: MemoRecNamed[] = [];\r\n\r\n        for(let myClass of classes) {\r\n            const attributes = myClass.attributes.map(x => x.name);\r\n            const references = myClass.references.map(x => x.name);\r\n            memorecClasses.push({name: myClass.name, methodInvocations: [...attributes, ...references]});\r\n        }\r\n\r\n        const memorecModel: MemoRecModel = {name: model.name, methodDeclarations: memorecClasses};\r\n\r\n        const memorecObject: MemoRecObject = {context: named.name, model: memorecModel};\r\n        console.log('input', memorecObject);\r\n\r\n        const response = await MemoRec.post('structuralFeatures', memorecObject);\r\n        console.log(response);\r\n\r\n        const data: GObject[] = response.data;\r\n        data.sort((a,b) => b.score - a.score);\r\n\r\n        return {data: data, type: 'class'};\r\n\r\n    }\r\n\r\n    static async classifier(me: LModelElement): Promise<{data:GObject[], type:'class'|'package'}> {\r\n        console.clear();\r\n        const named: LNamedElement = LNamedElement.fromPointer(me.id);\r\n        const model = me.model;\r\n        const packages= model.packages;\r\n\r\n        const memorecPackages: MemoRecNamed[] = [];\r\n\r\n        for(let myPackage of packages) {\r\n            const classes = myPackage.classes.map(x => x.name);\r\n            memorecPackages.push({name: myPackage.name, methodInvocations: classes});\r\n        }\r\n        const memorecModel: MemoRecModel = {name: model.name, methodDeclarations: memorecPackages};\r\n\r\n        const memorecObject: MemoRecObject = {context: named.name, model: memorecModel};\r\n        console.log('input', memorecObject);\r\n\r\n        const response = await MemoRec.post('classes', memorecObject);\r\n        console.log(response);\r\n\r\n        const data:GObject[] = response.data;\r\n        data.sort((a,b) => b.score - a.score);\r\n        return {data: data, type: 'package'};\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}