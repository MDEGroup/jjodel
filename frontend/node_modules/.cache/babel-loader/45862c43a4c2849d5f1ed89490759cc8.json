{"ast":null,"code":"import React from'react';import{connect}from'react-redux';import Editor from'@monaco-editor/react';import{LViewElement,Defaults}from'../../../joiner';import{useStateIfMounted}from'use-state-if-mounted';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OclEditorComponent(props){const view=props.view;const[ocl,setOcl]=useStateIfMounted(view.oclCondition);const[show,setShow]=useStateIfMounted(true);const[expand,setExpand]=useStateIfMounted(false);if(!view)return/*#__PURE__*/_jsx(_Fragment,{});const readOnly=props.readonly!==undefined?props.readonly:Defaults.check(view.id);const change=value=>{// save in local state for frequent changes.\nif(value!==undefined)setOcl(value);};const blur=()=>{view.oclCondition=ocl;};// confirm in redux state for final state\nconst lines=Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length*1.8)<5?10:Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length*1.8);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{...(props.style||{})},className:'cursor-pointer d-flex',onClick:e=>setShow(!show),children:[/*#__PURE__*/_jsx(\"span\",{className:'chevron-holder',tabIndex:-1,children:/*#__PURE__*/_jsx(\"i\",{className:'bi bi-chevron-'+(show?'down':'right')})}),/*#__PURE__*/_jsx(\"label\",{className:'editor-label',children:\"OCL Editor \"})]}),show&&/*#__PURE__*/_jsx(\"div\",{className:\"monaco-editor-wrapper\",style:{padding:'5px',minHeight:'20px',height:\"\".concat(expand?lines+'lvh':'5lvh'),transition:'height 0.3s',resize:'vertical',overflow:'hidden'},tabIndex:-1,onFocus:()=>setExpand(true),onBlur:()=>{setExpand(false);blur();},children:/*#__PURE__*/_jsx(Editor,{className:'mx-1',onChange:change,options:{fontSize:12,scrollbar:{vertical:'hidden',horizontalScrollbarSize:5},minimap:{enabled:false},readOnly:readOnly},defaultLanguage:'js',value:view.oclCondition})})]});}function mapStateToProps(state,ownProps){const ret={};ret.view=LViewElement.fromPointer(ownProps.viewID);return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const OclEditorConnected=connect(mapStateToProps,mapDispatchToProps)(OclEditorComponent);export const OclEditor=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(OclEditorConnected,{...props,children});};OclEditorComponent.cname='OclEditorComponent';OclEditorConnected.cname='OclEditorConnected';OclEditor.cname='OclEditor';export default OclEditor;","map":{"version":3,"names":["React","connect","Editor","LViewElement","Defaults","useStateIfMounted","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","OclEditorComponent","props","view","ocl","setOcl","oclCondition","show","setShow","expand","setExpand","readOnly","readonly","undefined","check","id","change","value","blur","lines","Math","round","split","length","children","style","className","onClick","e","tabIndex","padding","minHeight","height","concat","transition","resize","overflow","onFocus","onBlur","onChange","options","fontSize","scrollbar","vertical","horizontalScrollbarSize","minimap","enabled","defaultLanguage","mapStateToProps","state","ownProps","ret","fromPointer","viewID","mapDispatchToProps","dispatch","OclEditorConnected","OclEditor","arguments","cname"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/frontend/src/components/editors/languages/Ocl.tsx"],"sourcesContent":["import React, {CSSProperties, Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Editor from '@monaco-editor/react';\r\nimport {DState, DViewElement, LViewElement, Pointer, Defaults} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {FakeStateProps} from '../../../joiner/types';\r\nimport { Btn, CommandBar } from '../../commandbar/CommandBar';\r\n\r\nfunction OclEditorComponent(props: AllProps) {\r\n    const view = props.view;\r\n    const [ocl, setOcl] = useStateIfMounted(view.oclCondition);\r\n    const [show, setShow] = useStateIfMounted(true);\r\n\r\n    const [expand, setExpand] = useStateIfMounted(false);\r\n\r\n    if(!view) return(<></>);\r\n    const readOnly = props.readonly !== undefined ? props.readonly : Defaults.check(view.id);\r\n    const change = (value: string|undefined) => { // save in local state for frequent changes.\r\n        if(value !== undefined) setOcl(value);\r\n    }\r\n    const blur = () => { view.oclCondition = ocl } // confirm in redux state for final state\r\n\r\n    const lines = (Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length*1.8) < 5 ? 10 : Math.round(view.oclCondition.split(/\\r|\\r\\n|\\n/).length*1.8));\r\n\r\n    return(<>\r\n        <div style={{...(props.style || {})}} className={'cursor-pointer d-flex'} onClick={e => setShow(!show)}>\r\n            <span className={'chevron-holder'} tabIndex={-1} >\r\n                <i className={'bi bi-chevron-' + (show ? 'down' : 'right')} />\r\n                {/*show ? <i className={'bi bi-eye-fill'} /> : <i className={'bi bi-eye-slash-fill'} /> */}\r\n            </span>\r\n            <label className={'editor-label'}>\r\n                OCL Editor {/*(OCL engine by Stephan KÃ¶ninger,\r\n                <a className={'ms-1'} target={'_blank'} href={'https://ocl.stekoe.de/#examples'}>Supported instructions</a>)*/}\r\n            </label>\r\n            {/* show && <CommandBar style={{paddingTop: '10px'}}>\r\n                {expand ?\r\n                    <Btn icon={'shrink'} action={(e) => {setExpand(false); setShow(true)}} tip={'Minimize editor'}/>\r\n                    :\r\n                    <Btn icon={'expand'} action={(e) => {setExpand(true); setShow(true)}} tip={'Enlarge editor'}/>\r\n                }\r\n            </CommandBar>*/}\r\n        </div>\r\n\r\n        {show && <div className={\"monaco-editor-wrapper\"}\r\n                style={{padding: '5px', minHeight: '20px', height:`${expand ? lines+'lvh' : '5lvh'}`, transition: 'height 0.3s', resize: 'vertical', overflow:'hidden'}}\r\n                      tabIndex={-1}\r\n                      onFocus={() => setExpand(true)}\r\n                    onBlur={() => {setExpand(false); blur();}}>\r\n            <Editor className={'mx-1'} onChange={change}\r\n                    options={{fontSize: 12, scrollbar: {vertical: 'hidden', horizontalScrollbarSize: 5}, minimap: {enabled: false}, readOnly: readOnly}}\r\n                    defaultLanguage={'js'} value={view.oclCondition} />\r\n        </div>}\r\n    </>);\r\n}\r\ninterface OwnProps {\r\n    readonly?: boolean;\r\n    viewID: Pointer<DViewElement, 1, 1, LViewElement>;\r\n    style?: CSSProperties;\r\n}\r\ninterface StateProps { view: LViewElement }\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.view = LViewElement.fromPointer(ownProps.viewID);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const OclEditorConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(OclEditorComponent);\r\n\r\nexport const OclEditor = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <OclEditorConnected {...{...props, children}} />;\r\n}\r\n\r\nOclEditorComponent.cname = 'OclEditorComponent';\r\nOclEditorConnected.cname = 'OclEditorConnected';\r\nOclEditor.cname = 'OclEditor';\r\nexport default OclEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}