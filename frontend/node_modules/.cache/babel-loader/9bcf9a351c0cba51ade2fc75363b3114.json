{"ast":null,"code":"import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _dec,_class,_class2;///<reference path='../../joiner/index.ts' />\n//import type {RuntimeAccessible, RuntimeAccessibleClass, Point as PointType} from \"../../joiner\";\nimport{RuntimeAccessible,RuntimeAccessibleClass}from\"../../joiner\";// @static\nvar windoww=window;var Point=windoww.Point;export var GraphDragManager=(_dec=RuntimeAccessible('GraphDragManager'),_dec(_class=(_class2=/*#__PURE__*/function(_RuntimeAccessibleCla){_inherits(GraphDragManager,_RuntimeAccessibleCla);var _super=_createSuper(GraphDragManager);function GraphDragManager(){_classCallCheck(this,GraphDragManager);return _super.apply(this,arguments);}_createClass(GraphDragManager,null,[{key:\"startPanning\",value:function startPanning(e,graph){// console.log(\"start panning\", !GraphDragManager.draggingGraph, graph, graph.id);\nif(GraphDragManager.draggingGraph)return;GraphDragManager.draggingGraph=graph;GraphDragManager.initialClickPos=Point.fromEvent(e);}},{key:\"stopPanning\",value:function stopPanning(e){// damiano: why was disabled?\n// console.log(\"stop panning\", GraphDragManager.draggingGraph);\nif(!GraphDragManager.draggingGraph)return;var g=GraphDragManager.draggingGraph;var initial=GraphDragManager.initialClickPos;GraphDragManager.draggingGraph=undefined;GraphDragManager.initialClickPos=undefined;console.log(initial,Point.fromEvent(e),g.zoom,g.offset);g.offset=initial.subtract(Point.fromEvent(e),false).multiply(g.zoom).add(g.offset,false);// actual type is Partial<Size>\n}}]);return GraphDragManager;}(RuntimeAccessibleClass),_class2.initialClickPos=void 0,_class2.draggingGraph=void 0,_class2))||_class);","map":{"version":3,"names":["RuntimeAccessible","RuntimeAccessibleClass","windoww","window","Point","GraphDragManager","_dec","_class","_class2","_RuntimeAccessibleCla","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","startPanning","e","graph","draggingGraph","initialClickPos","fromEvent","stopPanning","g","initial","undefined","console","log","zoom","offset","subtract","multiply","add"],"sources":["C:/d/Programming/web/jodel-mde/src/graph/graphElement/GraphDragHandler.ts"],"sourcesContent":["///<reference path='../../joiner/index.ts' />\r\n\r\nimport type {LGraph} from \"../../joiner\";\r\n//import type {RuntimeAccessible, RuntimeAccessibleClass, Point as PointType} from \"../../joiner\";\r\nimport type {Point as PointType} from \"../../joiner\";\r\nimport {RuntimeAccessible, RuntimeAccessibleClass} from \"../../joiner\";\r\nimport React from \"react\";\r\n\r\n// @static\r\nlet windoww: any = window as any;\r\nlet Point: any = windoww.Point;\r\n\r\n@RuntimeAccessible('GraphDragManager')\r\nexport class GraphDragManager extends RuntimeAccessibleClass{\r\n    static initialClickPos?: PointType;\r\n    static draggingGraph?: LGraph;\r\n\r\n    static startPanning(e: React.MouseEvent, graph: LGraph) {\r\n        // console.log(\"start panning\", !GraphDragManager.draggingGraph, graph, graph.id);\r\n        if (GraphDragManager.draggingGraph) return;\r\n        GraphDragManager.draggingGraph = graph as LGraph;\r\n        GraphDragManager.initialClickPos = Point.fromEvent(e);\r\n    }\r\n    static stopPanning(e: JQuery.MouseUpEvent | React.MouseEvent) {\r\n        // damiano: why was disabled?\r\n        // console.log(\"stop panning\", GraphDragManager.draggingGraph);\r\n        if (!GraphDragManager.draggingGraph) return;\r\n        let g: LGraph = GraphDragManager.draggingGraph;\r\n        let initial: PointType = GraphDragManager.initialClickPos as PointType;\r\n        GraphDragManager.draggingGraph = undefined;\r\n        GraphDragManager.initialClickPos = undefined;\r\n        console.log(initial, Point.fromEvent(e), g.zoom, g.offset)\r\n        g.offset = initial.subtract(Point.fromEvent(e), false).multiply(g.zoom).add(g.offset, false) as any; // actual type is Partial<Size>\r\n    }\r\n}\r\n"],"mappings":"4lBAAA;AAGA;AAEA,OAAQA,iBAAiB,CAAEC,sBAAsB,KAAO,cAAc,CAGtE;AACA,GAAI,CAAAC,OAAY,CAAGC,MAAa,CAChC,GAAI,CAAAC,KAAU,CAAGF,OAAO,CAACE,KAAK,CAE9B,UACa,CAAAC,gBAAgB,EAAAC,IAAA,CAD5BN,iBAAiB,CAAC,kBAAkB,CAAC,CAAAM,IAAA,CAAAC,MAAA,EAAAC,OAAA,uBAAAC,qBAAA,EAAAC,SAAA,CAAAL,gBAAA,CAAAI,qBAAA,MAAAE,MAAA,CAAAC,YAAA,CAAAP,gBAAA,WAAAA,iBAAA,EAAAQ,eAAA,MAAAR,gBAAA,SAAAM,MAAA,CAAAG,KAAA,MAAAC,SAAA,GAAAC,YAAA,CAAAX,gBAAA,QAAAY,GAAA,gBAAAC,KAAA,CAKlC,SAAAC,aAAoBC,CAAmB,CAAEC,KAAa,CAAE,CACpD;AACA,GAAIhB,gBAAgB,CAACiB,aAAa,CAAE,OACpCjB,gBAAgB,CAACiB,aAAa,CAAGD,KAAe,CAChDhB,gBAAgB,CAACkB,eAAe,CAAGnB,KAAK,CAACoB,SAAS,CAACJ,CAAC,CAAC,CACzD,CAAC,GAAAH,GAAA,eAAAC,KAAA,CACD,SAAAO,YAAmBL,CAAyC,CAAE,CAC1D;AACA;AACA,GAAI,CAACf,gBAAgB,CAACiB,aAAa,CAAE,OACrC,GAAI,CAAAI,CAAS,CAAGrB,gBAAgB,CAACiB,aAAa,CAC9C,GAAI,CAAAK,OAAkB,CAAGtB,gBAAgB,CAACkB,eAA4B,CACtElB,gBAAgB,CAACiB,aAAa,CAAGM,SAAS,CAC1CvB,gBAAgB,CAACkB,eAAe,CAAGK,SAAS,CAC5CC,OAAO,CAACC,GAAG,CAACH,OAAO,CAAEvB,KAAK,CAACoB,SAAS,CAACJ,CAAC,CAAC,CAAEM,CAAC,CAACK,IAAI,CAAEL,CAAC,CAACM,MAAM,CAAC,CAC1DN,CAAC,CAACM,MAAM,CAAGL,OAAO,CAACM,QAAQ,CAAC7B,KAAK,CAACoB,SAAS,CAACJ,CAAC,CAAC,CAAE,KAAK,CAAC,CAACc,QAAQ,CAACR,CAAC,CAACK,IAAI,CAAC,CAACI,GAAG,CAACT,CAAC,CAACM,MAAM,CAAE,KAAK,CAAQ,CAAE;AACzG,CAAC,WAAA3B,gBAAA,GApBiCJ,sBAAsB,EAAAO,OAAA,CACjDe,eAAe,QAAAf,OAAA,CACfc,aAAa,QAAAd,OAAA,IAAAD,MAAA"},"metadata":{},"sourceType":"module"}