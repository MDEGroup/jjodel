{"ast":null,"code":"var _jsxFileName = \"C:\\\\0Programmi\\\\Dev\\\\projects\\\\frontend\\\\jjodel\\\\src\\\\common\\\\DV.tsx\",\n  _dec,\n  _class;\nimport { DViewElement, EdgeBendingMode, EdgeHead, LPointerTargetable, RuntimeAccessible, U } from '../joiner';\nimport React from \"react\";\nimport \"./error.scss\";\n\n// const beautify = require('js-beautify').html; // BEWARE: this adds some newline that might be breaking and introduce syntax errors in our JSX parser\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst beautify = s => s;\nlet ShortAttribETypes = window.ShortAttribETypes;\nexport let DV = (_dec = RuntimeAccessible('DV'), _dec(_class = class DV {\n  static invisibleJsx() {\n    return '';\n  }\n  static modelView() {\n    return beautify(DefaultView.model());\n  }\n  static packageView() {\n    return beautify(DefaultView.package());\n  }\n  static classView() {\n    return beautify(DefaultView.class());\n  }\n  static attributeView() {\n    return beautify(DefaultView.feature());\n  }\n  static referenceView() {\n    return beautify(DefaultView.feature());\n  }\n  static enumeratorView() {\n    return beautify(DefaultView.enum());\n  }\n  static literalView() {\n    return beautify(DefaultView.literal());\n  }\n  static fallbackView() {\n    return beautify(DefaultView.void());\n  }\n  static operationView() {\n    return beautify(DefaultView.operation());\n  }\n  static parameterView() {\n    return beautify(DefaultView.parameter());\n  }\n\n  // i want to keep it because it will be useful for a candidate next feature in m1 & layoutable elements\n  // it is still work in progress.\n  static operationViewm1() {\n    return beautify(DefaultView.operationm1());\n  }\n  static objectView() {\n    return beautify(DefaultView.object());\n  }\n  static valueView() {\n    return beautify(DefaultView.value());\n  }\n  static defaultPackage() {\n    return beautify(DefaultView.defaultPackage());\n  }\n  static errorView(publicmsg, debughiddenmsg, errortype, data, node, v) {\n    let visibleMessage = publicmsg && typeof publicmsg === \"string\" ? U.replaceAll(publicmsg, \"Parse Error:\", \"\").trim() : publicmsg;\n    console.error(\"error in view:\", {\n      publicmsg,\n      debuginfo: debughiddenmsg\n    });\n    return DefaultView.error(visibleMessage, errortype, data, node, v);\n  }\n  static errorView_string(publicmsg, debughiddenmsg, errortype, data, node, v) {\n    let visibleMessage = publicmsg && typeof publicmsg === \"string\" ? U.replaceAll(publicmsg, \"Parse Error:\", \"\").trim() : publicmsg;\n    console.error(\"error in view:\", {\n      publicmsg,\n      debuginfo: debughiddenmsg\n    });\n    return DefaultView.error_string(visibleMessage, errortype, data, node, v);\n  }\n\n  // {ancors.map( a => <EdgePoint view={\"aaaaa\"} initialSize={{x: node.w * a.x, y: node.h * a.y}}/>)}\n  static anchorJSX() {\n    return `\n<div className={\"overlap\"}>\n{Object.keys(anchors).map( (k) => { let a = anchors[k]; return(\n<div className={\"anchor draggable resizable\"} data-anchorName={a.name} data-anchorKey={k}\n    onDragEnd={(coords/*Point*/)=>node.events.dragAnchor(coords, k)} onMouseUp={()=>{node.events.assignAnchor(k)}}\n    style={{left: 100*a.x+'%', top:100*a.y+'%', width:a.w+'px', height:a.h+'px'}} />)})\n}</div>\n`;\n  }\n  static edgePointView() {\n    return beautify(`<div className={\"edgePoint\"} tabIndex=\"-1\">\n    {decorators}\n</div>`);\n  }\n  static edgePointViewSVG() {\n    return beautify(`<ellipse stroke={\"black\"} fill={\"red\"} cx={\"50\"} cy={\"50\"} rx={\"20\"} ry={\"20\"} />`\n    //`<ellipse stroke={\"black\"} fill={\"red\"} cx={props.node.x} cy={props.node.y} rx={props.node.w} ry={props.node.h} />`\n    );\n  }\n  static svgHeadTail(head, type) {\n    let ret;\n    let headstr = head === \"head\" ? \"segments.head\" : \"segments.tail\";\n    let styleTranslateRotate = 'transform:\"translate(\" + ' + headstr + '.x + \"px, \" + ' + headstr + '.y + \"px) rotate(\" + (' + headstr + '.rad) + \"rad)\",' + ' \"transformOrigin\":' + headstr + '.w/2+\"px \"+ ' + headstr + '.h/2+\"px\"';\n    let attrs = `\\n\\t\\t\\t\\tstyle={{` + styleTranslateRotate + `}}\\n\\t\\t\\t\\tclassName={\"` + head + ` ` + type + ` preview\"} />\\n`;\n    let path;\n    let hoverAttrs = `\\n\\t\\t\\t\\tstyle={{` + styleTranslateRotate + `}}\\n\\t\\t\\t\\tclassName={\"` + head + ` ` + type + ` clickable content\"} tabIndex=\"-1\" />\\n`;\n    let d;\n    switch (type) {\n      default:\n        ret = \"edge '\" + head + \"' with type: '\" + type + \"' not found\";\n        break;\n      case EdgeHead.extend:\n        //if (head === \"tail\") return undefined;\n        d = `M 0 0   L x y/2   L 0 y   Z`;\n        path = `<path  `;\n        ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\n        break;\n      case EdgeHead.reference:\n        //if (head === \"tail\") return undefined;\n        d = `M 0 0   L x y/2   L 0 y`;\n        path = `<path  `;\n        ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\n        break;\n      case EdgeHead.aggregation:\n        //if (head === \"head\") return undefined;\n        d = `M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z`;\n        path = `<path  `;\n        ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\n        break;\n      case EdgeHead.composition:\n        //if (head === \"head\") return undefined;\n        d = `M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z`;\n        path = `<path  `;\n        ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\n        break;\n      /* `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" style={overflow: \"visible\"}>\r\n                                  <path d={\"M 10 0 L 0 20 L 20 20 Z\"} fill=\"#ffffff\" stroke=\"#808080\" strokeWidth=\"1\"></path>\r\n                               </svg>`;*/\n      //  style={transform: \"rotate3d(xcenter, ycenter, zcenter??, 90deg)\"}\n    }\n    //  transform={\"rotate(\"+`+headstr+`.rad+\"rad \"+ segments.all[0].start.pt.toString(false, \" \")}\n    return ret; // no wrap because of .hoverable > .preview  on root & subelements must be consecutive\n    // return `<g className=\"edge`+head + ` ` + type +`\" style={` + styleTranslate + `}>\\n`+ ret +`</g>`\n  }\n\n  // about label rotation in .edge > foreignObect > div (label)\n  // first transform is h-center. second is rotate, third adds [0, 50%] of 50% vertical offset AFTER rotation to take label out of edge. fourth is to add a margin.\n  static edgeView(modename, headSize, tailSize, dashing, vp, name) {\n    let fill;\n    switch (modename) {\n      case EdgeHead.reference:\n      default:\n        fill = '#fff0';\n        break;\n      case EdgeHead.composition:\n        fill = '#000';\n        break;\n      case EdgeHead.aggregation:\n      case EdgeHead.extend:\n        fill = '#fff';\n        break;\n    }\n    const agglabel = \"◇ Aggregation / Composition\";\n    const extendlabel = \"△ \" + EdgeHead.extend;\n    const asslabel = \"Λ \" + EdgeHead.reference;\n    let headdict = {\n      [asslabel]: 'M 0 0   L x y/2   L 0 y',\n      [extendlabel]: 'M 0 0   L x y/2   L 0 y   Z',\n      [agglabel]: 'M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z'\n    };\n    let predefinedPaths = Object.entries(headdict).map(e => ({\n      k: e[0],\n      v: e[1]\n    }));\n    let headPath = '',\n      tailPath = '';\n    switch (modename) {\n      default:\n        break;\n      case EdgeHead.extend:\n        headPath = extendlabel;\n        break;\n      case EdgeHead.reference:\n        headPath = asslabel;\n        break;\n      case EdgeHead.aggregation:\n        tailPath = agglabel;\n        break;\n      case EdgeHead.composition:\n        tailPath = agglabel;\n        break;\n    }\n    headPath = headdict[headPath] || '';\n    tailPath = headdict[tailPath] || '';\n    let palette = {\n      'anchorSize': {\n        type: 'number',\n        value: 20,\n        unit: 'px'\n      },\n      'dashing': {\n        value: dashing || '',\n        type: \"text\"\n      },\n      'stroke-color': U.hexToPalette('#777'),\n      'stroke-width': {\n        value: 1,\n        type: 'number',\n        unit: 'px'\n      },\n      'stroke-color-hover': U.hexToPalette('#000'),\n      'stroke-width-hover': {\n        value: 3,\n        type: 'number',\n        unit: 'px'\n      },\n      'head': {\n        type: 'path',\n        value: headPath,\n        options: predefinedPaths,\n        x: 'edgeHeadSize.x',\n        y: 'edgeHeadSize.y'\n      },\n      'tail': {\n        type: 'path',\n        value: tailPath,\n        options: predefinedPaths,\n        x: 'edgeTailSize.x',\n        y: 'edgeTailSize.y'\n      },\n      'fill': U.hexToPalette(fill)\n    };\n    let css = \".edge-anchor{\" + \"\\n\\tcursor: crosshair;\" + \"\\n\\tstroke: transparent;\" + \"\\n\\tfill: none;\" + \"\\n\\tr:var(--anchorSize);\" + \"\\n\\toutline: var(--stroke-width) solid var(--stroke-color);\" + \"\\n\\toutline-offset: calc(var(--stroke-width) * -1);\" + \"\\n\\tborder-radius: 100%;\" + \"\\n}\" + \"\\n.clickthrough, .unclickable{\" + \"\\n\\tpointer-events: none;\" + \"\\n}\" + \"\\n.clickable{\" + \"\\n\\tpointer-events: all;\" + \"\\n}\" + \"\\n.fullscreen{\" + \"\\n\\toverflow: visible;\" + \"\\n\\twidth: 100vw;\" + \"\\n\\theight: 100vh;\" + \"\\n}\" + \"\\npath{\" + \"\\n\\tfill: none;\" + \"\\n\\tstroke-dasharray: var(--dashing);\" + \"\\n\\t&.head{\" + \"\\n\\t\\td: path(var(--head));\" + \"\\n\\t}\" + \"\\n\\t&.tail{\" + \"\\n\\t\\td: path(var(--tail));\" + \"\\n\\t}\" + \"\\n}\" + \"\\npath.edge.full, path.tail, path.head{\" + \"\\n\\tstroke: var(--stroke-color);\" + \"\\n\\tstroke-width: var(--stroke-width);\" + \"\\n}\" + \"\\npath.tail, path.head{\" + \"\\n\\tfill:var(--fill);\" + \"\\n}\" + \"\\npath.edge.full.hover-activator{\" + \"\\n\\tstroke-width: var(--stroke-width-hover);\" + \"\\n\\tstroke: none;\" + \"\\n}\" + \"\\npath.content{\" + \"\\n\\tstroke: var(--stroke-color-hover);\" + \"\\n\\tstroke-width: var(--stroke-width-hover);\" + \"\\n}\" + \"\\n.label-text{\" + \"\\n\\tcolor: var(--stroke-color);\" + \"\\n}\" + \"\\nforeignObject.label{\" + \"\\n\\toverflow: visible;\" + \"\\n\\tcolor: var(--stroke-color);\" + \"\\n\\twidth: 0;\" + \"\\n\\theight: 0;\" + \"\\n\\twhite-space: pre;\" + \"\\n\\t> div{\" + \"\\n\\t\\twidth: fit-content;\" + \"\\n\\t}\" + \"\\n}\" + \"\\n\\t\" + \"\\n\\t\" + \"\";\n    let head = DV.svgHeadTail(\"head\", modename) || '';\n    let tail = DV.svgHeadTail(\"tail\", modename) || '';\n    let jsx = beautify(`<div className={\"edge hoverable hide-ep clickthrough fullscreen ` + modename + `\"}>\n            <svg className={\"clickthrough fullscreen\"}>\n                { /* edge full paths\n               \n                 first is preview path, normally seen\n                 third (segmented) is path onHover\n                 second is to enlarge the hover area of path.preview to the same as path.content, so i avoid hover loop enter-leave and graphical flashing\n                \n                */ }\n                <path className={\"preview edge full` + (dashing ? ' dashed' : '') + `\"} d={this.edge.d} />\n                <path className={\"preview edge full hover-activator\"} d={this.edge.d} />\n                { /* edge separate segments */ }\n                {segments && segments.all && segments.all.flatMap(s => [\n                    <path tabIndex=\"-1\" className={\"clickable content segment\"} d={s.dpart}></path>,\n                    s.label && <foreignObject className=\"label\" x={(s.start.pt.x + s.end.pt.x)/2+\"px\"} y={(s.start.pt.y + s.end.pt.y)/2+\"px\"}>\n                    <div className={\"label-text\"}\n                     style={{transform: \"translate(-50%, 0%) rotate(\"+s.radLabels+\"rad) translate(0%, -\"+(1-0.5*Math.abs(Math.abs(s.radLabels)%Math.PI)/(Math.PI/2))*100+\"%)\"+\n                     \" translate(0%, -5px\"}}>{s.label}</div>\n                    </foreignObject>\n                ])}\n                { /* edge head */ }\n                ` + head + `\n                { /* edge tail */ }\n                ` + tail + `\n                { /* edge anchor start */ }\n                {edge.start && <circle className=\"edge-anchor content clickable no-drag\"\n                 style={{transform: \"translate(\" + segments.all[0].start.pt.x +\"px, \" + segments.all[0].start.pt.y +\"px)\"}}\n                 onMouseDown={()=> edge.startFollow=true}\n                 onMouseUp={()=> edge.startfollow=false} />}\n                { /* edge anchor end */ }\n                {edge.end && <circle className=\"edge-anchor content clickable no-drag\" ` +\n    // cx={0*segments.all.last().end.pt.x} cy={0*segments.all.last().end.pt.y}\n    `style={{transform: \"translate(\" + segments.all.last().end.pt.x +\"px, \" + segments.all.last().end.pt.y +\"px)\"}}\n                 onMouseDown={()=> edge.endFollow=true}\n                 onMouseUp={()=> edge.endfollow=false} />}\n\n            </svg>\n            { /* interactively added edgepoints */ }\n            {\n                edge.midPoints.map( m => <EdgePoint data={edge.father.model.id} initialSize={m} key={m.id} view={\"EdgePoint\"} /> )\n            }\n            {decorators}\n        </div>`);\n    let edgePrerenderFunc = \"(ret)=>{\\n\" + \"// ** preparations and default behaviour here ** //\\n\" + \"// add preparation code here (like for loops to count something), then list the dependencies below.\\n\" + \"// ** declarations here ** //\\n\" + \"\\n\" + \"}\";\n    let edgeUsageDeclarations = \"(ret)=>{\\n\" + \"// ** preparations and default behaviour here ** //\\n\" + \"// ret.data = data\\n\" + \"ret.edgeview = edge.view.id\\n\" + \"ret.view = view\\n\" + \"// data, edge, view are dependencies by default. delete them above if you want to remove them.\\n\" + \"// add preparation code here (like for loops to count something), then list the dependencies below.\\n\" + \"// ** declarations here ** //\\n\" + \"ret.start = edge.start\\n\" + \"ret.end = edge.end\\n\" + \"ret.segments = edge.segments\\n\" + \"}\";\n    let ev = DViewElement.new2(\"Edge\" + name, jsx, vp, v => {\n      // v.appliableToClasses = [DVoidEdge.cname];\n      v.appliableTo = 'Edge';\n      v.bendingMode = EdgeBendingMode.Line;\n      v.edgeHeadSize = headSize;\n      v.edgeTailSize = tailSize;\n      //v.constants = edgeConstants;\n      v.palette = palette;\n      v.css = css;\n      v.usageDeclarations = edgeUsageDeclarations;\n      v.preRenderFunc = edgePrerenderFunc;\n    }, false, 'Pointer_ViewEdge' + name);\n    return ev;\n  }\n  /*\r\n  {\r\n      false && edge.end.model.attributes.map( (m, index, arr) => <EdgePoint data={m.id} initialSize={(parent) => {\r\n          let segs = parent.segments.segments;\r\n          let pos = segs[0].start.pt.multiply(1-(index+1)/(arr.length+1), true).add(segs[segs.length-1].end.pt.multiply((index+1)/(arr.length+1), true));\r\n          // console.trace(\"initial ep\", {segs, pos, ratio:(index+1)/(arr.length+1), s:segs[0].start.pt, e:segs[segs.length-1].end.pt});\r\n          return {...pos, w:55, h:55}}} key={m.id} view={\"Pointer_ViewEdgePoint\"} /> )\r\n  }{\r\n      false && <EdgePoint key={\"midnode1\"} view={\"Pointer_ViewEdgePoint\"} />\r\n  }{\r\n      false && <EdgePoint key={\"midnode2\"} view={\"Pointer_ViewEdgePoint\"} />\r\n  }{\r\n      false && props.children && \"this would cause loop no idea why, needs to be fixed to allow passing EdgeNodes here\" || []\r\n  }\r\n  */\n  static semanticErrorOverlay_old() {\n    return `<section className=\"overlap\">\n    <div className=\"error-message\">Lowerbound violation</div>\n</section>`;\n  }\n  static semanticErrorOverlay() {\n    return `<section className=\"overlap\">\n    <div className=\"error-message\">{errors.join(<br/>)}</div>\n</section>`;\n  }\n}) || _class); // DV class end\n\nlet valuecolormap = {};\nvaluecolormap[ShortAttribETypes.EBoolean] = \"orange\";\nvaluecolormap[ShortAttribETypes.EByte] = \"orange\";\nvaluecolormap[ShortAttribETypes.EShort] = \"orange\";\nvaluecolormap[ShortAttribETypes.EInt] = \"orange\";\nvaluecolormap[ShortAttribETypes.ELong] = \"orange\";\nvaluecolormap[ShortAttribETypes.EFloat] = \"orange\";\nvaluecolormap[ShortAttribETypes.EDouble] = \"orange\";\nvaluecolormap[ShortAttribETypes.EDate] = \"green\";\nvaluecolormap[ShortAttribETypes.EString] = \"green\";\nvaluecolormap[ShortAttribETypes.EChar] = \"green\";\nvaluecolormap[ShortAttribETypes.EVoid] = \"gray\";\nlet valuecolormap_str = JSON.stringify(valuecolormap); // can this be declared inside view.constants ?\n\nexport class DefaultView {\n  /* MODEL */\n\n  static model() {\n    return `<View className={'root model'}>\n<Scrollable graph={node}>\n    {!data && \"Model data missing.\"}\n    <div className={'edges'}>\n        {[\n            refEdges.map(se => <Edge anchorStart={0} anchorEnd={0} key={se.id}\n            start={se.start.father.node} end={se.end.node} view={'Edge' + (se.start.composition ? 'Composition' : (se.start.aggregation ? 'Aggregation' : 'Association'))} />),\n            extendEdges.map(se => <Edge start={se.start} end={se.end} view={'EdgeInheritance'} key={se.id} />)\n        ]}\n    </div>\n    {otherPackages.filter(p => p).map(pkg => <DefaultNode key={pkg.id} data={pkg} />)}\n    {level >= 1 && firstPackage && firstPackage.children.filter(c => c).map(classifier => <DefaultNode key={classifier.id} data={classifier} />)}\n    {level >= 1 && m1Objects.filter(o => o).map(m1object => <DefaultNode key={m1object.id} data={m1object} />)}\n    {decorators}\n</Scrollable>\n{/* here you can insert viewpoint-wide descriptions, eg <Control> .. </Control> */}\n\n<Control title={'Abstraction'} payoff={'Zooming'}>\n    <Slider name={'level'} title={'Detail level '} node={node} max={3} />\n</Control>\n</View>`;\n  }\n  static void() {\n    return `<div className={'root void model-less round bg-white p-1'}>\n    <div>voidvertex element test</div>\n    <div>data: {props.data ? props.data.name : \"empty\"}</div>\n    {decorators}\n</div>`;\n  }\n\n  /* PACKAGE */\n\n  static package() {\n    return `<View className={'root package'}>\n    <Measurable draggable={true} resizable={true}><div>draggable resizable</div></Measurable>\n    <Measurable draggable={true}><div>draggable</div></Measurable>\n    <div className={'package-children'}>\n        {upperLevel >= 1 ? [\n            <label className={\"detail-level\"}>\n                <input onChange={(e)=>{node.state = {level:+e.target.value}}} min=\"0\" max=\"3\" type=\"range\" step=\"1\" value={level}/>\n                <div>Detail level:{level}</div>\n            </label>,\n            data.children.map(c => <DefaultNode key={c.id} data={c} />)\n        ] :\n        [\n            <div className={\"summary\"}><b>URI:</b><span className={\"ms-1\"}>{data.uri}</span></div>,\n            <div className={\"summary\"}>{[\n                data.classes.length ? data.classes.length + \" classes\" : '',\n                data.enumerators.length ? data.enumerators.length + \" enumerators\" : ''\n               ].filter(v=>!!v).join(',')}</div>\n        ]}\n    </div>\n    {decorators}\n</View>`;\n  }\n  static defaultPackage() {\n    return `<div className={'root package'}>\n    <div className={'package-children'}>\n        {data.children.map(c => <DefaultNode key={c.id} data={c} />)}\n    </div>\n    {decorators}\n</div>`;\n  }\n\n  /* CLASS */\n\n  // <View className={\"root class \" + (level === 1 && abstract ? \"abstract\")} + onClick={()=>{/*node.events.e1(Math.random().toFixed(3))*/}}>\n\n  static class() {\n    return `<View className={\"root class\"} onClick={()=>{/*node.events.e1(Math.random().toFixed(3))*/}}>\n<div className={'header'}>\n    {level > 1 && <b className={'class-name'}>{interface ? 'Interface' : abstract ? 'Abstract Class' : 'Class'}:</b>}\n    \n    {level === 1 && <i className=\"bi bi-c-square-fill\"></i>}<Input data={data} field={'name'} hidden={true} autosize={true} />\n</div>\n{level > 2 && <hr/>}\n\n{level > 2 && \n    <div className={'class-children'}>\n        {level >= 2 && [\n            attributes.map(c => <DefaultNode key={c.id} data={c} />),\n            references.map(c => <DefaultNode key={c.id} data={c} />),\n            operations.map(c => <DefaultNode key={c.id} data={c} />)\n        ]\n        || [\n        <div className={\"summary\"}>{[\n            attributes.length ? attributes.length + \" attributes\" : '',\n            references.length ? references.length + \" references\" : '',\n            operations.length ? operations.length + \" operations\" : '',\n            !(attributes.length + references.length + operations.length) ? '- empty -' : ''\n            ].filter(v=>!!v).join(',')}</div>\n        ]\n        }\n    </div>\n}\n\n{decorators}\n</View>`;\n  }\n\n  /* ENUM */\n\n  static enum() {\n    return `<View className={'root enumerator'}>\n    <div className={'header'}>\n        {level > 1 && <b className={'enumerator-name'}>Enum:</b>}\n        {level == 1 && <i className=\"bi bi-explicit-fill\"></i>}<Input data={data} field={'name'} hidden={true} autosize={true} />\n    </div>\n    {level > 1 && <hr />}\n    <div className={'enumerator-children'}>\n        {level >= 2 && literals.map(c => <DefaultNode key={c.id} data={c}/>)}\n    </div>\n    {decorators}\n</View>`;\n  }\n  static feature() {\n    return `<View className={'root feature w-100'}>\n    <span className={'feature-name'}>{data.name}:</span>\n    <Select data={data} field={'type'} />\n    {decorators}\n</View>`;\n  }\n\n  /* LITERAL */\n  static literal() {\n    return `<label className={'root literal d-block text-center'}>\n    {data.name}\n    {decorators}\n</label>`;\n  }\n\n  /* OPERATION */\n  static operation() {\n    return `<View className={'root operation w-100 hoverable'}>\n        <span className={'feature-name'}>{data.name + ' =>'}</span>\n        <Select data={data} field={'type'} />\n    <div className={\"parameters content\"}>\n    {data.exceptions.length ? \" throws \" + data.exceptions.join(\", \") : ''}\n    {\n        level >= 3 && data.parameters.map(p => <DefaultNode data={p} key={p.id} />)\n    }</div>\n    {decorators}\n</View>`;\n  }\n\n  /* PARAMETER */\n  static parameter() {\n    return `<View className={'root parameter w-100'}>\n    <span className={'feature-name'}>\n        {data.name + '' + (data.lowerBound === 0 ? '?:' : ':' )}\n    </span>\n    <Select data={data} field={'type'} />\n    <span className={\"modifier\"}>{data.upperBound > 1 || data.upperBound === -1 ? '[]' : ''}</span>\n    {decorators}\n</View>`;\n  }\n\n  // i want to keep it because it will be useful for a candidate next feature in m1 & layoutable elements\n  // it is still work in progress.\n  static operationm1() {\n    return `<div className={'d-flex root operationm1'} style={{paddingRight: \"6px\"}}>\n    <label className={'d-block ms-1'}>{this.props.data.instanceof.name}</label>\n    <label className={'d-block ms-auto hover-root'} style={{color:` + valuecolormap_str + `[this.props.data.values.type] || \"gray\"}}>\n        →→→\n        <div className=\"hover-content\">\n            <ParameterForm operation={this.props.data.id} vertical={true} />\n        </div>\n    </label>\n    {decorators}\n</div>`;\n  }\n  static objectOld() {\n    return `<div className={'round bg-white root class'}>\n    <label className={'ms-1'}>\n        <Input jsxLabel={<b className={'object-name'}>{data.instanceof ? data.instanceof.name : \"Object\"}:</b>} \n           data={data} field={'name'} hidden={true} autosize={true}/>\n    </label>\n    <hr />\n    <div className={'object-children'}>\n        { features.map(c => <DefaultNode key={c.id} data={c} />) }\n    </div>\n    {decorators}\n</div>`;\n  }\n\n  //     public static object(): string { return (\n  // `<View className={'root object'}>\n  //     <b className={'object-name'}>{data.instanceof ? data.instanceof.name : 'Object'}:</b>\n  //     <Input data={data} field={'name'} hidden={true} autosize={true} />\n  //     <hr/>\n  //     <div className={'object-children'}>\n  //         {level >= 2 && data.features.map(f => <DefaultNode key={f.id} data={f} />)}\n  //     </div>\n  //     {decorators}\n  // </View>`\n  // );}\n\n  static object() {\n    return `<View className={'root object'}>\n    <b className={'object-name'}>{data.instanceof ? data.instanceof.name : 'Object'}:</b>\n    <Input data={data} field={'name'} hidden={true} autosize={true} />\n    <hr/>\n    <div className={'object-children'}>\n        {level >= 2 && data.features.map(f => <DefaultNode key={f.id} data={f} />)}\n    </div>\n    {decorators}\n</View>`;\n  }\n\n  /* VALUE */\n\n  static value() {\n    return `<View className={'root value d-flex'}>\n    {instanceofname && <label className={'d-block ms-1 name'}>{instanceofname}</label>}\n    {!instanceofname && <Input className='name' data={data} field={'name'} hidden={true} autosize={true} />}\n    <label className={'d-block m-auto values_str'} style={{color: constants[typeString] || 'gray'}}>\n        : {valuesString}\n    </label>\n    {decorators}\n</View>`;\n  }\n  static error(msg, errortype, data, node, v) {\n    var _lv$viewpoint;\n    let dname = data && (data.name || data.className.substring(1));\n    if (dname && dname.length >= 10) dname = dname.substring(0, 7) + '…';\n    let nodename = ((node === null || node === void 0 ? void 0 : node.className) || '').replace(/[^A-Z]+/g, \"\").substring(1);\n    let on = dname && nodename ? \" on \" + dname + \" / \" + nodename : dname || nodename ? \" on \" + (dname || nodename) : '';\n    let lv = v ? v.__isProxy ? v : LPointerTargetable.wrap(v) : undefined;\n    let viewpointname = (lv === null || lv === void 0 ? void 0 : (_lv$viewpoint = lv.viewpoint) === null || _lv$viewpoint === void 0 ? void 0 : _lv$viewpoint.name) || '';\n    return /*#__PURE__*/_jsxDEV(Draggable, {\n      className: 'error-notification',\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Something Went Wrong...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 13\n      }, this), v && /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Error in \\\"\", v === null || v === void 0 ? void 0 : v.name, \"\\\" syntax view definition\", viewpointname ? ' in viewpoint ' + viewpointname : '', \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'error-type',\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          \"data-dname\": dname,\n          \"data-nodename\": nodename,\n          \"data-str\": false,\n          children: [errortype, \" Error \", on, false && v && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"While applying view \\\"\", v === null || v === void 0 ? void 0 : v.name, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'error-details',\n        children: msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 17\n    }, this);\n  }\n  static error_string(msg, errortype, data, node, v) {\n    var _lv$viewpoint2;\n    let dname = data && (data.name || data.className.substring(1));\n    if (dname && dname.length >= 10) dname = dname.substring(0, 7) + '…';\n    let nodename = ((node === null || node === void 0 ? void 0 : node.className) || '').replace(/[^A-Z]+/g, \"\").substring(1);\n    let on = dname && nodename ? \" on \" + dname + \" / \" + nodename : dname || nodename ? \" on \" + (dname || nodename) : '';\n    let lv = v ? v.__isProxy ? v : LPointerTargetable.wrap(v) : undefined;\n    let viewpointname = (lv === null || lv === void 0 ? void 0 : (_lv$viewpoint2 = lv.viewpoint) === null || _lv$viewpoint2 === void 0 ? void 0 : _lv$viewpoint2.name) || '';\n    // <div className={'w-100 h-100 round bg-white border border-danger'} style={{minHeight:\"50px\", overflow:\"scroll\"}}>\n    //     <div className={'text-center text-danger'} tabIndex={-1} style={{background:\"#fff\", overflow: 'visible', zIndex:100, minWidth:\"min-content\"}}>\n    //         <b>{errortype}_ERROR` + on + `</b>\n    //         <hr/>\n    //         <label className={'text-center mx-1 d-block'}>\n    //             While applying view \"${v?.name}\"\n    //         </label>\n    //         {${msg} && <label className={'text-center mx-1 d-block'} style={{color:\"black\"}}>${msg}</label>}\n    //     </div>\n    // </div>\n    return `<div className={'error-notification'}>\n            <h1>Something Went Wrong...</h1>\n            ` + (v && `<h2>Error in \"${v === null || v === void 0 ? void 0 : v.name}\" syntax view definition${viewpointname ? ' in viewpoint ' + viewpointname : ''}.</h2>`) + `\n            <div className={'error-type'}>\n                <b data-dname=${dname} data-nodename=${nodename} data-str={true}>\n                    ${errortype} Error ${on}\n                    {false && v && <div>While applying view \"${v === null || v === void 0 ? void 0 : v.name}\"</div>}\n                </b>\n            </div>\n            <div className={'error-details'}>${msg}</div>\n        </div>)`;\n  }\n}","map":{"version":3,"names":["DViewElement","EdgeBendingMode","EdgeHead","LPointerTargetable","RuntimeAccessible","U","React","jsxDEV","_jsxDEV","beautify","s","ShortAttribETypes","window","DV","_dec","_class","invisibleJsx","modelView","DefaultView","model","packageView","package","classView","class","attributeView","feature","referenceView","enumeratorView","enum","literalView","literal","fallbackView","void","operationView","operation","parameterView","parameter","operationViewm1","operationm1","objectView","object","valueView","value","defaultPackage","errorView","publicmsg","debughiddenmsg","errortype","data","node","v","visibleMessage","replaceAll","trim","console","error","debuginfo","errorView_string","error_string","anchorJSX","edgePointView","edgePointViewSVG","svgHeadTail","head","type","ret","headstr","styleTranslateRotate","attrs","path","hoverAttrs","d","extend","reference","aggregation","composition","edgeView","modename","headSize","tailSize","dashing","vp","name","fill","agglabel","extendlabel","asslabel","headdict","predefinedPaths","Object","entries","map","e","k","headPath","tailPath","palette","unit","hexToPalette","options","x","y","css","tail","jsx","edgePrerenderFunc","edgeUsageDeclarations","ev","new2","appliableTo","bendingMode","Line","edgeHeadSize","edgeTailSize","usageDeclarations","preRenderFunc","semanticErrorOverlay_old","semanticErrorOverlay","valuecolormap","EBoolean","EByte","EShort","EInt","ELong","EFloat","EDouble","EDate","EString","EChar","EVoid","valuecolormap_str","JSON","stringify","objectOld","msg","_lv$viewpoint","dname","className","substring","length","nodename","replace","on","lv","__isProxy","wrap","undefined","viewpointname","viewpoint","Draggable","children","fileName","_jsxFileName","lineNumber","columnNumber","_lv$viewpoint2"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/common/DV.tsx"],"sourcesContent":["import {\r\n    DGraphElement, Dictionary,\r\n    DModelElement,\r\n    DViewElement,\r\n    DViewPoint,\r\n    DVoidEdge,\r\n    EdgeBendingMode,\r\n    EdgeHead,\r\n    GObject,\r\n    GraphPoint, LPointerTargetable, LViewElement,\r\n    Pointer,\r\n    RuntimeAccessible,\r\n    ShortAttribETypes as SAType,\r\n    U\r\n} from '../joiner';\r\nimport React, {ReactNode} from \"react\";\r\nimport {PaletteType} from \"../view/viewElement/view\";\r\nimport \"./error.scss\";\r\n\r\n\r\n\r\n// const beautify = require('js-beautify').html; // BEWARE: this adds some newline that might be breaking and introduce syntax errors in our JSX parser\r\nconst beautify = (s: string) => s;\r\nlet ShortAttribETypes: typeof SAType = (window as any).ShortAttribETypes;\r\n\r\n\r\n\r\n@RuntimeAccessible('DV')\r\nexport class DV {\r\n    public static invisibleJsx(): string { return ''; }\r\n    public static modelView(): string { return beautify(DefaultView.model()); }\r\n    public static packageView(): string { return beautify(DefaultView.package()); }\r\n    public static classView(): string { return beautify(DefaultView.class()); }\r\n    public static attributeView(): string { return beautify(DefaultView.feature()); }\r\n    public static referenceView(): string { return beautify(DefaultView.feature()); }\r\n    public static enumeratorView(): string { return beautify(DefaultView.enum()); }\r\n    public static literalView(): string { return beautify(DefaultView.literal()); }\r\n    public static fallbackView(): string { return beautify(DefaultView.void()); }\r\n    public static operationView(): string { return beautify(DefaultView.operation()); }\r\n    public static parameterView(): string { return beautify(DefaultView.parameter()); }\r\n\r\n    // i want to keep it because it will be useful for a candidate next feature in m1 & layoutable elements\r\n    // it is still work in progress.\r\n    public static operationViewm1(): string { return beautify(DefaultView.operationm1()); }\r\n    public static objectView(): string { return beautify(DefaultView.object()); }\r\n    public static valueView(): string { return beautify(DefaultView.value()); }\r\n    public static defaultPackage(): string { return beautify(DefaultView.defaultPackage()); }\r\n\r\n    public static errorView(publicmsg: ReactNode, debughiddenmsg:any, errortype: string, data?: DModelElement | undefined, node?: DGraphElement | undefined, v?: LViewElement|DViewElement): React.ReactNode {\r\n        let visibleMessage = publicmsg && typeof publicmsg === \"string\" ? U.replaceAll(publicmsg, \"Parse Error:\", \"\").trim() : publicmsg;\r\n        console.error(\"error in view:\", {publicmsg, debuginfo:debughiddenmsg});\r\n        return DefaultView.error(visibleMessage, errortype, data, node, v); }\r\n    public static errorView_string(publicmsg: string, debughiddenmsg:any, errortype: string, data?: DModelElement | undefined, node?: DGraphElement | undefined, v?: LViewElement|DViewElement): React.ReactNode {\r\n        let visibleMessage = publicmsg && typeof publicmsg === \"string\" ? U.replaceAll(publicmsg, \"Parse Error:\", \"\").trim() : publicmsg;\r\n        console.error(\"error in view:\", {publicmsg, debuginfo:debughiddenmsg});\r\n        return DefaultView.error_string(visibleMessage, errortype, data, node, v); }\r\n\r\n    // {ancors.map( a => <EdgePoint view={\"aaaaa\"} initialSize={{x: node.w * a.x, y: node.h * a.y}}/>)}\r\n    public static anchorJSX(): string { return (`\r\n<div className={\"overlap\"}>\r\n{Object.keys(anchors).map( (k) => { let a = anchors[k]; return(\r\n<div className={\"anchor draggable resizable\"} data-anchorName={a.name} data-anchorKey={k}\r\n    onDragEnd={(coords/*Point*/)=>node.events.dragAnchor(coords, k)} onMouseUp={()=>{node.events.assignAnchor(k)}}\r\n    style={{left: 100*a.x+'%', top:100*a.y+'%', width:a.w+'px', height:a.h+'px'}} />)})\r\n}</div>\r\n`);}\r\n    static edgePointView(): string { return beautify((\r\n`<div className={\"edgePoint\"} tabIndex=\"-1\">\r\n    {decorators}\r\n</div>`\r\n))}\r\n    static edgePointViewSVG(): string { return beautify(\r\n        `<ellipse stroke={\"black\"} fill={\"red\"} cx={\"50\"} cy={\"50\"} rx={\"20\"} ry={\"20\"} />`\r\n        //`<ellipse stroke={\"black\"} fill={\"red\"} cx={props.node.x} cy={props.node.y} rx={props.node.w} ry={props.node.h} />`\r\n    )}\r\n\r\n    static svgHeadTail(head: \"head\" | \"tail\", type: EdgeHead): string | undefined {\r\n        let ret: string;\r\n        let headstr = head===\"head\" ? \"segments.head\" : \"segments.tail\";\r\n        let styleTranslateRotate = 'transform:\"translate(\" + ' + headstr + '.x + \"px, \" + ' + headstr + '.y + \"px) rotate(\" + (' + headstr + '.rad) + \"rad)\",' +\r\n            ' \"transformOrigin\":'+headstr+'.w/2+\"px \"+ '+headstr+'.h/2+\"px\"';\r\n        let attrs = `\\n\\t\\t\\t\\tstyle={{`+styleTranslateRotate +`}}\\n\\t\\t\\t\\tclassName={\"` + head + ` ` + type +` preview\"} />\\n`;\r\n        let path: string;\r\n        let hoverAttrs = `\\n\\t\\t\\t\\tstyle={{`+styleTranslateRotate +`}}\\n\\t\\t\\t\\tclassName={\"` + head + ` ` + type +` clickable content\"} tabIndex=\"-1\" />\\n`;\r\n        let d: string;\r\n        switch (type) {\r\n            default:\r\n                ret = \"edge '\" + head + \"' with type: '\" +type + \"' not found\";\r\n                break;\r\n            case EdgeHead.extend:\r\n                //if (head === \"tail\") return undefined;\r\n                d = `M 0 0   L x y/2   L 0 y   Z`;\r\n                path = `<path  `;\r\n                ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\r\n                break;\r\n            case EdgeHead.reference:\r\n                //if (head === \"tail\") return undefined;\r\n                d = `M 0 0   L x y/2   L 0 y`;\r\n                path = `<path  `;\r\n                ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\r\n                break;\r\n            case EdgeHead.aggregation:\r\n                //if (head === \"head\") return undefined;\r\n                d = `M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z`;\r\n                path = `<path  `;\r\n                ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\r\n                break;\r\n            case EdgeHead.composition:\r\n                //if (head === \"head\") return undefined;\r\n                d = `M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z`;\r\n                path = `<path  `;\r\n                ret = path + attrs + \"\\n\\t\\t\\t\\t\" + path + hoverAttrs;\r\n                break;\r\n                /* `<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" style={overflow: \"visible\"}>\r\n                                            <path d={\"M 10 0 L 0 20 L 20 20 Z\"} fill=\"#ffffff\" stroke=\"#808080\" strokeWidth=\"1\"></path>\r\n                                         </svg>`;*/\r\n                //  style={transform: \"rotate3d(xcenter, ycenter, zcenter??, 90deg)\"}\r\n        }\r\n        //  transform={\"rotate(\"+`+headstr+`.rad+\"rad \"+ segments.all[0].start.pt.toString(false, \" \")}\r\n        return ret; // no wrap because of .hoverable > .preview  on root & subelements must be consecutive\r\n        // return `<g className=\"edge`+head + ` ` + type +`\" style={` + styleTranslate + `}>\\n`+ ret +`</g>`\r\n    }\r\n\r\n    // about label rotation in .edge > foreignObect > div (label)\r\n    // first transform is h-center. second is rotate, third adds [0, 50%] of 50% vertical offset AFTER rotation to take label out of edge. fourth is to add a margin.\r\n    static edgeView(modename: EdgeHead, headSize: GraphPoint, tailSize: GraphPoint, dashing: string | undefined, vp: DViewElement, name: string): DViewElement {\r\n        let fill: string;\r\n        switch (modename){\r\n            case EdgeHead.reference:\r\n            default: fill = '#fff0'; break;\r\n            case EdgeHead.composition: fill = '#000'; break;\r\n            case EdgeHead.aggregation:\r\n            case EdgeHead.extend: fill = '#fff'; break;\r\n        }\r\n\r\n        const agglabel = \"◇ Aggregation / Composition\";\r\n        const extendlabel = \"△ \"+EdgeHead.extend;\r\n        const asslabel = \"Λ \"+EdgeHead.reference;\r\n        let headdict: Dictionary<string, string> = {\r\n            [asslabel]: 'M 0 0   L x y/2   L 0 y',\r\n            [extendlabel]: 'M 0 0   L x y/2   L 0 y   Z',\r\n            [agglabel]: 'M 0 y/2   L x/2 0   L x y/2   L x/2 y   Z',\r\n        };\r\n        let predefinedPaths: {k:string, v:string}[] = Object.entries(headdict).map((e)=>({k:e[0], v:e[1]}));\r\n\r\n        let headPath: string = '', tailPath: string = '';\r\n        switch (modename) {\r\n            default: break;\r\n            case EdgeHead.extend: headPath = extendlabel; break;\r\n            case EdgeHead.reference: headPath = asslabel; break;\r\n            case EdgeHead.aggregation: tailPath = agglabel; break;\r\n            case EdgeHead.composition: tailPath = agglabel; break;\r\n        }\r\n        headPath = headdict[headPath] || '';\r\n        tailPath = headdict[tailPath] || '';\r\n\r\n        let palette: PaletteType = {\r\n            'anchorSize': {type: 'number', value:20, unit:'px'},\r\n            'dashing': {value:dashing || '', type: \"text\"},\r\n            'stroke-color': U.hexToPalette('#777'),\r\n            'stroke-width': {value:1, type: 'number', unit: 'px'},\r\n            'stroke-color-hover': U.hexToPalette('#000'),\r\n            'stroke-width-hover': {value:3, type: 'number', unit: 'px'},\r\n            'head': {type:'path', value:headPath, options: predefinedPaths, x:'edgeHeadSize.x', y:'edgeHeadSize.y'},\r\n            'tail': {type:'path', value:tailPath, options: predefinedPaths, x:'edgeTailSize.x', y:'edgeTailSize.y'},\r\n            'fill': U.hexToPalette(fill),\r\n        };\r\n\r\n        let css = \".edge-anchor{\" +\r\n        \"\\n\\tcursor: crosshair;\" +\r\n        \"\\n\\tstroke: transparent;\" +\r\n        \"\\n\\tfill: none;\" +\r\n        \"\\n\\tr:var(--anchorSize);\" +\r\n        \"\\n\\toutline: var(--stroke-width) solid var(--stroke-color);\"+\r\n        \"\\n\\toutline-offset: calc(var(--stroke-width) * -1);\" +\r\n        \"\\n\\tborder-radius: 100%;\" +\r\n        \"\\n}\" +\r\n        \"\\n.clickthrough, .unclickable{\" +\r\n        \"\\n\\tpointer-events: none;\" +\r\n        \"\\n}\" +\r\n        \"\\n.clickable{\" +\r\n        \"\\n\\tpointer-events: all;\" +\r\n        \"\\n}\" +\r\n        \"\\n.fullscreen{\" +\r\n        \"\\n\\toverflow: visible;\" +\r\n        \"\\n\\twidth: 100vw;\" +\r\n        \"\\n\\theight: 100vh;\" +\r\n        \"\\n}\" +\r\n        \"\\npath{\" +\r\n        \"\\n\\tfill: none;\" +\r\n        \"\\n\\tstroke-dasharray: var(--dashing);\" +\r\n        \"\\n\\t&.head{\" +\r\n        \"\\n\\t\\td: path(var(--head));\" +\r\n        \"\\n\\t}\" +\r\n        \"\\n\\t&.tail{\" +\r\n        \"\\n\\t\\td: path(var(--tail));\" +\r\n        \"\\n\\t}\" +\r\n        \"\\n}\" +\r\n        \"\\npath.edge.full, path.tail, path.head{\" +\r\n        \"\\n\\tstroke: var(--stroke-color);\" +\r\n        \"\\n\\tstroke-width: var(--stroke-width);\" +\r\n        \"\\n}\" +\r\n        \"\\npath.tail, path.head{\" +\r\n        \"\\n\\tfill:var(--fill);\" +\r\n        \"\\n}\" +\r\n        \"\\npath.edge.full.hover-activator{\" +\r\n        \"\\n\\tstroke-width: var(--stroke-width-hover);\" +\r\n        \"\\n\\tstroke: none;\" +\r\n        \"\\n}\" +\r\n        \"\\npath.content{\" +\r\n        \"\\n\\tstroke: var(--stroke-color-hover);\" +\r\n        \"\\n\\tstroke-width: var(--stroke-width-hover);\" +\r\n        \"\\n}\" +\r\n        \"\\n.label-text{\" +\r\n        \"\\n\\tcolor: var(--stroke-color);\" +\r\n        \"\\n}\" +\r\n        \"\\nforeignObject.label{\" +\r\n        \"\\n\\toverflow: visible;\" +\r\n        \"\\n\\tcolor: var(--stroke-color);\" +\r\n        \"\\n\\twidth: 0;\" +\r\n        \"\\n\\theight: 0;\" +\r\n        \"\\n\\twhite-space: pre;\" +\r\n        \"\\n\\t> div{\" +\r\n        \"\\n\\t\\twidth: fit-content;\" +\r\n        \"\\n\\t}\" +\r\n        \"\\n}\" +\r\n        \"\\n\\t\" +\r\n        \"\\n\\t\" +\r\n        \"\";\r\n        let head = DV.svgHeadTail(\"head\", modename) || '';\r\n        let tail = DV.svgHeadTail(\"tail\", modename) || '';\r\n        let jsx = beautify(\r\n        `<div className={\"edge hoverable hide-ep clickthrough fullscreen ` + modename + `\"}>\r\n            <svg className={\"clickthrough fullscreen\"}>\r\n                { /* edge full paths\r\n               \r\n                 first is preview path, normally seen\r\n                 third (segmented) is path onHover\r\n                 second is to enlarge the hover area of path.preview to the same as path.content, so i avoid hover loop enter-leave and graphical flashing\r\n                \r\n                */ }\r\n                <path className={\"preview edge full` + (dashing ? ' dashed' : '') + `\"} d={this.edge.d} />\r\n                <path className={\"preview edge full hover-activator\"} d={this.edge.d} />\r\n                { /* edge separate segments */ }\r\n                {segments && segments.all && segments.all.flatMap(s => [\r\n                    <path tabIndex=\"-1\" className={\"clickable content segment\"} d={s.dpart}></path>,\r\n                    s.label && <foreignObject className=\"label\" x={(s.start.pt.x + s.end.pt.x)/2+\"px\"} y={(s.start.pt.y + s.end.pt.y)/2+\"px\"}>\r\n                    <div className={\"label-text\"}\r\n                     style={{transform: \"translate(-50%, 0%) rotate(\"+s.radLabels+\"rad) translate(0%, -\"+(1-0.5*Math.abs(Math.abs(s.radLabels)%Math.PI)/(Math.PI/2))*100+\"%)\"+\r\n                     \" translate(0%, -5px\"}}>{s.label}</div>\r\n                    </foreignObject>\r\n                ])}\r\n                { /* edge head */ }\r\n                ` + head + `\r\n                { /* edge tail */ }\r\n                ` + tail + `\r\n                { /* edge anchor start */ }\r\n                {edge.start && <circle className=\"edge-anchor content clickable no-drag\"\r\n                 style={{transform: \"translate(\" + segments.all[0].start.pt.x +\"px, \" + segments.all[0].start.pt.y +\"px)\"}}\r\n                 onMouseDown={()=> edge.startFollow=true}\r\n                 onMouseUp={()=> edge.startfollow=false} />}\r\n                { /* edge anchor end */ }\r\n                {edge.end && <circle className=\"edge-anchor content clickable no-drag\" `+ // cx={0*segments.all.last().end.pt.x} cy={0*segments.all.last().end.pt.y}\r\n                `style={{transform: \"translate(\" + segments.all.last().end.pt.x +\"px, \" + segments.all.last().end.pt.y +\"px)\"}}\r\n                 onMouseDown={()=> edge.endFollow=true}\r\n                 onMouseUp={()=> edge.endfollow=false} />}\r\n\r\n            </svg>\r\n            { /* interactively added edgepoints */ }\r\n            {\r\n                edge.midPoints.map( m => <EdgePoint data={edge.father.model.id} initialSize={m} key={m.id} view={\"EdgePoint\"} /> )\r\n            }\r\n            {decorators}\r\n        </div>`\r\n    );\r\n        let edgePrerenderFunc: string = \"(ret)=>{\\n\" +\r\n            \"// ** preparations and default behaviour here ** //\\n\" +\r\n            \"// add preparation code here (like for loops to count something), then list the dependencies below.\\n\" +\r\n            \"// ** declarations here ** //\\n\" +\r\n            \"\\n\"+\r\n            \"}\";\r\n\r\n        let edgeUsageDeclarations = \"(ret)=>{\\n\" +\r\n            \"// ** preparations and default behaviour here ** //\\n\" +\r\n            \"// ret.data = data\\n\" +\r\n            \"ret.edgeview = edge.view.id\\n\" +\r\n            \"ret.view = view\\n\" +\r\n            \"// data, edge, view are dependencies by default. delete them above if you want to remove them.\\n\" +\r\n            \"// add preparation code here (like for loops to count something), then list the dependencies below.\\n\" +\r\n            \"// ** declarations here ** //\\n\" +\r\n            \"ret.start = edge.start\\n\"+\r\n            \"ret.end = edge.end\\n\"+\r\n            \"ret.segments = edge.segments\\n\"+\r\n            \"}\";\r\n        let ev = DViewElement.new2(\"Edge\"+name, jsx, vp,\r\n            (v: DViewElement) => {\r\n                // v.appliableToClasses = [DVoidEdge.cname];\r\n                v.appliableTo = 'Edge';\r\n                v.bendingMode = EdgeBendingMode.Line;\r\n                v.edgeHeadSize = headSize;\r\n                v.edgeTailSize = tailSize;\r\n                //v.constants = edgeConstants;\r\n                v.palette = palette;\r\n                v.css = css\r\n                v.usageDeclarations = edgeUsageDeclarations;\r\n                v.preRenderFunc = edgePrerenderFunc;\r\n            }, false, 'Pointer_ViewEdge' + name);\r\n        return ev;\r\n    }\r\n    /*\r\n    {\r\n        false && edge.end.model.attributes.map( (m, index, arr) => <EdgePoint data={m.id} initialSize={(parent) => {\r\n            let segs = parent.segments.segments;\r\n            let pos = segs[0].start.pt.multiply(1-(index+1)/(arr.length+1), true).add(segs[segs.length-1].end.pt.multiply((index+1)/(arr.length+1), true));\r\n            // console.trace(\"initial ep\", {segs, pos, ratio:(index+1)/(arr.length+1), s:segs[0].start.pt, e:segs[segs.length-1].end.pt});\r\n            return {...pos, w:55, h:55}}} key={m.id} view={\"Pointer_ViewEdgePoint\"} /> )\r\n    }{\r\n        false && <EdgePoint key={\"midnode1\"} view={\"Pointer_ViewEdgePoint\"} />\r\n    }{\r\n        false && <EdgePoint key={\"midnode2\"} view={\"Pointer_ViewEdgePoint\"} />\r\n    }{\r\n        false && props.children && \"this would cause loop no idea why, needs to be fixed to allow passing EdgeNodes here\" || []\r\n    }\r\n    */\r\n    static semanticErrorOverlay_old() { return (\r\n`<section className=\"overlap\">\r\n    <div className=\"error-message\">Lowerbound violation</div>\r\n</section>`\r\n)}    static semanticErrorOverlay() { return (\r\n`<section className=\"overlap\">\r\n    <div className=\"error-message\">{errors.join(<br/>)}</div>\r\n</section>`\r\n)}\r\n\r\n\r\n} // DV class end\r\n\r\nlet valuecolormap: GObject = {};\r\nvaluecolormap[ShortAttribETypes.EBoolean] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.EByte] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.EShort] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.EInt] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.ELong] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.EFloat] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.EDouble] = \"orange\";\r\nvaluecolormap[ShortAttribETypes.EDate] = \"green\";\r\nvaluecolormap[ShortAttribETypes.EString] = \"green\";\r\nvaluecolormap[ShortAttribETypes.EChar] = \"green\";\r\nvaluecolormap[ShortAttribETypes.EVoid] = \"gray\";\r\n\r\nlet valuecolormap_str = JSON.stringify(valuecolormap); // can this be declared inside view.constants ?\r\n\r\n\r\ntype ErrorProps = {\r\n    dname: any,\r\n    nodename: any,\r\n    errortype: any,\r\n    on: any,\r\n    v: any,\r\n    msg: any\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport class DefaultView {\r\n\r\n    /* MODEL */\r\n\r\n    public static model(): string { return (\r\n`<View className={'root model'}>\r\n<Scrollable graph={node}>\r\n    {!data && \"Model data missing.\"}\r\n    <div className={'edges'}>\r\n        {[\r\n            refEdges.map(se => <Edge anchorStart={0} anchorEnd={0} key={se.id}\r\n            start={se.start.father.node} end={se.end.node} view={'Edge' + (se.start.composition ? 'Composition' : (se.start.aggregation ? 'Aggregation' : 'Association'))} />),\r\n            extendEdges.map(se => <Edge start={se.start} end={se.end} view={'EdgeInheritance'} key={se.id} />)\r\n        ]}\r\n    </div>\r\n    {otherPackages.filter(p => p).map(pkg => <DefaultNode key={pkg.id} data={pkg} />)}\r\n    {level >= 1 && firstPackage && firstPackage.children.filter(c => c).map(classifier => <DefaultNode key={classifier.id} data={classifier} />)}\r\n    {level >= 1 && m1Objects.filter(o => o).map(m1object => <DefaultNode key={m1object.id} data={m1object} />)}\r\n    {decorators}\r\n</Scrollable>\r\n{/* here you can insert viewpoint-wide descriptions, eg <Control> .. </Control> */}\r\n\r\n<Control title={'Abstraction'} payoff={'Zooming'}>\r\n    <Slider name={'level'} title={'Detail level '} node={node} max={3} />\r\n</Control>\r\n</View>`\r\n);}\r\n\r\n\r\n    public static void(): string { return (\r\n`<div className={'root void model-less round bg-white p-1'}>\r\n    <div>voidvertex element test</div>\r\n    <div>data: {props.data ? props.data.name : \"empty\"}</div>\r\n    {decorators}\r\n</div>`\r\n);}\r\n\r\n    /* PACKAGE */\r\n\r\n    public static package(): string { return (\r\n`<View className={'root package'}>\r\n    <Measurable draggable={true} resizable={true}><div>draggable resizable</div></Measurable>\r\n    <Measurable draggable={true}><div>draggable</div></Measurable>\r\n    <div className={'package-children'}>\r\n        {upperLevel >= 1 ? [\r\n            <label className={\"detail-level\"}>\r\n                <input onChange={(e)=>{node.state = {level:+e.target.value}}} min=\"0\" max=\"3\" type=\"range\" step=\"1\" value={level}/>\r\n                <div>Detail level:{level}</div>\r\n            </label>,\r\n            data.children.map(c => <DefaultNode key={c.id} data={c} />)\r\n        ] :\r\n        [\r\n            <div className={\"summary\"}><b>URI:</b><span className={\"ms-1\"}>{data.uri}</span></div>,\r\n            <div className={\"summary\"}>{[\r\n                data.classes.length ? data.classes.length + \" classes\" : '',\r\n                data.enumerators.length ? data.enumerators.length + \" enumerators\" : ''\r\n               ].filter(v=>!!v).join(',')}</div>\r\n        ]}\r\n    </div>\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n    public static defaultPackage(): string { return (\r\n`<div className={'root package'}>\r\n    <div className={'package-children'}>\r\n        {data.children.map(c => <DefaultNode key={c.id} data={c} />)}\r\n    </div>\r\n    {decorators}\r\n</div>`\r\n);}\r\n\r\n    /* CLASS */\r\n\r\n// <View className={\"root class \" + (level === 1 && abstract ? \"abstract\")} + onClick={()=>{/*node.events.e1(Math.random().toFixed(3))*/}}>\r\n\r\npublic static class(): string { return (`<View className={\"root class\"} onClick={()=>{/*node.events.e1(Math.random().toFixed(3))*/}}>\r\n<div className={'header'}>\r\n    {level > 1 && <b className={'class-name'}>{interface ? 'Interface' : abstract ? 'Abstract Class' : 'Class'}:</b>}\r\n    \r\n    {level === 1 && <i className=\"bi bi-c-square-fill\"></i>}<Input data={data} field={'name'} hidden={true} autosize={true} />\r\n</div>\r\n{level > 2 && <hr/>}\r\n\r\n{level > 2 && \r\n    <div className={'class-children'}>\r\n        {level >= 2 && [\r\n            attributes.map(c => <DefaultNode key={c.id} data={c} />),\r\n            references.map(c => <DefaultNode key={c.id} data={c} />),\r\n            operations.map(c => <DefaultNode key={c.id} data={c} />)\r\n        ]\r\n        || [\r\n        <div className={\"summary\"}>{[\r\n            attributes.length ? attributes.length + \" attributes\" : '',\r\n            references.length ? references.length + \" references\" : '',\r\n            operations.length ? operations.length + \" operations\" : '',\r\n            !(attributes.length + references.length + operations.length) ? '- empty -' : ''\r\n            ].filter(v=>!!v).join(',')}</div>\r\n        ]\r\n        }\r\n    </div>\r\n}\r\n\r\n{decorators}\r\n</View>`);}\r\n\r\n    /* ENUM */\r\n\r\npublic static enum(): string { return (\r\n`<View className={'root enumerator'}>\r\n    <div className={'header'}>\r\n        {level > 1 && <b className={'enumerator-name'}>Enum:</b>}\r\n        {level == 1 && <i className=\"bi bi-explicit-fill\"></i>}<Input data={data} field={'name'} hidden={true} autosize={true} />\r\n    </div>\r\n    {level > 1 && <hr />}\r\n    <div className={'enumerator-children'}>\r\n        {level >= 2 && literals.map(c => <DefaultNode key={c.id} data={c}/>)}\r\n    </div>\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n\r\n\r\n\r\n\r\n\r\n    public static feature(): string { return (\r\n`<View className={'root feature w-100'}>\r\n    <span className={'feature-name'}>{data.name}:</span>\r\n    <Select data={data} field={'type'} />\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n    /* LITERAL */\r\n    public static literal(): string { return (\r\n`<label className={'root literal d-block text-center'}>\r\n    {data.name}\r\n    {decorators}\r\n</label>`\r\n);}\r\n\r\n    /* OPERATION */\r\n    public static operation(): string { return (\r\n`<View className={'root operation w-100 hoverable'}>\r\n        <span className={'feature-name'}>{data.name + ' =>'}</span>\r\n        <Select data={data} field={'type'} />\r\n    <div className={\"parameters content\"}>\r\n    {data.exceptions.length ? \" throws \" + data.exceptions.join(\", \") : ''}\r\n    {\r\n        level >= 3 && data.parameters.map(p => <DefaultNode data={p} key={p.id} />)\r\n    }</div>\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n    /* PARAMETER */\r\npublic static parameter(): string { return (\r\n`<View className={'root parameter w-100'}>\r\n    <span className={'feature-name'}>\r\n        {data.name + '' + (data.lowerBound === 0 ? '?:' : ':' )}\r\n    </span>\r\n    <Select data={data} field={'type'} />\r\n    <span className={\"modifier\"}>{data.upperBound > 1 || data.upperBound === -1 ? '[]' : ''}</span>\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n    // i want to keep it because it will be useful for a candidate next feature in m1 & layoutable elements\r\n    // it is still work in progress.\r\n    public static operationm1(): string { return (\r\n`<div className={'d-flex root operationm1'} style={{paddingRight: \"6px\"}}>\r\n    <label className={'d-block ms-1'}>{this.props.data.instanceof.name}</label>\r\n    <label className={'d-block ms-auto hover-root'} style={{color:` + valuecolormap_str + `[this.props.data.values.type] || \"gray\"}}>\r\n        →→→\r\n        <div className=\"hover-content\">\r\n            <ParameterForm operation={this.props.data.id} vertical={true} />\r\n        </div>\r\n    </label>\r\n    {decorators}\r\n</div>`\r\n);}\r\n\r\n    public static objectOld(): string { return (\r\n`<div className={'round bg-white root class'}>\r\n    <label className={'ms-1'}>\r\n        <Input jsxLabel={<b className={'object-name'}>{data.instanceof ? data.instanceof.name : \"Object\"}:</b>} \r\n           data={data} field={'name'} hidden={true} autosize={true}/>\r\n    </label>\r\n    <hr />\r\n    <div className={'object-children'}>\r\n        { features.map(c => <DefaultNode key={c.id} data={c} />) }\r\n    </div>\r\n    {decorators}\r\n</div>`);\r\n}\r\n\r\n//     public static object(): string { return (\r\n// `<View className={'root object'}>\r\n//     <b className={'object-name'}>{data.instanceof ? data.instanceof.name : 'Object'}:</b>\r\n//     <Input data={data} field={'name'} hidden={true} autosize={true} />\r\n//     <hr/>\r\n//     <div className={'object-children'}>\r\n//         {level >= 2 && data.features.map(f => <DefaultNode key={f.id} data={f} />)}\r\n//     </div>\r\n//     {decorators}\r\n// </View>`\r\n// );}\r\n\r\npublic static object(): string { return (\r\n`<View className={'root object'}>\r\n    <b className={'object-name'}>{data.instanceof ? data.instanceof.name : 'Object'}:</b>\r\n    <Input data={data} field={'name'} hidden={true} autosize={true} />\r\n    <hr/>\r\n    <div className={'object-children'}>\r\n        {level >= 2 && data.features.map(f => <DefaultNode key={f.id} data={f} />)}\r\n    </div>\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n    /* VALUE */\r\n\r\n    public static value() { return (\r\n`<View className={'root value d-flex'}>\r\n    {instanceofname && <label className={'d-block ms-1 name'}>{instanceofname}</label>}\r\n    {!instanceofname && <Input className='name' data={data} field={'name'} hidden={true} autosize={true} />}\r\n    <label className={'d-block m-auto values_str'} style={{color: constants[typeString] || 'gray'}}>\r\n        : {valuesString}\r\n    </label>\r\n    {decorators}\r\n</View>`\r\n);}\r\n\r\n    public static error(msg: undefined | ReactNode, errortype: string | \"SYNTAX\" | \"RUNTIME\",\r\n                        data?: DModelElement | undefined, node?: DGraphElement | undefined, v?: LViewElement|DViewElement): React.ReactNode {\r\n\r\n        let dname: string | undefined = data && ((data as any).name || data.className.substring(1));\r\n        if (dname && dname.length >= 10) dname = dname.substring(0, 7) + '…';\r\n        let nodename: string = (node?.className || '').replace(/[^A-Z]+/g, \"\").substring(1);\r\n        let on = dname && nodename ? \" on \" + dname + \" / \" + nodename : (dname || nodename ? \" on \" + (dname || nodename) : '');\r\n\r\n        let lv: LViewElement | undefined = v ? ((v as any).__isProxy ? v as LViewElement : LPointerTargetable.wrap(v)) : undefined;\r\n        let viewpointname = lv?.viewpoint?.name ||'';\r\n\r\n        return (<Draggable className={'error-notification'}>\r\n            <h1>Something Went Wrong...</h1>\r\n            {v && <h2>Error in \"{v?.name}\" syntax view definition{viewpointname? ' in viewpoint ' + viewpointname : ''}.</h2>}\r\n            <div className={'error-type'}>\r\n                <b data-dname={dname} data-nodename={nodename} data-str={false}>\r\n                    {errortype} Error {on}\r\n                    {false && v && <div>While applying view \"{v?.name}\"</div>}\r\n                </b>\r\n            </div>\r\n            <div className={'error-details'}>{msg}</div>\r\n        </Draggable>);\r\n    }\r\n\r\n    public static error_string(msg: undefined | ReactNode, errortype: string | \"SYNTAX\" | \"RUNTIME\", data?: DModelElement | undefined,\r\n                               node?: DGraphElement | undefined, v?: LViewElement|DViewElement) {\r\n        let dname: string | undefined = data && ((data as any).name || data.className.substring(1));\r\n        if (dname && dname.length >= 10) dname = dname.substring(0, 7) + '…';\r\n        let nodename: string = (node?.className || '').replace(/[^A-Z]+/g, \"\").substring(1);\r\n        let on = dname && nodename ? \" on \" + dname + \" / \" + nodename : (dname || nodename ? \" on \" + (dname || nodename) : '');\r\n\r\n        let lv: LViewElement | undefined = v ? ((v as any).__isProxy ? v as LViewElement : LPointerTargetable.wrap(v)) : undefined;\r\n        let viewpointname = lv?.viewpoint?.name ||'';\r\n        // <div className={'w-100 h-100 round bg-white border border-danger'} style={{minHeight:\"50px\", overflow:\"scroll\"}}>\r\n        //     <div className={'text-center text-danger'} tabIndex={-1} style={{background:\"#fff\", overflow: 'visible', zIndex:100, minWidth:\"min-content\"}}>\r\n        //         <b>{errortype}_ERROR` + on + `</b>\r\n        //         <hr/>\r\n        //         <label className={'text-center mx-1 d-block'}>\r\n        //             While applying view \"${v?.name}\"\r\n        //         </label>\r\n        //         {${msg} && <label className={'text-center mx-1 d-block'} style={{color:\"black\"}}>${msg}</label>}\r\n        //     </div>\r\n        // </div>\r\n        return `<div className={'error-notification'}>\r\n            <h1>Something Went Wrong...</h1>\r\n            `+ (v && `<h2>Error in \"${v?.name}\" syntax view definition${viewpointname ? ' in viewpoint ' + viewpointname : ''}.</h2>`)+`\r\n            <div className={'error-type'}>\r\n                <b data-dname=${dname} data-nodename=${nodename} data-str={true}>\r\n                    ${errortype} Error ${on}\r\n                    {false && v && <div>While applying view \"${v?.name}\"</div>}\r\n                </b>\r\n            </div>\r\n            <div className={'error-details'}>${msg}</div>\r\n        </div>)`;\r\n    }\r\n\r\n\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}