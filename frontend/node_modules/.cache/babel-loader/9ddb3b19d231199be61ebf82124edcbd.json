{"ast":null,"code":"/* Viewpoints > Events */import React from'react';import{LViewElement,U}from'../../../../joiner';import{connect}from\"react-redux\";import{JsEditor}from\"../../languages\";// import JsEditor from \"../../jsEditor/JsEditor\";\nimport{CommandBar,Btn}from'../../../commandbar/CommandBar';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ViewEventsComponent(props){const view=props.view;const dview=props.view.__raw;const readOnly=props.readonly;function addEvent(){let eventname=\"customEvent1\";eventname=U.increaseEndingNumber(eventname,false,false,s=>s in dview.events);let newevent={};newevent[eventname]='(parameter1, parameter2) => {\\n\\t// example, replace with your function\\n\\treturn parameter1 + parameter2;\\n}';view.events=newevent;}let initialExpand=(v,field)=>!!v[field];return/*#__PURE__*/_jsxs(\"section\",{className:'p-3 events-tab',children:[/*#__PURE__*/_jsxs(\"h1\",{className:'view',children:[\"View: \",view.name]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Default Events\"}),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'onDataUpdate',title:'onDataUpdate',initialExpand:initialExpand,readonly:readOnly},'odu'),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'onDragStart',title:'onDragStart',initialExpand:initialExpand,readonly:readOnly},'ods'),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'whileDragging',title:'whileDragging',initialExpand:initialExpand,readonly:readOnly},'odw'),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'onDragEnd',title:'onDragEnd',initialExpand:initialExpand,readonly:readOnly},'ode'),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'onResizeStart',title:'onResizeStart',initialExpand:initialExpand,readonly:readOnly},'ors'),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'whileResizing',title:'whileResizing',initialExpand:initialExpand,readonly:readOnly},'orw'),/*#__PURE__*/_jsx(JsEditor,{data:view,field:'onResizeEnd',title:'onResizeEnd',initialExpand:initialExpand,readonly:readOnly},'ore'),/*#__PURE__*/_jsxs(\"div\",{className:'d-flex mx-auto',style:{marginTop:'14px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Custom Events\"}),/*#__PURE__*/_jsx(CommandBar,{className:'ms-auto',style:{paddingTop:'12px'},children:/*#__PURE__*/_jsx(Btn,{icon:'add',action:addEvent,tip:'New event'})})]}),Object.keys(dview.events).map(k=>{let val=dview.events[k];if(!val)return;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(JsEditor,{data:view,readonly:readOnly,initialExpand:()=>true,title:/*#__PURE__*/_jsx(\"input\",{defaultValue:k,disabled:readOnly,onBlur:e=>{let newname=e.target.value;if(k===newname)return;let newEvent={};newEvent[newname]=dview.events[k];newEvent[k]=undefined;view.events=newEvent;}}),jsxLabel:/*#__PURE__*/_jsx(CommandBar,{className:'ms-auto',style:{paddingTop:'9px'},children:/*#__PURE__*/_jsx(Btn,{icon:'delete',tip:'Remove event',action:()=>{let newEvent={};newEvent[k]=undefined;// this is how you trigger deletion with object -= action\nview.events=newEvent;}})})/* jsxLabel={<button className={'btn btn-danger my-auto ms-auto'} onClick={() => {\r\n                let newEvent: GObject = {};\r\n                newEvent[k] = undefined; // this is how you trigger deletion with object -= action\r\n                view.events = newEvent;\r\n            }}>\r\n                <i className={'p-1 bi bi-trash3-fill'} />\r\n            </button>}*/,getter:()=>val,setter:js=>{let newEvent={};newEvent[k]=js;view.events=newEvent;}},k/* if val does not update, concatenate it to the key (k+val)*/)});}),/*#__PURE__*/_jsx(\"div\",{className:'p-4'})]});}function mapStateToProps(state,ownProps){const view=LViewElement.fromPointer(ownProps.viewID);return{view};}function mapDispatchToProps(dispatch){const ret={};return ret;}export const ViewEventsConnected=connect(mapStateToProps,mapDispatchToProps)(ViewEventsComponent);export const ViewEvents=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(ViewEventsConnected,{...props,children});};export default ViewEvents;","map":{"version":3,"names":["React","LViewElement","U","connect","JsEditor","CommandBar","Btn","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ViewEventsComponent","props","view","dview","__raw","readOnly","readonly","addEvent","eventname","increaseEndingNumber","s","events","newevent","initialExpand","v","field","className","children","name","data","title","style","marginTop","paddingTop","icon","action","tip","Object","keys","map","k","val","defaultValue","disabled","onBlur","e","newname","target","value","newEvent","undefined","jsxLabel","getter","setter","js","mapStateToProps","state","ownProps","fromPointer","viewID","mapDispatchToProps","dispatch","ret","ViewEventsConnected","ViewEvents","arguments","length"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/frontend/src/components/editors/views/data/CustomData.tsx"],"sourcesContent":["/* Viewpoints > Events */\r\n\r\nimport React, {Dispatch, EventHandler, MouseEventHandler, ReactElement} from 'react';\r\nimport {DState, DViewElement, GObject, LViewElement, Pointer, TextArea, U} from '../../../../joiner';\r\nimport {connect} from \"react-redux\";\r\nimport {JsEditor} from \"../../languages\";\r\nimport {Function} from \"../../../forEndUser/FunctionComponent\";\r\n// import JsEditor from \"../../jsEditor/JsEditor\";\r\n\r\nimport { CommandBar, Btn, Sep } from '../../../commandbar/CommandBar';\r\n\r\nfunction ViewEventsComponent(props: AllProps) {\r\n    const view = props.view;\r\n    const dview = props.view.__raw;\r\n    const readOnly = props.readonly;\r\n\r\n    function addEvent() {\r\n        let eventname = \"customEvent1\";\r\n        eventname = U.increaseEndingNumber(eventname, false, false, (s)=> s in dview.events);\r\n        let newevent: GObject = {};\r\n        newevent[eventname] = '(parameter1, parameter2) => {\\n\\t// example, replace with your function\\n\\treturn parameter1 + parameter2;\\n}';\r\n        view.events = newevent;\r\n    }\r\n\r\n    let initialExpand = (v: any, field: any)=>!!(v as any)[field as string];\r\n    return(<section className={'p-3 events-tab'}>\r\n        <h1 className={'view'}>View: {view.name}</h1>\r\n        <h2>Default Events</h2>\r\n        <JsEditor key='odu' data={view} field={'onDataUpdate'} title={'onDataUpdate'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <JsEditor key='ods' data={view} field={'onDragStart'} title={'onDragStart'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <JsEditor key='odw' data={view} field={'whileDragging'} title={'whileDragging'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <JsEditor key='ode' data={view} field={'onDragEnd'} title={'onDragEnd'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <JsEditor key='ors' data={view} field={'onResizeStart'} title={'onResizeStart'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <JsEditor key='orw' data={view} field={'whileResizing'} title={'whileResizing'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <JsEditor key='ore' data={view} field={'onResizeEnd'} title={'onResizeEnd'} initialExpand={initialExpand} readonly={readOnly}/>\r\n        <div className={'d-flex mx-auto'} style={{marginTop: '14px'}}>\r\n            <h2>Custom Events</h2>\r\n            <CommandBar className={'ms-auto'} style={{paddingTop: '12px'}}>\r\n                <Btn icon={'add'} action={addEvent}  tip={'New event'}/>\r\n            </CommandBar>\r\n        </div>\r\n\r\n        {Object.keys(dview.events).map((k) => {\r\n            let val = dview.events[k];\r\n            if (!val) return;\r\n            return <>\r\n            <JsEditor\r\n            data={view} key={k/* if val does not update, concatenate it to the key (k+val)*/}\r\n            readonly={readOnly}\r\n            initialExpand={()=>true}\r\n            title={<input defaultValue={k} disabled={readOnly} onBlur={(e)=>{\r\n                let newname = e.target.value;\r\n                if (k === newname) return;\r\n                let newEvent: GObject = {};\r\n                newEvent[newname] = dview.events[k];\r\n                newEvent[k] = undefined;\r\n                view.events = newEvent;\r\n            }}/>}\r\n            jsxLabel={<CommandBar className={'ms-auto'} style={{paddingTop: '9px'}}>\r\n                <Btn icon={'delete'} tip={'Remove event'} action={() => {\r\n                    let newEvent: GObject = {};\r\n                    newEvent[k] = undefined; // this is how you trigger deletion with object -= action\r\n                    view.events = newEvent;\r\n                }}/>\r\n            </CommandBar>}\r\n\r\n            /* jsxLabel={<button className={'btn btn-danger my-auto ms-auto'} onClick={() => {\r\n                let newEvent: GObject = {};\r\n                newEvent[k] = undefined; // this is how you trigger deletion with object -= action\r\n                view.events = newEvent;\r\n            }}>\r\n                <i className={'p-1 bi bi-trash3-fill'} />\r\n            </button>}*/\r\n\r\n\r\n            getter={() => val}\r\n            setter={(js) => {\r\n                let newEvent: GObject = {};\r\n                newEvent[k] = js;\r\n                view.events = newEvent;\r\n            }}\r\n        /></>})}\r\n        <div className={'p-4'}></div>\r\n    </section>);\r\n}\r\n\r\ninterface OwnProps {viewID: Pointer<DViewElement, 1, 1, LViewElement>, readonly: boolean}\r\ninterface StateProps {view: LViewElement}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const view = LViewElement.fromPointer(ownProps.viewID);\r\n    return {view};\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ViewEventsConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ViewEventsComponent);\r\n\r\nexport const ViewEvents = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <ViewEventsConnected {...{...props, children}} />;\r\n}\r\nexport default ViewEvents;\r\n"],"mappings":"AAAA,yBAEA,MAAO,CAAAA,KAAK,KAAiE,OAAO,CACpF,OAAuCC,YAAY,CAAqBC,CAAC,KAAO,oBAAoB,CACpG,OAAQC,OAAO,KAAO,aAAa,CACnC,OAAQC,QAAQ,KAAO,iBAAiB,CAExC;AAEA,OAASC,UAAU,CAAEC,GAAG,KAAa,gCAAgC,CAAC,OAAAC,IAAA,IAAAC,KAAA,gCAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEtE,QAAS,CAAAC,mBAAmBA,CAACC,KAAe,CAAE,CAC1C,KAAM,CAAAC,IAAI,CAAGD,KAAK,CAACC,IAAI,CACvB,KAAM,CAAAC,KAAK,CAAGF,KAAK,CAACC,IAAI,CAACE,KAAK,CAC9B,KAAM,CAAAC,QAAQ,CAAGJ,KAAK,CAACK,QAAQ,CAE/B,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAChB,GAAI,CAAAC,SAAS,CAAG,cAAc,CAC9BA,SAAS,CAAGnB,CAAC,CAACoB,oBAAoB,CAACD,SAAS,CAAE,KAAK,CAAE,KAAK,CAAGE,CAAC,EAAIA,CAAC,GAAI,CAAAP,KAAK,CAACQ,MAAM,CAAC,CACpF,GAAI,CAAAC,QAAiB,CAAG,CAAC,CAAC,CAC1BA,QAAQ,CAACJ,SAAS,CAAC,CAAG,+GAA+G,CACrIN,IAAI,CAACS,MAAM,CAAGC,QAAQ,CAC1B,CAEA,GAAI,CAAAC,aAAa,CAAGA,CAACC,CAAM,CAAEC,KAAU,GAAG,CAAC,CAAED,CAAC,CAASC,KAAK,CAAW,CACvE,mBAAOpB,KAAA,YAASqB,SAAS,CAAE,gBAAiB,CAAAC,QAAA,eACxCtB,KAAA,OAAIqB,SAAS,CAAE,MAAO,CAAAC,QAAA,EAAC,QAAM,CAACf,IAAI,CAACgB,IAAI,EAAK,CAAC,cAC7CrB,IAAA,OAAAoB,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBpB,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,cAAe,CAACK,KAAK,CAAE,cAAe,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAAjH,KAAkH,CAAC,cACjIR,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,aAAc,CAACK,KAAK,CAAE,aAAc,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAA/G,KAAgH,CAAC,cAC/HR,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,eAAgB,CAACK,KAAK,CAAE,eAAgB,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAAnH,KAAoH,CAAC,cACnIR,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,WAAY,CAACK,KAAK,CAAE,WAAY,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAA3G,KAA4G,CAAC,cAC3HR,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,eAAgB,CAACK,KAAK,CAAE,eAAgB,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAAnH,KAAoH,CAAC,cACnIR,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,eAAgB,CAACK,KAAK,CAAE,eAAgB,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAAnH,KAAoH,CAAC,cACnIR,IAAA,CAACN,QAAQ,EAAW4B,IAAI,CAAEjB,IAAK,CAACa,KAAK,CAAE,aAAc,CAACK,KAAK,CAAE,aAAc,CAACP,aAAa,CAAEA,aAAc,CAACP,QAAQ,CAAED,QAAS,EAA/G,KAAgH,CAAC,cAC/HV,KAAA,QAAKqB,SAAS,CAAE,gBAAiB,CAACK,KAAK,CAAE,CAACC,SAAS,CAAE,MAAM,CAAE,CAAAL,QAAA,eACzDpB,IAAA,OAAAoB,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBpB,IAAA,CAACL,UAAU,EAACwB,SAAS,CAAE,SAAU,CAACK,KAAK,CAAE,CAACE,UAAU,CAAE,MAAM,CAAE,CAAAN,QAAA,cAC1DpB,IAAA,CAACJ,GAAG,EAAC+B,IAAI,CAAE,KAAM,CAACC,MAAM,CAAElB,QAAS,CAAEmB,GAAG,CAAE,WAAY,CAAC,CAAC,CAChD,CAAC,EACZ,CAAC,CAELC,MAAM,CAACC,IAAI,CAACzB,KAAK,CAACQ,MAAM,CAAC,CAACkB,GAAG,CAAEC,CAAC,EAAK,CAClC,GAAI,CAAAC,GAAG,CAAG5B,KAAK,CAACQ,MAAM,CAACmB,CAAC,CAAC,CACzB,GAAI,CAACC,GAAG,CAAE,OACV,mBAAOlC,IAAA,CAAAE,SAAA,EAAAkB,QAAA,cACPpB,IAAA,CAACN,QAAQ,EACT4B,IAAI,CAAEjB,IAAK,CACXI,QAAQ,CAAED,QAAS,CACnBQ,aAAa,CAAEA,CAAA,GAAI,IAAK,CACxBO,KAAK,cAAEvB,IAAA,UAAOmC,YAAY,CAAEF,CAAE,CAACG,QAAQ,CAAE5B,QAAS,CAAC6B,MAAM,CAAGC,CAAC,EAAG,CAC5D,GAAI,CAAAC,OAAO,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAC5B,GAAIR,CAAC,GAAKM,OAAO,CAAE,OACnB,GAAI,CAAAG,QAAiB,CAAG,CAAC,CAAC,CAC1BA,QAAQ,CAACH,OAAO,CAAC,CAAGjC,KAAK,CAACQ,MAAM,CAACmB,CAAC,CAAC,CACnCS,QAAQ,CAACT,CAAC,CAAC,CAAGU,SAAS,CACvBtC,IAAI,CAACS,MAAM,CAAG4B,QAAQ,CAC1B,CAAE,CAAC,CAAE,CACLE,QAAQ,cAAE5C,IAAA,CAACL,UAAU,EAACwB,SAAS,CAAE,SAAU,CAACK,KAAK,CAAE,CAACE,UAAU,CAAE,KAAK,CAAE,CAAAN,QAAA,cACnEpB,IAAA,CAACJ,GAAG,EAAC+B,IAAI,CAAE,QAAS,CAACE,GAAG,CAAE,cAAe,CAACD,MAAM,CAAEA,CAAA,GAAM,CACpD,GAAI,CAAAc,QAAiB,CAAG,CAAC,CAAC,CAC1BA,QAAQ,CAACT,CAAC,CAAC,CAAGU,SAAS,CAAE;AACzBtC,IAAI,CAACS,MAAM,CAAG4B,QAAQ,CAC1B,CAAE,CAAC,CAAC,CACI,CAEZ;AACZ;AACA;AACA;AACA;AACA;AACA,wBANY,CASAG,MAAM,CAAEA,CAAA,GAAMX,GAAI,CAClBY,MAAM,CAAGC,EAAE,EAAK,CACZ,GAAI,CAAAL,QAAiB,CAAG,CAAC,CAAC,CAC1BA,QAAQ,CAACT,CAAC,CAAC,CAAGc,EAAE,CAChB1C,IAAI,CAACS,MAAM,CAAG4B,QAAQ,CAC1B,CAAE,EAjCeT,CAAC,8DAkCrB,CAAC,CAAE,CAAC,EAAC,CAAC,cACPjC,IAAA,QAAKmB,SAAS,CAAE,KAAM,CAAM,CAAC,EACxB,CAAC,CACd,CAQA,QAAS,CAAA6B,eAAeA,CAACC,KAAa,CAAEC,QAAkB,CAAc,CACpE,KAAM,CAAA7C,IAAI,CAAGd,YAAY,CAAC4D,WAAW,CAACD,QAAQ,CAACE,MAAM,CAAC,CACtD,MAAO,CAAC/C,IAAI,CAAC,CACjB,CAEA,QAAS,CAAAgD,kBAAkBA,CAACC,QAAuB,CAAiB,CAChE,KAAM,CAAAC,GAAkB,CAAG,CAAC,CAAC,CAC7B,MAAO,CAAAA,GAAG,CACd,CAGA,MAAO,MAAM,CAAAC,mBAAmB,CAAG/D,OAAO,CACtCuD,eAAe,CACfK,kBACJ,CAAC,CAAClD,mBAAmB,CAAC,CAEtB,MAAO,MAAM,CAAAsD,UAAU,CAAG,QAAAA,CAACrD,KAAe,CAAgE,IAA9D,CAAAgB,QAAsC,CAAAsC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAf,SAAA,CAAAe,SAAA,IAAG,EAAE,CACnF,mBAAO1D,IAAA,CAACwD,mBAAmB,EAAM,GAAGpD,KAAK,CAAEgB,QAAQ,CAAI,CAAC,CAC5D,CAAC,CACD,cAAe,CAAAqC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}