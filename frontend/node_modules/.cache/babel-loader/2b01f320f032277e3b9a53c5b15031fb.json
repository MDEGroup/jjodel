{"ast":null,"code":"import Api from'../../data/api';import Storage from'../../data/storage';import{DUser,U}from'../../joiner';class AuthApi{static async login(email,password){Storage.reset();Storage.write('offline','false');return await Api.post(\"\".concat(Api.persistance,\"/auth/login\"),{email,password});}static async register(name,surname,country,affiliation,newsLetter,nickname,email,password){Storage.reset();Storage.write('offline','false');return await Api.post(\"\".concat(Api.persistance,\"/auth/register\"),{name,surname,country,affiliation,newsLetter,nickname,email,password});}static async logout(){if(!U.isOffline())await Api.delete(\"\".concat(Api.persistance,\"/auth/logout\"));Storage.reset();U.refresh();}static offline(){Storage.reset();Storage.write('offline','true');const user=DUser.new('Offline','User','Unknown','Unknown','Unknown',false,'Unknown','Unknown',\"Pointer\".concat(Date.now(),\"_OfflineUser\"));Storage.write('user',user);}}export{AuthApi};","map":{"version":3,"names":["Api","Storage","DUser","U","AuthApi","login","email","password","reset","write","post","concat","persistance","register","name","surname","country","affiliation","newsLetter","nickname","logout","isOffline","delete","refresh","offline","user","new","Date","now"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/api/persistance/auth.ts"],"sourcesContent":["import Api, {Response} from '../../data/api';\r\nimport Storage from '../../data/storage';\r\nimport {DUser, U} from '../../joiner';\r\n\r\nclass AuthApi {\r\n    static async login(email: string, password: string): Promise<Response> {\r\n        Storage.reset(); Storage.write('offline', 'false');\r\n        return await Api.post(`${Api.persistance}/auth/login`, {email, password});\r\n    }\r\n    static async register(name: string, surname: string, country: string, affiliation: string, newsLetter: boolean, nickname: string, email: string, password: string): Promise<Response> {\r\n        Storage.reset(); Storage.write('offline', 'false');\r\n        return await Api.post(`${Api.persistance}/auth/register`, {name, surname, country, affiliation, newsLetter, nickname, email, password});\r\n    }\r\n    static async logout(): Promise<void> {\r\n        if(!U.isOffline()) await Api.delete(`${Api.persistance}/auth/logout`);\r\n        Storage.reset();\r\n        U.refresh();\r\n    }\r\n    static offline(): void {\r\n        Storage.reset(); Storage.write('offline', 'true');\r\n        const user = DUser.new('Offline', 'User', 'Unknown', 'Unknown', 'Unknown', false, 'Unknown', 'Unknown', `Pointer${Date.now()}_OfflineUser`);\r\n        Storage.write('user', user);\r\n    }\r\n}\r\n\r\nexport {AuthApi};\r\n"],"mappings":"AAAA,MAAO,CAAAA,GAAG,KAAkB,gBAAgB,CAC5C,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,OAAQC,KAAK,CAAEC,CAAC,KAAO,cAAc,CAErC,KAAM,CAAAC,OAAQ,CACV,YAAa,CAAAC,KAAKA,CAACC,KAAa,CAAEC,QAAgB,CAAqB,CACnEN,OAAO,CAACO,KAAK,CAAC,CAAC,CAAEP,OAAO,CAACQ,KAAK,CAAC,SAAS,CAAE,OAAO,CAAC,CAClD,MAAO,MAAM,CAAAT,GAAG,CAACU,IAAI,IAAAC,MAAA,CAAIX,GAAG,CAACY,WAAW,gBAAe,CAACN,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAC7E,CACA,YAAa,CAAAM,QAAQA,CAACC,IAAY,CAAEC,OAAe,CAAEC,OAAe,CAAEC,WAAmB,CAAEC,UAAmB,CAAEC,QAAgB,CAAEb,KAAa,CAAEC,QAAgB,CAAqB,CAClLN,OAAO,CAACO,KAAK,CAAC,CAAC,CAAEP,OAAO,CAACQ,KAAK,CAAC,SAAS,CAAE,OAAO,CAAC,CAClD,MAAO,MAAM,CAAAT,GAAG,CAACU,IAAI,IAAAC,MAAA,CAAIX,GAAG,CAACY,WAAW,mBAAkB,CAACE,IAAI,CAAEC,OAAO,CAAEC,OAAO,CAAEC,WAAW,CAAEC,UAAU,CAAEC,QAAQ,CAAEb,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAC3I,CACA,YAAa,CAAAa,MAAMA,CAAA,CAAkB,CACjC,GAAG,CAACjB,CAAC,CAACkB,SAAS,CAAC,CAAC,CAAE,KAAM,CAAArB,GAAG,CAACsB,MAAM,IAAAX,MAAA,CAAIX,GAAG,CAACY,WAAW,gBAAc,CAAC,CACrEX,OAAO,CAACO,KAAK,CAAC,CAAC,CACfL,CAAC,CAACoB,OAAO,CAAC,CAAC,CACf,CACA,MAAO,CAAAC,OAAOA,CAAA,CAAS,CACnBvB,OAAO,CAACO,KAAK,CAAC,CAAC,CAAEP,OAAO,CAACQ,KAAK,CAAC,SAAS,CAAE,MAAM,CAAC,CACjD,KAAM,CAAAgB,IAAI,CAAGvB,KAAK,CAACwB,GAAG,CAAC,SAAS,CAAE,MAAM,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,KAAK,CAAE,SAAS,CAAE,SAAS,WAAAf,MAAA,CAAYgB,IAAI,CAACC,GAAG,CAAC,CAAC,gBAAc,CAAC,CAC3I3B,OAAO,CAACQ,KAAK,CAAC,MAAM,CAAEgB,IAAI,CAAC,CAC/B,CACJ,CAEA,OAAQrB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}