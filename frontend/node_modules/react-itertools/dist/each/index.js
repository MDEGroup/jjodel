import { Children, isValidElement } from "react";
export function each(children, fn, options = {}) {
    const breadthFirst = options["visit"] === "breadthFirst";
    const maxDepth = options["maxDepth"] ?? -1;
    const queue = [];
    Children.forEach(children, (el) => queue.push([el, depth]));
    const scheduler = breadthFirst
        ? (el, depth) => queue.push([el, depth])
        : (el, depth) => queue.unshift([el, depth]);
    let current;
    let idx = 0;
    const depth = 0;
    while ((current = queue.shift())) {
        const [element, depth] = current;
        const stop = fn(element, idx++);
        if (stop) {
            return;
        }
        if (depth === maxDepth) {
            break;
        }
        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
        if (isValidElement(element) && element.props.children) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
            Children.forEach(element.props.children, (el) => scheduler(el, depth + 1));
        }
    }
}
