{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{connect}from'react-redux';import{LProject,Try,U}from'../joiner';import{Dashboard,Project}from'./components';import Storage from\"../data/storage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AllProjectsComponent(props){var projects=props.projects;var reader=new FileReader();reader.onload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _e$target;var content,project,_projects,filtered;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/* Import Project File */content=String((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.result);if(content){_context.next=3;break;}return _context.abrupt(\"return\");case 3:try{project=JSON.parse(content);_projects=Storage.read('projects')||[];filtered=_projects.filter(function(p){return p.id!==project.id;});filtered.push(project);Storage.write('projects',filtered);U.refresh();}catch(e){alert('Invalid File.');}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();var importProject=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var files,file;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:files=e.target.files||[];if(files.length){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:file=files[0];reader.readAsText(file);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function importProject(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(Dashboard,{active:'All',version:props.version,children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:'ms-2 p-1 bg-primary w-25 rounded me-auto',children:[/*#__PURE__*/_jsx(\"b\",{className:'d-block text-center text-gray',children:\"Do you want to import a project?\"}),/*#__PURE__*/_jsx(\"input\",{className:'form-control w-100',type:'file',onChange:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return importProject(e);case 2:return _context3.abrupt(\"return\",_context3.sent);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}()})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:projects.length>0?'flex':'none',overflow:'scroll'},className:'flex-wrap',children:projects.map(function(p){return/*#__PURE__*/_jsx(Project,{data:p},p.id);})})]})})});}function mapStateToProps(state,ownProps){var ret={};ret.projects=LProject.fromArr(state.projects);ret.version=state.version;return ret;}function mapDispatchToProps(dispatch){var ret={};return ret;}var AllProjectsConnected=connect(mapStateToProps,mapDispatchToProps)(AllProjectsComponent);var AllProjectsPage=function AllProjectsPage(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(AllProjectsConnected,_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})));};export{AllProjectsPage};","map":{"version":3,"names":["React","connect","LProject","Try","U","Dashboard","Project","Storage","jsx","_jsx","jsxs","_jsxs","AllProjectsComponent","props","projects","reader","FileReader","onload","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","_e$target","content","project","_projects","filtered","wrap","_callee$","_context","prev","next","String","target","result","abrupt","JSON","parse","read","filter","p","id","push","write","refresh","alert","stop","_x","apply","arguments","importProject","_ref2","_callee2","files","file","_callee2$","_context2","length","readAsText","_x2","children","active","version","className","type","onChange","_ref3","_callee3","_callee3$","_context3","sent","_x3","style","display","overflow","map","data","mapStateToProps","state","ownProps","ret","fromArr","mapDispatchToProps","dispatch","AllProjectsConnected","AllProjectsPage","undefined","_objectSpread"],"sources":["C:/d/Programming/web/jodel-mde/src/pages/AllProjects.tsx"],"sourcesContent":["import React, {ChangeEvent, Component, Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {DProject, DState, LProject, Try, U} from '../joiner';\r\nimport {FakeStateProps} from '../joiner/types';\r\nimport {Dashboard, Project} from './components';\r\nimport Storage from \"../data/storage\";\r\n\r\n\r\nfunction AllProjectsComponent(props: AllProps): JSX.Element {\r\n    const {projects} = props;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = async e => {\r\n        /* Import Project File */\r\n        const content = String(e.target?.result);\r\n        if(!content) return;\r\n        try {\r\n            const project = JSON.parse(content) as DProject;\r\n            const projects = Storage.read<DProject[]>('projects') || [];\r\n            const filtered = projects.filter(p => p.id !== project.id);\r\n            filtered.push(project);\r\n            Storage.write('projects', filtered);\r\n            U.refresh();\r\n        } catch (e) {alert('Invalid File.')}\r\n    }\r\n    const importProject = async(e: ChangeEvent<HTMLInputElement>) => {\r\n        const files = e.target.files || [];\r\n        if(!files.length) return;\r\n        const file = files[0];\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    return(<Try>\r\n        <Dashboard active={'All'} version={props.version}>\r\n            <section>\r\n                <div className={'ms-2 p-1 bg-primary w-25 rounded me-auto'}>\r\n                    <b className={'d-block text-center text-gray'}>Do you want to import a project?</b>\r\n                    <input className={'form-control w-100'} type={'file'} onChange={async e => await importProject(e)} />\r\n                </div>\r\n                <div style={{display: (projects.length > 0) ? 'flex' : 'none', overflow: 'scroll'}} className={'flex-wrap'}>\r\n                    {projects.map(p => <Project key={p.id} data={p} />)}\r\n                </div>\r\n            </section>\r\n        </Dashboard>\r\n    </Try>);\r\n}\r\n\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n    projects: LProject[];\r\n    version: DState[\"version\"];\r\n}\r\ninterface DispatchProps {}\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    ret.projects = LProject.fromArr(state.projects);\r\n    ret.version = state.version;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\nconst AllProjectsConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(AllProjectsComponent);\r\n\r\nconst AllProjectsPage = (props: OwnProps, children: (string | Component)[] = []): ReactElement => {\r\n    return <AllProjectsConnected {...{...props, children}} />;\r\n}\r\n\r\nexport {AllProjectsPage};\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}