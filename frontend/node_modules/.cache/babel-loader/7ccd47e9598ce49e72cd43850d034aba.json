{"ast":null,"code":"import React from\"react\";import{connect}from\"react-redux\";import{Try}from\"../../../joiner\";import{DGraph,LGraph,LModel,SetRootFieldAction}from\"../../../joiner\";import{DefaultNode}from\"../../../joiner/components\";import ToolBar from\"../../toolbar/ToolBar\";import ContextMenu from\"../../contextMenu/ContextMenu\";import{MetricsPanel}from\"../../metrics/Metrics\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MetamodelTabComponent(props){const model=props.model;const graph=props.graph;const isEdgePending=props.isEdgePending;if(!model)return/*#__PURE__*/_jsx(_Fragment,{children:\"closed tab\"});if(!graph){DGraph.new(0,model.id);return/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100%\",display:\"flex\"},children:/*#__PURE__*/_jsx(\"span\",{style:{margin:\"auto\"},children:\"Building the Graph...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:'w-100 h-100',children:[/*#__PURE__*/_jsx(MetricsPanel,{data:model}),/*#__PURE__*/_jsx(ContextMenu,{}),isEdgePending.source&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:15,right:15,zIndex:999},className:'w-fit bg-white rounded border p-2',children:[/*#__PURE__*/_jsx(\"label\",{className:'d-block text-center',children:\"Pending Edge...\"}),/*#__PURE__*/_jsx(\"label\",{tabIndex:-1,onClick:e=>SetRootFieldAction.new('isEdgePending',{user:'',source:''}),className:'cursor-pointer text-decoration-none d-block text-danger text-center',children:\"close\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:'d-flex h-100',children:[/*#__PURE__*/_jsx(ToolBar,{model:model.id,isMetamodel:model.isMetamodel}),/*#__PURE__*/_jsx(Try,{children:/*#__PURE__*/_jsx(\"div\",{className:\"GraphContainer h-100 w-100\",style:{position:\"relative\"},children:graph&&/*#__PURE__*/_jsx(DefaultNode,{data:model,nodeid:graph.id,graphid:graph.id})||/*#__PURE__*/_jsx(\"div\",{children:\"Error: missing DGraph prop\"})})})]})]});}function mapStateToProps(state,ownProps){const ret={};ret.model=LModel.fromPointer(ownProps.modelid);const graphs=DGraph.fromPointer(state.graphs);const pointers=graphs.filter(graph=>{var _ret$model;return graph.model===((_ret$model=ret.model)===null||_ret$model===void 0?void 0:_ret$model.id);});if(pointers.length>0)ret.graph=LGraph.fromPointer(pointers[0].id);ret.isEdgePending=state.isEdgePending;return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const MetamodelTabConnected=connect(mapStateToProps,mapDispatchToProps)(MetamodelTabComponent);export const MetamodelTab=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(MetamodelTabConnected,{...props,children});};export default MetamodelTab;","map":{"version":3,"names":["React","connect","Try","DGraph","LGraph","LModel","SetRootFieldAction","DefaultNode","ToolBar","ContextMenu","MetricsPanel","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","MetamodelTabComponent","props","model","graph","isEdgePending","children","new","id","style","width","height","display","margin","className","data","source","position","top","right","zIndex","tabIndex","onClick","e","user","isMetamodel","nodeid","graphid","mapStateToProps","state","ownProps","ret","fromPointer","modelid","graphs","pointers","filter","_ret$model","length","mapDispatchToProps","dispatch","MetamodelTabConnected","MetamodelTab","arguments","undefined"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/abstract/tabs/MetamodelTab.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {DModel, Pointer, Try} from \"../../../joiner\";\r\nimport {\r\n    DState,\r\n    CreateElementAction,\r\n    DGraph,\r\n    LGraph,\r\n    LModel,\r\n    Edge,\r\n    DUser,\r\n    DClass,\r\n    SetRootFieldAction\r\n} from \"../../../joiner\";\r\nimport {DefaultNode} from \"../../../joiner/components\";\r\nimport ToolBar from \"../../toolbar/ToolBar\";\r\nimport ContextMenu from \"../../contextMenu/ContextMenu\";\r\nimport { MetricsPanel } from \"../../metrics/Metrics\";\r\n\r\n\r\nfunction MetamodelTabComponent(props: AllProps) {\r\n    const model = props.model;\r\n    const graph = props.graph;\r\n    const isEdgePending = props.isEdgePending;\r\n\r\n    if (!model) return(<>closed tab</>);\r\n    if (!graph) {\r\n        DGraph.new(0, model.id);\r\n        return(<div style={{width: \"100%\", height: \"100%\", display: \"flex\"}}>\r\n            <span style={{margin: \"auto\"}}>Building the Graph...</span>\r\n        </div>);\r\n    }\r\n\r\n    return(<div className={'w-100 h-100'}>\r\n        <MetricsPanel data={model}/>\r\n        <ContextMenu />\r\n        {/*<PendingEdge />*/}\r\n        {/* Temporary Edge Pending Manager */}\r\n        {isEdgePending.source && <div style={{position: 'absolute', top: 15, right: 15, zIndex: 999}}\r\n             className={'w-fit bg-white rounded border p-2'}>\r\n            <label className={'d-block text-center'}>Pending Edge...</label>\r\n            <label tabIndex={-1} onClick={e => SetRootFieldAction.new('isEdgePending', {user: '', source: ''})}\r\n               className={'cursor-pointer text-decoration-none d-block text-danger text-center'}>close</label>\r\n        </div>}\r\n\r\n        <div className={'d-flex h-100'}>\r\n            <ToolBar model={model.id} isMetamodel={model.isMetamodel} />\r\n            <Try>\r\n                <div className={\"GraphContainer h-100 w-100\"} style={{position:\"relative\"}}>\r\n                    {graph && <DefaultNode data={model} nodeid={graph.id} graphid={graph.id}/> || <div>Error: missing DGraph prop</div> }\r\n                </div>\r\n            </Try>\r\n        </div>\r\n    </div>);\r\n\r\n}\r\ninterface OwnProps { modelid: Pointer<DModel, 1, 1, LModel> }\r\ninterface StateProps {\r\n    model: LModel,\r\n    graph: LGraph,\r\n    isEdgePending: {user: Pointer<DUser>, source: Pointer<DClass>}\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    ret.model = LModel.fromPointer(ownProps.modelid);\r\n    const graphs: DGraph[] = DGraph.fromPointer(state.graphs);\r\n    const pointers = graphs.filter((graph) => { return graph.model === ret.model?.id });\r\n    if(pointers.length > 0) ret.graph = LGraph.fromPointer(pointers[0].id);\r\n    ret.isEdgePending = state.isEdgePending\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const MetamodelTabConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MetamodelTabComponent);\r\n\r\nexport const MetamodelTab = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <MetamodelTabConnected {...{...props, children}} />;\r\n}\r\nexport default MetamodelTab;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}