{"ast":null,"code":"import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _get from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";import _getPrototypeOf from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _inherits from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{DEdge,EdgeBendingMode,GraphElementComponent,GraphElementDispatchProps,GraphElementStatee,LPointerTargetable,RuntimeAccessibleClass,U,EdgeStateProps,DModelElement}from\"../../joiner\";import{jsx as _jsx}from\"react/jsx-runtime\";var groupingsize={};groupingsize[EdgeBendingMode.Line]=1;groupingsize[EdgeBendingMode.Bezier_quadratic]=2;groupingsize[EdgeBendingMode.Bezier_cubic]=3;// groupingsize[EdgeBendingMode.Bezier_quadratic_mirrored] = 1;\n// groupingsize[EdgeBendingMode.Bezier_cubic_mirrored] = 2;\ngroupingsize[EdgeBendingMode.Elliptical_arc]=2;// (1_coord), (rotation), (sweep    arc), (1_coord)\nvar superclassGraphElementComponent=RuntimeAccessibleClass.classes.GraphElementComponent;var superclassGraphElementComponentuntyped=RuntimeAccessibleClass.classes.GraphElementComponent;var ThisStatee=/*#__PURE__*/function(_GraphElementStatee){_inherits(ThisStatee,_GraphElementStatee);var _super=_createSuper(ThisStatee);function ThisStatee(){_classCallCheck(this,ThisStatee);return _super.apply(this,arguments);}return ThisStatee;}(GraphElementStatee);export var EdgeComponent=/*#__PURE__*/function(_superclassGraphEleme){_inherits(EdgeComponent,_superclassGraphEleme);var _super2=_createSuper(EdgeComponent);function EdgeComponent(props,context){_classCallCheck(this,EdgeComponent);return _super2.call(this,props,context);}/*\r\n    path(): string {\r\n        let coords = this.pathCoords();\r\n        let svgletter: EdgeBendingMode = (this.props.view.bendingMode || \"L\");\r\n        let strings: string[] = coords.map(gp => gp.x+\" \" + gp.y);\r\n        return \"M\"+strings.join(\" \" + svgletter); }\r\n\r\n    pathCoords(): GraphPoint[] {\r\n        const ret = this.props;\r\n        let svgletter: EdgeBendingMode = (ret).view.bendingMode;\r\n        if (!ret.node) return []; // \"node missing\"\r\n        let coords: GraphPoint[] = (ret.node.midnodes as { x:number, y:number }[] as GraphPoint[]) || [];\r\n        let grouping = groupingsize[svgletter];\r\n        console.log(\"edgeee\", {coords, svgletter, groupingsize, midnodes:ret.node.midnodes, mnraw: ret.node.midnodes.map(mn=>mn.__raw), ret});\r\n        let scoord: GraphPoint = ret.node.startPoint || new GraphPoint(10, 10);\r\n        let ecoord: GraphPoint = ret.node.endPoint || new GraphPoint(100, 100);\r\n        return [scoord, ...coords, ecoord]; }\r\n\r\n    pathSegments(): GraphPoint[][]{\r\n        return U.pairArrayElements(this.pathCoords(), true); }\r\n*/_createClass(EdgeComponent,[{key:\"render\",value:function render(){if(!this.props.node)return\"loading\";// set classes\nvar nodeType=\"Edge\";var classesoverride=[nodeType];// set classes end\nvar styleoverride={};return _get(_getPrototypeOf(EdgeComponent.prototype),\"render\",this).call(this,nodeType,styleoverride,classesoverride);}}]);return EdgeComponent;}(superclassGraphElementComponent);EdgeComponent.cname=\"EdgeComponent\";var DispatchProps=/*#__PURE__*/function(_GraphElementDispatch){_inherits(DispatchProps,_GraphElementDispatch);var _super3=_createSuper(DispatchProps);function DispatchProps(){_classCallCheck(this,DispatchProps);return _super3.apply(this,arguments);}return DispatchProps;}(GraphElementDispatchProps);function mapStateToProps(state,ownProps){var ret=new EdgeStateProps();if(!ownProps.data){var lstart=LPointerTargetable.from(ownProps.start);if(RuntimeAccessibleClass.extends(lstart.className,DModelElement.cname))ret.data=lstart;}ret=GraphElementComponent.mapStateToProps(state,ownProps,DEdge,ret);// superret.lastSelected = state._lastSelected ? LPointerTargetable.from(state._lastSelected.modelElement) : null;\nret.isEdgePending={user:LPointerTargetable.from(state.isEdgePending.user),source:LPointerTargetable.from(state.isEdgePending.source)};return ret;}function mapDispatchToProps(dispatch){var superret=GraphElementComponent.mapDispatchToProps(dispatch);var ret=new GraphElementDispatchProps();U.objectMergeInPlace(superret,ret);U.removeEmptyObjectKeys(superret);return superret;}export var EdgeConnected=connect(mapStateToProps,mapDispatchToProps)(EdgeComponent);export var Edge=function Edge(props){var children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(EdgeConnected,_objectSpread(_objectSpread({},_objectSpread(_objectSpread({},props),{},{children:children})),{},{isgraph:false,isvertex:true}));};EdgeComponent.cname=\"EdgeComponent\";EdgeConnected.cname=\"EdgeConnected\";Edge.cname=\"Edge\";","map":{"version":3,"names":["React","connect","DEdge","EdgeBendingMode","GraphElementComponent","GraphElementDispatchProps","GraphElementStatee","LPointerTargetable","RuntimeAccessibleClass","U","EdgeStateProps","DModelElement","jsx","_jsx","groupingsize","Line","Bezier_quadratic","Bezier_cubic","Elliptical_arc","superclassGraphElementComponent","classes","superclassGraphElementComponentuntyped","ThisStatee","_GraphElementStatee","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","EdgeComponent","_superclassGraphEleme","_super2","props","context","call","_createClass","key","value","render","node","nodeType","classesoverride","styleoverride","_get","_getPrototypeOf","prototype","cname","DispatchProps","_GraphElementDispatch","_super3","mapStateToProps","state","ownProps","ret","data","lstart","from","start","extends","className","isEdgePending","user","source","mapDispatchToProps","dispatch","superret","objectMergeInPlace","removeEmptyObjectKeys","EdgeConnected","Edge","children","length","undefined","_objectSpread","isgraph","isvertex"],"sources":["C:/d/Programming/web/jodel-mde/src/graph/damedges/damedge.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement, ReactNode} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    DEdge,\r\n    DGraph,\r\n    DGraphElement,\r\n    DGraphVertex, Dictionary,\r\n    DVoidVertex, EdgeBendingMode, GObject,\r\n    GraphElementComponent,\r\n    GraphElementDispatchProps,\r\n    GraphElementOwnProps,\r\n    GraphElementReduxStateProps,\r\n    GraphElementStatee, GraphPoint,\r\n    GraphSize,\r\n    DState,\r\n    LClass, LEdge, LGraphElement,\r\n    LModelElement,\r\n    LPointerTargetable,\r\n    LUser,\r\n    LVoidVertex, Overlap,\r\n    RuntimeAccessibleClass,\r\n    U,\r\n    EdgeOwnProps, EdgeStateProps,\r\n    LViewPoint, DModelElement, SetFieldAction\r\n} from \"../../joiner\";\r\n\r\nlet groupingsize: Dictionary<EdgeBendingMode, number> = {} as any;\r\ngroupingsize[EdgeBendingMode.Line] = 1;\r\ngroupingsize[EdgeBendingMode.Bezier_quadratic] = 2;\r\ngroupingsize[EdgeBendingMode.Bezier_cubic] = 3;\r\n// groupingsize[EdgeBendingMode.Bezier_quadratic_mirrored] = 1;\r\n// groupingsize[EdgeBendingMode.Bezier_cubic_mirrored] = 2;\r\ngroupingsize[EdgeBendingMode.Elliptical_arc] = 2; // (1_coord), (rotation), (sweep    arc), (1_coord)\r\n\r\nconst superclassGraphElementComponent: typeof GraphElementComponent = RuntimeAccessibleClass.classes.GraphElementComponent as any as typeof GraphElementComponent;\r\nconst superclassGraphElementComponentuntyped: any = RuntimeAccessibleClass.classes.GraphElementComponent as any;\r\nclass ThisStatee extends GraphElementStatee {}\r\n\r\nexport class EdgeComponent<AllProps extends AllPropss = AllPropss, ThisState extends ThisStatee = ThisStatee>\r\n    extends superclassGraphElementComponent<AllProps, ThisState> {\r\n    public static cname: string = \"EdgeComponent\";\r\n\r\n    constructor(props: AllProps, context: any) {\r\n        super(props, context);\r\n    }\r\n/*\r\n    path(): string {\r\n        let coords = this.pathCoords();\r\n        let svgletter: EdgeBendingMode = (this.props.view.bendingMode || \"L\");\r\n        let strings: string[] = coords.map(gp => gp.x+\" \" + gp.y);\r\n        return \"M\"+strings.join(\" \" + svgletter); }\r\n\r\n    pathCoords(): GraphPoint[] {\r\n        const ret = this.props;\r\n        let svgletter: EdgeBendingMode = (ret).view.bendingMode;\r\n        if (!ret.node) return []; // \"node missing\"\r\n        let coords: GraphPoint[] = (ret.node.midnodes as { x:number, y:number }[] as GraphPoint[]) || [];\r\n        let grouping = groupingsize[svgletter];\r\n        console.log(\"edgeee\", {coords, svgletter, groupingsize, midnodes:ret.node.midnodes, mnraw: ret.node.midnodes.map(mn=>mn.__raw), ret});\r\n        let scoord: GraphPoint = ret.node.startPoint || new GraphPoint(10, 10);\r\n        let ecoord: GraphPoint = ret.node.endPoint || new GraphPoint(100, 100);\r\n        return [scoord, ...coords, ecoord]; }\r\n\r\n    pathSegments(): GraphPoint[][]{\r\n        return U.pairArrayElements(this.pathCoords(), true); }\r\n*/\r\n    render(): ReactNode {\r\n        if (!this.props.node) return \"loading\";\r\n        // set classes\r\n        let nodeType = \"Edge\";\r\n        let classesoverride = [nodeType];\r\n        // set classes end\r\n        let styleoverride: React.CSSProperties = {}\r\n        return super.render(nodeType, styleoverride, classesoverride);\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nclass DispatchProps extends GraphElementDispatchProps {\r\n}\r\n\r\ntype AllPropss = Overlap<Overlap<EdgeOwnProps, EdgeStateProps>, DispatchProps>;\r\n\r\nfunction mapStateToProps(state: DState, ownProps: EdgeOwnProps): EdgeStateProps {\r\n    let ret: EdgeStateProps = new EdgeStateProps();\r\n    if (!ownProps.data) {\r\n        let lstart = LPointerTargetable.from(ownProps.start);\r\n        if (RuntimeAccessibleClass.extends(lstart.className, DModelElement.cname)) ret.data = lstart as any;\r\n    }\r\n    ret = GraphElementComponent.mapStateToProps(state, ownProps, DEdge, ret) as EdgeStateProps;\r\n    // superret.lastSelected = state._lastSelected ? LPointerTargetable.from(state._lastSelected.modelElement) : null;\r\n    ret.isEdgePending = {\r\n        user: LPointerTargetable.from(state.isEdgePending.user),\r\n        source: LPointerTargetable.from(state.isEdgePending.source)\r\n    };\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const superret: GraphElementDispatchProps = GraphElementComponent.mapDispatchToProps(dispatch);\r\n    const ret: GraphElementDispatchProps = new GraphElementDispatchProps();\r\n    U.objectMergeInPlace(superret, ret);\r\n    U.removeEmptyObjectKeys(superret);\r\n    return superret;\r\n}\r\n\r\n\r\nexport const EdgeConnected = connect<EdgeStateProps, DispatchProps, EdgeOwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(EdgeComponent as any);\r\n\r\nexport const Edge = (props: EdgeOwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <EdgeConnected {...{...props, children}} isgraph={false} isvertex={true} />;\r\n}\r\n\r\nEdgeComponent.cname = \"EdgeComponent\";\r\nEdgeConnected.cname = \"EdgeConnected\";\r\nEdge.cname = \"Edge\";\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}