{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\abstract\\\\tabs\\\\ModelTab.tsx\",\n  _this = this;\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { CreateElementAction, DGraph, LGraph, LModel } from \"../../../joiner\";\nimport { DefaultNode } from \"../../../joiner/components\";\nimport ToolBar from \"../../toolbar/ToolBar\";\nimport ContextMenu from \"../../contextMenu/ContextMenu\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PendingEdge(props) {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n}\n_c = PendingEdge;\nfunction ModelTabComponent(props) {\n  const model = props.model;\n  const graph = props.graph;\n  if (!model) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"closed tab\"\n  }, void 0, false);\n  if (!graph) {\n    CreateElementAction.new(DGraph.new(0, model.id));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          margin: \"auto\"\n        },\n        children: \"Building the Graph...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'w-100 h-100',\n    children: [/*#__PURE__*/_jsxDEV(ContextMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(PendingEdge, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'd-flex h-100',\n      children: [/*#__PURE__*/_jsxDEV(ToolBar, {\n        model: model.id,\n        isMetamodel: model.isMetamodel,\n        metamodelId: props.metamodelid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"GraphContainer h-100 w-100\",\n        style: {\n          position: \"relative\"\n        },\n        children: graph && /*#__PURE__*/_jsxDEV(DefaultNode, {\n          data: model,\n          nodeid: graph.id,\n          graphid: graph.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 27\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 12\n  }, this);\n}\n_c2 = ModelTabComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  ret.model = LModel.fromPointer(ownProps.modelid);\n  const graphs = DGraph.fromPointer(state.graphs);\n  const pointers = graphs.filter(graph => {\n    return graph.model === ownProps.modelid;\n  });\n  if (pointers.length > 0) ret.graph = LGraph.fromPointer(pointers[0].id);\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const ModelTabConnected = connect(mapStateToProps, mapDispatchToProps)(ModelTabComponent);\nexport const ModelTab = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(ModelTabConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 12\n  }, _this);\n};\n_c3 = ModelTab;\nexport default ModelTab;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"PendingEdge\");\n$RefreshReg$(_c2, \"ModelTabComponent\");\n$RefreshReg$(_c3, \"ModelTab\");","map":{"version":3,"names":["React","connect","CreateElementAction","DGraph","LGraph","LModel","DefaultNode","ToolBar","ContextMenu","Fragment","_Fragment","jsxDEV","_jsxDEV","PendingEdge","props","_c","ModelTabComponent","model","graph","children","new","id","style","width","height","display","margin","fileName","_jsxFileName","lineNumber","columnNumber","className","isMetamodel","metamodelId","metamodelid","position","data","nodeid","graphid","_c2","mapStateToProps","state","ownProps","ret","fromPointer","modelid","graphs","pointers","filter","length","mapDispatchToProps","dispatch","ModelTabConnected","ModelTab","arguments","undefined","_this","_c3","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/abstract/tabs/ModelTab.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport type {DModel, Pointer} from \"../../../joiner\";\r\nimport {CreateElementAction, DGraph, DModelElement, DState, LGraph, LModel, LModelElement} from \"../../../joiner\";\r\nimport {DefaultNode} from \"../../../joiner/components\";\r\nimport ToolBar from \"../../toolbar/ToolBar\";\r\nimport ContextMenu from \"../../contextMenu/ContextMenu\";\r\n\r\nfunction PendingEdge(props: any){ return <>{/* todo: <DamEdge start={store.getState().pendingEdge.start} end={} />*/}</>}\r\n\r\n\r\nfunction ModelTabComponent(props: AllProps) {\r\n    const model = props.model;\r\n    const graph = props.graph;\r\n\r\n    if (!model) return(<>closed tab</>);\r\n    if (!graph) {\r\n        CreateElementAction.new(DGraph.new(0, model.id));\r\n        return(<div style={{width: \"100%\", height: \"100%\", display: \"flex\"}}>\r\n            <span style={{margin: \"auto\"}}>Building the Graph...</span>\r\n        </div>);\r\n    }\r\n\r\n    return(<div className={'w-100 h-100'}>\r\n        <ContextMenu />\r\n        <PendingEdge />\r\n        <div className={'d-flex h-100'}>\r\n            <ToolBar model={model.id} isMetamodel={model.isMetamodel} metamodelId={props.metamodelid} />\r\n            <div className={\"GraphContainer h-100 w-100\"} style={{position:\"relative\"}}>\r\n                {graph && <DefaultNode data={model} nodeid={graph.id} graphid={graph.id} />}\r\n            </div>\r\n        </div>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n    modelid: Pointer<DModel, 1, 1, LModel>,\r\n    metamodelid?: Pointer<DModelElement, 1, 1, LModelElement>,\r\n}\r\ninterface StateProps { model: LModel, graph?: LGraph }\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as any;\r\n    ret.model = LModel.fromPointer(ownProps.modelid);\r\n    const graphs: DGraph[] = DGraph.fromPointer(state.graphs);\r\n    const pointers = graphs.filter((graph) => { return graph.model === ownProps.modelid });\r\n    if(pointers.length > 0) ret.graph = LGraph.fromPointer(pointers[0].id);\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const ModelTabConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ModelTabComponent);\r\n\r\nexport const ModelTab = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <ModelTabConnected {...{...props, children}} />;\r\n}\r\nexport default ModelTab;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}