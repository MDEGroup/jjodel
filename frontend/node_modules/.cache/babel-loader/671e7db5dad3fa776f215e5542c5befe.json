{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ForAllExpression = void 0;\nvar Expression_1 = require(\"../Expression\");\n/**\n * @oclSpecification\n * Many times a constraint is needed on all elements of a collection.\n * The forAll operation in OCL allows specifying a Boolean expression, which must hold for all objects in a collection.\n *\n * @oclExpression forAll(expr : oclExpression)\n */\nvar ForAllExpression = /** @class */function (_super) {\n  __extends(ForAllExpression, _super);\n  function ForAllExpression() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ForAllExpression.prototype.evaluate = function (visitor, localVariables) {\n    var _this = this;\n    var collection = this.getSource().evaluate(visitor);\n    if (collection instanceof Array) {\n      var iterators = this.getIterators();\n      var body_1 = this.getBody();\n      if (!iterators || iterators.length === 0) {\n        return false;\n      } else if (iterators.length === 1) {\n        return !collection.some(function (c) {\n          var _a;\n          return body_1.evaluate(visitor, (_a = {}, _a[_this.getIterators()[0]] = c, _a)) === false;\n        });\n      } else if (iterators.length === 2) {\n        var sourceLength = collection.length;\n        for (var i = 0; i < sourceLength; i++) {\n          var variables = {};\n          variables[iterators[0]] = collection[i];\n          for (var j = i + 1; j < sourceLength; j++) {\n            variables[iterators[1]] = collection[j];\n            var items = body_1.evaluate(visitor, __assign(__assign({}, localVariables), variables));\n            if (items === false) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }\n    } else {\n      return false;\n    }\n  };\n  return ForAllExpression;\n}(Expression_1.IteratorExpression);\nexports.ForAllExpression = ForAllExpression;","map":{"version":3,"names":["Expression_1","require","ForAllExpression","_super","__extends","prototype","evaluate","visitor","localVariables","_this","collection","getSource","Array","iterators","getIterators","body_1","getBody","length","some","c","_a","sourceLength","i","variables","j","items","__assign","IteratorExpression","exports"],"sources":["../../../../lib/components/expressions/collection/ForAllExpression.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAGA;;;;;;;AAOA,IAAAC,gBAAA,0BAAAC,MAAA;EAAsCC,SAAA,CAAAF,gBAAA,EAAAC,MAAA;EAAtC,SAAAD,iBAAA;;EAmCA;EAlCIA,gBAAA,CAAAG,SAAA,CAAAC,QAAQ,GAAR,UAASC,OAA4B,EAAEC,cAAoB;IAA3D,IAAAC,KAAA;IACI,IAAMC,UAAU,GAAG,IAAI,CAACC,SAAS,EAAE,CAC9BL,QAAQ,CAACC,OAAO,CAAC;IAEtB,IAAIG,UAAU,YAAYE,KAAK,EAAE;MAC7B,IAAMC,SAAS,GAAG,IAAI,CAACC,YAAY,EAAE;MACrC,IAAMC,MAAI,GAAG,IAAI,CAACC,OAAO,EAAE;MAE3B,IAAI,CAACH,SAAS,IAAIA,SAAS,CAACI,MAAM,KAAK,CAAC,EAAE;QACtC,OAAO,KAAK;OACf,MAAM,IAAIJ,SAAS,CAACI,MAAM,KAAK,CAAC,EAAE;QAC/B,OAAO,CAACP,UAAU,CAACQ,IAAI,CAAC,UAAAC,CAAC;;UACrB,OAAOJ,MAAI,CAACT,QAAQ,CAACC,OAAO,GAAAa,EAAA,OAAGA,EAAA,CAACX,KAAI,CAACK,YAAY,EAAE,CAAC,CAAC,CAAC,IAAGK,CAAC,EAAAC,EAAA,EAAE,KAAK,KAAK;QAC1E,CAAC,CAAC;OACL,MAAM,IAAIP,SAAS,CAACI,MAAM,KAAK,CAAC,EAAE;QAC/B,IAAMI,YAAY,GAAGX,UAAU,CAACO,MAAM;QACtC,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,YAAY,EAAEC,CAAC,EAAE,EAAE;UACnC,IAAMC,SAAS,GAAG,EAAE;UACpBA,SAAS,CAACV,SAAS,CAAC,CAAC,CAAC,CAAC,GAAGH,UAAU,CAACY,CAAC,CAAC;UACvC,KAAK,IAAIE,CAAC,GAAGF,CAAC,GAAG,CAAC,EAAEE,CAAC,GAAGH,YAAY,EAAEG,CAAC,EAAE,EAAE;YACvCD,SAAS,CAACV,SAAS,CAAC,CAAC,CAAC,CAAC,GAAGH,UAAU,CAACc,CAAC,CAAC;YACvC,IAAMC,KAAK,GAAGV,MAAI,CAACT,QAAQ,CAACC,OAAO,EAAAmB,QAAA,CAAAA,QAAA,KAAMlB,cAAc,GAAKe,SAAS,EAAE;YACvE,IAAIE,KAAK,KAAK,KAAK,EAAE;cACjB,OAAO,KAAK;;;;QAKxB,OAAO,IAAI;;KAElB,MAAM;MACH,OAAO,KAAK;;EAEpB,CAAC;EACL,OAAAvB,gBAAC;AAAD,CAAC,CAnCqCF,YAAA,CAAA2B,kBAAkB;AAA3CC,OAAA,CAAA1B,gBAAA,GAAAA,gBAAA"},"metadata":{},"sourceType":"script"}